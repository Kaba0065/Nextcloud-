/*! third party licenses: dist/vendor.LICENSE.txt */
var Se=Object.defineProperty;var Te=(e,s,n)=>s in e?Se(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n;var k=(e,s,n)=>(Te(e,typeof s!="symbol"?s+"":s,n),n),Ie=(e,s,n)=>{if(!s.has(e))throw TypeError("Cannot "+n)};var G=(e,s,n)=>{if(s.has(e))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(e):s.set(e,n)};var E=(e,s,n)=>(Ie(e,s,"access private method"),n);import{bW as Ne,F as de,cH as ze,ad as Re,aH as Le,H as De,e as Ee,j as Be,y as Pe,K as Oe,A as Ue,B as Me,N as Ve,c1 as ie,c2 as re}from"../core-common.mjs";import{V as qe}from"./vue-local-storage-CaOJhnWT.mjs";import{n as v,a5 as Ze}from"./icons-BxSPavMS.mjs";import"./index-Ca0QcE7e.mjs";import{v as S}from"./toast-7xJhDYMn-BrG8uCqw.mjs";import{r as T}from"./rebuild-navigation-D7USJIud.mjs";import{p as Qe}from"./index-Cc9T3mza.mjs";import{A as Ge}from"../settings-vue-settings-apps-users-management.mjs";import"./index-SPIKuWzR.mjs";import"./v-tooltip.esm-CZvp28yr.mjs";import"./_setToString-D2g9rVjk.mjs";import"./_Set-Cq4kerQ7.mjs";import"./_isIterateeCall-cIIcpi4J.mjs";import"./isPlainObject-wZJk5EJL.mjs";import"./preload-helper-3Yr03P9X.mjs";import"./vue-router.esm-uzqXSxbe.mjs";import"./vuex.esm-Bkiv_nyi.mjs";import"./style-3JoZM1Ml.mjs";import"./logger-DsZcYtCa.mjs";import"./index-BLIV22dB.mjs";import"./index-DgCiVkaQ.mjs";import"./index-Biv1VH4I.mjs";import"./accessibility-Bnwd_H0H.mjs";const He={name:"AppScore",props:["score"],computed:{appScore(){return Math.round(this.score*10)},scoreImage(){const e="rating/s"+this.appScore+".svg";return Ne("core",e)}}};var Fe=function(){var e=this,s=e._self._c;return s("img",{staticClass:"app-score-image",attrs:{src:e.scoreImage,alt:e.t("settings","Rating: {score}/10",{score:e.appScore})}})},je=[],Xe=v(He,Fe,je,!1,null,null,null,null);const ge=Xe.exports,j={computed:{appGroups(){return this.app.groups.map(e=>({id:e,name:e}))},installing(){return this.$store.getters.loading("install")},isLoading(){return this.app&&this.$store.getters.loading(this.app.id)},enableButtonText(){return this.app.needsDownload?t("settings","Download and enable"):t("settings","Enable")},forceEnableButtonText(){return this.app.needsDownload,t("settings","Allow untested app")},enableButtonTooltip(){return this.app.needsDownload?t("settings","The app will be downloaded from the App Store"):null},forceEnableButtonTooltip(){const e=t("settings","This app is not marked as compatible with your Nextcloud version. If you continue you will still be able to install the app. Note that the app might not work as expected.");return this.app.needsDownload?e+" "+t("settings","The app will be downloaded from the App Store"):e}},data(){return{groupCheckedAppsData:!1}},mounted(){this.app&&this.app.groups&&this.app.groups.length>0&&(this.groupCheckedAppsData=!0)},methods:{asyncFindGroup(e){return this.$store.dispatch("getGroups",{search:e,limit:5,offset:0})},isLimitedToGroups(e){return!!(this.app.groups.length||this.groupCheckedAppsData)},setGroupLimit(){this.groupCheckedAppsData||this.$store.dispatch("enableApp",{appId:this.app.id,groups:[]})},canLimitToGroups(e){return!(e.types&&e.types.includes("filesystem")||e.types.includes("prelogin")||e.types.includes("authentication")||e.types.includes("logging")||e.types.includes("prevent_group_restriction"))},addGroupLimitation(e){const s=e.pop(),n=this.app.groups.concat([]).concat([s.id]);this.$store.dispatch("enableApp",{appId:this.app.id,groups:n})},removeGroupLimitation(e){const s=this.app.groups.concat([]),n=s.indexOf(e.id);n>-1&&s.splice(n,1),this.$store.dispatch("enableApp",{appId:this.app.id,groups:s})},forceEnable(e){this.$store.dispatch("forceEnableApp",{appId:e,groups:[]}).then(s=>{T()}).catch(s=>{S(s)})},enable(e){this.$store.dispatch("enableApp",{appId:e,groups:[]}).then(s=>{T()}).catch(s=>{S(s)})},disable(e){this.$store.dispatch("disableApp",{appId:e}).then(s=>{T()}).catch(s=>{S(s)})},remove(e){this.$store.dispatch("uninstallApp",{appId:e}).then(s=>{T()}).catch(s=>{S(s)})},install(e){this.$store.dispatch("enableApp",{appId:e}).then(s=>{T()}).catch(s=>{S(s)})},update(e){this.$store.dispatch("updateApp",{appId:e}).then(s=>{T()}).catch(s=>{S(s)})}}},We={name:"SvgFilterMixin",data(){return{filterId:""}},computed:{filterUrl(){return"url(#".concat(this.filterId,")")}},mounted(){this.filterId="invertIconApps-"+Math.random().toString(36).substring(2)}},Ye=null,Je=null;var Ke=v(We,Ye,Je,!1,null,null,null,null);const et=Ke.exports,tt={name:"AppItem",components:{AppScore:ge,NcButton:de},mixins:[j,et],props:{app:{},category:{},listView:{type:Boolean,default:!0},useBundleView:{type:Boolean,default:!1},headers:{type:String,default:null}},data(){return{isSelected:!1,scrolled:!1,screenshotLoaded:!1}},computed:{hasRating(){return this.app.appstoreData&&this.app.appstoreData.ratingNumOverall>5},dataItemTag(){return this.listView?"td":"div"}},watch:{"$route.params.id"(e){this.isSelected=this.app.id===e}},mounted(){if(this.isSelected=this.app.id===this.$route.params.id,this.app.releases&&this.app.screenshot){const e=new Image;e.onload=s=>{this.screenshotLoaded=!0},e.src=this.app.screenshot}},watchers:{},methods:{prefix(e,s){return e+"_"+s},getDataItemHeaders(e){return this.useBundleView?[this.headers,e].join(" "):null}}};var st=function(){var e=this,s=e._self._c;return s(e.listView?"tr":"li",{tag:"component",staticClass:"section",class:{selected:e.isSelected}},[s(e.dataItemTag,{tag:"component",staticClass:"app-image app-image-icon",attrs:{headers:e.getDataItemHeaders("app-table-col-icon")}},[e.listView&&!e.app.preview||!e.listView&&!e.screenshotLoaded?s("div",{staticClass:"icon-settings-dark"}):e.listView&&e.app.preview?s("svg",{attrs:{width:"32",height:"32",viewBox:"0 0 32 32"}},[s("image",{staticClass:"app-icon",attrs:{x:"0",y:"0",width:"32",height:"32",preserveAspectRatio:"xMinYMin meet","xlink:href":e.app.preview}})]):e._e(),!e.listView&&e.app.screenshot&&e.screenshotLoaded?s("img",{attrs:{src:e.app.screenshot,alt:""}}):e._e()]),s(e.dataItemTag,{tag:"component",staticClass:"app-name",attrs:{headers:e.getDataItemHeaders("app-table-col-name")}},[s("router-link",{staticClass:"app-name--link",attrs:{to:{name:"apps-details",params:{category:e.category,id:e.app.id}},"aria-label":e.t("settings","Show details for {appName} app",{appName:e.app.name})}},[e._v(" "+e._s(e.app.name)+" ")])],1),e.listView?e._e():s(e.dataItemTag,{tag:"component",staticClass:"app-summary",attrs:{headers:e.getDataItemHeaders("app-version")}},[e._v(" "+e._s(e.app.summary)+" ")]),e.listView?s(e.dataItemTag,{tag:"component",staticClass:"app-version",attrs:{headers:e.getDataItemHeaders("app-table-col-version")}},[e.app.version?s("span",[e._v(e._s(e.app.version))]):e.app.appstoreData.releases[0].version?s("span",[e._v(e._s(e.app.appstoreData.releases[0].version))]):e._e()]):e._e(),s(e.dataItemTag,{tag:"component",staticClass:"app-level",attrs:{headers:e.getDataItemHeaders("app-table-col-level")}},[e.app.level===300?s("span",{staticClass:"supported icon-checkmark-color",attrs:{title:e.t("settings","This app is supported via your current Nextcloud subscription."),"aria-label":e.t("settings","This app is supported via your current Nextcloud subscription.")}},[e._v(" "+e._s(e.t("settings","Supported")))]):e._e(),e.app.level===200?s("span",{staticClass:"official icon-checkmark",attrs:{title:e.t("settings","Featured apps are developed by and within the community. They offer central functionality and are ready for production use."),"aria-label":e.t("settings","Featured apps are developed by and within the community. They offer central functionality and are ready for production use.")}},[e._v(" "+e._s(e.t("settings","Featured")))]):e._e(),e.hasRating&&!e.listView?s("AppScore",{attrs:{score:e.app.score}}):e._e()],1),s(e.dataItemTag,{tag:"component",staticClass:"actions",attrs:{headers:e.getDataItemHeaders("app-table-col-actions")}},[e.app.error?s("div",{staticClass:"warning"},[e._v(" "+e._s(e.app.error)+" ")]):e._e(),e.isLoading?s("div",{staticClass:"icon icon-loading-small"}):e._e(),e.app.update?s("NcButton",{attrs:{type:"primary",disabled:e.installing||e.isLoading},on:{click:function(n){return n.stopPropagation(),e.update(e.app.id)}}},[e._v(" "+e._s(e.t("settings","Update to {update}",{update:e.app.update}))+" ")]):e._e(),e.app.canUnInstall?s("NcButton",{staticClass:"uninstall",attrs:{type:"tertiary",disabled:e.installing||e.isLoading},on:{click:function(n){return n.stopPropagation(),e.remove(e.app.id)}}},[e._v(" "+e._s(e.t("settings","Remove"))+" ")]):e._e(),e.app.active?s("NcButton",{attrs:{disabled:e.installing||e.isLoading},on:{click:function(n){return n.stopPropagation(),e.disable(e.app.id)}}},[e._v(" "+e._s(e.t("settings","Disable"))+" ")]):e._e(),!e.app.active&&(e.app.canInstall||e.app.isCompatible)?s("NcButton",{attrs:{title:e.enableButtonTooltip,"aria-label":e.enableButtonTooltip,type:"primary",disabled:!e.app.canInstall||e.installing||e.isLoading},on:{click:function(n){return n.stopPropagation(),e.enable(e.app.id)}}},[e._v(" "+e._s(e.enableButtonText)+" ")]):e.app.active?e._e():s("NcButton",{attrs:{title:e.forceEnableButtonTooltip,"aria-label":e.forceEnableButtonTooltip,type:"secondary",disabled:e.installing||e.isLoading},on:{click:function(n){return n.stopPropagation(),e.forceEnable(e.app.id)}}},[e._v(" "+e._s(e.forceEnableButtonText)+" ")])],1)],1)},nt=[],at=v(tt,st,nt,!1,null,"97e90bf9",null,null);const it=at.exports,rt={name:"PrefixMixin",methods:{prefix(e,s){return e+"_"+s}}},ot=null,lt=null;var pt=v(rt,ot,lt,!1,null,null,null,null);const fe=pt.exports,ct={name:"AppList",components:{AppItem:it,NcButton:de},mixins:[fe],props:["category","app","search"],computed:{counter(){return this.apps.filter(e=>e.update).length},loading(){return this.$store.getters.loading("list")},hasPendingUpdate(){return this.apps.filter(e=>e.update).length>0},showUpdateAll(){return this.hasPendingUpdate&&this.useListView},apps(){const e=this.$store.getters.getAllApps.filter(s=>s.name.toLowerCase().search(this.search.toLowerCase())!==-1).sort(function(s,n){const a=""+(s.active?0:1)+(s.update?0:1)+s.name,o=""+(n.active?0:1)+(n.update?0:1)+n.name;return OC.Util.naturalSortCompare(a,o)});return this.category==="installed"?e.filter(s=>s.installed):this.category==="enabled"?e.filter(s=>s.active&&s.installed):this.category==="disabled"?e.filter(s=>!s.active&&s.installed):this.category==="app-bundles"?e.filter(s=>s.bundles):this.category==="updates"?e.filter(s=>s.update):this.category==="supported"?e.filter(s=>s.level===300):this.category==="featured"?e.filter(s=>s.level===200):e.filter(s=>s.appstore&&s.category!==void 0&&(s.category===this.category||s.category.indexOf(this.category)>-1))},bundles(){return this.$store.getters.getServerData.bundles.filter(e=>this.bundleApps(e.id).length>0)},bundleApps(){return function(e){return this.$store.getters.getAllApps.filter(s=>s.bundleIds!==void 0&&s.bundleIds.includes(e))}},searchApps(){return this.search===""?[]:this.$store.getters.getAllApps.filter(e=>e.name.toLowerCase().search(this.search.toLowerCase())!==-1?!this.apps.find(s=>s.id===e.id):!1)},useAppStoreView(){return!this.useListView&&!this.useBundleView},useListView(){return this.category==="installed"||this.category==="enabled"||this.category==="disabled"||this.category==="updates"||this.category==="featured"||this.category==="supported"},useBundleView(){return this.category==="app-bundles"},allBundlesEnabled(){return e=>this.bundleApps(e).filter(s=>!s.active).length===0},bundleToggleText(){return e=>this.allBundlesEnabled(e)?t("settings","Disable all"):t("settings","Download and enable all")}},methods:{toggleBundle(e){return this.allBundlesEnabled(e)?this.disableBundle(e):this.enableBundle(e)},enableBundle(e){const s=this.bundleApps(e).map(n=>n.id);this.$store.dispatch("enableApp",{appId:s,groups:[]}).catch(n=>{console.error(n),OC.Notification.show(n)})},disableBundle(e){const s=this.bundleApps(e).map(n=>n.id);this.$store.dispatch("disableApp",{appId:s,groups:[]}).catch(n=>{OC.Notification.show(n)})},updateAll(){const e=Qe(1);this.apps.filter(s=>s.update).map(s=>e(()=>this.$store.dispatch("updateApp",{appId:s.id})))}}};var ut=function(){var e=this,s=e._self._c;return s("div",{attrs:{id:"app-content-inner"}},[s("div",{staticClass:"apps-list",class:{installed:e.useBundleView||e.useListView,store:e.useAppStoreView},attrs:{id:"apps-list"}},[e.useListView?[e.showUpdateAll?s("div",{staticClass:"toolbar"},[e._v(" "+e._s(e.n("settings","%n app has an update available","%n apps have an update available",e.counter))+" "),e.showUpdateAll?s("NcButton",{attrs:{id:"app-list-update-all",type:"primary"},on:{click:e.updateAll}},[e._v(" "+e._s(e.n("settings","Update","Update all",e.counter))+" ")]):e._e()],1):e._e(),e.showUpdateAll?e._e():s("div",{staticClass:"toolbar"},[e._v(" "+e._s(e.t("settings","All apps are up-to-date."))+" ")]),s("transition-group",{staticClass:"apps-list-container",attrs:{name:"app-list",tag:"table"}},[s("tr",{key:"app-list-view-header",staticClass:"apps-header"},[s("th",{staticClass:"app-image"},[s("span",{staticClass:"hidden-visually"},[e._v(e._s(e.t("settings","Icon")))])]),s("th",{staticClass:"app-name"},[s("span",{staticClass:"hidden-visually"},[e._v(e._s(e.t("settings","Name")))])]),s("th",{staticClass:"app-version"},[s("span",{staticClass:"hidden-visually"},[e._v(e._s(e.t("settings","Version")))])]),s("th",{staticClass:"app-level"},[s("span",{staticClass:"hidden-visually"},[e._v(e._s(e.t("settings","Level")))])]),s("th",{staticClass:"actions"},[s("span",{staticClass:"hidden-visually"},[e._v(e._s(e.t("settings","Actions")))])])]),e._l(e.apps,function(n){return s("AppItem",{key:n.id,attrs:{app:n,category:e.category}})})],2)]:e._e(),e.useBundleView?s("table",{staticClass:"apps-list-container"},[s("tr",{key:"app-list-view-header",staticClass:"apps-header"},[s("th",{staticClass:"app-image",attrs:{id:"app-table-col-icon"}},[s("span",{staticClass:"hidden-visually"},[e._v(e._s(e.t("settings","Icon")))])]),s("th",{staticClass:"app-name",attrs:{id:"app-table-col-name"}},[s("span",{staticClass:"hidden-visually"},[e._v(e._s(e.t("settings","Name")))])]),s("th",{staticClass:"app-version",attrs:{id:"app-table-col-version"}},[s("span",{staticClass:"hidden-visually"},[e._v(e._s(e.t("settings","Version")))])]),s("th",{staticClass:"app-level",attrs:{id:"app-table-col-level"}},[s("span",{staticClass:"hidden-visually"},[e._v(e._s(e.t("settings","Level")))])]),s("th",{staticClass:"actions",attrs:{id:"app-table-col-actions"}},[s("span",{staticClass:"hidden-visually"},[e._v(e._s(e.t("settings","Actions")))])])]),e._l(e.bundles,function(n){return[s("tr",{key:n.id},[s("th",{attrs:{id:"app-table-rowgroup-".concat(n.id),colspan:"5",scope:"rowgroup"}},[s("div",{staticClass:"app-bundle-heading"},[s("span",{staticClass:"app-bundle-header"},[e._v(" "+e._s(n.name)+" ")]),s("NcButton",{attrs:{type:"secondary"},on:{click:function(a){return e.toggleBundle(n.id)}}},[e._v(" "+e._s(e.t("settings",e.bundleToggleText(n.id)))+" ")])],1)])]),e._l(e.bundleApps(n.id),function(a){return s("AppItem",{key:n.id+a.id,attrs:{"use-bundle-view":!0,headers:"app-table-rowgroup-".concat(n.id),app:a,category:e.category}})})]})],2):e._e(),e.useAppStoreView?s("ul",{staticClass:"apps-store-view"},e._l(e.apps,function(n){return s("AppItem",{key:n.id,attrs:{app:n,category:e.category,"list-view":!1}})}),1):e._e()],2),s("div",{staticClass:"apps-list installed",attrs:{id:"apps-list-search"}},[s("div",{staticClass:"apps-list-container"},[e.search!==""&&e.searchApps.length>0?[s("div",{staticClass:"section"},[s("div"),s("td",{attrs:{colspan:"5"}},[s("h2",[e._v(e._s(e.t("settings","Results from other categories")))])])]),e._l(e.searchApps,function(n){return s("AppItem",{key:n.id,attrs:{app:n,category:e.category}})})]:e._e()],2)]),e.search!==""&&!e.loading&&e.searchApps.length===0&&e.apps.length===0?s("div",{staticClass:"emptycontent emptycontent-search",attrs:{id:"apps-list-empty"}},[s("div",{staticClass:"icon-settings-dark",attrs:{id:"app-list-empty-icon"}}),s("h2",[e._v(e._s(e.t("settings","No apps found for your version")))])]):e._e(),s("div",{attrs:{id:"searchresults"}})])},ht=[],dt=v(ct,ut,ht,!1,null,"c446cd46",null,null);const gt=dt.exports;function X(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let C=X();function oe(e){C=e}const me=/[&<>"']/,ft=new RegExp(me.source,"g"),ke=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,mt=new RegExp(ke.source,"g"),kt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},le=e=>kt[e];function b(e,s){if(s){if(me.test(e))return e.replace(ft,le)}else if(ke.test(e))return e.replace(mt,le);return e}const bt=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function xt(e){return e.replace(bt,(s,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const yt=/(^|[^\[])\^/g;function f(e,s){let n=typeof e=="string"?e:e.source;s=s||"";const a={replace:(o,r)=>{let i=typeof r=="string"?r:r.source;return i=i.replace(yt,"$1"),n=n.replace(o,i),a},getRegex:()=>new RegExp(n,s)};return a}function pe(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const N={exec:()=>null};function ce(e,s){const n=e.replace(/\|/g,(r,i,l)=>{let p=!1,h=i;for(;--h>=0&&l[h]==="\\";)p=!p;return p?"|":" |"}),a=n.split(/ \|/);let o=0;if(a[0].trim()||a.shift(),a.length>0&&!a[a.length-1].trim()&&a.pop(),s)if(a.length>s)a.splice(s);else for(;a.length<s;)a.push("");for(;o<a.length;o++)a[o]=a[o].trim().replace(/\\\|/g,"|");return a}function B(e,s,n){const a=e.length;if(a===0)return"";let o=0;for(;o<a;){const r=e.charAt(a-o-1);if(r===s&&!n)o++;else if(r!==s&&n)o++;else break}return e.slice(0,a-o)}function wt(e,s){if(e.indexOf(s[1])===-1)return-1;let n=0;for(let a=0;a<e.length;a++)if(e[a]==="\\")a++;else if(e[a]===s[0])n++;else if(e[a]===s[1]&&(n--,n<0))return a;return-1}function ue(e,s,n,a){const o=s.href,r=s.title?b(s.title):null,i=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){a.state.inLink=!0;const l={type:"link",raw:n,href:o,title:r,text:i,tokens:a.inlineTokens(i)};return a.state.inLink=!1,l}return{type:"image",raw:n,href:o,title:r,text:b(i)}}function _t(e,s){const n=e.match(/^(\s+)(?:```)/);if(n===null)return s;const a=n[1];return s.split("\n").map(o=>{const r=o.match(/^\s+/);if(r===null)return o;const[i]=r;return i.length>=a.length?o.slice(a.length):o}).join("\n")}class O{constructor(s){k(this,"options");k(this,"rules");k(this,"lexer");this.options=s||C}space(s){const n=this.rules.block.newline.exec(s);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(s){const n=this.rules.block.code.exec(s);if(n){const a=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?a:B(a,"\n")}}}fences(s){const n=this.rules.block.fences.exec(s);if(n){const a=n[0],o=_t(a,n[3]||"");return{type:"code",raw:a,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:o}}}heading(s){const n=this.rules.block.heading.exec(s);if(n){let a=n[2].trim();if(/#$/.test(a)){const o=B(a,"#");(this.options.pedantic||!o||/ $/.test(o))&&(a=o.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:a,tokens:this.lexer.inline(a)}}}hr(s){const n=this.rules.block.hr.exec(s);if(n)return{type:"hr",raw:n[0]}}blockquote(s){const n=this.rules.block.blockquote.exec(s);if(n){const a=B(n[0].replace(/^ *>[ \t]?/gm,""),"\n"),o=this.lexer.state.top;this.lexer.state.top=!0;const r=this.lexer.blockTokens(a);return this.lexer.state.top=o,{type:"blockquote",raw:n[0],tokens:r,text:a}}}list(s){let n=this.rules.block.list.exec(s);if(n){let a=n[1].trim();const o=a.length>1,r={type:"list",raw:"",ordered:o,start:o?+a.slice(0,-1):"",loose:!1,items:[]};a=o?"\\d{1,9}\\".concat(a.slice(-1)):"\\".concat(a),this.options.pedantic&&(a=o?a:"[*+-]");const i=new RegExp("^( {0,3}".concat(a,")((?:[	 ][^\\n]*)?(?:\\n|$))"));let l="",p="",h=!1;for(;s;){let c=!1;if(!(n=i.exec(s))||this.rules.block.hr.test(s))break;l=n[0],s=s.substring(l.length);let d=n[2].split("\n",1)[0].replace(/^\t+/,Z=>" ".repeat(3*Z.length)),u=s.split("\n",1)[0],m=0;this.options.pedantic?(m=2,p=d.trimStart()):(m=n[2].search(/[^ ]/),m=m>4?1:m,p=d.slice(m),m+=n[1].length);let w=!1;if(!d&&/^ *$/.test(u)&&(l+=u+"\n",s=s.substring(u.length+1),c=!0),!c){const Z=new RegExp("^ {0,".concat(Math.min(3,m-1),"}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))")),se=new RegExp("^ {0,".concat(Math.min(3,m-1),"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)")),ne=new RegExp("^ {0,".concat(Math.min(3,m-1),"}(?:```|~~~)")),ae=new RegExp("^ {0,".concat(Math.min(3,m-1),"}#"));for(;s;){const Q=s.split("\n",1)[0];if(u=Q,this.options.pedantic&&(u=u.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),ne.test(u)||ae.test(u)||Z.test(u)||se.test(s))break;if(u.search(/[^ ]/)>=m||!u.trim())p+="\n"+u.slice(m);else{if(w||d.search(/[^ ]/)>=4||ne.test(d)||ae.test(d)||se.test(d))break;p+="\n"+u}!w&&!u.trim()&&(w=!0),l+=Q+"\n",s=s.substring(Q.length+1),d=u.slice(m)}}r.loose||(h?r.loose=!0:/\n *\n *$/.test(l)&&(h=!0));let _=null,A;this.options.gfm&&(_=/^\[[ xX]\] /.exec(p),_&&(A=_[0]!=="[ ] ",p=p.replace(/^\[[ xX]\] +/,""))),r.items.push({type:"list_item",raw:l,task:!!_,checked:A,loose:!1,text:p,tokens:[]}),r.raw+=l}r.items[r.items.length-1].raw=l.trimEnd(),r.items[r.items.length-1].text=p.trimEnd(),r.raw=r.raw.trimEnd();for(let c=0;c<r.items.length;c++)if(this.lexer.state.top=!1,r.items[c].tokens=this.lexer.blockTokens(r.items[c].text,[]),!r.loose){const d=r.items[c].tokens.filter(m=>m.type==="space"),u=d.length>0&&d.some(m=>/\n.*\n/.test(m.raw));r.loose=u}if(r.loose)for(let c=0;c<r.items.length;c++)r.items[c].loose=!0;return r}}html(s){const n=this.rules.block.html.exec(s);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(s){const n=this.rules.block.def.exec(s);if(n){const a=n[1].toLowerCase().replace(/\s+/g," "),o=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:a,raw:n[0],href:o,title:r}}}table(s){const n=this.rules.block.table.exec(s);if(!n||!/[:|]/.test(n[2]))return;const a=ce(n[1]),o=n[2].replace(/^\||\| *$/g,"").split("|"),r=n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split("\n"):[],i={type:"table",raw:n[0],header:[],align:[],rows:[]};if(a.length===o.length){for(const l of o)/^ *-+: *$/.test(l)?i.align.push("right"):/^ *:-+: *$/.test(l)?i.align.push("center"):/^ *:-+ *$/.test(l)?i.align.push("left"):i.align.push(null);for(const l of a)i.header.push({text:l,tokens:this.lexer.inline(l)});for(const l of r)i.rows.push(ce(l,i.header.length).map(p=>({text:p,tokens:this.lexer.inline(p)})));return i}}lheading(s){const n=this.rules.block.lheading.exec(s);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(s){const n=this.rules.block.paragraph.exec(s);if(n){const a=n[1].charAt(n[1].length-1)==="\n"?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:a,tokens:this.lexer.inline(a)}}}text(s){const n=this.rules.block.text.exec(s);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(s){const n=this.rules.inline.escape.exec(s);if(n)return{type:"escape",raw:n[0],text:b(n[1])}}tag(s){const n=this.rules.inline.tag.exec(s);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(s){const n=this.rules.inline.link.exec(s);if(n){const a=n[2].trim();if(!this.options.pedantic&&/^</.test(a)){if(!/>$/.test(a))return;const i=B(a.slice(0,-1),"\\");if((a.length-i.length)%2===0)return}else{const i=wt(n[2],"()");if(i>-1){const l=(n[0].indexOf("!")===0?5:4)+n[1].length+i;n[2]=n[2].substring(0,i),n[0]=n[0].substring(0,l).trim(),n[3]=""}}let o=n[2],r="";if(this.options.pedantic){const i=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);i&&(o=i[1],r=i[3])}else r=n[3]?n[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(this.options.pedantic&&!/>$/.test(a)?o=o.slice(1):o=o.slice(1,-1)),ue(n,{href:o&&o.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer)}}reflink(s,n){let a;if((a=this.rules.inline.reflink.exec(s))||(a=this.rules.inline.nolink.exec(s))){const o=(a[2]||a[1]).replace(/\s+/g," "),r=n[o.toLowerCase()];if(!r){const i=a[0].charAt(0);return{type:"text",raw:i,text:i}}return ue(a,r,a[0],this.lexer)}}emStrong(s,n,a=""){let o=this.rules.inline.emStrongLDelim.exec(s);if(!(!o||o[3]&&a.match(/[\p{L}\p{N}]/u))&&(!(o[1]||o[2])||!a||this.rules.inline.punctuation.exec(a))){const r=[...o[0]].length-1;let i,l,p=r,h=0;const c=o[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,n=n.slice(-1*s.length+r);(o=c.exec(n))!=null;){if(i=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!i)continue;if(l=[...i].length,o[3]||o[4]){p+=l;continue}else if((o[5]||o[6])&&r%3&&!((r+l)%3)){h+=l;continue}if(p-=l,p>0)continue;l=Math.min(l,l+p+h);const d=[...o[0]][0].length,u=s.slice(0,r+o.index+d+l);if(Math.min(r,l)%2){const w=u.slice(1,-1);return{type:"em",raw:u,text:w,tokens:this.lexer.inlineTokens(w)}}const m=u.slice(2,-2);return{type:"strong",raw:u,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(s){const n=this.rules.inline.code.exec(s);if(n){let a=n[2].replace(/\n/g," ");const o=/[^ ]/.test(a),r=/^ /.test(a)&&/ $/.test(a);return o&&r&&(a=a.substring(1,a.length-1)),a=b(a,!0),{type:"codespan",raw:n[0],text:a}}}br(s){const n=this.rules.inline.br.exec(s);if(n)return{type:"br",raw:n[0]}}del(s){const n=this.rules.inline.del.exec(s);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(s){const n=this.rules.inline.autolink.exec(s);if(n){let a,o;return n[2]==="@"?(a=b(n[1]),o="mailto:"+a):(a=b(n[1]),o=a),{type:"link",raw:n[0],text:a,href:o,tokens:[{type:"text",raw:a,text:a}]}}}url(s){var a,o;let n;if(n=this.rules.inline.url.exec(s)){let r,i;if(n[2]==="@")r=b(n[0]),i="mailto:"+r;else{let l;do l=n[0],n[0]=(o=(a=this.rules.inline._backpedal.exec(n[0]))==null?void 0:a[0])!=null?o:"";while(l!==n[0]);r=b(n[0]),n[1]==="www."?i="http://"+n[0]:i=n[0]}return{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(s){const n=this.rules.inline.text.exec(s);if(n){let a;return this.lexer.state.inRawBlock?a=n[0]:a=b(n[0]),{type:"text",raw:n[0],text:a}}}}const vt=/^(?: *(?:\n|$))+/,At=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,$t=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,L=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Ct=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,be=/(?:[*+-]|\d{1,9}[.)])/,xe=f(/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,be).getRegex(),W=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,St=/^[^\n]+/,Y=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Tt=f(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Y).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),It=f(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,be).getRegex(),q="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",J=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Nt=f("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",J).replace("tag",q).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ye=f(W).replace("hr",L).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",q).getRegex(),zt=f(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",ye).getRegex(),K={blockquote:zt,code:At,def:Tt,fences:$t,heading:Ct,hr:L,html:Nt,lheading:xe,list:It,newline:vt,paragraph:ye,table:N,text:St},he=f("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",L).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",q).getRegex(),Rt={...K,table:he,paragraph:f(W).replace("hr",L).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",he).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",q).getRegex()},Lt={...K,html:f("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",J).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:N,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:f(W).replace("hr",L).replace("heading"," *#{1,6} *[^\n]").replace("lheading",xe).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},we=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Dt=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,_e=/^( {2,}|\\)\n(?!\s*$)/,Et=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,D="\\p{P}$+<=>`^|~",Bt=f(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,D).getRegex(),Pt=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Ot=f(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,D).getRegex(),Ut=f("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,D).getRegex(),Mt=f("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,D).getRegex(),Vt=f(/\\([punct])/,"gu").replace(/punct/g,D).getRegex(),qt=f(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Zt=f(J).replace("(?:-->|$)","-->").getRegex(),Qt=f("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Zt).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),U=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Gt=f(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",U).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ve=f(/^!?\[(label)\]\[(ref)\]/).replace("label",U).replace("ref",Y).getRegex(),Ae=f(/^!?\[(ref)\](?:\[\])?/).replace("ref",Y).getRegex(),Ht=f("reflink|nolink(?!\\()","g").replace("reflink",ve).replace("nolink",Ae).getRegex(),ee={_backpedal:N,anyPunctuation:Vt,autolink:qt,blockSkip:Pt,br:_e,code:Dt,del:N,emStrongLDelim:Ot,emStrongRDelimAst:Ut,emStrongRDelimUnd:Mt,escape:we,link:Gt,nolink:Ae,punctuation:Bt,reflink:ve,reflinkSearch:Ht,tag:Qt,text:Et,url:N},Ft={...ee,link:f(/^!?\[(label)\]\((.*?)\)/).replace("label",U).getRegex(),reflink:f(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",U).getRegex()},H={...ee,escape:f(we).replace("])","~|])").getRegex(),url:f(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},jt={...H,br:f(_e).replace("{2,}","*").getRegex(),text:f(H.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},P={normal:K,gfm:Rt,pedantic:Lt},I={normal:ee,gfm:H,breaks:jt,pedantic:Ft};class x{constructor(s){k(this,"tokens");k(this,"options");k(this,"state");k(this,"tokenizer");k(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=s||C,this.options.tokenizer=this.options.tokenizer||new O,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:P.normal,inline:I.normal};this.options.pedantic?(n.block=P.pedantic,n.inline=I.pedantic):this.options.gfm&&(n.block=P.gfm,this.options.breaks?n.inline=I.breaks:n.inline=I.gfm),this.tokenizer.rules=n}static get rules(){return{block:P,inline:I}}static lex(s,n){return new x(n).lex(s)}static lexInline(s,n){return new x(n).inlineTokens(s)}lex(s){s=s.replace(/\r\n|\r/g,"\n"),this.blockTokens(s,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const a=this.inlineQueue[n];this.inlineTokens(a.src,a.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(s,n=[]){this.options.pedantic?s=s.replace(/\t/g,"    ").replace(/^ +$/gm,""):s=s.replace(/^( *)(\t+)/gm,(l,p,h)=>p+"    ".repeat(h.length));let a,o,r,i;for(;s;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(a=l.call({lexer:this},s,n))?(s=s.substring(a.raw.length),n.push(a),!0):!1))){if(a=this.tokenizer.space(s)){s=s.substring(a.raw.length),a.raw.length===1&&n.length>0?n[n.length-1].raw+="\n":n.push(a);continue}if(a=this.tokenizer.code(s)){s=s.substring(a.raw.length),o=n[n.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+="\n"+a.raw,o.text+="\n"+a.text,this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(a);continue}if(a=this.tokenizer.fences(s)){s=s.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(s)){s=s.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(s)){s=s.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(s)){s=s.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(s)){s=s.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(s)){s=s.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(s)){s=s.substring(a.raw.length),o=n[n.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+="\n"+a.raw,o.text+="\n"+a.raw,this.inlineQueue[this.inlineQueue.length-1].src=o.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(s)){s=s.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(s)){s=s.substring(a.raw.length),n.push(a);continue}if(r=s,this.options.extensions&&this.options.extensions.startBlock){let l=1/0;const p=s.slice(1);let h;this.options.extensions.startBlock.forEach(c=>{h=c.call({lexer:this},p),typeof h=="number"&&h>=0&&(l=Math.min(l,h))}),l<1/0&&l>=0&&(r=s.substring(0,l+1))}if(this.state.top&&(a=this.tokenizer.paragraph(r))){o=n[n.length-1],i&&o.type==="paragraph"?(o.raw+="\n"+a.raw,o.text+="\n"+a.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(a),i=r.length!==s.length,s=s.substring(a.raw.length);continue}if(a=this.tokenizer.text(s)){s=s.substring(a.raw.length),o=n[n.length-1],o&&o.type==="text"?(o.raw+="\n"+a.raw,o.text+="\n"+a.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(a);continue}if(s){const l="Infinite loop on byte: "+s.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,n}inline(s,n=[]){return this.inlineQueue.push({src:s,tokens:n}),n}inlineTokens(s,n=[]){let a,o,r,i=s,l,p,h;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)c.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,l.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;s;)if(p||(h=""),p=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(c=>(a=c.call({lexer:this},s,n))?(s=s.substring(a.raw.length),n.push(a),!0):!1))){if(a=this.tokenizer.escape(s)){s=s.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.tag(s)){s=s.substring(a.raw.length),o=n[n.length-1],o&&a.type==="text"&&o.type==="text"?(o.raw+=a.raw,o.text+=a.text):n.push(a);continue}if(a=this.tokenizer.link(s)){s=s.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.reflink(s,this.tokens.links)){s=s.substring(a.raw.length),o=n[n.length-1],o&&a.type==="text"&&o.type==="text"?(o.raw+=a.raw,o.text+=a.text):n.push(a);continue}if(a=this.tokenizer.emStrong(s,i,h)){s=s.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.codespan(s)){s=s.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.br(s)){s=s.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.del(s)){s=s.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.autolink(s)){s=s.substring(a.raw.length),n.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(s))){s=s.substring(a.raw.length),n.push(a);continue}if(r=s,this.options.extensions&&this.options.extensions.startInline){let c=1/0;const d=s.slice(1);let u;this.options.extensions.startInline.forEach(m=>{u=m.call({lexer:this},d),typeof u=="number"&&u>=0&&(c=Math.min(c,u))}),c<1/0&&c>=0&&(r=s.substring(0,c+1))}if(a=this.tokenizer.inlineText(r)){s=s.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(h=a.raw.slice(-1)),p=!0,o=n[n.length-1],o&&o.type==="text"?(o.raw+=a.raw,o.text+=a.text):n.push(a);continue}if(s){const c="Infinite loop on byte: "+s.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return n}}class M{constructor(s){k(this,"options");this.options=s||C}code(s,n,a){var r;const o=(r=(n||"").match(/^\S*/))==null?void 0:r[0];return s=s.replace(/\n$/,"")+"\n",o?'<pre><code class="language-'+b(o)+'">'+(a?s:b(s,!0))+"</code></pre>\n":"<pre><code>"+(a?s:b(s,!0))+"</code></pre>\n"}blockquote(s){return"<blockquote>\n".concat(s,"</blockquote>\n")}html(s,n){return s}heading(s,n,a){return"<h".concat(n,">").concat(s,"</h").concat(n,">\n")}hr(){return"<hr>\n"}list(s,n,a){const o=n?"ol":"ul",r=n&&a!==1?' start="'+a+'"':"";return"<"+o+r+">\n"+s+"</"+o+">\n"}listitem(s,n,a){return"<li>".concat(s,"</li>\n")}checkbox(s){return"<input "+(s?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(s){return"<p>".concat(s,"</p>\n")}table(s,n){return n&&(n="<tbody>".concat(n,"</tbody>")),"<table>\n<thead>\n"+s+"</thead>\n"+n+"</table>\n"}tablerow(s){return"<tr>\n".concat(s,"</tr>\n")}tablecell(s,n){const a=n.header?"th":"td";return(n.align?"<".concat(a,' align="').concat(n.align,'">'):"<".concat(a,">"))+s+"</".concat(a,">\n")}strong(s){return"<strong>".concat(s,"</strong>")}em(s){return"<em>".concat(s,"</em>")}codespan(s){return"<code>".concat(s,"</code>")}br(){return"<br>"}del(s){return"<del>".concat(s,"</del>")}link(s,n,a){const o=pe(s);if(o===null)return a;s=o;let r='<a href="'+s+'"';return n&&(r+=' title="'+n+'"'),r+=">"+a+"</a>",r}image(s,n,a){const o=pe(s);if(o===null)return a;s=o;let r='<img src="'.concat(s,'" alt="').concat(a,'"');return n&&(r+=' title="'.concat(n,'"')),r+=">",r}text(s){return s}}class te{strong(s){return s}em(s){return s}codespan(s){return s}del(s){return s}html(s){return s}text(s){return s}link(s,n,a){return""+a}image(s,n,a){return""+a}br(){return""}}class y{constructor(s){k(this,"options");k(this,"renderer");k(this,"textRenderer");this.options=s||C,this.options.renderer=this.options.renderer||new M,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new te}static parse(s,n){return new y(n).parse(s)}static parseInline(s,n){return new y(n).parseInline(s)}parse(s,n=!0){let a="";for(let o=0;o<s.length;o++){const r=s[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const i=r,l=this.options.extensions.renderers[i.type].call({parser:this},i);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(i.type)){a+=l||"";continue}}switch(r.type){case"space":continue;case"hr":{a+=this.renderer.hr();continue}case"heading":{const i=r;a+=this.renderer.heading(this.parseInline(i.tokens),i.depth,xt(this.parseInline(i.tokens,this.textRenderer)));continue}case"code":{const i=r;a+=this.renderer.code(i.text,i.lang,!!i.escaped);continue}case"table":{const i=r;let l="",p="";for(let c=0;c<i.header.length;c++)p+=this.renderer.tablecell(this.parseInline(i.header[c].tokens),{header:!0,align:i.align[c]});l+=this.renderer.tablerow(p);let h="";for(let c=0;c<i.rows.length;c++){const d=i.rows[c];p="";for(let u=0;u<d.length;u++)p+=this.renderer.tablecell(this.parseInline(d[u].tokens),{header:!1,align:i.align[u]});h+=this.renderer.tablerow(p)}a+=this.renderer.table(l,h);continue}case"blockquote":{const i=r,l=this.parse(i.tokens);a+=this.renderer.blockquote(l);continue}case"list":{const i=r,l=i.ordered,p=i.start,h=i.loose;let c="";for(let d=0;d<i.items.length;d++){const u=i.items[d],m=u.checked,w=u.task;let _="";if(u.task){const A=this.renderer.checkbox(!!m);h?u.tokens.length>0&&u.tokens[0].type==="paragraph"?(u.tokens[0].text=A+" "+u.tokens[0].text,u.tokens[0].tokens&&u.tokens[0].tokens.length>0&&u.tokens[0].tokens[0].type==="text"&&(u.tokens[0].tokens[0].text=A+" "+u.tokens[0].tokens[0].text)):u.tokens.unshift({type:"text",text:A+" "}):_+=A+" "}_+=this.parse(u.tokens,h),c+=this.renderer.listitem(_,w,!!m)}a+=this.renderer.list(c,l,p);continue}case"html":{const i=r;a+=this.renderer.html(i.text,i.block);continue}case"paragraph":{const i=r;a+=this.renderer.paragraph(this.parseInline(i.tokens));continue}case"text":{let i=r,l=i.tokens?this.parseInline(i.tokens):i.text;for(;o+1<s.length&&s[o+1].type==="text";)i=s[++o],l+="\n"+(i.tokens?this.parseInline(i.tokens):i.text);a+=n?this.renderer.paragraph(l):l;continue}default:{const i='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return a}parseInline(s,n){n=n||this.renderer;let a="";for(let o=0;o<s.length;o++){const r=s[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const i=this.options.extensions.renderers[r.type].call({parser:this},r);if(i!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){a+=i||"";continue}}switch(r.type){case"escape":{const i=r;a+=n.text(i.text);break}case"html":{const i=r;a+=n.html(i.text);break}case"link":{const i=r;a+=n.link(i.href,i.title,this.parseInline(i.tokens,n));break}case"image":{const i=r;a+=n.image(i.href,i.title,i.text);break}case"strong":{const i=r;a+=n.strong(this.parseInline(i.tokens,n));break}case"em":{const i=r;a+=n.em(this.parseInline(i.tokens,n));break}case"codespan":{const i=r;a+=n.codespan(i.text);break}case"br":{a+=n.br();break}case"del":{const i=r;a+=n.del(this.parseInline(i.tokens,n));break}case"text":{const i=r;a+=n.text(i.text);break}default:{const i='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return a}}class z{constructor(s){k(this,"options");this.options=s||C}preprocess(s){return s}postprocess(s){return s}processAllTokens(s){return s}}k(z,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var R,F,V,$e;class Xt{constructor(...s){G(this,R);G(this,V);k(this,"defaults",X());k(this,"options",this.setOptions);k(this,"parse",E(this,R,F).call(this,x.lex,y.parse));k(this,"parseInline",E(this,R,F).call(this,x.lexInline,y.parseInline));k(this,"Parser",y);k(this,"Renderer",M);k(this,"TextRenderer",te);k(this,"Lexer",x);k(this,"Tokenizer",O);k(this,"Hooks",z);this.use(...s)}walkTokens(s,n){var o,r;let a=[];for(const i of s)switch(a=a.concat(n.call(this,i)),i.type){case"table":{const l=i;for(const p of l.header)a=a.concat(this.walkTokens(p.tokens,n));for(const p of l.rows)for(const h of p)a=a.concat(this.walkTokens(h.tokens,n));break}case"list":{const l=i;a=a.concat(this.walkTokens(l.items,n));break}default:{const l=i;(r=(o=this.defaults.extensions)==null?void 0:o.childTokens)!=null&&r[l.type]?this.defaults.extensions.childTokens[l.type].forEach(p=>{const h=l[p].flat(1/0);a=a.concat(this.walkTokens(h,n))}):l.tokens&&(a=a.concat(this.walkTokens(l.tokens,n)))}}return a}use(...s){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return s.forEach(a=>{const o={...a};if(o.async=this.defaults.async||o.async||!1,a.extensions&&(a.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){const i=n.renderers[r.name];i?n.renderers[r.name]=function(...l){let p=r.renderer.apply(this,l);return p===!1&&(p=i.apply(this,l)),p}:n.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const i=n[r.level];i?i.unshift(r.tokenizer):n[r.level]=[r.tokenizer],r.start&&(r.level==="block"?n.startBlock?n.startBlock.push(r.start):n.startBlock=[r.start]:r.level==="inline"&&(n.startInline?n.startInline.push(r.start):n.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(n.childTokens[r.name]=r.childTokens)}),o.extensions=n),a.renderer){const r=this.defaults.renderer||new M(this.defaults);for(const i in a.renderer){if(!(i in r))throw new Error("renderer '".concat(i,"' does not exist"));if(i==="options")continue;const l=i,p=a.renderer[l],h=r[l];r[l]=(...c)=>{let d=p.apply(r,c);return d===!1&&(d=h.apply(r,c)),d||""}}o.renderer=r}if(a.tokenizer){const r=this.defaults.tokenizer||new O(this.defaults);for(const i in a.tokenizer){if(!(i in r))throw new Error("tokenizer '".concat(i,"' does not exist"));if(["options","rules","lexer"].includes(i))continue;const l=i,p=a.tokenizer[l],h=r[l];r[l]=(...c)=>{let d=p.apply(r,c);return d===!1&&(d=h.apply(r,c)),d}}o.tokenizer=r}if(a.hooks){const r=this.defaults.hooks||new z;for(const i in a.hooks){if(!(i in r))throw new Error("hook '".concat(i,"' does not exist"));if(i==="options")continue;const l=i,p=a.hooks[l],h=r[l];z.passThroughHooks.has(i)?r[l]=c=>{if(this.defaults.async)return Promise.resolve(p.call(r,c)).then(u=>h.call(r,u));const d=p.call(r,c);return h.call(r,d)}:r[l]=(...c)=>{let d=p.apply(r,c);return d===!1&&(d=h.apply(r,c)),d}}o.hooks=r}if(a.walkTokens){const r=this.defaults.walkTokens,i=a.walkTokens;o.walkTokens=function(l){let p=[];return p.push(i.call(this,l)),r&&(p=p.concat(r.call(this,l))),p}}this.defaults={...this.defaults,...o}}),this}setOptions(s){return this.defaults={...this.defaults,...s},this}lexer(s,n){return x.lex(s,n!=null?n:this.defaults)}parser(s,n){return y.parse(s,n!=null?n:this.defaults)}}R=new WeakSet,F=function(s,n){return(a,o)=>{const r={...o},i={...this.defaults,...r};this.defaults.async===!0&&r.async===!1&&(i.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),i.async=!0);const l=E(this,V,$e).call(this,!!i.silent,!!i.async);if(typeof a>"u"||a===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof a!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(a)+", string expected"));if(i.hooks&&(i.hooks.options=i),i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(a):a).then(p=>s(p,i)).then(p=>i.hooks?i.hooks.processAllTokens(p):p).then(p=>i.walkTokens?Promise.all(this.walkTokens(p,i.walkTokens)).then(()=>p):p).then(p=>n(p,i)).then(p=>i.hooks?i.hooks.postprocess(p):p).catch(l);try{i.hooks&&(a=i.hooks.preprocess(a));let p=s(a,i);i.hooks&&(p=i.hooks.processAllTokens(p)),i.walkTokens&&this.walkTokens(p,i.walkTokens);let h=n(p,i);return i.hooks&&(h=i.hooks.postprocess(h)),h}catch(p){return l(p)}}},V=new WeakSet,$e=function(s,n){return a=>{if(a.message+="\nPlease report this to https://github.com/markedjs/marked.",s){const o="<p>An error occurred:</p><pre>"+b(a.message+"",!0)+"</pre>";return n?Promise.resolve(o):o}if(n)return Promise.reject(a);throw a}};const $=new Xt;function g(e,s){return $.parse(e,s)}g.options=g.setOptions=function(e){return $.setOptions(e),g.defaults=$.defaults,oe(g.defaults),g},g.getDefaults=X,g.defaults=C,g.use=function(...e){return $.use(...e),g.defaults=$.defaults,oe(g.defaults),g},g.walkTokens=function(e,s){return $.walkTokens(e,s)},g.parseInline=$.parseInline,g.Parser=y,g.parser=y.parse,g.Renderer=M,g.TextRenderer=te,g.Lexer=x,g.lexer=x.lex,g.Tokenizer=O,g.Hooks=z,g.parse=g,g.options,g.setOptions,g.use,g.walkTokens,g.parseInline,y.parse,x.lex;const Wt={name:"Markdown",props:{text:{type:String,default:""}},computed:{renderMarkdown(){const e=new g.Renderer;return e.link=function(s,n,a){let o;try{o=decodeURIComponent(unescape(s)).replace(/[^\w:]/g,"").toLowerCase()}catch{return""}if(o.indexOf("http:")!==0&&o.indexOf("https:")!==0)return"";let r='<a href="'+s+'" rel="noreferrer noopener"';return n&&(r+=' title="'+n+'"'),r+=">"+a+"</a>",r},e.image=function(s,n,a){return a||n},e.blockquote=function(s){return s},ze.sanitize(g(this.text.trim(),{renderer:e,gfm:!1,highlight:!1,tables:!1,breaks:!1,pedantic:!1,sanitize:!0,smartLists:!0,smartypants:!1}),{SAFE_FOR_JQUERY:!0,ALLOWED_TAGS:["h1","h2","h3","h4","h5","h6","strong","p","a","ul","ol","li","em","del","blockquote"]})}}};var Yt=function(){var e=this,s=e._self._c;return s("div",{staticClass:"settings-markdown",domProps:{innerHTML:e._s(e.renderMarkdown)}})},Jt=[],Kt=v(Wt,Yt,Jt,!1,null,"f096b8e1",null,null);const Ce=Kt.exports,es={name:"AppDetails",components:{NcSelect:Re,Markdown:Ce},mixins:[j,fe],props:{app:{type:Object,required:!0}},data(){return{groupCheckedAppsData:!1}},computed:{appstoreUrl(){return"https://apps.nextcloud.com/apps/".concat(this.app.id)},licence(){return this.app.licence?t("settings","{license}-licensed",{license:(""+this.app.licence).toUpperCase()}):null},author(){return typeof this.app.author=="string"?[{"@value":this.app.author}]:this.app.author["@value"]?[this.app.author]:this.app.author},appGroups(){return this.app.groups.map(e=>({id:e,name:e}))},groups(){return this.$store.getters.getGroups.filter(e=>e.id!=="disabled").sort((e,s)=>e.name.localeCompare(s.name))}},mounted(){this.app.groups.length>0&&(this.groupCheckedAppsData=!0)}};var ts=function(){var e=this,s=e._self._c;return s("div",{staticClass:"app-details"},[s("div",{staticClass:"app-details__actions"},[e.app.active&&e.canLimitToGroups(e.app)?s("div",{staticClass:"app-details__actions-groups"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.groupCheckedAppsData,expression:"groupCheckedAppsData"}],staticClass:"groups-enable__checkbox checkbox",attrs:{id:e.prefix("groups_enable",e.app.id),type:"checkbox"},domProps:{value:e.app.id,checked:Array.isArray(e.groupCheckedAppsData)?e._i(e.groupCheckedAppsData,e.app.id)>-1:e.groupCheckedAppsData},on:{change:[function(n){var a=e.groupCheckedAppsData,o=n.target,r=!!o.checked;if(Array.isArray(a)){var i=e.app.id,l=e._i(a,i);o.checked?l<0&&(e.groupCheckedAppsData=a.concat([i])):l>-1&&(e.groupCheckedAppsData=a.slice(0,l).concat(a.slice(l+1)))}else e.groupCheckedAppsData=r},e.setGroupLimit]}}),s("label",{attrs:{for:e.prefix("groups_enable",e.app.id)}},[e._v(e._s(e.t("settings","Limit to groups")))]),s("input",{staticClass:"group_select",attrs:{type:"hidden",title:e.t("settings","All"),value:""}}),s("br"),s("label",{attrs:{for:"limitToGroups"}},[s("span",[e._v(e._s(e.t("settings","Limit app usage to groups")))])]),e.isLimitedToGroups(e.app)?s("NcSelect",{attrs:{"input-id":"limitToGroups",options:e.groups,value:e.appGroups,limit:5,label:"name",multiple:!0,"close-on-select":!1},on:{"option:selected":e.addGroupLimitation,"option:deselected":e.removeGroupLimitation,search:e.asyncFindGroup}},[s("span",{attrs:{slot:"noResult"},slot:"noResult"},[e._v(e._s(e.t("settings","No results")))])]):e._e()],1):e._e(),s("div",{staticClass:"app-details__actions-manage"},[e.app.update?s("input",{staticClass:"update primary",attrs:{type:"button",value:e.t("settings","Update to {version}",{version:e.app.update}),disabled:e.installing||e.isLoading},on:{click:function(n){return e.update(e.app.id)}}}):e._e(),e.app.canUnInstall?s("input",{staticClass:"uninstall",attrs:{type:"button",value:e.t("settings","Remove"),disabled:e.installing||e.isLoading},on:{click:function(n){return e.remove(e.app.id)}}}):e._e(),e.app.active?s("input",{staticClass:"enable",attrs:{type:"button",value:e.t("settings","Disable"),disabled:e.installing||e.isLoading},on:{click:function(n){return e.disable(e.app.id)}}}):e._e(),!e.app.active&&(e.app.canInstall||e.app.isCompatible)?s("input",{staticClass:"enable primary",attrs:{title:e.enableButtonTooltip,"aria-label":e.enableButtonTooltip,type:"button",value:e.enableButtonText,disabled:!e.app.canInstall||e.installing||e.isLoading},on:{click:function(n){return e.enable(e.app.id)}}}):!e.app.active&&!e.app.canInstall?s("input",{staticClass:"enable force",attrs:{title:e.forceEnableButtonTooltip,"aria-label":e.forceEnableButtonTooltip,type:"button",value:e.forceEnableButtonText,disabled:e.installing||e.isLoading},on:{click:function(n){return e.forceEnable(e.app.id)}}}):e._e()])]),s("ul",{staticClass:"app-details__dependencies"},[e.app.missingMinOwnCloudVersion?s("li",[e._v(" "+e._s(e.t("settings","This app has no minimum Nextcloud version assigned. This will be an error in the future."))+" ")]):e._e(),e.app.missingMaxOwnCloudVersion?s("li",[e._v(" "+e._s(e.t("settings","This app has no maximum Nextcloud version assigned. This will be an error in the future."))+" ")]):e._e(),e.app.canInstall?e._e():s("li",[e._v(" "+e._s(e.t("settings","This app cannot be installed because the following dependencies are not fulfilled:"))+" "),s("ul",{staticClass:"missing-dependencies"},e._l(e.app.missingDependencies,function(n,a){return s("li",{key:a},[e._v(" "+e._s(n)+" ")])}),0)])]),s("p",{staticClass:"app-details__documentation"},[e.app.internal?e._e():s("a",{staticClass:"appslink",attrs:{href:e.appstoreUrl,target:"_blank",rel:"noreferrer noopener"}},[e._v(e._s(e.t("settings","View in store"))+" ↗")]),e.app.website?s("a",{staticClass:"appslink",attrs:{href:e.app.website,target:"_blank",rel:"noreferrer noopener"}},[e._v(e._s(e.t("settings","Visit website"))+" ↗")]):e._e(),e.app.bugs?s("a",{staticClass:"appslink",attrs:{href:e.app.bugs,target:"_blank",rel:"noreferrer noopener"}},[e._v(e._s(e.t("settings","Report a bug"))+" ↗")]):e._e(),e.app.documentation&&e.app.documentation.user?s("a",{staticClass:"appslink",attrs:{href:e.app.documentation.user,target:"_blank",rel:"noreferrer noopener"}},[e._v(e._s(e.t("settings","User documentation"))+" ↗")]):e._e(),e.app.documentation&&e.app.documentation.admin?s("a",{staticClass:"appslink",attrs:{href:e.app.documentation.admin,target:"_blank",rel:"noreferrer noopener"}},[e._v(e._s(e.t("settings","Admin documentation"))+" ↗")]):e._e(),e.app.documentation&&e.app.documentation.developer?s("a",{staticClass:"appslink",attrs:{href:e.app.documentation.developer,target:"_blank",rel:"noreferrer noopener"}},[e._v(e._s(e.t("settings","Developer documentation"))+" ↗")]):e._e()]),s("Markdown",{staticClass:"app-details__description",attrs:{text:e.app.description}})],1)},ss=[],ns=v(es,ts,ss,!1,null,"80f62022",null,null);const as=ns.exports;Le.use(qe);const is={name:"Apps",APPS_SECTION_ENUM:Ge,components:{NcAppContent:De,AppDetails:as,AppList:gt,IconStarShooting:Ze,NcAppNavigation:Ee,NcAppNavigationItem:Be,NcAppNavigationSpacer:Pe,NcCounterBubble:Oe,AppScore:ge,NcAppSidebar:Ue,NcAppSidebarTab:Me,NcContent:Ve,Markdown:Ce},mixins:[j],props:{category:{type:String,default:"installed"},id:{type:String,default:""}},data(){return{searchQuery:"",screenshotLoaded:!1}},computed:{pageHeading(){return this.$options.APPS_SECTION_ENUM[this.category]?this.$options.APPS_SECTION_ENUM[this.category]:this.$store.getters.getCategoryById(this.category).displayName},loading(){return this.$store.getters.loading("categories")},loadingList(){return this.$store.getters.loading("list")},app(){return this.apps.find(e=>e.id===this.id)},categories(){return this.$store.getters.getCategories},apps(){return this.$store.getters.getAllApps},updateCount(){return this.$store.getters.getUpdateCount},settings(){return this.$store.getters.getServerData},hasRating(){return this.app.appstoreData&&this.app.appstoreData.ratingNumOverall>5},appSidebar(){const e=o=>o["@value"]?o["@value"]:o,s=Array.isArray(this.app.author)?this.app.author.map(e).join(", "):e(this.app.author),n=t("settings","{license}-licensed",{license:(""+this.app.licence).toUpperCase()}),a=t("settings","by {author}\n{license}",{author:s,license:n});return{background:this.app.screenshot&&this.screenshotLoaded?this.app.screenshot:this.app.preview,compact:!(this.app.screenshot&&this.screenshotLoaded),name:this.app.name,subname:a}},changelog(){return e=>e.translations.en.changelog},isSubscribed(){return this.apps.some(e=>e.level===300)}},watch:{category(){this.searchQuery=""},app(){var e,s;if(this.screenshotLoaded=!1,((e=this.app)==null?void 0:e.releases)&&((s=this.app)==null?void 0:s.screenshot)){const n=new Image;n.onload=a=>{this.screenshotLoaded=!0},n.src=this.app.screenshot}}},beforeMount(){this.$store.dispatch("getCategories",{shouldRefetchCategories:!0}),this.$store.dispatch("getAllApps"),this.$store.dispatch("getGroups",{offset:0,limit:5}),this.$store.commit("setUpdateCount",this.$store.getters.getServerData.updateCount)},mounted(){ie("nextcloud:unified-search.search",this.setSearch),ie("nextcloud:unified-search.reset",this.resetSearch)},beforeDestroy(){re("nextcloud:unified-search.search",this.setSearch),re("nextcloud:unified-search.reset",this.resetSearch)},methods:{setSearch({query:e}){this.searchQuery=e},resetSearch(){this.searchQuery=""},hideAppDetails(){this.$router.push({name:"apps-category",params:{category:this.category}})},openDeveloperDocumentation(){window.open(this.settings.developerDocumentation)}}};var rs=function(){var e=this,s=e._self._c;return s("NcContent",{class:{"with-app-sidebar":e.app},attrs:{"app-name":"settings"}},[s("NcAppNavigation",{class:{"icon-loading":e.loading},attrs:{"aria-label":e.t("settings","Apps")},scopedSlots:e._u([{key:"list",fn:function(){return[s("NcAppNavigationItem",{attrs:{id:"app-category-your-apps",to:{name:"apps"},exact:!0,icon:"icon-category-installed",name:e.$options.APPS_SECTION_ENUM.installed}}),s("NcAppNavigationItem",{attrs:{id:"app-category-enabled",to:{name:"apps-category",params:{category:"enabled"}},icon:"icon-category-enabled",name:e.$options.APPS_SECTION_ENUM.enabled}}),s("NcAppNavigationItem",{attrs:{id:"app-category-disabled",to:{name:"apps-category",params:{category:"disabled"}},icon:"icon-category-disabled",name:e.$options.APPS_SECTION_ENUM.disabled}}),e.updateCount>0?s("NcAppNavigationItem",{attrs:{id:"app-category-updates",to:{name:"apps-category",params:{category:"updates"}},icon:"icon-download",name:e.$options.APPS_SECTION_ENUM.updates},scopedSlots:e._u([{key:"counter",fn:function(){return[s("NcCounterBubble",[e._v(e._s(e.updateCount))])]},proxy:!0}],null,!1,54487302)}):e._e(),e.isSubscribed?s("NcAppNavigationItem",{attrs:{id:"app-category-supported",to:{name:"apps-category",params:{category:"supported"}},name:e.$options.APPS_SECTION_ENUM.supported},scopedSlots:e._u([{key:"icon",fn:function(){return[s("IconStarShooting",{attrs:{size:20}})]},proxy:!0}],null,!1,704374136)}):e._e(),s("NcAppNavigationItem",{attrs:{id:"app-category-your-bundles",to:{name:"apps-category",params:{category:"app-bundles"}},icon:"icon-category-app-bundles",name:e.$options.APPS_SECTION_ENUM["app-bundles"]}}),s("NcAppNavigationSpacer"),e.settings.appstoreEnabled?[s("NcAppNavigationItem",{attrs:{id:"app-category-featured",to:{name:"apps-category",params:{category:"featured"}},icon:"icon-favorite",name:e.$options.APPS_SECTION_ENUM.featured}}),e._l(e.categories,function(n){return s("NcAppNavigationItem",{key:"icon-category-"+n.ident,attrs:{icon:"icon-category-"+n.ident,to:{name:"apps-category",params:{category:n.ident}},name:n.displayName}})})]:e._e(),s("NcAppNavigationItem",{attrs:{id:"app-developer-docs",name:e.t("settings","Developer documentation")+" ↗"},on:{click:e.openDeveloperDocumentation}})]},proxy:!0}])}),s("NcAppContent",{staticClass:"app-settings-content",class:{"icon-loading":e.loadingList},attrs:{"page-heading":e.pageHeading}},[s("AppList",{attrs:{category:e.category,app:e.app,search:e.searchQuery}})],1),e.id&&e.app?s("NcAppSidebar",e._b({class:{"app-sidebar--without-background":!e.appSidebar.background},on:{close:e.hideAppDetails},scopedSlots:e._u([e.appSidebar.background?null:{key:"header",fn:function(){return[s("div",{staticClass:"app-sidebar-header__figure--default-app-icon icon-settings-dark"})]},proxy:!0},{key:"description",fn:function(){return[e.app.level===300||e.app.level===200||e.hasRating?s("div",{staticClass:"app-level"},[e.app.level===300?s("span",{staticClass:"supported icon-checkmark-color",attrs:{title:e.t("settings","This app is supported via your current Nextcloud subscription.")}},[e._v(" "+e._s(e.t("settings","Supported")))]):e._e(),e.app.level===200?s("span",{staticClass:"official icon-checkmark",attrs:{title:e.t("settings","Featured apps are developed by and within the community. They offer central functionality and are ready for production use.")}},[e._v(" "+e._s(e.t("settings","Featured")))]):e._e(),e.hasRating?s("AppScore",{attrs:{score:e.app.appstoreData.ratingOverall}}):e._e()],1):e._e(),s("div",{staticClass:"app-version"},[s("p",[e._v(e._s(e.app.version))])])]},proxy:!0}],null,!0)},"NcAppSidebar",e.appSidebar,!1),[s("NcAppSidebarTab",{attrs:{id:"desc",icon:"icon-category-office",name:e.t("settings","Details"),order:0}},[s("AppDetails",{attrs:{app:e.app}})],1),e.app.appstoreData&&e.app.releases[0].translations.en.changelog?s("NcAppSidebarTab",{attrs:{id:"desca",icon:"icon-category-organization",name:e.t("settings","Changelog"),order:1}},e._l(e.app.releases,function(n){return s("div",{key:n.version,staticClass:"app-sidebar-tabs__release"},[s("h2",[e._v(e._s(n.version))]),e.changelog(n)?s("Markdown",{attrs:{text:e.changelog(n)}}):e._e()],1)}),0):e._e()],1):e._e()],1)},os=[],ls=v(is,rs,os,!1,null,"95e2e4cd",null,null);const Ls=ls.exports;export{Ls as default};
