/*! third party licenses: dist/vendor.LICENSE.txt */
import{ad as r,bD as l,bR as c,ag as u,bO as i,aH as n}from"./core-common.mjs";import"./chunks/index-Ca0QcE7e.mjs";import{v as p}from"./chunks/toast-7xJhDYMn-BrG8uCqw.mjs";import{l as d}from"./chunks/logger-DsZcYtCa.mjs";import{n as o}from"./chunks/icons-BxSPavMS.mjs";const g={name:"GroupSelect",components:{NcSelect:r},props:{availableGroups:{type:Array,default:()=>[]},setting:{type:Object,required:!0},authorizedGroups:{type:Array,required:!0}},data(){return{selected:this.authorizedGroups.filter(e=>e.class===this.setting.class).map(e=>this.availableGroups.find(s=>s.gid===e.group_id)).filter(e=>e!==void 0)}},watch:{selected(){this.saveGroups()}},methods:{async saveGroups(){const e={newGroups:this.selected,class:this.setting.class};try{await l.post(c("/apps/settings/")+"/settings/authorizedgroups/saveSettings",e)}catch(s){p(t("settings","Unable to modify setting")),d.error("Unable to modify setting",s)}}}};var m=function(){var e=this,s=e._self._c;return s("NcSelect",{staticClass:"group-select",attrs:{"input-id":e.setting.id,placeholder:e.t("settings","None"),label:"displayName",options:e.availableGroups,multiple:!0,"close-on-select":!1},model:{value:e.selected,callback:function(a){e.selected=a},expression:"selected"}})},h=[],v=o(g,m,h,!1,null,null,null,null);const b=v.exports,f={name:"AdminDelegating",components:{GroupSelect:b,NcSettingsSection:u},data(){return{availableSettings:i("settings","available-settings"),availableGroups:i("settings","available-groups"),authorizedGroups:i("settings","authorized-groups"),authorizedSettingsDocLink:i("settings","authorized-settings-doc-link")}}};var G=function(){var e=this,s=e._self._c;return s("NcSettingsSection",{attrs:{name:e.t("settings","Administration privileges"),description:e.t("settings","Here you can decide which group can access certain sections of the administration settings."),"doc-url":e.authorizedSettingsDocLink}},[s("div",{staticClass:"setting-list"},e._l(e.availableSettings,function(a){return s("div",{key:a.class},[s("label",{attrs:{for:a.id}},[e._v(e._s(a.sectionName))]),s("GroupSelect",{attrs:{"available-groups":e.availableGroups,"authorized-groups":e.authorizedGroups,setting:a}})],1)}),0)])},y=[],S=o(f,G,y,!1,null,"c25cf4f3",null,null);const z=S.exports;n.prototype.OC=OC,n.prototype.t=t;const _=n.extend(z),N=new _;N.$mount("#admin-right-sub-granting");
