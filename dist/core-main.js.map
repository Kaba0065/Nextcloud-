{"version":3,"file":"core-main.js?v=996ccaecaca969ff41d8","mappings":"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","sources":["webpack:///nextcloud/webpack\\runtime\\chunk loaded","webpack:///nextcloud/core\\src\\OC\\legacy-loader.js","webpack:///nextcloud/core\\src\\OC\\notification.js","webpack:///nextcloud/core\\src\\OC\\xhr-error.js","webpack:///nextcloud/core\\src\\OC\\apps.js","webpack:///nextcloud/core\\src\\OCP\\appconfig.js","webpack:///nextcloud/core\\src\\OC\\appconfig.js","webpack:///nextcloud/core\\src\\OC\\appswebroots.js","webpack:///nextcloud/core\\src\\OC\\backbone-webdav.js","webpack:///nextcloud/core\\src\\OC\\backbone.js","webpack:///nextcloud/core\\src\\OC\\config.js","webpack:///nextcloud/core\\src\\OC\\contactsmenu.js","webpack:///nextcloud/core\\src\\OC\\currentuser.js","webpack:///nextcloud/core\\src\\OCA\\search.js","webpack:///nextcloud/core\\src\\OCA\\index.js","webpack:///nextcloud/core\\src\\Util\\a11y.js","webpack:///nextcloud/core\\src\\OC\\dialogs.js","webpack:///nextcloud/core\\src\\OC\\requesttoken.js","webpack:///nextcloud/core\\src\\OC\\eventsource.js","webpack:///nextcloud/core\\src\\OC\\menu.js","webpack:///nextcloud/core\\src\\OC\\constants.js","webpack:///nextcloud/core\\src\\OC\\admin.js","webpack:///nextcloud/core\\src\\OC\\l10n.js","webpack:///nextcloud/core\\src\\OC\\msg.js","webpack:///nextcloud/core\\src\\OC\\password-confirmation.js","webpack:///nextcloud/core\\src\\OC\\theme.js","webpack:///nextcloud/core\\src\\OC\\util-history.js","webpack:///nextcloud/core\\src\\OC\\util.js","webpack:///nextcloud/core\\src\\OC\\debug.js","webpack:///nextcloud/core\\src\\OC\\webroot.js","webpack:///nextcloud/core\\src\\OC\\get_set.js","webpack:///nextcloud/core\\src\\OC\\index.js","webpack:///nextcloud/core\\src\\OC\\appsettings.js","webpack:///nextcloud/core\\src\\OC\\capabilities.js","webpack:///nextcloud/core\\src\\OC\\host.js","webpack:///nextcloud/core\\src\\OC\\query-string.js","webpack:///nextcloud/core\\src\\OC\\plugins.js","webpack:///nextcloud/core\\src\\OC\\navigation.js","webpack:///nextcloud/core\\src\\OC\\routing.js","webpack:///nextcloud/core\\src\\session-heartbeat.js","webpack:///nextcloud/core\\src\\views\\ContactsMenu.vue?vue&type=script&lang=js&","webpack:///nextcloud/core\\src\\views\\ContactsMenu.vue","webpack://nextcloud/./core/src/views/ContactsMenu.vue?41d6","webpack://nextcloud/./core/src/views/ContactsMenu.vue?1de5","webpack://nextcloud/./core/src/views/ContactsMenu.vue?f71b","webpack:///nextcloud/core\\src\\components\\AppMenu.vue","webpack:///nextcloud/core\\src\\components\\AppMenu.vue?vue&type=script&lang=js&","webpack://nextcloud/./core/src/components/AppMenu.vue?8eda","webpack://nextcloud/./core/src/components/AppMenu.vue?95cf","webpack://nextcloud/./core/src/components/AppMenu.vue?d0fd","webpack:///nextcloud/core\\src\\components\\UserMenu\\UserMenuEntry.vue","webpack:///nextcloud/core\\src\\components\\UserMenu\\UserMenuEntry.vue?vue&type=script&lang=js&","webpack://nextcloud/./core/src/components/UserMenu/UserMenuEntry.vue?6a6f","webpack://nextcloud/./core/src/components/UserMenu/UserMenuEntry.vue?a480","webpack://nextcloud/./core/src/components/UserMenu/UserMenuEntry.vue?4de1","webpack:///nextcloud/core\\src\\views\\UserMenu.vue","webpack:///nextcloud/core\\src\\views\\UserMenu.vue?vue&type=script&lang=js&","webpack://nextcloud/./core/src/views/UserMenu.vue?3de1","webpack://nextcloud/./core/src/views/UserMenu.vue?5d6d","webpack://nextcloud/./core/src/views/UserMenu.vue?4b20","webpack:///nextcloud/core\\src\\init.js","webpack:///nextcloud/core\\src\\Polyfill\\tooltip.js","webpack:///nextcloud/core\\src\\components\\UserMenu.js","webpack:///nextcloud/core\\src\\components\\MainMenu.js","webpack:///nextcloud/core\\src\\components\\ContactsMenu.js","webpack:///nextcloud/core\\src\\OCP\\comments.js","webpack:///nextcloud/core\\src\\OCP\\whatsnew.js","webpack:///nextcloud/core\\src\\OCP\\accessibility.js","webpack:///nextcloud/core\\src\\globals.js","webpack:///nextcloud/core\\src\\OCP\\collaboration.js","webpack:///nextcloud/core\\src\\OCP\\loader.js","webpack:///nextcloud/core\\src\\OCP\\toast.js","webpack:///nextcloud/core\\src\\OCP\\index.js","webpack:///nextcloud/core\\src\\jquery\\avatar.js","webpack:///nextcloud/core\\src\\jquery\\contactsmenu.js","webpack:///nextcloud/core\\src\\jquery\\exists.js","webpack:///nextcloud/core\\src\\jquery\\filterattr.js","webpack:///nextcloud/core\\src\\jquery\\ocdialog.js","webpack:///nextcloud/core\\src\\jquery\\octemplate.js","webpack:///nextcloud/core\\src\\jquery\\placeholder.js","webpack:///nextcloud/core\\src\\jquery\\requesttoken.js","webpack:///nextcloud/core\\src\\jquery\\selectrange.js","webpack:///nextcloud/core\\src\\jquery\\showpassword.js","webpack:///nextcloud/core\\src\\jquery\\ui-fixes.js","webpack://nextcloud/./core/src/jquery/css/jquery-ui-fixes.scss?a4c2","webpack://nextcloud/./core/src/jquery/css/jquery.ocdialog.scss?5718","webpack:///nextcloud/core\\src\\jquery\\index.js","webpack:///nextcloud/core\\src\\main.js","webpack:///nextcloud/core\\src\\jquery\\css\\jquery-ui-fixes.scss","webpack:///nextcloud/core\\src\\jquery\\css\\jquery.ocdialog.scss","webpack:///nextcloud/core\\src\\components\\AppMenu.vue?vue&type=style&index=0&id=44a795f6&prod&lang=scss&scoped=true&","webpack:///nextcloud/core\\src\\components\\UserMenu\\UserMenuEntry.vue?vue&type=style&index=0&id=6e59d13c&prod&lang=scss&scoped=true&","webpack:///nextcloud/core\\src\\views\\ContactsMenu.vue?vue&type=style&index=0&id=1563c388&prod&lang=scss&scoped=true&","webpack:///nextcloud/core\\src\\views\\UserMenu.vue?vue&type=style&index=0&id=6a818bbc&prod&lang=scss&scoped=true&","webpack:///nextcloud/core\\src\\OC\\contactsmenu\\contact.handlebars","webpack:///nextcloud/core\\src\\OC\\contactsmenu\\error.handlebars","webpack:///nextcloud/core\\src\\OC\\contactsmenu\\list.handlebars","webpack:///nextcloud/core\\src\\OC\\contactsmenu\\loading.handlebars","webpack:///nextcloud/core\\src\\OC\\contactsmenu\\menu.handlebars","webpack:///nextcloud/core\\src\\jquery\\contactsmenu\\jquery_entry.handlebars","webpack:///nextcloud/node_modules\\moment\\locale|sync|\\^\\.*$","webpack:///nextcloud/webpack\\bootstrap","webpack:///nextcloud/webpack\\runtime\\compat get default export","webpack:///nextcloud/webpack\\runtime\\define property getters","webpack:///nextcloud/webpack\\runtime\\global","webpack:///nextcloud/webpack\\runtime\\hasOwnProperty shorthand","webpack:///nextcloud/webpack\\runtime\\make namespace object","webpack:///nextcloud/webpack\\runtime\\node module decorator","webpack:///nextcloud/webpack\\runtime\\runtimeId","webpack:///nextcloud/webpack\\runtime\\jsonp chunk loading","webpack:///nextcloud/webpack\\runtime\\nonce","webpack:///nextcloud/webpack\\startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Roeland Jago Douma <roeland@famdouma.nl>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\n/** @typedef {import('jquery')} jQuery */\r\nimport $ from 'jquery'\r\nimport { generateFilePath } from '@nextcloud/router'\r\n\r\nconst loadedScripts = {}\r\nconst loadedStyles = []\r\n\r\n/**\r\n * Load a script for the server and load it. If the script is already loaded,\r\n * the event handler will be called directly\r\n *\r\n * @param {string} app the app id to which the script belongs\r\n * @param {string} script the filename of the script\r\n * @param {Function} ready event handler to be called when the script is loaded\r\n * @return {jQuery.Deferred}\r\n * @deprecated 16.0.0 Use OCP.Loader.loadScript\r\n */\r\nexport const addScript = (app, script, ready) => {\r\n\tconsole.warn('OC.addScript is deprecated, use OCP.Loader.loadScript instead')\r\n\r\n\tlet deferred\r\n\tconst path = generateFilePath(app, 'js', script + '.js')\r\n\tif (!loadedScripts[path]) {\r\n\t\tdeferred = $.Deferred()\r\n\t\t$.getScript(path, () => deferred.resolve())\r\n\t\tloadedScripts[path] = deferred\r\n\t} else {\r\n\t\tif (ready) {\r\n\t\t\tready()\r\n\t\t}\r\n\t}\r\n\treturn loadedScripts[path]\r\n}\r\n\r\n/**\r\n * Loads a CSS file\r\n *\r\n * @param {string} app the app id to which the css style belongs\r\n * @param {string} style the filename of the css file\r\n * @deprecated 16.0.0 Use OCP.Loader.loadStylesheet\r\n */\r\nexport const addStyle = (app, style) => {\r\n\tconsole.warn('OC.addStyle is deprecated, use OCP.Loader.loadStylesheet instead')\r\n\r\n\tconst path = generateFilePath(app, 'css', style + '.css')\r\n\tif (loadedStyles.indexOf(path) === -1) {\r\n\t\tloadedStyles.push(path)\r\n\t\tif (document.createStyleSheet) {\r\n\t\t\tdocument.createStyleSheet(path)\r\n\t\t} else {\r\n\t\t\tstyle = $('<link rel=\"stylesheet\" type=\"text/css\" href=\"' + path + '\"/>')\r\n\t\t\t$('head').append(style)\r\n\t\t}\r\n\t}\r\n}\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author Daniel Calviño Sánchez <danxuliu@gmail.com>\r\n * @author Joas Schilling <coding@schilljs.com>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Julius Härtl <jus@bitgrid.net>\r\n * @author npmbuildbot[bot] \"npmbuildbot[bot]@users.noreply.github.com\"\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport _ from 'underscore'\r\n/** @typedef {import('jquery')} jQuery */\r\nimport $ from 'jquery'\r\nimport { showMessage, TOAST_DEFAULT_TIMEOUT, TOAST_PERMANENT_TIMEOUT } from '@nextcloud/dialogs'\r\n\r\n/**\r\n * @todo Write documentation\r\n * @deprecated 17.0.0 use the `@nextcloud/dialogs` package instead\r\n * @namespace OC.Notification\r\n */\r\nexport default {\r\n\r\n\tupdatableNotification: null,\r\n\r\n\tgetDefaultNotificationFunction: null,\r\n\r\n\t/**\r\n\t * @param {Function} callback callback function\r\n\t * @deprecated 17.0.0 use the `@nextcloud/dialogs` package\r\n\t */\r\n\tsetDefault(callback) {\r\n\t\tthis.getDefaultNotificationFunction = callback\r\n\t},\r\n\r\n\t/**\r\n\t * Hides a notification.\r\n\t *\r\n\t * If a row is given, only hide that one.\r\n\t * If no row is given, hide all notifications.\r\n\t *\r\n\t * @param {jQuery} [$row] notification row\r\n\t * @param {Function} [callback] callback\r\n\t * @deprecated 17.0.0 use the `@nextcloud/dialogs` package\r\n\t */\r\n\thide($row, callback) {\r\n\t\tif (_.isFunction($row)) {\r\n\t\t\t// first arg is the callback\r\n\t\t\tcallback = $row\r\n\t\t\t$row = undefined\r\n\t\t}\r\n\r\n\t\tif (!$row) {\r\n\t\t\tconsole.error('Missing argument $row in OC.Notification.hide() call, caller needs to be adjusted to only dismiss its own notification')\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// remove the row directly\r\n\t\t$row.each(function() {\r\n\t\t\tif ($(this)[0].toastify) {\r\n\t\t\t\t$(this)[0].toastify.hideToast()\r\n\t\t\t} else {\r\n\t\t\t\tconsole.error('cannot hide toast because object is not set')\r\n\t\t\t}\r\n\t\t\tif (this === this.updatableNotification) {\r\n\t\t\t\tthis.updatableNotification = null\r\n\t\t\t}\r\n\t\t})\r\n\t\tif (callback) {\r\n\t\t\tcallback.call()\r\n\t\t}\r\n\t\tif (this.getDefaultNotificationFunction) {\r\n\t\t\tthis.getDefaultNotificationFunction()\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Shows a notification as HTML without being sanitized before.\r\n\t * If you pass unsanitized user input this may lead to a XSS vulnerability.\r\n\t * Consider using show() instead of showHTML()\r\n\t *\r\n\t * @param {string} html Message to display\r\n\t * @param {object} [options] options\r\n\t * @param {string} [options.type] notification type\r\n\t * @param {number} [options.timeout=0] timeout value, defaults to 0 (permanent)\r\n\t * @return {jQuery} jQuery element for notification row\r\n\t * @deprecated 17.0.0 use the `@nextcloud/dialogs` package\r\n\t */\r\n\tshowHtml(html, options) {\r\n\t\toptions = options || {}\r\n\t\toptions.isHTML = true\r\n\t\toptions.timeout = (!options.timeout) ? TOAST_PERMANENT_TIMEOUT : options.timeout\r\n\t\tconst toast = showMessage(html, options)\r\n\t\ttoast.toastElement.toastify = toast\r\n\t\treturn $(toast.toastElement)\r\n\t},\r\n\r\n\t/**\r\n\t * Shows a sanitized notification\r\n\t *\r\n\t * @param {string} text Message to display\r\n\t * @param {object} [options] options\r\n\t * @param {string} [options.type] notification type\r\n\t * @param {number} [options.timeout=0] timeout value, defaults to 0 (permanent)\r\n\t * @return {jQuery} jQuery element for notification row\r\n\t * @deprecated 17.0.0 use the `@nextcloud/dialogs` package\r\n\t */\r\n\tshow(text, options) {\r\n\t\tconst escapeHTML = function(text) {\r\n\t\t\treturn text.toString()\r\n\t\t\t\t.split('&').join('&amp;')\r\n\t\t\t\t.split('<').join('&lt;')\r\n\t\t\t\t.split('>').join('&gt;')\r\n\t\t\t\t.split('\"').join('&quot;')\r\n\t\t\t\t.split('\\'').join('&#039;')\r\n\t\t}\r\n\r\n\t\toptions = options || {}\r\n\t\toptions.timeout = (!options.timeout) ? TOAST_PERMANENT_TIMEOUT : options.timeout\r\n\t\tconst toast = showMessage(escapeHTML(text), options)\r\n\t\ttoast.toastElement.toastify = toast\r\n\t\treturn $(toast.toastElement)\r\n\t},\r\n\r\n\t/**\r\n\t * Updates (replaces) a sanitized notification.\r\n\t *\r\n\t * @param {string} text Message to display\r\n\t * @return {jQuery} JQuery element for notificaiton row\r\n\t * @deprecated 17.0.0 use the `@nextcloud/dialogs` package\r\n\t */\r\n\tshowUpdate(text) {\r\n\t\tif (this.updatableNotification) {\r\n\t\t\tthis.updatableNotification.hideToast()\r\n\t\t}\r\n\t\tthis.updatableNotification = showMessage(text, { timeout: TOAST_PERMANENT_TIMEOUT })\r\n\t\tthis.updatableNotification.toastElement.toastify = this.updatableNotification\r\n\t\treturn $(this.updatableNotification.toastElement)\r\n\t},\r\n\r\n\t/**\r\n\t * Shows a notification that disappears after x seconds, default is\r\n\t * 7 seconds\r\n\t *\r\n\t * @param {string} text Message to show\r\n\t * @param {Array} [options] options array\r\n\t * @param {number} [options.timeout=7] timeout in seconds, if this is 0 it will show the message permanently\r\n\t * @param {boolean} [options.isHTML=false] an indicator for HTML notifications (true) or text (false)\r\n\t * @param {string} [options.type] notification type\r\n\t * @return {JQuery} the toast element\r\n\t * @deprecated 17.0.0 use the `@nextcloud/dialogs` package\r\n\t */\r\n\tshowTemporary(text, options) {\r\n\t\toptions = options || {}\r\n\t\toptions.timeout = options.timeout || TOAST_DEFAULT_TIMEOUT\r\n\t\tconst toast = showMessage(text, options)\r\n\t\ttoast.toastElement.toastify = toast\r\n\t\treturn $(toast.toastElement)\r\n\t},\r\n\r\n\t/**\r\n\t * Returns whether a notification is hidden.\r\n\t *\r\n\t * @return {boolean}\r\n\t * @deprecated 17.0.0 use the `@nextcloud/dialogs` package\r\n\t */\r\n\tisHidden() {\r\n\t\treturn !$('#content').find('.toastify').length\r\n\t},\r\n}\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport _ from 'underscore'\r\nimport $ from 'jquery'\r\n\r\nimport OC from './index'\r\nimport Notification from './notification'\r\n\r\n/**\r\n * Warn users that the connection to the server was lost temporarily\r\n *\r\n * This function is throttled to prevent stacked notfications.\r\n * After 7sec the first notification is gone, then we can show another one\r\n * if necessary.\r\n */\r\nexport const ajaxConnectionLostHandler = _.throttle(() => {\r\n\tNotification.showTemporary(t('core', 'Connection to server lost'))\r\n}, 7 * 1000, { trailing: false })\r\n\r\n/**\r\n * Process ajax error, redirects to main page\r\n * if an error/auth error status was returned.\r\n *\r\n * @param {XMLHttpRequest} xhr xhr request\r\n */\r\nexport const processAjaxError = xhr => {\r\n\t// purposefully aborted request ?\r\n\t// OC._userIsNavigatingAway needed to distinguish ajax calls cancelled by navigating away\r\n\t// from calls cancelled by failed cross-domain ajax due to SSO redirect\r\n\tif (xhr.status === 0 && (xhr.statusText === 'abort' || xhr.statusText === 'timeout' || OC._reloadCalled)) {\r\n\t\treturn\r\n\t}\r\n\r\n\tif (_.contains([302, 303, 307, 401], xhr.status) && OC.currentUser) {\r\n\t\t// sometimes \"beforeunload\" happens later, so need to defer the reload a bit\r\n\t\tsetTimeout(function() {\r\n\t\t\tif (!OC._userIsNavigatingAway && !OC._reloadCalled) {\r\n\t\t\t\tlet timer = 0\r\n\t\t\t\tconst seconds = 5\r\n\t\t\t\tconst interval = setInterval(function() {\r\n\t\t\t\t\tNotification.showUpdate(n('core', 'Problem loading page, reloading in %n second', 'Problem loading page, reloading in %n seconds', seconds - timer))\r\n\t\t\t\t\tif (timer >= seconds) {\r\n\t\t\t\t\t\tclearInterval(interval)\r\n\t\t\t\t\t\tOC.reload()\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttimer++\r\n\t\t\t\t}, 1000 // 1 second interval\r\n\t\t\t\t)\r\n\r\n\t\t\t\t// only call reload once\r\n\t\t\t\tOC._reloadCalled = true\r\n\t\t\t}\r\n\t\t}, 100)\r\n\t} else if (xhr.status === 0) {\r\n\t\t// Connection lost (e.g. WiFi disconnected or server is down)\r\n\t\tsetTimeout(function() {\r\n\t\t\tif (!OC._userIsNavigatingAway && !OC._reloadCalled) {\r\n\t\t\t\t// TODO: call method above directly\r\n\t\t\t\tOC._ajaxConnectionLostHandler()\r\n\t\t\t}\r\n\t\t}, 100)\r\n\t}\r\n}\r\n\r\n/**\r\n * Registers XmlHttpRequest object for global error processing.\r\n *\r\n * This means that if this XHR object returns 401 or session timeout errors,\r\n * the current page will automatically be reloaded.\r\n *\r\n * @param {XMLHttpRequest} xhr xhr request\r\n */\r\nexport const registerXHRForErrorProcessing = xhr => {\r\n\tconst loadCallback = () => {\r\n\t\tif (xhr.readyState !== 4) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// fire jquery global ajax error handler\r\n\t\t$(document).trigger(new $.Event('ajaxError'), xhr)\r\n\t}\r\n\r\n\tconst errorCallback = () => {\r\n\t\t// fire jquery global ajax error handler\r\n\t\t$(document).trigger(new $.Event('ajaxError'), xhr)\r\n\t}\r\n\r\n\tif (xhr.addEventListener) {\r\n\t\txhr.addEventListener('load', loadCallback)\r\n\t\txhr.addEventListener('error', errorCallback)\r\n\t}\r\n\r\n}\r\n","/**\r\n * @copyright Bernhard Posselt 2014\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport $ from 'jquery'\r\n\r\nlet dynamicSlideToggleEnabled = false\r\n\r\nconst Apps = {\r\n\tenableDynamicSlideToggle() {\r\n\t\tdynamicSlideToggleEnabled = true\r\n\t},\r\n}\r\n\r\n/**\r\n * Shows the #app-sidebar and add .with-app-sidebar to subsequent siblings\r\n *\r\n * @param {object} [$el] sidebar element to show, defaults to $('#app-sidebar')\r\n */\r\nApps.showAppSidebar = function($el) {\r\n\tconst $appSidebar = $el || $('#app-sidebar')\r\n\t$appSidebar.removeClass('disappear').show()\r\n\t$('#app-content').trigger(new $.Event('appresized'))\r\n}\r\n\r\n/**\r\n * Shows the #app-sidebar and removes .with-app-sidebar from subsequent\r\n * siblings\r\n *\r\n * @param {object} [$el] sidebar element to hide, defaults to $('#app-sidebar')\r\n */\r\nApps.hideAppSidebar = function($el) {\r\n\tconst $appSidebar = $el || $('#app-sidebar')\r\n\t$appSidebar.hide().addClass('disappear')\r\n\t$('#app-content').trigger(new $.Event('appresized'))\r\n}\r\n\r\n/**\r\n * Provides a way to slide down a target area through a button and slide it\r\n * up if the user clicks somewhere else. Used for the news app settings and\r\n * add new field.\r\n *\r\n * Usage:\r\n * <button data-apps-slide-toggle=\".slide-area\">slide</button>\r\n * <div class=\".slide-area\" class=\"hidden\">I'm sliding up</div>\r\n */\r\nexport const registerAppsSlideToggle = () => {\r\n\tlet buttons = $('[data-apps-slide-toggle]')\r\n\r\n\tif (buttons.length === 0) {\r\n\t\t$('#app-navigation').addClass('without-app-settings')\r\n\t}\r\n\r\n\t$(document).click(function(event) {\r\n\r\n\t\tif (dynamicSlideToggleEnabled) {\r\n\t\t\tbuttons = $('[data-apps-slide-toggle]')\r\n\t\t}\r\n\r\n\t\tbuttons.each(function(index, button) {\r\n\r\n\t\t\tconst areaSelector = $(button).data('apps-slide-toggle')\r\n\t\t\tconst area = $(areaSelector)\r\n\r\n\t\t\t/**\r\n\t\t\t *\r\n\t\t\t */\r\n\t\t\tfunction hideArea() {\r\n\t\t\t\tarea.slideUp(OC.menuSpeed * 4, function() {\r\n\t\t\t\t\tarea.trigger(new $.Event('hide'))\r\n\t\t\t\t})\r\n\t\t\t\tarea.removeClass('opened')\r\n\t\t\t\t$(button).removeClass('opened')\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t *\r\n\t\t\t */\r\n\t\t\tfunction showArea() {\r\n\t\t\t\tarea.slideDown(OC.menuSpeed * 4, function() {\r\n\t\t\t\t\tarea.trigger(new $.Event('show'))\r\n\t\t\t\t})\r\n\t\t\t\tarea.addClass('opened')\r\n\t\t\t\t$(button).addClass('opened')\r\n\t\t\t\tconst input = $(areaSelector + ' [autofocus]')\r\n\t\t\t\tif (input.length === 1) {\r\n\t\t\t\t\tinput.focus()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// do nothing if the area is animated\r\n\t\t\tif (!area.is(':animated')) {\r\n\r\n\t\t\t\t// button toggles the area\r\n\t\t\t\tif ($(button).is($(event.target).closest('[data-apps-slide-toggle]'))) {\r\n\t\t\t\t\tif (area.is(':visible')) {\r\n\t\t\t\t\t\thideArea()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tshowArea()\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// all other areas that have not been clicked but are open\r\n\t\t\t\t\t// should be slid up\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst closest = $(event.target).closest(areaSelector)\r\n\t\t\t\t\tif (area.is(':visible') && closest[0] !== area[0]) {\r\n\t\t\t\t\t\thideArea()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t})\r\n}\r\n\r\nexport default Apps\r\n","/**\r\n * @copyright Copyright (c) 2016 Joas Schilling <coding@schilljs.com>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport $ from 'jquery'\r\nimport { generateOcsUrl } from '@nextcloud/router'\r\n\r\nimport OC from '../OC/index'\r\n\r\n/**\r\n * @param {string} method 'post' or 'delete'\r\n * @param {string} endpoint endpoint\r\n * @param {object} [options] destructuring object\r\n * @param {object} [options.data] option data\r\n * @param {Function} [options.success] success callback\r\n * @param {Function} [options.error] error callback\r\n */\r\nfunction call(method, endpoint, options) {\r\n\tif ((method === 'post' || method === 'delete') && OC.PasswordConfirmation.requiresPasswordConfirmation()) {\r\n\t\tOC.PasswordConfirmation.requirePasswordConfirmation(_.bind(call, this, method, endpoint, options))\r\n\t\treturn\r\n\t}\r\n\r\n\toptions = options || {}\r\n\t$.ajax({\r\n\t\ttype: method.toUpperCase(),\r\n\t\turl: generateOcsUrl('apps/provisioning_api/api/v1/config/apps') + endpoint,\r\n\t\tdata: options.data || {},\r\n\t\tsuccess: options.success,\r\n\t\terror: options.error,\r\n\t})\r\n}\r\n\r\n/**\r\n * @param {object} [options] destructuring object\r\n * @param {Function} [options.success] success callback\r\n * @since 11.0.0\r\n */\r\nexport function getApps(options) {\r\n\tcall('get', '', options)\r\n}\r\n\r\n/**\r\n * @param {string} app app id\r\n * @param {object} [options] destructuring object\r\n * @param {Function} [options.success] success callback\r\n * @param {Function} [options.error] error callback\r\n * @since 11.0.0\r\n */\r\nexport function getKeys(app, options) {\r\n\tcall('get', '/' + app, options)\r\n}\r\n\r\n/**\r\n * @param {string} app app id\r\n * @param {string} key key\r\n * @param {string | Function} defaultValue default value\r\n * @param {object} [options] destructuring object\r\n * @param {Function} [options.success] success callback\r\n * @param {Function} [options.error] error callback\r\n * @since 11.0.0\r\n */\r\nexport function getValue(app, key, defaultValue, options) {\r\n\toptions = options || {}\r\n\toptions.data = {\r\n\t\tdefaultValue,\r\n\t}\r\n\r\n\tcall('get', '/' + app + '/' + key, options)\r\n}\r\n\r\n/**\r\n * @param {string} app app id\r\n * @param {string} key key\r\n * @param {string} value value\r\n * @param {object} [options] destructuring object\r\n * @param {Function} [options.success] success callback\r\n * @param {Function} [options.error] error callback\r\n * @since 11.0.0\r\n */\r\nexport function setValue(app, key, value, options) {\r\n\toptions = options || {}\r\n\toptions.data = {\r\n\t\tvalue,\r\n\t}\r\n\r\n\tcall('post', '/' + app + '/' + key, options)\r\n}\r\n\r\n/**\r\n * @param {string} app app id\r\n * @param {string} key key\r\n * @param {object} [options] destructuring object\r\n * @param {Function} [options.success] success callback\r\n * @param {Function} [options.error] error callback\r\n * @since 11.0.0\r\n */\r\nexport function deleteKey(app, key, options) {\r\n\tcall('delete', '/' + app + '/' + key, options)\r\n}\r\n","/**\r\n * @copyright Copyright (c) 2016 Joas Schilling <coding@schilljs.com>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author Joas Schilling <coding@schilljs.com>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Jörn Friedrich Dreyer <jfd@butonic.de>\r\n * @author Robin Appelman <robin@icewind.nl>\r\n * @author Vincent Petry <vincent@nextcloud.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\n/* eslint-disable */\r\n import { getValue, setValue, getApps, getKeys, deleteKey } from '../OCP/appconfig'\r\n\r\nexport const appConfig = window.oc_appconfig || {}\r\n\r\n/**\r\n * @namespace\r\n * @deprecated 16.0.0 Use OCP.AppConfig instead\r\n */\r\nexport const AppConfig = {\r\n\t/**\r\n\t * @deprecated Use OCP.AppConfig.getValue() instead\r\n\t */\r\n\tgetValue: function(app, key, defaultValue, callback) {\r\n\t\tgetValue(app, key, defaultValue, {\r\n\t\t\tsuccess: callback\r\n\t\t})\r\n\t},\r\n\r\n\t/**\r\n\t * @deprecated Use OCP.AppConfig.setValue() instead\r\n\t */\r\n\tsetValue: function(app, key, value) {\r\n\t\tsetValue(app, key, value)\r\n\t},\r\n\r\n\t/**\r\n\t * @deprecated Use OCP.AppConfig.getApps() instead\r\n\t */\r\n\tgetApps: function(callback) {\r\n\t\tgetApps({\r\n\t\t\tsuccess: callback\r\n\t\t})\r\n\t},\r\n\r\n\t/**\r\n\t * @deprecated Use OCP.AppConfig.getKeys() instead\r\n\t */\r\n\tgetKeys: function(app, callback) {\r\n\t\tgetKeys(app, {\r\n\t\t\tsuccess: callback\r\n\t\t})\r\n\t},\r\n\r\n\t/**\r\n\t * @deprecated Use OCP.AppConfig.deleteKey() instead\r\n\t */\r\n\tdeleteKey: function(app, key) {\r\n\t\tdeleteKey(app, key)\r\n\t}\r\n\r\n}\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nconst appswebroots = (window._oc_appswebroots !== undefined) ? window._oc_appswebroots : false\r\n\r\nexport default appswebroots\r\n","/**\r\n * Copyright (c) 2015\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Julius Härtl <jus@bitgrid.net>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\n/* eslint-disable */\r\nimport _ from 'underscore'\r\nimport { dav } from 'davclient.js'\r\n\r\nconst methodMap = {\r\n\tcreate: 'POST',\r\n\tupdate: 'PROPPATCH',\r\n\tpatch: 'PROPPATCH',\r\n\tdelete: 'DELETE',\r\n\tread: 'PROPFIND'\r\n}\r\n\r\n// Throw an error when a URL is needed, and none is supplied.\r\nfunction urlError() {\r\n\tthrow new Error('A \"url\" property or function must be specified')\r\n}\r\n\r\n/**\r\n * Convert a single propfind result to JSON\r\n *\r\n * @param {Object} result\r\n * @param {Object} davProperties properties mapping\r\n */\r\nfunction parsePropFindResult(result, davProperties) {\r\n\tif (_.isArray(result)) {\r\n\t\treturn _.map(result, function(subResult) {\r\n\t\t\treturn parsePropFindResult(subResult, davProperties)\r\n\t\t})\r\n\t}\r\n\tvar props = {\r\n\t\thref: result.href\r\n\t}\r\n\r\n\t_.each(result.propStat, function(propStat) {\r\n\t\tif (propStat.status !== 'HTTP/1.1 200 OK') {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tfor (var key in propStat.properties) {\r\n\t\t\tvar propKey = key\r\n\t\t\tif (key in davProperties) {\r\n\t\t\t\tpropKey = davProperties[key]\r\n\t\t\t}\r\n\t\t\tprops[propKey] = propStat.properties[key]\r\n\t\t}\r\n\t})\r\n\r\n\tif (!props.id) {\r\n\t\t// parse id from href\r\n\t\tprops.id = parseIdFromLocation(props.href)\r\n\t}\r\n\r\n\treturn props\r\n}\r\n\r\n/**\r\n * Parse ID from location\r\n *\r\n * @param {string} url url\r\n * @returns {string} id\r\n */\r\nfunction parseIdFromLocation(url) {\r\n\tvar queryPos = url.indexOf('?')\r\n\tif (queryPos > 0) {\r\n\t\turl = url.substr(0, queryPos)\r\n\t}\r\n\r\n\tvar parts = url.split('/')\r\n\tvar result\r\n\tdo {\r\n\t\tresult = parts[parts.length - 1]\r\n\t\tparts.pop()\r\n\t\t// note: first result can be empty when there is a trailing slash,\r\n\t\t// so we take the part before that\r\n\t} while (!result && parts.length > 0)\r\n\r\n\treturn result\r\n}\r\n\r\nfunction isSuccessStatus(status) {\r\n\treturn status >= 200 && status <= 299\r\n}\r\n\r\nfunction convertModelAttributesToDavProperties(attrs, davProperties) {\r\n\tvar props = {}\r\n\tvar key\r\n\tfor (key in attrs) {\r\n\t\tvar changedProp = davProperties[key]\r\n\t\tvar value = attrs[key]\r\n\t\tif (!changedProp) {\r\n\t\t\tconsole.warn('No matching DAV property for property \"' + key)\r\n\t\t\tchangedProp = key\r\n\t\t}\r\n\t\tif (_.isBoolean(value) || _.isNumber(value)) {\r\n\t\t\t// convert to string\r\n\t\t\tvalue = '' + value\r\n\t\t}\r\n\t\tprops[changedProp] = value\r\n\t}\r\n\treturn props\r\n}\r\n\r\nfunction callPropFind(client, options, model, headers) {\r\n\treturn client.propFind(\r\n\t\toptions.url,\r\n\t\t_.values(options.davProperties) || [],\r\n\t\toptions.depth,\r\n\t\theaders\r\n\t).then(function(response) {\r\n\t\tif (isSuccessStatus(response.status)) {\r\n\t\t\tif (_.isFunction(options.success)) {\r\n\t\t\t\tvar propsMapping = _.invert(options.davProperties)\r\n\t\t\t\tvar results = parsePropFindResult(response.body, propsMapping)\r\n\t\t\t\tif (options.depth > 0) {\r\n\t\t\t\t\t// discard root entry\r\n\t\t\t\t\tresults.shift()\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions.success(results)\r\n\r\n\t\t\t}\r\n\t\t} else if (_.isFunction(options.error)) {\r\n\t\t\toptions.error(response)\r\n\t\t}\r\n\t})\r\n}\r\n\r\nfunction callPropPatch(client, options, model, headers) {\r\n\treturn client.propPatch(\r\n\t\toptions.url,\r\n\t\tconvertModelAttributesToDavProperties(model.changed, options.davProperties),\r\n\t\theaders\r\n\t).then(function(result) {\r\n\t\tif (isSuccessStatus(result.status)) {\r\n\t\t\tif (_.isFunction(options.success)) {\r\n\t\t\t\t// pass the object's own values because the server\r\n\t\t\t\t// does not return the updated model\r\n\t\t\t\toptions.success(model.toJSON())\r\n\t\t\t}\r\n\t\t} else if (_.isFunction(options.error)) {\r\n\t\t\toptions.error(result)\r\n\t\t}\r\n\t})\r\n\r\n}\r\n\r\nfunction callMkCol(client, options, model, headers) {\r\n\t// call MKCOL without data, followed by PROPPATCH\r\n\treturn client.request(\r\n\t\toptions.type,\r\n\t\toptions.url,\r\n\t\theaders,\r\n\t\tnull\r\n\t).then(function(result) {\r\n\t\tif (!isSuccessStatus(result.status)) {\r\n\t\t\tif (_.isFunction(options.error)) {\r\n\t\t\t\toptions.error(result)\r\n\t\t\t}\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tcallPropPatch(client, options, model, headers)\r\n\t})\r\n}\r\n\r\nfunction callMethod(client, options, model, headers) {\r\n\theaders['Content-Type'] = 'application/json'\r\n\treturn client.request(\r\n\t\toptions.type,\r\n\t\toptions.url,\r\n\t\theaders,\r\n\t\toptions.data\r\n\t).then(function(result) {\r\n\t\tif (!isSuccessStatus(result.status)) {\r\n\t\t\tif (_.isFunction(options.error)) {\r\n\t\t\t\toptions.error(result)\r\n\t\t\t}\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (_.isFunction(options.success)) {\r\n\t\t\tif (options.type === 'PUT' || options.type === 'POST' || options.type === 'MKCOL') {\r\n\t\t\t\t// pass the object's own values because the server\r\n\t\t\t\t// does not return anything\r\n\t\t\t\tvar responseJson = result.body || model.toJSON()\r\n\t\t\t\tvar locationHeader = result.xhr.getResponseHeader('Content-Location')\r\n\t\t\t\tif (options.type === 'POST' && locationHeader) {\r\n\t\t\t\t\tresponseJson.id = parseIdFromLocation(locationHeader)\r\n\t\t\t\t}\r\n\t\t\t\toptions.success(responseJson)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t// if multi-status, parse\r\n\t\t\tif (result.status === 207) {\r\n\t\t\t\tvar propsMapping = _.invert(options.davProperties)\r\n\t\t\t\toptions.success(parsePropFindResult(result.body, propsMapping))\r\n\t\t\t} else {\r\n\t\t\t\toptions.success(result.body)\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n}\r\n\r\nexport const davCall = (options, model) => {\r\n\tvar client = new dav.Client({\r\n\t\tbaseUrl: options.url,\r\n\t\txmlNamespaces: _.extend({\r\n\t\t\t'DAV:': 'd',\r\n\t\t\t'http://owncloud.org/ns': 'oc'\r\n\t\t}, options.xmlNamespaces || {})\r\n\t})\r\n\tclient.resolveUrl = function() {\r\n\t\treturn options.url\r\n\t}\r\n\tvar headers = _.extend({\r\n\t\t'X-Requested-With': 'XMLHttpRequest',\r\n\t\t'requesttoken': OC.requestToken\r\n\t}, options.headers)\r\n\tif (options.type === 'PROPFIND') {\r\n\t\treturn callPropFind(client, options, model, headers)\r\n\t} else if (options.type === 'PROPPATCH') {\r\n\t\treturn callPropPatch(client, options, model, headers)\r\n\t} else if (options.type === 'MKCOL') {\r\n\t\treturn callMkCol(client, options, model, headers)\r\n\t} else {\r\n\t\treturn callMethod(client, options, model, headers)\r\n\t}\r\n}\r\n\r\n/**\r\n * DAV transport\r\n */\r\nexport const davSync = Backbone => (method, model, options) => {\r\n\tvar params = { type: methodMap[method] || method }\r\n\tvar isCollection = (model instanceof Backbone.Collection)\r\n\r\n\tif (method === 'update') {\r\n\t\t// if a model has an inner collection, it must define an\r\n\t\t// attribute \"hasInnerCollection\" that evaluates to true\r\n\t\tif (model.hasInnerCollection) {\r\n\t\t\t// if the model itself is a Webdav collection, use MKCOL\r\n\t\t\tparams.type = 'MKCOL'\r\n\t\t} else if (model.usePUT || (model.collection && model.collection.usePUT)) {\r\n\t\t\t// use PUT instead of PROPPATCH\r\n\t\t\tparams.type = 'PUT'\r\n\t\t}\r\n\t}\r\n\r\n\t// Ensure that we have a URL.\r\n\tif (!options.url) {\r\n\t\tparams.url = _.result(model, 'url') || urlError()\r\n\t}\r\n\r\n\t// Ensure that we have the appropriate request data.\r\n\tif (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {\r\n\t\tparams.data = JSON.stringify(options.attrs || model.toJSON(options))\r\n\t}\r\n\r\n\t// Don't process data on a non-GET request.\r\n\tif (params.type !== 'PROPFIND') {\r\n\t\tparams.processData = false\r\n\t}\r\n\r\n\tif (params.type === 'PROPFIND' || params.type === 'PROPPATCH') {\r\n\t\tvar davProperties = model.davProperties\r\n\t\tif (!davProperties && model.model) {\r\n\t\t\t// use dav properties from model in case of collection\r\n\t\t\tdavProperties = model.model.prototype.davProperties\r\n\t\t}\r\n\t\tif (davProperties) {\r\n\t\t\tif (_.isFunction(davProperties)) {\r\n\t\t\t\tparams.davProperties = davProperties.call(model)\r\n\t\t\t} else {\r\n\t\t\t\tparams.davProperties = davProperties\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tparams.davProperties = _.extend(params.davProperties || {}, options.davProperties)\r\n\r\n\t\tif (_.isUndefined(options.depth)) {\r\n\t\t\tif (isCollection) {\r\n\t\t\t\toptions.depth = 1\r\n\t\t\t} else {\r\n\t\t\t\toptions.depth = 0\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Pass along `textStatus` and `errorThrown` from jQuery.\r\n\tvar error = options.error\r\n\toptions.error = function(xhr, textStatus, errorThrown) {\r\n\t\toptions.textStatus = textStatus\r\n\t\toptions.errorThrown = errorThrown\r\n\t\tif (error) {\r\n\t\t\terror.call(options.context, xhr, textStatus, errorThrown)\r\n\t\t}\r\n\t}\r\n\r\n\t// Make the request, allowing the user to override any Ajax options.\r\n\tvar xhr = options.xhr = Backbone.davCall(_.extend(params, options), model)\r\n\tmodel.trigger('request', model, xhr, options)\r\n\treturn xhr\r\n}\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport VendorBackbone from 'backbone'\r\nimport { davCall, davSync } from './backbone-webdav'\r\n\r\nconst Backbone = VendorBackbone.noConflict()\r\n\r\n// Patch Backbone for DAV\r\nObject.assign(Backbone, {\r\n\tdavCall,\r\n\tdavSync: davSync(Backbone),\r\n})\r\n\r\nexport default Backbone\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nconst config = window._oc_config || {}\r\n\r\nexport default config\r\n","/**\r\n * @copyright 2017 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Roeland Jago Douma <roeland@famdouma.nl>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\n/* eslint-disable */\r\nimport _ from 'underscore'\r\nimport $ from 'jquery'\r\nimport { Collection, Model, View } from 'backbone'\r\n\r\nimport OC from './index'\r\n\r\n/**\r\n * @class Contact\r\n */\r\nconst Contact = Model.extend({\r\n\tdefaults: {\r\n\t\tfullName: '',\r\n\t\tlastMessage: '',\r\n\t\tactions: [],\r\n\t\thasOneAction: false,\r\n\t\thasTwoActions: false,\r\n\t\thasManyActions: false\r\n\t},\r\n\r\n\t/**\r\n\t * @returns {undefined}\r\n\t */\r\n\tinitialize: function() {\r\n\t\t// Add needed property for easier template rendering\r\n\t\tif (this.get('actions').length === 0) {\r\n\t\t\tthis.set('hasOneAction', true)\r\n\t\t} else if (this.get('actions').length === 1) {\r\n\t\t\tthis.set('hasTwoActions', true)\r\n\t\t\tthis.set('secondAction', this.get('actions')[0])\r\n\t\t} else {\r\n\t\t\tthis.set('hasManyActions', true)\r\n\t\t}\r\n\r\n\t\tconst fullName = this.get('fullName')\r\n\t\tif (this.get('avatar') && fullName) {\r\n\t\t\tthis.set('avatarLabel', t('core', 'Avatar of {fullName}', { fullName }))\r\n\t\t}\r\n\t}\r\n})\r\n\r\n/**\r\n * @class ContactCollection\r\n * @private\r\n */\r\nconst ContactCollection = Collection.extend({\r\n\tmodel: Contact\r\n})\r\n\r\n/**\r\n * @class ContactsListView\r\n * @private\r\n */\r\nconst ContactsListView = View.extend({\r\n\r\n\t/** @type {ContactCollection} */\r\n\t_collection: undefined,\r\n\r\n\t/** @type {array} */\r\n\t_subViews: [],\r\n\r\n\t/**\r\n\t * @param {object} options\r\n\t * @returns {undefined}\r\n\t */\r\n\tinitialize: function(options) {\r\n\t\tthis._collection = options.collection\r\n\t},\r\n\r\n\t/**\r\n\t * @returns {self}\r\n\t */\r\n\trender: function() {\r\n\t\tvar self = this\r\n\t\tself.$el.html('')\r\n\t\tself._subViews = []\r\n\r\n\t\tself._collection.forEach(function(contact) {\r\n\t\t\tvar item = new ContactsListItemView({\r\n\t\t\t\tmodel: contact\r\n\t\t\t})\r\n\t\t\titem.render()\r\n\t\t\tself.$el.append(item.$el)\r\n\t\t\titem.on('toggle:actionmenu', self._onChildActionMenuToggle, self)\r\n\t\t\tself._subViews.push(item)\r\n\t\t})\r\n\r\n\t\treturn self\r\n\t},\r\n\r\n\t/**\r\n\t * Event callback to propagate opening (another) entry's action menu\r\n\t *\r\n\t * @param {type} $src\r\n\t * @returns {undefined}\r\n\t */\r\n\t_onChildActionMenuToggle: function($src) {\r\n\t\tthis._subViews.forEach(function(view) {\r\n\t\t\tview.trigger('parent:toggle:actionmenu', $src)\r\n\t\t})\r\n\t}\r\n})\r\n\r\n/**\r\n * @class ContactsListItemView\r\n * @private\r\n */\r\nconst ContactsListItemView = View.extend({\r\n\r\n\t/** @type {string} */\r\n\tclassName: 'contact',\r\n\r\n\t/** @type {undefined|function} */\r\n\t_template: undefined,\r\n\r\n\t/** @type {Contact} */\r\n\t_model: undefined,\r\n\r\n\t/** @type {boolean} */\r\n\t_actionMenuShown: false,\r\n\r\n\tevents: {\r\n\t\t'click .icon-more': '_onToggleActionsMenu'\r\n\t},\r\n\r\n\tcontactTemplate: require('./contactsmenu/contact.handlebars'),\r\n\r\n\t/**\r\n\t * @param {object} data\r\n\t * @returns {undefined}\r\n\t */\r\n\ttemplate: function(data) {\r\n\t\treturn this.contactTemplate(data)\r\n\t},\r\n\r\n\t/**\r\n\t * @param {object} options\r\n\t * @returns {undefined}\r\n\t */\r\n\tinitialize: function(options) {\r\n\t\tthis._model = options.model\r\n\t\tthis.on('parent:toggle:actionmenu', this._onOtherActionMenuOpened, this)\r\n\t},\r\n\r\n\t/**\r\n\t * @returns {self}\r\n\t */\r\n\trender: function() {\r\n\t\tthis.$el.html(this.template({\r\n\t\t\tcontact: this._model.toJSON()\r\n\t\t}))\r\n\t\tthis.delegateEvents()\r\n\r\n\t\t// Show placeholder if no avatar is available (avatar is rendered as img, not div)\r\n\t\tthis.$('div.avatar').imageplaceholder(this._model.get('fullName'))\r\n\r\n\t\t// Show tooltip for top action\r\n\t\tthis.$('.top-action').tooltip({ placement: 'left' })\r\n\t\t// Show tooltip for second action\r\n\t\tthis.$('.second-action').tooltip({ placement: 'left' })\r\n\r\n\t\treturn this\r\n\t},\r\n\r\n\t/**\r\n\t * Toggle the visibility of the action popover menu\r\n\t *\r\n\t * @private\r\n\t * @returns {undefined}\r\n\t */\r\n\t_onToggleActionsMenu: function() {\r\n\t\tthis._actionMenuShown = !this._actionMenuShown\r\n\t\tif (this._actionMenuShown) {\r\n\t\t\tthis.$('.menu').show()\r\n\t\t} else {\r\n\t\t\tthis.$('.menu').hide()\r\n\t\t}\r\n\t\tthis.trigger('toggle:actionmenu', this.$el)\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t * @argument {jQuery} $src\r\n\t * @returns {undefined}\r\n\t */\r\n\t_onOtherActionMenuOpened: function($src) {\r\n\t\tif (this.$el.is($src)) {\r\n\t\t\t// Ignore\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis._actionMenuShown = false\r\n\t\tthis.$('.menu').hide()\r\n\t}\r\n})\r\n\r\n/**\r\n * @class ContactsMenuView\r\n * @private\r\n */\r\nconst ContactsMenuView = View.extend({\r\n\r\n\t/** @type {undefined|function} */\r\n\t_loadingTemplate: undefined,\r\n\r\n\t/** @type {undefined|function} */\r\n\t_errorTemplate: undefined,\r\n\r\n\t/** @type {undefined|function} */\r\n\t_contentTemplate: undefined,\r\n\r\n\t/** @type {undefined|function} */\r\n\t_contactsTemplate: undefined,\r\n\r\n\t/** @type {undefined|ContactCollection} */\r\n\t_contacts: undefined,\r\n\r\n\t/** @type {string} */\r\n\t_searchTerm: '',\r\n\r\n\tevents: {\r\n\t\t'input #contactsmenu-search': '_onSearch'\r\n\t},\r\n\r\n\ttemplates: {\r\n\t\tloading: require('./contactsmenu/loading.handlebars'),\r\n\t\terror: require('./contactsmenu/error.handlebars'),\r\n\t\tmenu: require('./contactsmenu/menu.handlebars'),\r\n\t\tlist: require('./contactsmenu/list.handlebars')\r\n\t},\r\n\r\n\t/**\r\n\t * @returns {undefined}\r\n\t */\r\n\t_onSearch: _.debounce(function(e) {\r\n\t\tvar searchTerm = this.$('#contactsmenu-search').val()\r\n\t\t// IE11 triggers an 'input' event after the view has been rendered\r\n\t\t// resulting in an endless loading loop. To prevent this, we remember\r\n\t\t// the last search term to savely ignore some events\r\n\t\t// See https://github.com/nextcloud/server/issues/5281\r\n\t\tif (searchTerm !== this._searchTerm) {\r\n\t\t\tthis.trigger('search', this.$('#contactsmenu-search').val())\r\n\t\t\tthis._searchTerm = searchTerm\r\n\t\t}\r\n\t}, 700),\r\n\r\n\t/**\r\n\t * @param {object} data\r\n\t * @returns {string}\r\n\t */\r\n\tloadingTemplate: function(data) {\r\n\t\treturn this.templates.loading(data)\r\n\t},\r\n\r\n\t/**\r\n\t * @param {object} data\r\n\t * @returns {string}\r\n\t */\r\n\terrorTemplate: function(data) {\r\n\t\treturn this.templates.error(\r\n\t\t\t_.extend({\r\n\t\t\t\tcouldNotLoadText: t('core', 'Could not load your contacts')\r\n\t\t\t}, data)\r\n\t\t)\r\n\t},\r\n\r\n\t/**\r\n\t * @param {object} data\r\n\t * @returns {string}\r\n\t */\r\n\tcontentTemplate: function(data) {\r\n\t\treturn this.templates.menu(\r\n\t\t\t_.extend({\r\n\t\t\t\tsearchContactsText: t('core', 'Search contacts …')\r\n\t\t\t}, data)\r\n\t\t)\r\n\t},\r\n\r\n\t/**\r\n\t * @param {object} data\r\n\t * @returns {string}\r\n\t */\r\n\tcontactsTemplate: function(data) {\r\n\t\treturn this.templates.list(\r\n\t\t\t_.extend({\r\n\t\t\t\tnoContactsFoundText: t('core', 'No contacts found'),\r\n\t\t\t\tshowAllContactsText: t('core', 'Show all contacts …'),\r\n\t\t\t\tcontactsAppMgmtText: t('core', 'Install the Contacts app')\r\n\t\t\t}, data)\r\n\t\t)\r\n\t},\r\n\r\n\t/**\r\n\t * @param {object} options\r\n\t * @returns {undefined}\r\n\t */\r\n\tinitialize: function(options) {\r\n\t\tthis.options = options\r\n\t},\r\n\r\n\t/**\r\n\t * @param {string} text\r\n\t * @returns {undefined}\r\n\t */\r\n\tshowLoading: function(text) {\r\n\t\tthis.render()\r\n\t\tthis._contacts = undefined\r\n\t\tthis.$('.content').html(this.loadingTemplate({\r\n\t\t\tloadingText: text\r\n\t\t}))\r\n\t},\r\n\r\n\t/**\r\n\t * @returns {undefined}\r\n\t */\r\n\tshowError: function() {\r\n\t\tthis.render()\r\n\t\tthis._contacts = undefined\r\n\t\tthis.$('.content').html(this.errorTemplate())\r\n\t},\r\n\r\n\t/**\r\n\t * @param {object} viewData\r\n\t * @param {string} searchTerm\r\n\t * @returns {undefined}\r\n\t */\r\n\tshowContacts: function(viewData, searchTerm) {\r\n\t\tthis._contacts = viewData.contacts\r\n\t\tthis.render({\r\n\t\t\tcontacts: viewData.contacts\r\n\t\t})\r\n\r\n\t\tvar list = new ContactsListView({\r\n\t\t\tcollection: viewData.contacts\r\n\t\t})\r\n\t\tlist.render()\r\n\t\tthis.$('.content').html(this.contactsTemplate({\r\n\t\t\tcontacts: viewData.contacts,\r\n\t\t\tsearchTerm: searchTerm,\r\n\t\t\tcontactsAppEnabled: viewData.contactsAppEnabled,\r\n\t\t\tcontactsAppURL: OC.generateUrl('/apps/contacts'),\r\n\t\t\tcanInstallApp: OC.isUserAdmin(),\r\n\t\t\tcontactsAppMgmtURL: OC.generateUrl('/settings/apps/social/contacts')\r\n\t\t}))\r\n\t\tthis.$('#contactsmenu-contacts').html(list.$el)\r\n\t},\r\n\r\n\t/**\r\n\t * @param {object} data\r\n\t * @returns {self}\r\n\t */\r\n\trender: function(data) {\r\n\t\tvar searchVal = this.$('#contactsmenu-search').val()\r\n\t\tthis.$el.html(this.contentTemplate(data))\r\n\r\n\t\t// Focus search\r\n\t\tthis.$('#contactsmenu-search').val(searchVal)\r\n\t\tthis.$('#contactsmenu-search').focus()\r\n\t\treturn this\r\n\t}\r\n\r\n})\r\n\r\n/**\r\n * @param {Object} options\r\n * @param {string} options.el\r\n * @class ContactsMenu\r\n * @memberOf OC\r\n */\r\nconst ContactsMenu = function(options) {\r\n\tthis.initialize(options)\r\n}\r\n\r\nContactsMenu.prototype = {\r\n\t/** @type {string} */\r\n\t$el: undefined,\r\n\r\n\t/** @type {ContactsMenuView} */\r\n\t_view: undefined,\r\n\r\n\t/** @type {Promise} */\r\n\t_contactsPromise: undefined,\r\n\r\n\t/**\r\n\t * @param {Object} options\r\n\t * @param {string} options.el - the selector of the element to render the menu in\r\n\t * @returns {undefined}\r\n\t */\r\n\tinitialize: function(options) {\r\n\t\tthis.$el = $(options.el)\r\n\r\n\t\tthis._view = new ContactsMenuView({\r\n\t\t\tel: this.$el,\r\n\t\t})\r\n\r\n\t\tthis._view.on('search', function(searchTerm) {\r\n\t\t\tthis.loadContacts(searchTerm)\r\n\t\t}, this)\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t * @param {string|undefined} searchTerm\r\n\t * @returns {Promise}\r\n\t */\r\n\t_getContacts: function(searchTerm) {\r\n\t\tvar url = OC.generateUrl('/contactsmenu/contacts')\r\n\t\treturn Promise.resolve($.ajax(url, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\tfilter: searchTerm\r\n\t\t\t}\r\n\t\t}))\r\n\t},\r\n\r\n\t/**\r\n\t * @param {string|undefined} searchTerm\r\n\t * @returns {undefined}\r\n\t */\r\n\tloadContacts: function(searchTerm) {\r\n\t\tvar self = this\r\n\r\n\t\tif (!self._contactsPromise) {\r\n\t\t\tself._contactsPromise = self._getContacts(searchTerm)\r\n\t\t}\r\n\r\n\t\tif (_.isUndefined(searchTerm) || searchTerm === '') {\r\n\t\t\tself._view.showLoading(t('core', 'Loading your contacts …'))\r\n\t\t} else {\r\n\t\t\tself._view.showLoading(t('core', 'Looking for {term} …', {\r\n\t\t\t\tterm: searchTerm\r\n\t\t\t}))\r\n\t\t}\r\n\t\treturn self._contactsPromise.then(function(data) {\r\n\t\t\t// Convert contact entries to Backbone collection\r\n\t\t\tdata.contacts = new ContactCollection(data.contacts)\r\n\r\n\t\t\tself._view.showContacts(data, searchTerm)\r\n\t\t}, function(e) {\r\n\t\t\tself._view.showError()\r\n\t\t\tconsole.error('There was an error loading your contacts', e)\r\n\t\t}).then(function() {\r\n\t\t\t// Delete promise, so that contacts are fetched again when the\r\n\t\t\t// menu is opened the next time.\r\n\t\t\tdelete self._contactsPromise\r\n\t\t}).catch(console.error.bind(this))\r\n\t}\r\n}\r\n\r\nexport default ContactsMenu\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author Joas Schilling <coding@schilljs.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nconst rawUid = document\r\n\t.getElementsByTagName('head')[0]\r\n\t.getAttribute('data-user')\r\nconst displayName = document\r\n\t.getElementsByTagName('head')[0]\r\n\t.getAttribute('data-user-displayname')\r\n\r\nexport const currentUser = rawUid !== undefined ? rawUid : false\r\n\r\nexport const getCurrentUser = () => {\r\n\treturn {\r\n\t\tuid: currentUser,\r\n\t\tdisplayName,\r\n\t}\r\n}\r\n","/**\r\n * @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nexport default class Search {\r\n\r\n\t/**\r\n\t * @deprecated 20.0.0, will be removed in Nextcloud 22\r\n\t */\r\n\tconstructor() {\r\n\t\tconsole.warn('OCA.Search is deprecated. Please use the unified search API instead')\r\n\t}\r\n\r\n}\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport Search from './search'\r\n\r\n/**\r\n * Namespace for apps\r\n *\r\n * @namespace OCA\r\n */\r\nexport default {\r\n\t/**\r\n\t * @deprecated 20.0.0, will be removed in Nextcloud 22\r\n\t */\r\n\tSearch,\r\n}\r\n","/**\r\n * @copyright 2022 Christopher Ng <chrng8@gmail.com>\r\n *\r\n * @author Christopher Ng <chrng8@gmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\n/**\r\n * Return whether the DOM event is an accessible mouse or keyboard element activation\r\n *\r\n * @param {Event} event DOM event\r\n *\r\n * @return {boolean}\r\n */\r\nexport const isA11yActivation = (event) => {\r\n\tif (event.type === 'click') {\r\n\t\treturn true\r\n\t}\r\n\tif (event.type === 'keydown' && event.key === 'Enter') {\r\n\t\treturn true\r\n\t}\r\n\treturn false\r\n}\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @copyright Copyright (c) 2019 Gary Kim <gary@garykim.dev>\r\n *\r\n * @author Bartek Przybylski <bart.p.pl@gmail.com>\r\n * @author Christopher Schäpers <kondou@ts.unde.re>\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author Daniel Calviño Sánchez <danxuliu@gmail.com>\r\n * @author Daniel Kesselberg <mail@danielkesselberg.de>\r\n * @author Florian Schunk <florian.schunk@rwth-aachen.de>\r\n * @author Gary Kim <gary@garykim.dev>\r\n * @author Hendrik Leppelsack <hendrik@leppelsack.de>\r\n * @author Jan-Christoph Borchardt <hey@jancborchardt.net>\r\n * @author Joas Schilling <coding@schilljs.com>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Jörn Friedrich Dreyer <jfd@butonic.de>\r\n * @author Julius Härtl <jus@bitgrid.net>\r\n * @author Loïc Hermann <loic.hermann@sciam.fr>\r\n * @author Morris Jobke <hey@morrisjobke.de>\r\n * @author Olivier Paroz <github@oparoz.com>\r\n * @author Robin Appelman <robin@icewind.nl>\r\n * @author Roeland Jago Douma <roeland@famdouma.nl>\r\n * @author Sujith Haridasan <Sujith_Haridasan@mentor.com>\r\n * @author Thomas Citharel <nextcloud@tcit.fr>\r\n * @author Thomas Müller <thomas.mueller@tmit.eu>\r\n * @author Thomas Tanghus <thomas@tanghus.net>\r\n * @author Vincent Petry <vincent@nextcloud.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\n/* eslint-disable */\r\nimport _ from 'underscore'\r\nimport $ from 'jquery'\r\n\r\nimport OC from './index'\r\nimport OCA from '../OCA/index'\r\nimport { isA11yActivation } from '../Util/a11y'\r\n\r\n/**\r\n * this class to ease the usage of jquery dialogs\r\n */\r\nconst Dialogs = {\r\n\t// dialog button types\r\n\tYES_NO_BUTTONS: 70,\r\n\tOK_BUTTONS: 71,\r\n\r\n\tFILEPICKER_TYPE_CHOOSE: 1,\r\n\tFILEPICKER_TYPE_MOVE: 2,\r\n\tFILEPICKER_TYPE_COPY: 3,\r\n\tFILEPICKER_TYPE_COPY_MOVE: 4,\r\n\tFILEPICKER_TYPE_CUSTOM: 5,\r\n\r\n\t// used to name each dialog\r\n\tdialogsCounter: 0,\r\n\r\n\t/**\r\n\t * displays alert dialog\r\n\t * @param {string} text content of dialog\r\n\t * @param {string} title dialog title\r\n\t * @param {function} callback which will be triggered when user presses OK\r\n\t * @param {boolean} [modal] make the dialog modal\r\n\t */\r\n\talert: function(text, title, callback, modal) {\r\n\t\tthis.message(\r\n\t\t\ttext,\r\n\t\t\ttitle,\r\n\t\t\t'alert',\r\n\t\t\tDialogs.OK_BUTTON,\r\n\t\t\tcallback,\r\n\t\t\tmodal\r\n\t\t)\r\n\t},\r\n\t/**\r\n\t * displays info dialog\r\n\t * @param {string} text content of dialog\r\n\t * @param {string} title dialog title\r\n\t * @param {function} callback which will be triggered when user presses OK\r\n\t * @param {boolean} [modal] make the dialog modal\r\n\t */\r\n\tinfo: function(text, title, callback, modal) {\r\n\t\tthis.message(text, title, 'info', Dialogs.OK_BUTTON, callback, modal)\r\n\t},\r\n\r\n\t/**\r\n\t * displays confirmation dialog\r\n\t * @param {string} text content of dialog\r\n\t * @param {string} title dialog title\r\n\t * @param {function} callback which will be triggered when user presses OK (true or false would be passed to callback respectively)\r\n\t * @param {boolean} [modal] make the dialog modal\r\n\t * @returns {Promise}\r\n\t */\r\n\tconfirm: function(text, title, callback, modal) {\r\n\t\treturn this.message(\r\n\t\t\ttext,\r\n\t\t\ttitle,\r\n\t\t\t'notice',\r\n\t\t\tDialogs.YES_NO_BUTTONS,\r\n\t\t\tcallback,\r\n\t\t\tmodal\r\n\t\t)\r\n\t},\r\n\t/**\r\n\t * displays confirmation dialog\r\n\t * @param {string} text content of dialog\r\n\t * @param {string} title dialog title\r\n\t * @param {(number|{type: number, confirm: string, cancel: string, confirmClasses: string})} buttons text content of buttons\r\n\t * @param {function} callback which will be triggered when user presses OK (true or false would be passed to callback respectively)\r\n\t * @param {boolean} [modal] make the dialog modal\r\n\t * @returns {Promise}\r\n\t */\r\n\tconfirmDestructive: function(text, title, buttons, callback, modal) {\r\n\t\treturn this.message(\r\n\t\t\ttext,\r\n\t\t\ttitle,\r\n\t\t\t'none',\r\n\t\t\tbuttons,\r\n\t\t\tcallback,\r\n\t\t\tmodal === undefined ? true : modal\r\n\t\t)\r\n\t},\r\n\t/**\r\n\t * displays confirmation dialog\r\n\t * @param {string} text content of dialog\r\n\t * @param {string} title dialog title\r\n\t * @param {function} callback which will be triggered when user presses OK (true or false would be passed to callback respectively)\r\n\t * @param {boolean} [modal] make the dialog modal\r\n\t * @returns {Promise}\r\n\t */\r\n\tconfirmHtml: function(text, title, callback, modal) {\r\n\t\treturn this.message(\r\n\t\t\ttext,\r\n\t\t\ttitle,\r\n\t\t\t'notice',\r\n\t\t\tDialogs.YES_NO_BUTTONS,\r\n\t\t\tcallback,\r\n\t\t\tmodal,\r\n\t\t\ttrue\r\n\t\t)\r\n\t},\r\n\t/**\r\n\t * displays prompt dialog\r\n\t * @param {string} text content of dialog\r\n\t * @param {string} title dialog title\r\n\t * @param {function} callback which will be triggered when user presses OK (true or false would be passed to callback respectively)\r\n\t * @param {boolean} [modal] make the dialog modal\r\n\t * @param {string} name name of the input field\r\n\t * @param {boolean} password whether the input should be a password input\r\n\t * @returns {Promise}\r\n\t */\r\n\tprompt: function(text, title, callback, modal, name, password) {\r\n\t\treturn $.when(this._getMessageTemplate()).then(function($tmpl) {\r\n\t\t\tvar dialogName = 'oc-dialog-' + Dialogs.dialogsCounter + '-content'\r\n\t\t\tvar dialogId = '#' + dialogName\r\n\t\t\tvar $dlg = $tmpl.octemplate({\r\n\t\t\t\tdialog_name: dialogName,\r\n\t\t\t\ttitle: title,\r\n\t\t\t\tmessage: text,\r\n\t\t\t\ttype: 'notice'\r\n\t\t\t})\r\n\t\t\tvar input = $('<input/>')\r\n\t\t\tinput.attr('type', password ? 'password' : 'text').attr('id', dialogName + '-input').attr('placeholder', name)\r\n\t\t\tvar label = $('<label/>').attr('for', dialogName + '-input').text(name + ': ')\r\n\t\t\t$dlg.append(label)\r\n\t\t\t$dlg.append(input)\r\n\t\t\tif (modal === undefined) {\r\n\t\t\t\tmodal = false\r\n\t\t\t}\r\n\t\t\t$('body').append($dlg)\r\n\r\n\t\t\t// wrap callback in _.once():\r\n\t\t\t// only call callback once and not twice (button handler and close\r\n\t\t\t// event) but call it for the close event, if ESC or the x is hit\r\n\t\t\tif (callback !== undefined) {\r\n\t\t\t\tcallback = _.once(callback)\r\n\t\t\t}\r\n\r\n\t\t\tvar buttonlist = [{\r\n\t\t\t\ttext: t('core', 'No'),\r\n\t\t\t\tclick: function() {\r\n\t\t\t\t\tif (callback !== undefined) {\r\n\t\t\t\t\t\t// eslint-disable-next-line standard/no-callback-literal\r\n\t\t\t\t\t\tcallback(false, input.val())\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$(dialogId).ocdialog('close')\r\n\t\t\t\t}\r\n\t\t\t}, {\r\n\t\t\t\ttext: t('core', 'Yes'),\r\n\t\t\t\tclick: function() {\r\n\t\t\t\t\tif (callback !== undefined) {\r\n\t\t\t\t\t\t// eslint-disable-next-line standard/no-callback-literal\r\n\t\t\t\t\t\tcallback(true, input.val())\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$(dialogId).ocdialog('close')\r\n\t\t\t\t},\r\n\t\t\t\tdefaultButton: true\r\n\t\t\t}]\r\n\r\n\t\t\t$(dialogId).ocdialog({\r\n\t\t\t\tcloseOnEscape: true,\r\n\t\t\t\tmodal: modal,\r\n\t\t\t\tbuttons: buttonlist,\r\n\t\t\t\tclose: function() {\r\n\t\t\t\t\t// callback is already fired if Yes/No is clicked directly\r\n\t\t\t\t\tif (callback !== undefined) {\r\n\t\t\t\t\t\t// eslint-disable-next-line standard/no-callback-literal\r\n\t\t\t\t\t\tcallback(false, input.val())\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tinput.focus()\r\n\t\t\tDialogs.dialogsCounter++\r\n\t\t})\r\n\t},\r\n\t/**\r\n\t * show a file picker to pick a file from\r\n\t *\r\n\t * In order to pick several types of mime types they need to be passed as an\r\n\t * array of strings.\r\n\t *\r\n\t * When no mime type filter is given only files can be selected. In order to\r\n\t * be able to select both files and folders \"['*', 'httpd/unix-directory']\"\r\n\t * should be used instead.\r\n\t *\r\n\t * @param {string} title dialog title\r\n\t * @param {function} callback which will be triggered when user presses Choose\r\n\t * @param {boolean} [multiselect] whether it should be possible to select multiple files\r\n\t * @param {string[]} [mimetypeFilter] mimetype to filter by - directories will always be included\r\n\t * @param {boolean} [modal] make the dialog modal\r\n\t * @param {string} [type] Type of file picker : Choose, copy, move, copy and move\r\n\t * @param {string} [path] path to the folder that the the file can be picket from\r\n\t * @param {Object} [options] additonal options that need to be set\r\n\t * @param {Function} [options.filter] filter function for advanced filtering\r\n\t */\r\n\tfilepicker: function(title, callback, multiselect, mimetypeFilter, modal, type, path, options) {\r\n\t\tvar self = this\r\n\r\n\t\tthis.filepicker.sortField = 'name'\r\n\t\tthis.filepicker.sortOrder = 'asc'\r\n\t\t// avoid opening the picker twice\r\n\t\tif (this.filepicker.loading) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (type === undefined) {\r\n\t\t\ttype = this.FILEPICKER_TYPE_CHOOSE\r\n\t\t}\r\n\r\n\t\tvar emptyText = t('core', 'No files in here')\r\n\t\tvar newText = t('files', 'New folder')\r\n\t\tif (type === this.FILEPICKER_TYPE_COPY || type === this.FILEPICKER_TYPE_MOVE || type === this.FILEPICKER_TYPE_COPY_MOVE) {\r\n\t\t\temptyText = t('core', 'No more subfolders in here')\r\n\t\t}\r\n\r\n\t\tthis.filepicker.loading = true\r\n\t\tthis.filepicker.filesClient = (OCA.Sharing && OCA.Sharing.PublicApp && OCA.Sharing.PublicApp.fileList) ? OCA.Sharing.PublicApp.fileList.filesClient : OC.Files.getClient()\r\n\r\n\t\tthis.filelist = null\r\n\t\tpath = path || ''\r\n\t\toptions = Object.assign({\r\n\t\t\tallowDirectoryChooser: false\r\n\t\t}, options)\r\n\r\n\t\t$.when(this._getFilePickerTemplate()).then(function($tmpl) {\r\n\t\t\tself.filepicker.loading = false\r\n\t\t\tvar dialogName = 'oc-dialog-filepicker-content'\r\n\t\t\tif (self.$filePicker) {\r\n\t\t\t\tself.$filePicker.ocdialog('close')\r\n\t\t\t}\r\n\r\n\t\t\tif (mimetypeFilter === undefined || mimetypeFilter === null) {\r\n\t\t\t\tmimetypeFilter = []\r\n\t\t\t}\r\n\t\t\tif (typeof (mimetypeFilter) === 'string') {\r\n\t\t\t\tmimetypeFilter = [mimetypeFilter]\r\n\t\t\t}\r\n\r\n\t\t\tself.$filePicker = $tmpl.octemplate({\r\n\t\t\t\tdialog_name: dialogName,\r\n\t\t\t\ttitle: title,\r\n\t\t\t\temptytext: emptyText,\r\n\t\t\t\tnewtext: newText,\r\n\t\t\t\tnameCol: t('core', 'Name'),\r\n\t\t\t\tsizeCol: t('core', 'Size'),\r\n\t\t\t\tmodifiedCol: t('core', 'Modified')\r\n\t\t\t}).data('path', path).data('multiselect', multiselect).data('mimetype', mimetypeFilter).data('allowDirectoryChooser', options.allowDirectoryChooser)\r\n\t\t\tif (typeof(options.filter) === 'function') {\r\n\t\t\t\tself.$filePicker.data('filter', options.filter)\r\n\t\t\t}\r\n\r\n\t\t\tif (modal === undefined) {\r\n\t\t\t\tmodal = false\r\n\t\t\t}\r\n\t\t\tif (multiselect === undefined) {\r\n\t\t\t\tmultiselect = false\r\n\t\t\t}\r\n\r\n\t\t\t$(options?.target ?? 'body').prepend(self.$filePicker)\r\n\r\n\t\t\tself.$showGridView = $('button#picker-showgridview')\r\n\t\t\tself.$showGridView.on('click keydown', function(event) {\r\n\t\t\t\tif (isA11yActivation(event)) {\r\n\t\t\t\t\tself._onGridviewChange()\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tself._getGridSettings()\r\n\r\n\t\t\tvar newButton = self.$filePicker.find('.actions.creatable .button-add')\r\n\t\t\tif (type === self.FILEPICKER_TYPE_CHOOSE && !options.allowDirectoryChooser) {\r\n\t\t\t\tself.$filePicker.find('.actions.creatable').hide()\r\n\t\t\t}\r\n\t\t\tnewButton.on('focus', function() {\r\n\t\t\t\tself.$filePicker.ocdialog('setEnterCallback', function(event) {\r\n\t\t\t\t\tevent.stopImmediatePropagation()\r\n\t\t\t\t\tevent.preventDefault()\r\n\t\t\t\t\tnewButton.click()\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\tnewButton.on('blur', function() {\r\n\t\t\t\tself.$filePicker.ocdialog('unsetEnterCallback')\r\n\t\t\t})\r\n\r\n\t\t\tOC.registerMenu(newButton, self.$filePicker.find('.menu'), function() {\r\n\t\t\t\t$input.tooltip('hide')\r\n\t\t\t\t$input.focus()\r\n\t\t\t\tself.$filePicker.ocdialog('setEnterCallback', function(event) {\r\n\t\t\t\t\tevent.stopImmediatePropagation()\r\n\t\t\t\t\tevent.preventDefault()\r\n\t\t\t\t\tself.$filePicker.submit()\r\n\t\t\t\t})\r\n\t\t\t\tvar newName = $input.val()\r\n\t\t\t\tvar lastPos = newName.lastIndexOf('.')\r\n\t\t\t\tif (lastPos === -1) {\r\n\t\t\t\t\tlastPos = newName.length\r\n\t\t\t\t}\r\n\t\t\t\t$input.selectRange(0, lastPos)\r\n\t\t\t})\r\n\t\t\tvar $form = self.$filePicker.find('.filenameform')\r\n\t\t\tvar $input = $form.find('input[type=\\'text\\']')\r\n\t\t\tvar $submit = $form.find('input[type=\\'submit\\']')\r\n\t\t\t$input.on('keydown', function(event) {\r\n\t\t\t\tif (isA11yActivation(event)) {\r\n\t\t\t\t\tevent.stopImmediatePropagation()\r\n\t\t\t\t\tevent.preventDefault()\r\n\t\t\t\t\t$form.submit()\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t$submit.on('click', function(event) {\r\n\t\t\t\tevent.stopImmediatePropagation()\r\n\t\t\t\tevent.preventDefault()\r\n\t\t\t\t$form.submit()\r\n\t\t\t})\r\n\r\n\t\t\t/**\r\n\t\t\t * Checks whether the given file name is valid.\r\n\t\t\t *\r\n\t\t\t * @param name file name to check\r\n\t\t\t * @return true if the file name is valid.\r\n\t\t\t * @throws a string exception with an error message if\r\n\t\t\t * the file name is not valid\r\n\t\t\t *\r\n\t\t\t * NOTE: This function is duplicated in the files app:\r\n\t\t\t * https://github.com/nextcloud/server/blob/b9bc2417e7a8dc81feb0abe20359bedaf864f790/apps/files/js/files.js#L127-L148\r\n\t\t\t */\r\n\t\t\tvar isFileNameValid = function (name) {\r\n\t\t\t\tvar trimmedName = name.trim();\r\n\t\t\t\tif (trimmedName === '.' || trimmedName === '..')\r\n\t\t\t\t{\r\n\t\t\t\t\tthrow t('files', '\"{name}\" is an invalid file name.', {name: name})\r\n\t\t\t\t} else if (trimmedName.length === 0) {\r\n\t\t\t\t\tthrow t('files', 'File name cannot be empty.')\r\n\t\t\t\t} else if (trimmedName.indexOf('/') !== -1) {\r\n\t\t\t\t\tthrow t('files', '\"/\" is not allowed inside a file name.')\r\n\t\t\t\t} else if (!!(trimmedName.match(OC.config.blacklist_files_regex))) {\r\n\t\t\t\t\tthrow t('files', '\"{name}\" is not an allowed filetype', {name: name})\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\r\n\t\t\tvar checkInput = function() {\r\n\t\t\t\tvar filename = $input.val()\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (!isFileNameValid(filename)) {\r\n\t\t\t\t\t\t// isFileNameValid(filename) throws an exception itself\r\n\t\t\t\t\t} else if (self.filelist.find(function(file) {\r\n\t\t\t\t\t\treturn file.name === this\r\n\t\t\t\t\t}, filename)) {\r\n\t\t\t\t\t\tthrow t('files', '{newName} already exists', { newName: filename }, undefined, {\r\n\t\t\t\t\t\t\tescape: false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn true\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\t$input.attr('title', error)\r\n\t\t\t\t\t$input.tooltip({\r\n\t\t\t\t\t\tplacement: 'right',\r\n\t\t\t\t\t\ttrigger: 'manual',\r\n\t\t\t\t\t\t'container': '.newFolderMenu'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t$input.tooltip('_fixTitle')\r\n\t\t\t\t\t$input.tooltip('show')\r\n\t\t\t\t\t$input.addClass('error')\r\n\t\t\t\t}\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\r\n\t\t\t$form.on('submit', function(event) {\r\n\t\t\t\tevent.stopPropagation()\r\n\t\t\t\tevent.preventDefault()\r\n\r\n\t\t\t\tif (checkInput()) {\r\n\t\t\t\t\tvar newname = $input.val()\r\n\t\t\t\t\tself.filepicker.filesClient.createDirectory(self.$filePicker.data('path') + \"/\" + newname).always(function (status) {\r\n\t\t\t\t\t\tself._fillFilePicker(self.$filePicker.data('path') + \"/\" + newname, type)\r\n\t\t\t\t\t})\r\n\t\t\t\t\tOC.hideMenus()\r\n\t\t\t\t\tself.$filePicker.ocdialog('unsetEnterCallback')\r\n\t\t\t\t\tself.$filePicker.click()\r\n\t\t\t\t\t$input.val(newText)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t$input.on('input', function(event) {\r\n\t\t\t\t$input.tooltip('hide')\r\n\t\t\t})\r\n\r\n\t\t\tself.$filePicker.ready(function() {\r\n\t\t\t\tself.$fileListHeader = self.$filePicker.find('.filelist thead tr')\r\n\t\t\t\tself.$filelist = self.$filePicker.find('.filelist tbody')\r\n\t\t\t\tself.$filelistContainer = self.$filePicker.find('.filelist-container')\r\n\t\t\t\tself.$dirTree = self.$filePicker.find('.dirtree')\r\n\t\t\t\tself.$dirTree.on('click keydown', 'div:not(:last-child)', self, function(event) {\r\n\t\t\t\t\tif (isA11yActivation(event)) {\r\n\t\t\t\t\t\tself._handleTreeListSelect(event, type)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tself.$filelist.on('click keydown', 'tr', function(event) {\r\n\t\t\t\t\tif (isA11yActivation(event)) {\r\n\t\t\t\t\t\tself._handlePickerClick(event, $(this), type)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tself.$fileListHeader.on('click keydown', 'a', function(event) {\r\n\t\t\t\t\tif (isA11yActivation(event)) {\r\n\t\t\t\t\t\tvar dir = self.$filePicker.data('path')\r\n\t\t\t\t\t\tself.filepicker.sortField = $(event.currentTarget).data('sort')\r\n\t\t\t\t\t\tself.filepicker.sortOrder = self.filepicker.sortOrder === 'asc' ? 'desc' : 'asc'\r\n\t\t\t\t\t\tself._fillFilePicker(dir, type)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tself._fillFilePicker(path, type)\r\n\t\t\t})\r\n\r\n\t\t\t// build buttons\r\n\t\t\tvar functionToCall = function(returnType) {\r\n\t\t\t\tif (callback !== undefined) {\r\n\t\t\t\t\tvar datapath\r\n\t\t\t\t\tif (multiselect === true) {\r\n\t\t\t\t\t\tdatapath = []\r\n\t\t\t\t\t\tself.$filelist.find('tr.filepicker_element_selected').each(function(index, element) {\r\n\t\t\t\t\t\t\tdatapath.push(self.$filePicker.data('path') + '/' + $(element).data('entryname'))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdatapath = self.$filePicker.data('path')\r\n\t\t\t\t\t\tvar selectedName = self.$filelist.find('tr.filepicker_element_selected').data('entryname')\r\n\t\t\t\t\t\tif (selectedName) {\r\n\t\t\t\t\t\t\tdatapath += '/' + selectedName\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcallback(datapath, returnType)\r\n\t\t\t\t\tself.$filePicker.ocdialog('close')\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar chooseCallback = function() {\r\n\t\t\t\tfunctionToCall(Dialogs.FILEPICKER_TYPE_CHOOSE)\r\n\t\t\t}\r\n\r\n\t\t\tvar copyCallback = function() {\r\n\t\t\t\tfunctionToCall(Dialogs.FILEPICKER_TYPE_COPY)\r\n\t\t\t}\r\n\r\n\t\t\tvar moveCallback = function() {\r\n\t\t\t\tfunctionToCall(Dialogs.FILEPICKER_TYPE_MOVE)\r\n\t\t\t}\r\n\r\n\t\t\tvar buttonlist = []\r\n\t\t\tif (type === Dialogs.FILEPICKER_TYPE_CHOOSE) {\r\n\t\t\t\tbuttonlist.push({\r\n\t\t\t\t\ttext: t('core', 'Choose'),\r\n\t\t\t\t\tclick: chooseCallback,\r\n\t\t\t\t\tdefaultButton: true\r\n\t\t\t\t})\r\n\t\t\t} else if (type === Dialogs.FILEPICKER_TYPE_CUSTOM) {\r\n\t\t\t\toptions.buttons.forEach(function(button) {\r\n\t\t\t\t\tbuttonlist.push({\r\n\t\t\t\t\t\ttext: button.text,\r\n\t\t\t\t\t\tclick: function() {\r\n\t\t\t\t\t\t\tfunctionToCall(button.type)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tdefaultButton: button.defaultButton\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tif (type === Dialogs.FILEPICKER_TYPE_COPY || type === Dialogs.FILEPICKER_TYPE_COPY_MOVE) {\r\n\t\t\t\t\tbuttonlist.push({\r\n\t\t\t\t\t\ttext: t('core', 'Copy'),\r\n\t\t\t\t\t\tclick: copyCallback,\r\n\t\t\t\t\t\tdefaultButton: false\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tif (type === Dialogs.FILEPICKER_TYPE_MOVE || type === Dialogs.FILEPICKER_TYPE_COPY_MOVE) {\r\n\t\t\t\t\tbuttonlist.push({\r\n\t\t\t\t\t\ttext: t('core', 'Move'),\r\n\t\t\t\t\t\tclick: moveCallback,\r\n\t\t\t\t\t\tdefaultButton: true\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tself.$filePicker.ocdialog({\r\n\t\t\t\tcloseOnEscape: true,\r\n\t\t\t\t// max-width of 600\r\n\t\t\t\twidth: 600,\r\n\t\t\t\theight: 500,\r\n\t\t\t\tmodal: modal,\r\n\t\t\t\tbuttons: buttonlist,\r\n\t\t\t\tstyle: {\r\n\t\t\t\t\tbuttons: 'aside'\r\n\t\t\t\t},\r\n\t\t\t\tclose: function() {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\t$(this).ocdialog('destroy').remove()\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.$filePicker = null\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\t// We can access primary class only from oc-dialog.\r\n\t\t\t// Hence this is one of the approach to get the choose button.\r\n\t\t\tvar getOcDialog = self.$filePicker.closest('.oc-dialog')\r\n\t\t\tvar buttonEnableDisable = getOcDialog.find('.primary')\r\n\t\t\tif (self.$filePicker.data('mimetype').indexOf('httpd/unix-directory') !== -1 || self.$filePicker.data('allowDirectoryChooser')) {\r\n\t\t\t\tbuttonEnableDisable.prop('disabled', false)\r\n\t\t\t} else {\r\n\t\t\t\tbuttonEnableDisable.prop('disabled', true)\r\n\t\t\t}\r\n\t\t})\r\n\t\t\t.fail(function(status, error) {\r\n\t\t\t\t// If the method is called while navigating away\r\n\t\t\t\t// from the page, it is probably not needed ;)\r\n\t\t\t\tself.filepicker.loading = false\r\n\t\t\t\tif (status !== 0) {\r\n\t\t\t\t\talert(t('core', 'Error loading file picker template: {error}', { error: error }))\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t},\r\n\t/**\r\n\t * Displays raw dialog\r\n\t * You better use a wrapper instead ...\r\n\t */\r\n\tmessage: function(content, title, dialogType, buttons, callback, modal, allowHtml) {\r\n\t\treturn $.when(this._getMessageTemplate()).then(function($tmpl) {\r\n\t\t\tvar dialogName = 'oc-dialog-' + Dialogs.dialogsCounter + '-content'\r\n\t\t\tvar dialogId = '#' + dialogName\r\n\t\t\tvar $dlg = $tmpl.octemplate({\r\n\t\t\t\tdialog_name: dialogName,\r\n\t\t\t\ttitle: title,\r\n\t\t\t\tmessage: content,\r\n\t\t\t\ttype: dialogType\r\n\t\t\t}, allowHtml ? { escapeFunction: '' } : {})\r\n\t\t\tif (modal === undefined) {\r\n\t\t\t\tmodal = false\r\n\t\t\t}\r\n\t\t\t$('body').append($dlg)\r\n\t\t\tvar buttonlist = []\r\n\t\t\tswitch (buttons) {\r\n\t\t\tcase Dialogs.YES_NO_BUTTONS:\r\n\t\t\t\tbuttonlist = [{\r\n\t\t\t\t\ttext: t('core', 'No'),\r\n\t\t\t\t\tclick: function() {\r\n\t\t\t\t\t\tif (callback !== undefined) {\r\n\t\t\t\t\t\t\tcallback(false)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$(dialogId).ocdialog('close')\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: t('core', 'Yes'),\r\n\t\t\t\t\tclick: function() {\r\n\t\t\t\t\t\tif (callback !== undefined) {\r\n\t\t\t\t\t\t\tcallback(true)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$(dialogId).ocdialog('close')\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdefaultButton: true\r\n\t\t\t\t}]\r\n\t\t\t\tbreak\r\n\t\t\tcase Dialogs.OK_BUTTON:\r\n\t\t\t\tvar functionToCall = function() {\r\n\t\t\t\t\t$(dialogId).ocdialog('close')\r\n\t\t\t\t\tif (callback !== undefined) {\r\n\t\t\t\t\t\tcallback()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbuttonlist[0] = {\r\n\t\t\t\t\ttext: t('core', 'OK'),\r\n\t\t\t\t\tclick: functionToCall,\r\n\t\t\t\t\tdefaultButton: true\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tif (typeof(buttons) === 'object') {\r\n\t\t\t\t\tswitch (buttons.type) {\r\n\t\t\t\t\t\tcase Dialogs.YES_NO_BUTTONS:\r\n\t\t\t\t\t\t\tbuttonlist = [{\r\n\t\t\t\t\t\t\t\ttext: buttons.cancel || t('core', 'No'),\r\n\t\t\t\t\t\t\t\tclick: function() {\r\n\t\t\t\t\t\t\t\t\tif (callback !== undefined) {\r\n\t\t\t\t\t\t\t\t\t\tcallback(false)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t$(dialogId).ocdialog('close')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\ttext: buttons.confirm || t('core', 'Yes'),\r\n\t\t\t\t\t\t\t\t\tclick: function() {\r\n\t\t\t\t\t\t\t\t\t\tif (callback !== undefined) {\r\n\t\t\t\t\t\t\t\t\t\t\tcallback(true)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t$(dialogId).ocdialog('close')\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tdefaultButton: true,\r\n\t\t\t\t\t\t\t\t\tclasses: buttons.confirmClasses\r\n\t\t\t\t\t\t\t\t}]\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\r\n\t\t\t$(dialogId).ocdialog({\r\n\t\t\t\tcloseOnEscape: true,\r\n\t\t\t\tcloseCallback: () => { callback && callback(false) },\r\n\t\t\t\tmodal: modal,\r\n\t\t\t\tbuttons: buttonlist\r\n\t\t\t})\r\n\t\t\tDialogs.dialogsCounter++\r\n\t\t})\r\n\t\t\t.fail(function(status, error) {\r\n\t\t\t\t// If the method is called while navigating away from\r\n\t\t\t\t// the page, we still want to deliver the message.\r\n\t\t\t\tif (status === 0) {\r\n\t\t\t\t\talert(title + ': ' + content)\r\n\t\t\t\t} else {\r\n\t\t\t\t\talert(t('core', 'Error loading message template: {error}', { error: error }))\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t},\r\n\t_fileexistsshown: false,\r\n\t/**\r\n\t * Displays file exists dialog\r\n\t * @param {object} data upload object\r\n\t * @param {object} original file with name, size and mtime\r\n\t * @param {object} replacement file with name, size and mtime\r\n\t * @param {object} controller with onCancel, onSkip, onReplace and onRename methods\r\n\t * @returns {Promise} jquery promise that resolves after the dialog template was loaded\r\n\t */\r\n\tfileexists: function(data, original, replacement, controller) {\r\n\t\tvar self = this\r\n\t\tvar dialogDeferred = new $.Deferred()\r\n\r\n\t\tvar getCroppedPreview = function(file) {\r\n\t\t\tvar deferred = new $.Deferred()\r\n\t\t\t// Only process image files.\r\n\t\t\tvar type = file.type && file.type.split('/').shift()\r\n\t\t\tif (window.FileReader && type === 'image') {\r\n\t\t\t\tvar reader = new FileReader()\r\n\t\t\t\treader.onload = function(e) {\r\n\t\t\t\t\tvar blob = new Blob([e.target.result])\r\n\t\t\t\t\twindow.URL = window.URL || window.webkitURL\r\n\t\t\t\t\tvar originalUrl = window.URL.createObjectURL(blob)\r\n\t\t\t\t\tvar image = new Image()\r\n\t\t\t\t\timage.src = originalUrl\r\n\t\t\t\t\timage.onload = function() {\r\n\t\t\t\t\t\tvar url = crop(image)\r\n\t\t\t\t\t\tdeferred.resolve(url)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treader.readAsArrayBuffer(file)\r\n\t\t\t} else {\r\n\t\t\t\tdeferred.reject()\r\n\t\t\t}\r\n\t\t\treturn deferred\r\n\t\t}\r\n\r\n\t\tvar crop = function(img) {\r\n\t\t\tvar canvas = document.createElement('canvas')\r\n\t\t\tvar targetSize = 96\r\n\t\t\tvar width = img.width\r\n\t\t\tvar height = img.height\r\n\t\t\tvar x; var y; var size\r\n\r\n\t\t\t// Calculate the width and height, constraining the proportions\r\n\t\t\tif (width > height) {\r\n\t\t\t\ty = 0\r\n\t\t\t\tx = (width - height) / 2\r\n\t\t\t} else {\r\n\t\t\t\ty = (height - width) / 2\r\n\t\t\t\tx = 0\r\n\t\t\t}\r\n\t\t\tsize = Math.min(width, height)\r\n\r\n\t\t\t// Set canvas size to the cropped area\r\n\t\t\tcanvas.width = size\r\n\t\t\tcanvas.height = size\r\n\t\t\tvar ctx = canvas.getContext('2d')\r\n\t\t\tctx.drawImage(img, x, y, size, size, 0, 0, size, size)\r\n\r\n\t\t\t// Resize the canvas to match the destination (right size uses 96px)\r\n\t\t\tresampleHermite(canvas, size, size, targetSize, targetSize)\r\n\r\n\t\t\treturn canvas.toDataURL('image/png', 0.7)\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Fast image resize/resample using Hermite filter with JavaScript.\r\n\t\t *\r\n\t\t * @author: ViliusL\r\n\t\t *\r\n\t\t * @param {*} canvas\r\n\t\t * @param {number} W\r\n\t\t * @param {number} H\r\n\t\t * @param {number} W2\r\n\t\t * @param {number} H2\r\n\t\t */\r\n\t\tvar resampleHermite = function(canvas, W, H, W2, H2) {\r\n\t\t\tW2 = Math.round(W2)\r\n\t\t\tH2 = Math.round(H2)\r\n\t\t\tvar img = canvas.getContext('2d').getImageData(0, 0, W, H)\r\n\t\t\tvar img2 = canvas.getContext('2d').getImageData(0, 0, W2, H2)\r\n\t\t\tvar data = img.data\r\n\t\t\tvar data2 = img2.data\r\n\t\t\tvar ratio_w = W / W2\r\n\t\t\tvar ratio_h = H / H2\r\n\t\t\tvar ratio_w_half = Math.ceil(ratio_w / 2)\r\n\t\t\tvar ratio_h_half = Math.ceil(ratio_h / 2)\r\n\r\n\t\t\tfor (var j = 0; j < H2; j++) {\r\n\t\t\t\tfor (var i = 0; i < W2; i++) {\r\n\t\t\t\t\tvar x2 = (i + j * W2) * 4\r\n\t\t\t\t\tvar weight = 0\r\n\t\t\t\t\tvar weights = 0\r\n\t\t\t\t\tvar weights_alpha = 0\r\n\t\t\t\t\tvar gx_r = 0\r\n\t\t\t\t\tvar gx_g = 0\r\n\t\t\t\t\tvar gx_b = 0\r\n\t\t\t\t\tvar gx_a = 0\r\n\t\t\t\t\tvar center_y = (j + 0.5) * ratio_h\r\n\t\t\t\t\tfor (var yy = Math.floor(j * ratio_h); yy < (j + 1) * ratio_h; yy++) {\r\n\t\t\t\t\t\tvar dy = Math.abs(center_y - (yy + 0.5)) / ratio_h_half\r\n\t\t\t\t\t\tvar center_x = (i + 0.5) * ratio_w\r\n\t\t\t\t\t\tvar w0 = dy * dy // pre-calc part of w\r\n\t\t\t\t\t\tfor (var xx = Math.floor(i * ratio_w); xx < (i + 1) * ratio_w; xx++) {\r\n\t\t\t\t\t\t\tvar dx = Math.abs(center_x - (xx + 0.5)) / ratio_w_half\r\n\t\t\t\t\t\t\tvar w = Math.sqrt(w0 + dx * dx)\r\n\t\t\t\t\t\t\tif (w >= -1 && w <= 1) {\r\n\t\t\t\t\t\t\t\t// hermite filter\r\n\t\t\t\t\t\t\t\tweight = 2 * w * w * w - 3 * w * w + 1\r\n\t\t\t\t\t\t\t\tif (weight > 0) {\r\n\t\t\t\t\t\t\t\t\tdx = 4 * (xx + yy * W)\r\n\t\t\t\t\t\t\t\t\t// alpha\r\n\t\t\t\t\t\t\t\t\tgx_a += weight * data[dx + 3]\r\n\t\t\t\t\t\t\t\t\tweights_alpha += weight\r\n\t\t\t\t\t\t\t\t\t// colors\r\n\t\t\t\t\t\t\t\t\tif (data[dx + 3] < 255) { weight = weight * data[dx + 3] / 250 }\r\n\t\t\t\t\t\t\t\t\tgx_r += weight * data[dx]\r\n\t\t\t\t\t\t\t\t\tgx_g += weight * data[dx + 1]\r\n\t\t\t\t\t\t\t\t\tgx_b += weight * data[dx + 2]\r\n\t\t\t\t\t\t\t\t\tweights += weight\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdata2[x2] = gx_r / weights\r\n\t\t\t\t\tdata2[x2 + 1] = gx_g / weights\r\n\t\t\t\t\tdata2[x2 + 2] = gx_b / weights\r\n\t\t\t\t\tdata2[x2 + 3] = gx_a / weights_alpha\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcanvas.getContext('2d').clearRect(0, 0, Math.max(W, W2), Math.max(H, H2))\r\n\t\t\tcanvas.width = W2\r\n\t\t\tcanvas.height = H2\r\n\t\t\tcanvas.getContext('2d').putImageData(img2, 0, 0)\r\n\t\t}\r\n\r\n\t\tvar addConflict = function($conflicts, original, replacement) {\r\n\r\n\t\t\tvar $conflict = $conflicts.find('.template').clone().removeClass('template').addClass('conflict')\r\n\t\t\tvar $originalDiv = $conflict.find('.original')\r\n\t\t\tvar $replacementDiv = $conflict.find('.replacement')\r\n\r\n\t\t\t$conflict.data('data', data)\r\n\r\n\t\t\t$conflict.find('.filename').text(original.name)\r\n\t\t\t$originalDiv.find('.size').text(OC.Util.humanFileSize(original.size))\r\n\t\t\t$originalDiv.find('.mtime').text(OC.Util.formatDate(original.mtime))\r\n\t\t\t// ie sucks\r\n\t\t\tif (replacement.size && replacement.lastModified) {\r\n\t\t\t\t$replacementDiv.find('.size').text(OC.Util.humanFileSize(replacement.size))\r\n\t\t\t\t$replacementDiv.find('.mtime').text(OC.Util.formatDate(replacement.lastModified))\r\n\t\t\t}\r\n\t\t\tvar path = original.directory + '/' + original.name\r\n\t\t\tvar urlSpec = {\r\n\t\t\t\tfile: path,\r\n\t\t\t\tx: 96,\r\n\t\t\t\ty: 96,\r\n\t\t\t\tc: original.etag,\r\n\t\t\t\tforceIcon: 0\r\n\t\t\t}\r\n\t\t\tvar previewpath = Files.generatePreviewUrl(urlSpec)\r\n\t\t\t// Escaping single quotes\r\n\t\t\tpreviewpath = previewpath.replace(/'/g, '%27')\r\n\t\t\t$originalDiv.find('.icon').css({ 'background-image': \"url('\" + previewpath + \"')\" })\r\n\t\t\tgetCroppedPreview(replacement).then(\r\n\t\t\t\tfunction(path) {\r\n\t\t\t\t\t$replacementDiv.find('.icon').css('background-image', 'url(' + path + ')')\r\n\t\t\t\t}, function() {\r\n\t\t\t\t\tpath = OC.MimeType.getIconUrl(replacement.type)\r\n\t\t\t\t\t$replacementDiv.find('.icon').css('background-image', 'url(' + path + ')')\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\t// connect checkboxes with labels\r\n\t\t\tvar checkboxId = $conflicts.find('.conflict').length\r\n\t\t\t$originalDiv.find('input:checkbox').attr('id', 'checkbox_original_' + checkboxId)\r\n\t\t\t$replacementDiv.find('input:checkbox').attr('id', 'checkbox_replacement_' + checkboxId)\r\n\r\n\t\t\t$conflicts.append($conflict)\r\n\r\n\t\t\t// set more recent mtime bold\r\n\t\t\t// ie sucks\r\n\t\t\tif (replacement.lastModified > original.mtime) {\r\n\t\t\t\t$replacementDiv.find('.mtime').css('font-weight', 'bold')\r\n\t\t\t} else if (replacement.lastModified < original.mtime) {\r\n\t\t\t\t$originalDiv.find('.mtime').css('font-weight', 'bold')\r\n\t\t\t} else {\r\n\t\t\t\t// TODO add to same mtime collection?\r\n\t\t\t}\r\n\r\n\t\t\t// set bigger size bold\r\n\t\t\tif (replacement.size && replacement.size > original.size) {\r\n\t\t\t\t$replacementDiv.find('.size').css('font-weight', 'bold')\r\n\t\t\t} else if (replacement.size && replacement.size < original.size) {\r\n\t\t\t\t$originalDiv.find('.size').css('font-weight', 'bold')\r\n\t\t\t} else {\r\n\t\t\t\t// TODO add to same size collection?\r\n\t\t\t}\r\n\r\n\t\t\t// TODO show skip action for files with same size and mtime in bottom row\r\n\r\n\t\t\t// always keep readonly files\r\n\r\n\t\t\tif (original.status === 'readonly') {\r\n\t\t\t\t$originalDiv\r\n\t\t\t\t\t.addClass('readonly')\r\n\t\t\t\t\t.find('input[type=\"checkbox\"]')\r\n\t\t\t\t\t.prop('checked', true)\r\n\t\t\t\t\t.prop('disabled', true)\r\n\t\t\t\t$originalDiv.find('.message')\r\n\t\t\t\t\t.text(t('core', 'read-only'))\r\n\t\t\t}\r\n\t\t}\r\n\t\t// var selection = controller.getSelection(data.originalFiles);\r\n\t\t// if (selection.defaultAction) {\r\n\t\t//\tcontroller[selection.defaultAction](data);\r\n\t\t// } else {\r\n\t\tvar dialogName = 'oc-dialog-fileexists-content'\r\n\t\tvar dialogId = '#' + dialogName\r\n\t\tif (this._fileexistsshown) {\r\n\t\t\t// add conflict\r\n\r\n\t\t\tvar $conflicts = $(dialogId + ' .conflicts')\r\n\t\t\taddConflict($conflicts, original, replacement)\r\n\r\n\t\t\tvar count = $(dialogId + ' .conflict').length\r\n\t\t\tvar title = n('core',\r\n\t\t\t\t'{count} file conflict',\r\n\t\t\t\t'{count} file conflicts',\r\n\t\t\t\tcount,\r\n\t\t\t\t{ count: count }\r\n\t\t\t)\r\n\t\t\t$(dialogId).parent().children('.oc-dialog-title').text(title)\r\n\r\n\t\t\t// recalculate dimensions\r\n\t\t\t$(window).trigger('resize')\r\n\t\t\tdialogDeferred.resolve()\r\n\t\t} else {\r\n\t\t\t// create dialog\r\n\t\t\tthis._fileexistsshown = true\r\n\t\t\t$.when(this._getFileExistsTemplate()).then(function($tmpl) {\r\n\t\t\t\tvar title = t('core', 'One file conflict')\r\n\t\t\t\tvar $dlg = $tmpl.octemplate({\r\n\t\t\t\t\tdialog_name: dialogName,\r\n\t\t\t\t\ttitle: title,\r\n\t\t\t\t\ttype: 'fileexists',\r\n\r\n\t\t\t\t\tallnewfiles: t('core', 'New Files'),\r\n\t\t\t\t\tallexistingfiles: t('core', 'Already existing files'),\r\n\r\n\t\t\t\t\twhy: t('core', 'Which files do you want to keep?'),\r\n\t\t\t\t\twhat: t('core', 'If you select both versions, the copied file will have a number added to its name.')\r\n\t\t\t\t})\r\n\t\t\t\t$('body').append($dlg)\r\n\r\n\t\t\t\tif (original && replacement) {\r\n\t\t\t\t\tvar $conflicts = $dlg.find('.conflicts')\r\n\t\t\t\t\taddConflict($conflicts, original, replacement)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar buttonlist = [{\r\n\t\t\t\t\ttext: t('core', 'Cancel'),\r\n\t\t\t\t\tclasses: 'cancel',\r\n\t\t\t\t\tclick: function() {\r\n\t\t\t\t\t\tif (typeof controller.onCancel !== 'undefined') {\r\n\t\t\t\t\t\t\tcontroller.onCancel(data)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$(dialogId).ocdialog('close')\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: t('core', 'Continue'),\r\n\t\t\t\t\tclasses: 'continue',\r\n\t\t\t\t\tclick: function() {\r\n\t\t\t\t\t\tif (typeof controller.onContinue !== 'undefined') {\r\n\t\t\t\t\t\t\tcontroller.onContinue($(dialogId + ' .conflict'))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$(dialogId).ocdialog('close')\r\n\t\t\t\t\t}\r\n\t\t\t\t}]\r\n\r\n\t\t\t\t$(dialogId).ocdialog({\r\n\t\t\t\t\twidth: 500,\r\n\t\t\t\t\tcloseOnEscape: true,\r\n\t\t\t\t\tmodal: true,\r\n\t\t\t\t\tbuttons: buttonlist,\r\n\t\t\t\t\tcloseButton: null,\r\n\t\t\t\t\tclose: function() {\r\n\t\t\t\t\t\tself._fileexistsshown = false\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t$(this).ocdialog('destroy').remove()\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t// ignore\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\t$(dialogId).css('height', 'auto')\r\n\r\n\t\t\t\tvar $primaryButton = $dlg.closest('.oc-dialog').find('button.continue')\r\n\t\t\t\t$primaryButton.prop('disabled', true)\r\n\r\n\t\t\t\tfunction updatePrimaryButton() {\r\n\t\t\t\t\tvar checkedCount = $dlg.find('.conflicts .checkbox:checked').length\r\n\t\t\t\t\t$primaryButton.prop('disabled', checkedCount === 0)\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// add checkbox toggling actions\r\n\t\t\t\t$(dialogId).find('.allnewfiles').on('click', function() {\r\n\t\t\t\t\tvar $checkboxes = $(dialogId).find('.conflict .replacement input[type=\"checkbox\"]')\r\n\t\t\t\t\t$checkboxes.prop('checked', $(this).prop('checked'))\r\n\t\t\t\t})\r\n\t\t\t\t$(dialogId).find('.allexistingfiles').on('click', function() {\r\n\t\t\t\t\tvar $checkboxes = $(dialogId).find('.conflict .original:not(.readonly) input[type=\"checkbox\"]')\r\n\t\t\t\t\t$checkboxes.prop('checked', $(this).prop('checked'))\r\n\t\t\t\t})\r\n\t\t\t\t$(dialogId).find('.conflicts').on('click', '.replacement,.original:not(.readonly)', function() {\r\n\t\t\t\t\tvar $checkbox = $(this).find('input[type=\"checkbox\"]')\r\n\t\t\t\t\t$checkbox.prop('checked', !$checkbox.prop('checked'))\r\n\t\t\t\t})\r\n\t\t\t\t$(dialogId).find('.conflicts').on('click', '.replacement input[type=\"checkbox\"],.original:not(.readonly) input[type=\"checkbox\"]', function() {\r\n\t\t\t\t\tvar $checkbox = $(this)\r\n\t\t\t\t\t$checkbox.prop('checked', !$checkbox.prop('checked'))\r\n\t\t\t\t})\r\n\r\n\t\t\t\t// update counters\r\n\t\t\t\t$(dialogId).on('click', '.replacement,.allnewfiles', function() {\r\n\t\t\t\t\tvar count = $(dialogId).find('.conflict .replacement input[type=\"checkbox\"]:checked').length\r\n\t\t\t\t\tif (count === $(dialogId + ' .conflict').length) {\r\n\t\t\t\t\t\t$(dialogId).find('.allnewfiles').prop('checked', true)\r\n\t\t\t\t\t\t$(dialogId).find('.allnewfiles + .count').text(t('core', '(all selected)'))\r\n\t\t\t\t\t} else if (count > 0) {\r\n\t\t\t\t\t\t$(dialogId).find('.allnewfiles').prop('checked', false)\r\n\t\t\t\t\t\t$(dialogId).find('.allnewfiles + .count').text(t('core', '({count} selected)', { count: count }))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$(dialogId).find('.allnewfiles').prop('checked', false)\r\n\t\t\t\t\t\t$(dialogId).find('.allnewfiles + .count').text('')\r\n\t\t\t\t\t}\r\n\t\t\t\t\tupdatePrimaryButton()\r\n\t\t\t\t})\r\n\t\t\t\t$(dialogId).on('click', '.original,.allexistingfiles', function() {\r\n\t\t\t\t\tvar count = $(dialogId).find('.conflict .original input[type=\"checkbox\"]:checked').length\r\n\t\t\t\t\tif (count === $(dialogId + ' .conflict').length) {\r\n\t\t\t\t\t\t$(dialogId).find('.allexistingfiles').prop('checked', true)\r\n\t\t\t\t\t\t$(dialogId).find('.allexistingfiles + .count').text(t('core', '(all selected)'))\r\n\t\t\t\t\t} else if (count > 0) {\r\n\t\t\t\t\t\t$(dialogId).find('.allexistingfiles').prop('checked', false)\r\n\t\t\t\t\t\t$(dialogId).find('.allexistingfiles + .count')\r\n\t\t\t\t\t\t\t.text(t('core', '({count} selected)', { count: count }))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$(dialogId).find('.allexistingfiles').prop('checked', false)\r\n\t\t\t\t\t\t$(dialogId).find('.allexistingfiles + .count').text('')\r\n\t\t\t\t\t}\r\n\t\t\t\t\tupdatePrimaryButton()\r\n\t\t\t\t})\r\n\r\n\t\t\t\tdialogDeferred.resolve()\r\n\t\t\t})\r\n\t\t\t\t.fail(function() {\r\n\t\t\t\t\tdialogDeferred.reject()\r\n\t\t\t\t\talert(t('core', 'Error loading file exists template'))\r\n\t\t\t\t})\r\n\t\t}\r\n\t\t// }\r\n\t\treturn dialogDeferred.promise()\r\n\t},\r\n\t// get the gridview setting and set the input accordingly\r\n\t_getGridSettings: function() {\r\n\t\tconst self = this\r\n\t\t$.get(OC.generateUrl('/apps/files/api/v1/showgridview'), function(response) {\r\n\t\t\tself.$showGridView\r\n\t\t\t\t.removeClass('icon-toggle-filelist icon-toggle-pictures')\r\n\t\t\t\t.addClass(response.gridview ? 'icon-toggle-filelist' : 'icon-toggle-pictures')\r\n\t\t\tself.$showGridView.attr(\r\n\t\t\t\t'aria-label',\r\n\t\t\t\tresponse.gridview ? t('files', 'Show list view') : t('files', 'Show grid view'),\r\n\t\t\t)\r\n\t\t\t$('.list-container').toggleClass('view-grid', response.gridview)\r\n\t\t})\r\n\t},\r\n\t_onGridviewChange: function() {\r\n\t\tconst isGridView = this.$showGridView.hasClass('icon-toggle-filelist')\r\n\t\t// only save state if user is logged in\r\n\t\tif (OC.currentUser) {\r\n\t\t\t$.post(OC.generateUrl('/apps/files/api/v1/showgridview'), { show: !isGridView })\r\n\t\t}\r\n\t\tthis.$showGridView\r\n\t\t\t.removeClass('icon-toggle-filelist icon-toggle-pictures')\r\n\t\t\t.addClass(isGridView ? 'icon-toggle-pictures' : 'icon-toggle-filelist')\r\n\t\tthis.$showGridView.attr(\r\n\t\t\t'aria-label',\r\n\t\t\tisGridView ? t('files', 'Show grid view') : t('files', 'Show list view'),\r\n\t\t)\r\n\t\tthis.$filePicker.find('.list-container').toggleClass('view-grid', !isGridView)\r\n\t},\r\n\t_getFilePickerTemplate: function() {\r\n\t\tvar defer = $.Deferred()\r\n\t\tif (!this.$filePickerTemplate) {\r\n\t\t\tvar self = this\r\n\t\t\t$.get(OC.filePath('core', 'templates', 'filepicker.html'), function(tmpl) {\r\n\t\t\t\tself.$filePickerTemplate = $(tmpl)\r\n\t\t\t\tself.$listTmpl = self.$filePickerTemplate.find('.filelist tbody tr:first-child').detach()\r\n\t\t\t\tdefer.resolve(self.$filePickerTemplate)\r\n\t\t\t})\r\n\t\t\t\t.fail(function(jqXHR, textStatus, errorThrown) {\r\n\t\t\t\t\tdefer.reject(jqXHR.status, errorThrown)\r\n\t\t\t\t})\r\n\t\t} else {\r\n\t\t\tdefer.resolve(this.$filePickerTemplate)\r\n\t\t}\r\n\t\treturn defer.promise()\r\n\t},\r\n\t_getMessageTemplate: function() {\r\n\t\tvar defer = $.Deferred()\r\n\t\tif (!this.$messageTemplate) {\r\n\t\t\tvar self = this\r\n\t\t\t$.get(OC.filePath('core', 'templates', 'message.html'), function(tmpl) {\r\n\t\t\t\tself.$messageTemplate = $(tmpl)\r\n\t\t\t\tdefer.resolve(self.$messageTemplate)\r\n\t\t\t})\r\n\t\t\t\t.fail(function(jqXHR, textStatus, errorThrown) {\r\n\t\t\t\t\tdefer.reject(jqXHR.status, errorThrown)\r\n\t\t\t\t})\r\n\t\t} else {\r\n\t\t\tdefer.resolve(this.$messageTemplate)\r\n\t\t}\r\n\t\treturn defer.promise()\r\n\t},\r\n\t_getFileExistsTemplate: function() {\r\n\t\tvar defer = $.Deferred()\r\n\t\tif (!this.$fileexistsTemplate) {\r\n\t\t\tvar self = this\r\n\t\t\t$.get(OC.filePath('files', 'templates', 'fileexists.html'), function(tmpl) {\r\n\t\t\t\tself.$fileexistsTemplate = $(tmpl)\r\n\t\t\t\tdefer.resolve(self.$fileexistsTemplate)\r\n\t\t\t})\r\n\t\t\t\t.fail(function() {\r\n\t\t\t\t\tdefer.reject()\r\n\t\t\t\t})\r\n\t\t} else {\r\n\t\t\tdefer.resolve(this.$fileexistsTemplate)\r\n\t\t}\r\n\t\treturn defer.promise()\r\n\t},\r\n\r\n\t/**\r\n\t * fills the filepicker with files\r\n\t */\r\n\t_fillFilePicker: async function(dir, type) {\r\n\t\tvar self = this\r\n\t\tthis.$filelist.empty()\r\n\t\tthis.$filePicker.find('.emptycontent').hide()\r\n\t\tthis.$filelistContainer.addClass('icon-loading')\r\n\t\tthis.$filePicker.data('path', dir)\r\n\t\tvar filter = this.$filePicker.data('mimetype')\r\n\t\tvar advancedFilter = this.$filePicker.data('filter')\r\n\t\tif (typeof (filter) === 'string') {\r\n\t\t\tfilter = [filter]\r\n\t\t}\r\n\t\tself.$fileListHeader.find('.sort-indicator').addClass('hidden').removeClass('icon-triangle-n').removeClass('icon-triangle-s')\r\n\t\tself.$fileListHeader.find('[data-sort=' + self.filepicker.sortField + '] .sort-indicator').removeClass('hidden')\r\n\t\tif (self.filepicker.sortOrder === 'asc') {\r\n\t\t\tself.$fileListHeader.find('[data-sort=' + self.filepicker.sortField + '] .sort-indicator').addClass('icon-triangle-n')\r\n\t\t} else {\r\n\t\t\tself.$fileListHeader.find('[data-sort=' + self.filepicker.sortField + '] .sort-indicator').addClass('icon-triangle-s')\r\n\t\t}\r\n\r\n\t\t// Wrap within a method because a promise cannot return multiple values\r\n\t\t// But the client impleemntation still does it...\r\n\t\tvar getFolderContents = async function(dir) {\r\n\t\t\treturn self.filepicker.filesClient.getFolderContents(dir)\r\n\t\t\t\t.then((status, files) => {\r\n\t\t\t\t\treturn files\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tvar files = await getFolderContents(dir)\r\n\t\t} catch (error) {\r\n\t\t\t// fallback to root if requested dir is non-existent\r\n\t\t\tconsole.error('Requested path does not exists, falling back to root')\r\n\t\t\tvar files = await getFolderContents('/')\r\n\t\t\tthis.$filePicker.data('path', '/')\r\n\t\t\tthis._changeButtonsText(type, '')\r\n\t\t}\r\n\r\n\t\tself.filelist = files\r\n\t\tif (filter && filter.length > 0 && filter.indexOf('*') === -1) {\r\n\t\t\tfiles = files.filter(function(file) {\r\n\t\t\t\treturn file.type === 'dir' || filter.indexOf(file.mimetype) !== -1\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (advancedFilter) {\r\n\t\t\tfiles = files.filter(advancedFilter)\r\n\t\t}\r\n\r\n\t\t// Check if the showHidden input field exist and if it exist follow it\r\n\t\t// Otherwise just show the hidden files\r\n\t\tconst showHiddenInput = document.getElementById('showHiddenFiles')\r\n\t\tconst showHidden = showHiddenInput === null || showHiddenInput.value === \"1\"\r\n\t\tif (!showHidden) {\r\n\t\t\tfiles = files.filter(function(file) {\r\n\t\t\t\treturn !file.name.startsWith('.')\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tvar Comparators = {\r\n\t\t\tname: function(fileInfo1, fileInfo2) {\r\n\t\t\t\tif (fileInfo1.type === 'dir' && fileInfo2.type !== 'dir') {\r\n\t\t\t\t\treturn -1\r\n\t\t\t\t}\r\n\t\t\t\tif (fileInfo1.type !== 'dir' && fileInfo2.type === 'dir') {\r\n\t\t\t\t\treturn 1\r\n\t\t\t\t}\r\n\t\t\t\treturn OC.Util.naturalSortCompare(fileInfo1.name, fileInfo2.name)\r\n\t\t\t},\r\n\t\t\tsize: function(fileInfo1, fileInfo2) {\r\n\t\t\t\treturn fileInfo1.size - fileInfo2.size\r\n\t\t\t},\r\n\t\t\tmtime: function(fileInfo1, fileInfo2) {\r\n\t\t\t\treturn fileInfo1.mtime - fileInfo2.mtime\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar comparator = Comparators[self.filepicker.sortField] || Comparators.name\r\n\t\tfiles = files.sort(function(file1, file2) {\r\n\t\t\tvar isFavorite = function(fileInfo) {\r\n\t\t\t\treturn fileInfo.tags && fileInfo.tags.indexOf(OC.TAG_FAVORITE) >= 0\r\n\t\t\t}\r\n\r\n\t\t\tif (isFavorite(file1) && !isFavorite(file2)) {\r\n\t\t\t\treturn -1\r\n\t\t\t} else if (!isFavorite(file1) && isFavorite(file2)) {\r\n\t\t\t\treturn 1\r\n\t\t\t}\r\n\r\n\t\t\treturn self.filepicker.sortOrder === 'asc' ? comparator(file1, file2) : -comparator(file1, file2)\r\n\t\t})\r\n\r\n\t\tself._fillSlug()\r\n\r\n\t\tif (files.length === 0) {\r\n\t\t\tself.$filePicker.find('.emptycontent').show()\r\n\t\t\tself.$fileListHeader.hide()\r\n\t\t} else {\r\n\t\t\tself.$filePicker.find('.emptycontent').hide()\r\n\t\t\tself.$fileListHeader.show()\r\n\t\t}\r\n\r\n\t\tself.$filelist.empty();\r\n\r\n\t\t$.each(files, function(idx, entry) {\r\n\t\t\tif (entry.isEncrypted && entry.mimetype === 'httpd/unix-directory') {\r\n\t\t\t\tentry.icon = OC.MimeType.getIconUrl('dir-encrypted')\r\n\t\t\t} else {\r\n\t\t\t\tentry.icon = OC.MimeType.getIconUrl(entry.mimetype)\r\n\t\t\t}\r\n\r\n\t\t\tvar simpleSize, sizeColor\r\n\t\t\tif (typeof (entry.size) !== 'undefined' && entry.size >= 0) {\r\n\t\t\t\tsimpleSize = OC.Util.humanFileSize(parseInt(entry.size, 10), true)\r\n\t\t\t\tsizeColor = Math.round(160 - Math.pow((entry.size / (1024 * 1024)), 2))\r\n\t\t\t} else {\r\n\t\t\t\tsimpleSize = t('files', 'Pending')\r\n\t\t\t\tsizeColor = 80\r\n\t\t\t}\r\n\r\n\t\t\t// split the filename in half if the size is bigger than 20 char\r\n\t\t\t// for ellipsis\r\n\t\t\tif (entry.name.length >= 10) {\r\n\t\t\t\t// leave maximum 10 letters\r\n\t\t\t\tvar split = Math.min(Math.floor(entry.name.length / 2), 10)\r\n\t\t\t\tvar filename1 = entry.name.substr(0, entry.name.length - split)\r\n\t\t\t\tvar filename2 = entry.name.substr(entry.name.length - split)\r\n\t\t\t} else {\r\n\t\t\t\tvar filename1 = entry.name\r\n\t\t\t\tvar filename2 = ''\r\n\t\t\t}\r\n\r\n\t\t\tvar $row = self.$listTmpl.octemplate({\r\n\t\t\t\ttype: entry.type,\r\n\t\t\t\tdir: dir,\r\n\t\t\t\tfilename: entry.name,\r\n\t\t\t\tfilename1: filename1,\r\n\t\t\t\tfilename2: filename2,\r\n\t\t\t\tdate: OC.Util.relativeModifiedDate(entry.mtime),\r\n\t\t\t\tsize: simpleSize,\r\n\t\t\t\tsizeColor: sizeColor,\r\n\t\t\t\ticon: entry.icon\r\n\t\t\t})\r\n\t\t\tif (entry.type === 'file') {\r\n\t\t\t\tvar urlSpec = {\r\n\t\t\t\t\tfile: dir + '/' + entry.name,\r\n\t\t\t\t\tx: 100,\r\n\t\t\t\t\ty: 100\r\n\t\t\t\t}\r\n\t\t\t\tvar img = new Image()\r\n\t\t\t\tvar previewUrl = OC.generateUrl('/core/preview.png?') + $.param(urlSpec)\r\n\t\t\t\timg.onload = function() {\r\n\t\t\t\t\tif (img.width > 5) {\r\n\t\t\t\t\t\t$row.find('td.filename').attr('style', 'background-image:url(' + previewUrl + ')')\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\timg.src = previewUrl\r\n\t\t\t}\r\n\t\t\tself.$filelist.append($row)\r\n\t\t})\r\n\r\n\t\tself.$filelistContainer.removeClass('icon-loading')\r\n\t},\r\n\t/**\r\n\t * fills the tree list with directories\r\n\t */\r\n\t_fillSlug: function() {\r\n\t\tvar addButton = this.$dirTree.find('.actions.creatable').detach()\r\n\t\tthis.$dirTree.empty()\r\n\t\tvar self = this\r\n\r\n\t\tself.$dirTree.append(addButton)\r\n\r\n\t\tvar dir\r\n\t\tvar path = this.$filePicker.data('path')\r\n\t\tvar $template = $('<div data-dir=\"{dir}\" tabindex=\"0\"><a>{name}</a></div>').addClass('crumb')\r\n\t\tif (path) {\r\n\t\t\tvar paths = path.split('/')\r\n\t\t\t$.each(paths, function(index, dir) {\r\n\t\t\t\tdir = paths.pop()\r\n\t\t\t\tif (dir === '') {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tself.$dirTree.prepend($template.octemplate({\r\n\t\t\t\t\tdir: paths.join('/') + '/' + dir,\r\n\t\t\t\t\tname: dir\r\n\t\t\t\t}))\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\t$template.octemplate({\r\n\t\t\tdir: '',\r\n\t\t\tname: t('core', 'Home'),\r\n\t\t}, { escapeFunction: null }).prependTo(this.$dirTree)\r\n\r\n\t},\r\n\t/**\r\n\t * handle selection made in the tree list\r\n\t */\r\n\t_handleTreeListSelect: function(event, type) {\r\n\t\tvar self = event.data\r\n\t\tvar dir = $(event.target).closest('.crumb').data('dir')\r\n\t\tself._fillFilePicker(dir, type)\r\n\t\tvar getOcDialog = (event.target).closest('.oc-dialog')\r\n\t\tvar buttonEnableDisable = $('.primary', getOcDialog)\r\n\t\tthis._changeButtonsText(type, dir.split(/[/]+/).pop())\r\n\t\tif (this.$filePicker.data('mimetype').indexOf('httpd/unix-directory') !== -1 || this.$filePicker.data('allowDirectoryChooser')) {\r\n\t\t\tbuttonEnableDisable.prop('disabled', false)\r\n\t\t} else {\r\n\t\t\tbuttonEnableDisable.prop('disabled', true)\r\n\t\t}\r\n\t},\r\n\t/**\r\n\t * handle clicks made in the filepicker\r\n\t */\r\n\t_handlePickerClick: function(event, $element, type) {\r\n\t\tvar getOcDialog = this.$filePicker.closest('.oc-dialog')\r\n\t\tvar buttonEnableDisable = getOcDialog.find('.primary')\r\n\t\tif ($element.data('type') === 'file') {\r\n\t\t\tif (this.$filePicker.data('multiselect') !== true || !event.ctrlKey) {\r\n\t\t\t\tthis.$filelist.find('.filepicker_element_selected').removeClass('filepicker_element_selected')\r\n\t\t\t}\r\n\t\t\t$element.toggleClass('filepicker_element_selected')\r\n\t\t\tbuttonEnableDisable.prop('disabled', false)\r\n\t\t} else if ($element.data('type') === 'dir') {\r\n\t\t\tthis._fillFilePicker(this.$filePicker.data('path') + '/' + $element.data('entryname'), type)\r\n\t\t\tthis._changeButtonsText(type, $element.data('entryname'))\r\n\t\t\tif (this.$filePicker.data('mimetype').indexOf('httpd/unix-directory') !== -1 || this.$filePicker.data('allowDirectoryChooser')) {\r\n\t\t\t\tbuttonEnableDisable.prop('disabled', false)\r\n\t\t\t} else {\r\n\t\t\t\tbuttonEnableDisable.prop('disabled', true)\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Handle\r\n\t * @param type of action\r\n\t * @param dir on which to change buttons text\r\n\t * @private\r\n\t */\r\n\t_changeButtonsText: function(type, dir) {\r\n\t\tvar copyText = dir === '' ? t('core', 'Copy') : t('core', 'Copy to {folder}', { folder: dir })\r\n\t\tvar moveText = dir === '' ? t('core', 'Move') : t('core', 'Move to {folder}', { folder: dir })\r\n\t\tvar buttons = $('.oc-dialog-buttonrow button')\r\n\t\tswitch (type) {\r\n\t\t\tcase this.FILEPICKER_TYPE_CHOOSE:\r\n\t\t\t\tbreak\r\n\t\t\tcase this.FILEPICKER_TYPE_CUSTOM:\r\n\t\t\t\tbreak\r\n\t\t\tcase this.FILEPICKER_TYPE_COPY:\r\n\t\t\t\tbuttons.text(copyText)\r\n\t\t\t\tbreak\r\n\t\t\tcase this.FILEPICKER_TYPE_MOVE:\r\n\t\t\t\tbuttons.text(moveText)\r\n\t\t\t\tbreak\r\n\t\t\tcase this.FILEPICKER_TYPE_COPY_MOVE:\r\n\t\t\t\tbuttons.eq(0).text(copyText)\r\n\t\t\t\tbuttons.eq(1).text(moveText)\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Dialogs\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport { emit } from '@nextcloud/event-bus'\r\n\r\n/**\r\n * @private\r\n * @param {Document} global the document to read the initial value from\r\n * @param {Function} emit the function to invoke for every new token\r\n * @return {object}\r\n */\r\nexport const manageToken = (global, emit) => {\r\n\tlet token = global.getElementsByTagName('head')[0].getAttribute('data-requesttoken')\r\n\r\n\treturn {\r\n\t\tgetToken: () => token,\r\n\t\tsetToken: newToken => {\r\n\t\t\ttoken = newToken\r\n\r\n\t\t\temit('csrf-token-update', {\r\n\t\t\t\ttoken,\r\n\t\t\t})\r\n\t\t},\r\n\t}\r\n}\r\n\r\nconst manageFromDocument = manageToken(document, emit)\r\n\r\n/**\r\n * @return {string}\r\n */\r\nexport const getToken = manageFromDocument.getToken\r\n\r\n/**\r\n * @param {string} newToken new token\r\n */\r\nexport const setToken = manageFromDocument.setToken\r\n","/**\r\n * @copyright 2012 Robin Appelman icewind1991@gmail.com\r\n *\r\n * @author Arthur Schiwon <blizzz@arthur-schiwon.de>\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Lukas Reschke <lukas@statuscode.ch>\r\n * @author Robin Appelman <robin@icewind.nl>\r\n * @author Thomas Müller <thomas.mueller@tmit.eu>\r\n * @author Vincent Petry <vincent@nextcloud.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\n/* eslint-disable */\r\nimport $ from 'jquery'\r\n\r\nimport { getToken } from './requesttoken'\r\n\r\n/**\r\n * Create a new event source\r\n * @param {string} src\r\n * @param {object} [data] to be send as GET\r\n *\r\n * @constructs OCEventSource\r\n */\r\nconst OCEventSource = function(src, data) {\r\n\tvar dataStr = ''\r\n\tvar name\r\n\tvar joinChar\r\n\tthis.typelessListeners = []\r\n\tthis.closed = false\r\n\tthis.listeners = {}\r\n\tif (data) {\r\n\t\tfor (name in data) {\r\n\t\t\tdataStr += name + '=' + encodeURIComponent(data[name]) + '&'\r\n\t\t}\r\n\t}\r\n\tdataStr += 'requesttoken=' + encodeURIComponent(getToken())\r\n\tif (!this.useFallBack && typeof EventSource !== 'undefined') {\r\n\t\tjoinChar = '&'\r\n\t\tif (src.indexOf('?') === -1) {\r\n\t\t\tjoinChar = '?'\r\n\t\t}\r\n\t\tthis.source = new EventSource(src + joinChar + dataStr)\r\n\t\tthis.source.onmessage = function(e) {\r\n\t\t\tfor (var i = 0; i < this.typelessListeners.length; i++) {\r\n\t\t\t\tthis.typelessListeners[i](JSON.parse(e.data))\r\n\t\t\t}\r\n\t\t}.bind(this)\r\n\t} else {\r\n\t\tvar iframeId = 'oc_eventsource_iframe_' + OCEventSource.iframeCount\r\n\t\tOCEventSource.fallBackSources[OCEventSource.iframeCount] = this\r\n\t\tthis.iframe = $('<iframe></iframe>')\r\n\t\tthis.iframe.attr('id', iframeId)\r\n\t\tthis.iframe.hide()\r\n\r\n\t\tjoinChar = '&'\r\n\t\tif (src.indexOf('?') === -1) {\r\n\t\t\tjoinChar = '?'\r\n\t\t}\r\n\t\tthis.iframe.attr('src', src + joinChar + 'fallback=true&fallback_id=' + OCEventSource.iframeCount + '&' + dataStr)\r\n\t\t$('body').append(this.iframe)\r\n\t\tthis.useFallBack = true\r\n\t\tOCEventSource.iframeCount++\r\n\t}\r\n\t// add close listener\r\n\tthis.listen('__internal__', function(data) {\r\n\t\tif (data === 'close') {\r\n\t\t\tthis.close()\r\n\t\t}\r\n\t}.bind(this))\r\n}\r\nOCEventSource.fallBackSources = []\r\nOCEventSource.iframeCount = 0// number of fallback iframes\r\nOCEventSource.fallBackCallBack = function(id, type, data) {\r\n\tOCEventSource.fallBackSources[id].fallBackCallBack(type, data)\r\n}\r\nOCEventSource.prototype = {\r\n\ttypelessListeners: [],\r\n\tiframe: null,\r\n\tlisteners: {}, // only for fallback\r\n\tuseFallBack: false,\r\n\t/**\r\n\t * Fallback callback for browsers that don't have the\r\n\t * native EventSource object.\r\n\t *\r\n\t * Calls the registered listeners.\r\n\t *\r\n\t * @private\r\n\t * @param {String} type event type\r\n\t * @param {Object} data received data\r\n\t */\r\n\tfallBackCallBack: function(type, data) {\r\n\t\tvar i\r\n\t\t// ignore messages that might appear after closing\r\n\t\tif (this.closed) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (type) {\r\n\t\t\tif (typeof this.listeners.done !== 'undefined') {\r\n\t\t\t\tfor (i = 0; i < this.listeners[type].length; i++) {\r\n\t\t\t\t\tthis.listeners[type][i](data)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (i = 0; i < this.typelessListeners.length; i++) {\r\n\t\t\t\tthis.typelessListeners[i](data)\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tlastLength: 0, // for fallback\r\n\t/**\r\n\t * Listen to a given type of events.\r\n\t *\r\n\t * @param {String} type event type\r\n\t * @param {Function} callback event callback\r\n\t */\r\n\tlisten: function(type, callback) {\r\n\t\tif (callback && callback.call) {\r\n\r\n\t\t\tif (type) {\r\n\t\t\t\tif (this.useFallBack) {\r\n\t\t\t\t\tif (!this.listeners[type]) {\r\n\t\t\t\t\t\tthis.listeners[type] = []\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.listeners[type].push(callback)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.source.addEventListener(type, function(e) {\r\n\t\t\t\t\t\tif (typeof e.data !== 'undefined') {\r\n\t\t\t\t\t\t\tcallback(JSON.parse(e.data))\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcallback('')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, false)\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.typelessListeners.push(callback)\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t/**\r\n\t * Closes this event source.\r\n\t */\r\n\tclose: function() {\r\n\t\tthis.closed = true\r\n\t\tif (typeof this.source !== 'undefined') {\r\n\t\t\tthis.source.close()\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default OCEventSource\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author Daniel Calviño Sánchez <danxuliu@gmail.com>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport _ from 'underscore'\r\n/** @typedef {import('jquery')} jQuery */\r\nimport $ from 'jquery'\r\n\r\nimport { menuSpeed } from './constants'\r\n\r\nexport let currentMenu = null\r\nexport let currentMenuToggle = null\r\n\r\n/**\r\n * For menu toggling\r\n *\r\n * @param {jQuery} $toggle the toggle element\r\n * @param {jQuery} $menuEl the menu container element\r\n * @param {Function | undefined} toggle callback invoked everytime the menu is opened\r\n * @param {boolean} headerMenu is this a top right header menu?\r\n * @return {void}\r\n */\r\nexport const registerMenu = function($toggle, $menuEl, toggle, headerMenu) {\r\n\t$menuEl.addClass('menu')\r\n\tconst isClickableElement = $toggle.prop('tagName') === 'A' || $toggle.prop('tagName') === 'BUTTON'\r\n\r\n\t// On link and button, the enter key trigger a click event\r\n\t// Only use the click to avoid two fired events\r\n\t$toggle.on(isClickableElement ? 'click.menu' : 'click.menu keyup.menu', function(event) {\r\n\t\t// prevent the link event (append anchor to URL)\r\n\t\tevent.preventDefault()\r\n\r\n\t\t// allow enter key as a trigger\r\n\t\tif (event.key && event.key !== 'Enter') {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif ($menuEl.is(currentMenu)) {\r\n\t\t\thideMenus()\r\n\t\t\treturn\r\n\t\t} else if (currentMenu) {\r\n\t\t\t// another menu was open?\r\n\t\t\t// close it\r\n\t\t\thideMenus()\r\n\t\t}\r\n\r\n\t\tif (headerMenu === true) {\r\n\t\t\t$menuEl.parent().addClass('openedMenu')\r\n\t\t}\r\n\r\n\t\t// Set menu to expanded\r\n\t\t$toggle.attr('aria-expanded', true)\r\n\r\n\t\t$menuEl.slideToggle(menuSpeed, toggle)\r\n\t\tcurrentMenu = $menuEl\r\n\t\tcurrentMenuToggle = $toggle\r\n\t})\r\n}\r\n\r\n/**\r\n * Unregister a previously registered menu\r\n *\r\n * @param {jQuery} $toggle the toggle element\r\n * @param {jQuery} $menuEl the menu container element\r\n */\r\nexport const unregisterMenu = ($toggle, $menuEl) => {\r\n\t// close menu if opened\r\n\tif ($menuEl.is(currentMenu)) {\r\n\t\thideMenus()\r\n\t}\r\n\t$toggle.off('click.menu').removeClass('menutoggle')\r\n\t$menuEl.removeClass('menu')\r\n}\r\n\r\n/**\r\n * Hides any open menus\r\n *\r\n * @param {Function} complete callback when the hiding animation is done\r\n */\r\nexport const hideMenus = function(complete) {\r\n\tif (currentMenu) {\r\n\t\tconst lastMenu = currentMenu\r\n\t\tcurrentMenu.trigger(new $.Event('beforeHide'))\r\n\t\tcurrentMenu.slideUp(menuSpeed, function() {\r\n\t\t\tlastMenu.trigger(new $.Event('afterHide'))\r\n\t\t\tif (complete) {\r\n\t\t\t\tcomplete.apply(this, arguments)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// Set menu to closed\r\n\t$('.menutoggle').attr('aria-expanded', false)\r\n\tif (currentMenuToggle) {\r\n\t\tcurrentMenuToggle.attr('aria-expanded', false)\r\n\t}\r\n\r\n\t$('.openedMenu').removeClass('openedMenu')\r\n\tcurrentMenu = null\r\n\tcurrentMenuToggle = null\r\n}\r\n\r\n/**\r\n * Shows a given element as menu\r\n *\r\n * @param {object} [$toggle=null] menu toggle\r\n * @param {object} $menuEl menu element\r\n * @param {Function} complete callback when the showing animation is done\r\n */\r\nexport const showMenu = ($toggle, $menuEl, complete) => {\r\n\tif ($menuEl.is(currentMenu)) {\r\n\t\treturn\r\n\t}\r\n\thideMenus()\r\n\tcurrentMenu = $menuEl\r\n\tcurrentMenuToggle = $toggle\r\n\t$menuEl.trigger(new $.Event('beforeShow'))\r\n\t$menuEl.show()\r\n\t$menuEl.trigger(new $.Event('afterShow'))\r\n\t// no animation\r\n\tif (_.isFunction(complete)) {\r\n\t\tcomplete()\r\n\t}\r\n}\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nexport const coreApps = ['', 'admin', 'log', 'core/search', 'core', '3rdparty']\r\nexport const menuSpeed = 50\r\nexport const PERMISSION_NONE = 0\r\nexport const PERMISSION_CREATE = 4\r\nexport const PERMISSION_READ = 1\r\nexport const PERMISSION_UPDATE = 2\r\nexport const PERMISSION_DELETE = 8\r\nexport const PERMISSION_SHARE = 16\r\nexport const PERMISSION_ALL = 31\r\nexport const TAG_FAVORITE = '_$!<Favorite>!$_'\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nconst isAdmin = !!window._oc_isadmin\r\n\r\n/**\r\n * Returns whether the current user is an administrator\r\n *\r\n * @return {boolean} true if the user is an admin, false otherwise\r\n * @since 9.0.0\r\n */\r\nexport const isUserAdmin = () => isAdmin\r\n","/**\r\n * Copyright (c) 2014 Vincent Petry <pvince81@owncloud.com>\r\n * Copyright (c) 2005-2010 Zend Technologies USA Inc. (http://www.zend.com)\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author Daniel Kesselberg <mail@danielkesselberg.de>\r\n * @author Joas Schilling <coding@schilljs.com>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Morris Jobke <hey@morrisjobke.de>\r\n * @author Roeland Jago Douma <roeland@famdouma.nl>\r\n * @author Vincent Petry <vincent@nextcloud.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport Handlebars from 'handlebars'\r\nimport {\r\n\tloadTranslations,\r\n\ttranslate,\r\n\ttranslatePlural,\r\n\tregister,\r\n\tunregister,\r\n} from '@nextcloud/l10n'\r\n\r\n/**\r\n * L10N namespace with localization functions.\r\n *\r\n * @namespace OC.L10n\r\n * @deprecated 26.0.0 use https://www.npmjs.com/package/@nextcloud/l10n\r\n */\r\nconst L10n = {\r\n\r\n\t/**\r\n\t * Load an app's translation bundle if not loaded already.\r\n\t *\r\n\t * @deprecated 26.0.0 use `loadTranslations` from https://www.npmjs.com/package/@nextcloud/l10n\r\n\t *\r\n\t * @param {string} appName name of the app\r\n\t * @param {Function} callback callback to be called when\r\n\t * the translations are loaded\r\n\t * @return {Promise} promise\r\n\t */\r\n\tload: loadTranslations,\r\n\r\n\t/**\r\n\t * Register an app's translation bundle.\r\n\t *\r\n\t * @deprecated 26.0.0 use `register` from https://www.npmjs.com/package/@nextcloud/l10\r\n\t *\r\n\t * @param {string} appName name of the app\r\n\t * @param {Object<string, string>} bundle bundle\r\n\t */\r\n\tregister,\r\n\r\n\t/**\r\n\t * @private\r\n\t * @deprecated 26.0.0 use `unregister` from https://www.npmjs.com/package/@nextcloud/l10n\r\n\t */\r\n\t_unregister: unregister,\r\n\r\n\t/**\r\n\t * Translate a string\r\n\t *\r\n\t * @deprecated 26.0.0 use `translate` from https://www.npmjs.com/package/@nextcloud/l10n\r\n\t *\r\n\t * @param {string} app the id of the app for which to translate the string\r\n\t * @param {string} text the string to translate\r\n\t * @param {object} [vars] map of placeholder key to value\r\n\t * @param {number} [count] number to replace %n with\r\n\t * @param {Array} [options] options array\r\n\t * @param {boolean} [options.escape=true] enable/disable auto escape of placeholders (by default enabled)\r\n\t * @param {boolean} [options.sanitize=true] enable/disable sanitization (by default enabled)\r\n\t * @return {string}\r\n\t */\r\n\ttranslate,\r\n\r\n\t/**\r\n\t * Translate a plural string\r\n\t *\r\n\t * @deprecated 26.0.0 use `translatePlural` from https://www.npmjs.com/package/@nextcloud/l10n\r\n\t *\r\n\t * @param {string} app the id of the app for which to translate the string\r\n\t * @param {string} textSingular the string to translate for exactly one object\r\n\t * @param {string} textPlural the string to translate for n objects\r\n\t * @param {number} count number to determine whether to use singular or plural\r\n\t * @param {object} [vars] map of placeholder key to value\r\n\t * @param {Array} [options] options array\r\n\t * @param {boolean} [options.escape=true] enable/disable auto escape of placeholders (by default enabled)\r\n\t * @return {string} Translated string\r\n\t */\r\n\ttranslatePlural,\r\n}\r\n\r\nexport default L10n\r\n\r\nHandlebars.registerHelper('t', function(app, text) {\r\n\treturn translate(app, text)\r\n})\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author rakekniven <mark.ziegler@rakekniven.de>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport $ from 'jquery'\r\n\r\n/**\r\n * A little class to manage a status field for a \"saving\" process.\r\n * It can be used to display a starting message (e.g. \"Saving...\") and then\r\n * replace it with a green success message or a red error message.\r\n *\r\n * @namespace OC.msg\r\n */\r\nexport default {\r\n\t/**\r\n\t * Displayes a \"Saving...\" message in the given message placeholder\r\n\t *\r\n\t * @param {object} selector    Placeholder to display the message in\r\n\t */\r\n\tstartSaving(selector) {\r\n\t\tthis.startAction(selector, t('core', 'Saving …'))\r\n\t},\r\n\r\n\t/**\r\n\t * Displayes a custom message in the given message placeholder\r\n\t *\r\n\t * @param {object} selector    Placeholder to display the message in\r\n\t * @param {string} message    Plain text message to display (no HTML allowed)\r\n\t */\r\n\tstartAction(selector, message) {\r\n\t\t$(selector).text(message)\r\n\t\t\t.removeClass('success')\r\n\t\t\t.removeClass('error')\r\n\t\t\t.stop(true, true)\r\n\t\t\t.show()\r\n\t},\r\n\r\n\t/**\r\n\t * Displayes an success/error message in the given selector\r\n\t *\r\n\t * @param {object} selector    Placeholder to display the message in\r\n\t * @param {object} response    Response of the server\r\n\t * @param {object} response.data    Data of the servers response\r\n\t * @param {string} response.data.message    Plain text message to display (no HTML allowed)\r\n\t * @param {string} response.status    is being used to decide whether the message\r\n\t * is displayed as an error/success\r\n\t */\r\n\tfinishedSaving(selector, response) {\r\n\t\tthis.finishedAction(selector, response)\r\n\t},\r\n\r\n\t/**\r\n\t * Displayes an success/error message in the given selector\r\n\t *\r\n\t * @param {object} selector    Placeholder to display the message in\r\n\t * @param {object} response    Response of the server\r\n\t * @param {object} response.data Data of the servers response\r\n\t * @param {string} response.data.message Plain text message to display (no HTML allowed)\r\n\t * @param {string} response.status is being used to decide whether the message\r\n\t * is displayed as an error/success\r\n\t */\r\n\tfinishedAction(selector, response) {\r\n\t\tif (response.status === 'success') {\r\n\t\t\tthis.finishedSuccess(selector, response.data.message)\r\n\t\t} else {\r\n\t\t\tthis.finishedError(selector, response.data.message)\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Displayes an success message in the given selector\r\n\t *\r\n\t * @param {object} selector Placeholder to display the message in\r\n\t * @param {string} message Plain text success message to display (no HTML allowed)\r\n\t */\r\n\tfinishedSuccess(selector, message) {\r\n\t\t$(selector).text(message)\r\n\t\t\t.addClass('success')\r\n\t\t\t.removeClass('error')\r\n\t\t\t.stop(true, true)\r\n\t\t\t.delay(3000)\r\n\t\t\t.fadeOut(900)\r\n\t\t\t.show()\r\n\t},\r\n\r\n\t/**\r\n\t * Displayes an error message in the given selector\r\n\t *\r\n\t * @param {object} selector Placeholder to display the message in\r\n\t * @param {string} message Plain text error message to display (no HTML allowed)\r\n\t */\r\n\tfinishedError(selector, message) {\r\n\t\t$(selector).text(message)\r\n\t\t\t.addClass('error')\r\n\t\t\t.removeClass('success')\r\n\t\t\t.show()\r\n\t},\r\n}\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Roeland Jago Douma <roeland@famdouma.nl>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport _ from 'underscore'\r\nimport $ from 'jquery'\r\nimport moment from 'moment'\r\nimport { generateUrl } from '@nextcloud/router'\r\n\r\nimport OC from './index'\r\n\r\n/**\r\n * @namespace OC.PasswordConfirmation\r\n */\r\nexport default {\r\n\tcallback: null,\r\n\r\n\tpageLoadTime: null,\r\n\r\n\tinit() {\r\n\t\t$('.password-confirm-required').on('click', _.bind(this.requirePasswordConfirmation, this))\r\n\t\tthis.pageLoadTime = moment.now()\r\n\t},\r\n\r\n\trequiresPasswordConfirmation() {\r\n\t\tconst serverTimeDiff = this.pageLoadTime - (window.nc_pageLoad * 1000)\r\n\t\tconst timeSinceLogin = moment.now() - (serverTimeDiff + (window.nc_lastLogin * 1000))\r\n\r\n\t\t// if timeSinceLogin > 30 minutes and user backend allows password confirmation\r\n\t\treturn (window.backendAllowsPasswordConfirmation && timeSinceLogin > 30 * 60 * 1000)\r\n\t},\r\n\r\n\t/**\r\n\t * @param {Function} callback success callback function\r\n\t * @param {object} options options\r\n\t * @param {Function} rejectCallback error callback function\r\n\t */\r\n\trequirePasswordConfirmation(callback, options, rejectCallback) {\r\n\t\toptions = typeof options !== 'undefined' ? options : {}\r\n\t\tconst defaults = {\r\n\t\t\ttitle: t('core', 'Authentication required'),\r\n\t\t\ttext: t(\r\n\t\t\t\t'core',\r\n\t\t\t\t'This action requires you to confirm your password'\r\n\t\t\t),\r\n\t\t\tconfirm: t('core', 'Confirm'),\r\n\t\t\tlabel: t('core', 'Password'),\r\n\t\t\terror: '',\r\n\t\t}\r\n\r\n\t\tconst config = _.extend(defaults, options)\r\n\r\n\t\tconst self = this\r\n\r\n\t\tif (this.requiresPasswordConfirmation()) {\r\n\t\t\tOC.dialogs.prompt(\r\n\t\t\t\tconfig.text,\r\n\t\t\t\tconfig.title,\r\n\t\t\t\tfunction(result, password) {\r\n\t\t\t\t\tif (result && password !== '') {\r\n\t\t\t\t\t\tself._confirmPassword(password, config)\r\n\t\t\t\t\t} else if (_.isFunction(rejectCallback)) {\r\n\t\t\t\t\t\trejectCallback()\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\ttrue,\r\n\t\t\t\tconfig.label,\r\n\t\t\t\ttrue\r\n\t\t\t).then(function() {\r\n\t\t\t\tconst $dialog = $('.oc-dialog:visible')\r\n\t\t\t\t$dialog.find('.ui-icon').remove()\r\n\t\t\t\t$dialog.addClass('password-confirmation')\r\n\t\t\t\tif (config.error !== '') {\r\n\t\t\t\t\tconst $error = $('<p></p>').addClass('msg warning').text(config.error)\r\n\t\t\t\t\t$dialog.find('.oc-dialog-content').append($error)\r\n\t\t\t\t}\r\n\t\t\t\t$dialog.find('.oc-dialog-buttonrow').addClass('aside')\r\n\r\n\t\t\t\tconst $buttons = $dialog.find('button')\r\n\t\t\t\t$buttons.eq(0).hide()\r\n\t\t\t\t$buttons.eq(1).text(config.confirm)\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tthis.callback = callback\r\n\t},\r\n\r\n\t_confirmPassword(password, config) {\r\n\t\tconst self = this\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: generateUrl('/login/confirm'),\r\n\t\t\tdata: {\r\n\t\t\t\tpassword,\r\n\t\t\t},\r\n\t\t\ttype: 'POST',\r\n\t\t\tsuccess(response) {\r\n\t\t\t\twindow.nc_lastLogin = response.lastLogin\r\n\r\n\t\t\t\tif (_.isFunction(self.callback)) {\r\n\t\t\t\t\tself.callback()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror() {\r\n\t\t\t\tconfig.error = t('core', 'Failed to authenticate, try again')\r\n\t\t\t\tOC.PasswordConfirmation.requirePasswordConfirmation(self.callback, config)\r\n\t\t\t},\r\n\t\t})\r\n\t},\r\n}\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nexport const theme = window._theme || {}\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport _ from 'underscore'\r\nimport OC from './index'\r\n\r\n/**\r\n * Utility class for the history API,\r\n * includes fallback to using the URL hash when\r\n * the browser doesn't support the history API.\r\n *\r\n * @namespace OC.Util.History\r\n */\r\nexport default {\r\n\r\n\t_handlers: [],\r\n\r\n\t/**\r\n\t * Push the current URL parameters to the history stack\r\n\t * and change the visible URL.\r\n\t * Note: this includes a workaround for IE8/IE9 that uses\r\n\t * the hash part instead of the search part.\r\n\t *\r\n\t * @param {object | string} params to append to the URL, can be either a string\r\n\t * or a map\r\n\t * @param {string} [url] URL to be used, otherwise the current URL will be used,\r\n\t * using the params as query string\r\n\t * @param {boolean} [replace=false] whether to replace instead of pushing\r\n\t */\r\n\t_pushState(params, url, replace) {\r\n\t\tlet strParams\r\n\t\tif (typeof (params) === 'string') {\r\n\t\t\tstrParams = params\r\n\t\t} else {\r\n\t\t\tstrParams = OC.buildQueryString(params)\r\n\t\t}\r\n\r\n\t\tif (window.history.pushState) {\r\n\t\t\turl = url || location.pathname + '?' + strParams\r\n\t\t\t// Workaround for bug with SVG and window.history.pushState on Firefox < 51\r\n\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=652991\r\n\t\t\tconst isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1\r\n\t\t\tif (isFirefox && parseInt(navigator.userAgent.split('/').pop()) < 51) {\r\n\t\t\t\tconst patterns = document.querySelectorAll('[fill^=\"url(#\"], [stroke^=\"url(#\"], [filter^=\"url(#invert\"]')\r\n\t\t\t\tfor (let i = 0, ii = patterns.length, pattern; i < ii; i++) {\r\n\t\t\t\t\tpattern = patterns[i]\r\n\t\t\t\t\t// eslint-disable-next-line no-self-assign\r\n\t\t\t\t\tpattern.style.fill = pattern.style.fill\r\n\t\t\t\t\t// eslint-disable-next-line no-self-assign\r\n\t\t\t\t\tpattern.style.stroke = pattern.style.stroke\r\n\t\t\t\t\tpattern.removeAttribute('filter')\r\n\t\t\t\t\tpattern.setAttribute('filter', 'url(#invert)')\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (replace) {\r\n\t\t\t\twindow.history.replaceState(params, '', url)\r\n\t\t\t} else {\r\n\t\t\t\twindow.history.pushState(params, '', url)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// use URL hash for IE8\r\n\t\t\twindow.location.hash = '?' + strParams\r\n\t\t\t// inhibit next onhashchange that just added itself\r\n\t\t\t// to the event queue\r\n\t\t\tthis._cancelPop = true\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Push the current URL parameters to the history stack\r\n\t * and change the visible URL.\r\n\t * Note: this includes a workaround for IE8/IE9 that uses\r\n\t * the hash part instead of the search part.\r\n\t *\r\n\t * @param {object | string} params to append to the URL, can be either a string or a map\r\n\t * @param {string} [url] URL to be used, otherwise the current URL will be used, using the params as query string\r\n\t */\r\n\tpushState(params, url) {\r\n\t\tthis._pushState(params, url, false)\r\n\t},\r\n\r\n\t/**\r\n\t * Push the current URL parameters to the history stack\r\n\t * and change the visible URL.\r\n\t * Note: this includes a workaround for IE8/IE9 that uses\r\n\t * the hash part instead of the search part.\r\n\t *\r\n\t * @param {object | string} params to append to the URL, can be either a string\r\n\t * or a map\r\n\t * @param {string} [url] URL to be used, otherwise the current URL will be used,\r\n\t * using the params as query string\r\n\t */\r\n\treplaceState(params, url) {\r\n\t\tthis._pushState(params, url, true)\r\n\t},\r\n\r\n\t/**\r\n\t * Add a popstate handler\r\n\t *\r\n\t * @param {Function} handler handler\r\n\t */\r\n\taddOnPopStateHandler(handler) {\r\n\t\tthis._handlers.push(handler)\r\n\t},\r\n\r\n\t/**\r\n\t * Parse a query string from the hash part of the URL.\r\n\t * (workaround for IE8 / IE9)\r\n\t *\r\n\t * @return {string}\r\n\t */\r\n\t_parseHashQuery() {\r\n\t\tconst hash = window.location.hash\r\n\t\tconst pos = hash.indexOf('?')\r\n\t\tif (pos >= 0) {\r\n\t\t\treturn hash.substr(pos + 1)\r\n\t\t}\r\n\t\tif (hash.length) {\r\n\t\t\t// remove hash sign\r\n\t\t\treturn hash.substr(1)\r\n\t\t}\r\n\t\treturn ''\r\n\t},\r\n\r\n\t_decodeQuery(query) {\r\n\t\treturn query.replace(/\\+/g, ' ')\r\n\t},\r\n\r\n\t/**\r\n\t * Parse the query/search part of the URL.\r\n\t * Also try and parse it from the URL hash (for IE8)\r\n\t *\r\n\t * @return {object} map of parameters\r\n\t */\r\n\tparseUrlQuery() {\r\n\t\tconst query = this._parseHashQuery()\r\n\t\tlet params\r\n\t\t// try and parse from URL hash first\r\n\t\tif (query) {\r\n\t\t\tparams = OC.parseQueryString(this._decodeQuery(query))\r\n\t\t}\r\n\t\t// else read from query attributes\r\n\t\tparams = _.extend(params || {}, OC.parseQueryString(this._decodeQuery(location.search)))\r\n\t\treturn params || {}\r\n\t},\r\n\r\n\t_onPopState(e) {\r\n\t\tif (this._cancelPop) {\r\n\t\t\tthis._cancelPop = false\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet params\r\n\t\tif (!this._handlers.length) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tparams = (e && e.state)\r\n\t\tif (_.isString(params)) {\r\n\t\t\tparams = OC.parseQueryString(params)\r\n\t\t} else if (!params) {\r\n\t\t\tparams = this.parseUrlQuery() || {}\r\n\t\t}\r\n\t\tfor (let i = 0; i < this._handlers.length; i++) {\r\n\t\t\tthis._handlers[i](params)\r\n\t\t}\r\n\t},\r\n}\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport moment from 'moment'\r\n\r\nimport History from './util-history'\r\nimport OC from './index'\r\nimport { formatFileSize as humanFileSize } from '@nextcloud/files'\r\n\r\n/**\r\n * @param {any} t -\r\n */\r\nfunction chunkify(t) {\r\n\t// Adapted from http://my.opera.com/GreyWyvern/blog/show.dml/1671288\r\n\tconst tz = []\r\n\tlet x = 0\r\n\tlet y = -1\r\n\tlet n = 0\r\n\tlet c\r\n\r\n\twhile (x < t.length) {\r\n\t\tc = t.charAt(x)\r\n\t\t// only include the dot in strings\r\n\t\tconst m = ((!n && c === '.') || (c >= '0' && c <= '9'))\r\n\t\tif (m !== n) {\r\n\t\t\t// next chunk\r\n\t\t\ty++\r\n\t\t\ttz[y] = ''\r\n\t\t\tn = m\r\n\t\t}\r\n\t\ttz[y] += c\r\n\t\tx++\r\n\t}\r\n\treturn tz\r\n}\r\n\r\n/**\r\n * Utility functions\r\n *\r\n * @namespace OC.Util\r\n */\r\nexport default {\r\n\r\n\tHistory,\r\n\r\n\t/**\r\n\t * @deprecated use https://nextcloud.github.io/nextcloud-files/functions/formatFileSize.html\r\n\t */\r\n\thumanFileSize,\r\n\r\n\t/**\r\n\t * Returns a file size in bytes from a humanly readable string\r\n\t * Makes 2kB to 2048.\r\n\t * Inspired by computerFileSize in helper.php\r\n\t *\r\n\t * @param  {string} string file size in human-readable format\r\n\t * @return {number} or null if string could not be parsed\r\n\t *\r\n\t *\r\n\t */\r\n\tcomputerFileSize(string) {\r\n\t\tif (typeof string !== 'string') {\r\n\t\t\treturn null\r\n\t\t}\r\n\r\n\t\tconst s = string.toLowerCase().trim()\r\n\t\tlet bytes = null\r\n\r\n\t\tconst bytesArray = {\r\n\t\t\tb: 1,\r\n\t\t\tk: 1024,\r\n\t\t\tkb: 1024,\r\n\t\t\tmb: 1024 * 1024,\r\n\t\t\tm: 1024 * 1024,\r\n\t\t\tgb: 1024 * 1024 * 1024,\r\n\t\t\tg: 1024 * 1024 * 1024,\r\n\t\t\ttb: 1024 * 1024 * 1024 * 1024,\r\n\t\t\tt: 1024 * 1024 * 1024 * 1024,\r\n\t\t\tpb: 1024 * 1024 * 1024 * 1024 * 1024,\r\n\t\t\tp: 1024 * 1024 * 1024 * 1024 * 1024,\r\n\t\t}\r\n\r\n\t\tconst matches = s.match(/^[\\s+]?([0-9]*)(\\.([0-9]+))?( +)?([kmgtp]?b?)$/i)\r\n\t\tif (matches !== null) {\r\n\t\t\tbytes = parseFloat(s)\r\n\t\t\tif (!isFinite(bytes)) {\r\n\t\t\t\treturn null\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn null\r\n\t\t}\r\n\t\tif (matches[5]) {\r\n\t\t\tbytes = bytes * bytesArray[matches[5]]\r\n\t\t}\r\n\r\n\t\tbytes = Math.round(bytes)\r\n\t\treturn bytes\r\n\t},\r\n\r\n\t/**\r\n\t * @param {string|number} timestamp timestamp\r\n\t * @param {string} format date format, see momentjs docs\r\n\t * @return {string} timestamp formatted as requested\r\n\t */\r\n\tformatDate(timestamp, format) {\r\n\t\tif (window.TESTING === undefined) {\r\n\t\t\tconsole.warn('OC.Util.formatDate is deprecated and will be removed in Nextcloud 21. See @nextcloud/moment')\r\n\t\t}\r\n\t\tformat = format || 'LLL'\r\n\t\treturn moment(timestamp).format(format)\r\n\t},\r\n\r\n\t/**\r\n\t * @param {string|number} timestamp timestamp\r\n\t * @return {string} human readable difference from now\r\n\t */\r\n\trelativeModifiedDate(timestamp) {\r\n\t\tif (window.TESTING === undefined) {\r\n\t\t\tconsole.warn('OC.Util.relativeModifiedDate is deprecated and will be removed in Nextcloud 21. See @nextcloud/moment')\r\n\t\t}\r\n\t\tconst diff = moment().diff(moment(timestamp))\r\n\t\tif (diff >= 0 && diff < 45000) {\r\n\t\t\treturn t('core', 'seconds ago')\r\n\t\t}\r\n\t\treturn moment(timestamp).fromNow()\r\n\t},\r\n\r\n\t/**\r\n\t * Returns the width of a generic browser scrollbar\r\n\t *\r\n\t * @return {number} width of scrollbar\r\n\t */\r\n\tgetScrollBarWidth() {\r\n\t\tif (this._scrollBarWidth) {\r\n\t\t\treturn this._scrollBarWidth\r\n\t\t}\r\n\r\n\t\tconst inner = document.createElement('p')\r\n\t\tinner.style.width = '100%'\r\n\t\tinner.style.height = '200px'\r\n\r\n\t\tconst outer = document.createElement('div')\r\n\t\touter.style.position = 'absolute'\r\n\t\touter.style.top = '0px'\r\n\t\touter.style.left = '0px'\r\n\t\touter.style.visibility = 'hidden'\r\n\t\touter.style.width = '200px'\r\n\t\touter.style.height = '150px'\r\n\t\touter.style.overflow = 'hidden'\r\n\t\touter.appendChild(inner)\r\n\r\n\t\tdocument.body.appendChild(outer)\r\n\t\tconst w1 = inner.offsetWidth\r\n\t\touter.style.overflow = 'scroll'\r\n\t\tlet w2 = inner.offsetWidth\r\n\t\tif (w1 === w2) {\r\n\t\t\tw2 = outer.clientWidth\r\n\t\t}\r\n\r\n\t\tdocument.body.removeChild(outer)\r\n\r\n\t\tthis._scrollBarWidth = (w1 - w2)\r\n\r\n\t\treturn this._scrollBarWidth\r\n\t},\r\n\r\n\t/**\r\n\t * Remove the time component from a given date\r\n\t *\r\n\t * @param {Date} date date\r\n\t * @return {Date} date with stripped time\r\n\t */\r\n\tstripTime(date) {\r\n\t\t// FIXME: likely to break when crossing DST\r\n\t\t// would be better to use a library like momentJS\r\n\t\treturn new Date(date.getFullYear(), date.getMonth(), date.getDate())\r\n\t},\r\n\r\n\t/**\r\n\t * Compare two strings to provide a natural sort\r\n\t *\r\n\t * @param {string} a first string to compare\r\n\t * @param {string} b second string to compare\r\n\t * @return {number} -1 if b comes before a, 1 if a comes before b\r\n\t * or 0 if the strings are identical\r\n\t */\r\n\tnaturalSortCompare(a, b) {\r\n\t\tlet x\r\n\t\tconst aa = chunkify(a)\r\n\t\tconst bb = chunkify(b)\r\n\r\n\t\tfor (x = 0; aa[x] && bb[x]; x++) {\r\n\t\t\tif (aa[x] !== bb[x]) {\r\n\t\t\t\tconst aNum = Number(aa[x]); const bNum = Number(bb[x])\r\n\t\t\t\t// note: == is correct here\r\n\t\t\t\t/* eslint-disable-next-line */\r\n\t\t\t\tif (aNum == aa[x] && bNum == bb[x]) {\r\n\t\t\t\t\treturn aNum - bNum\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Note: This locale setting isn't supported by all browsers but for the ones\r\n\t\t\t\t\t// that do there will be more consistency between client-server sorting\r\n\t\t\t\t\treturn aa[x].localeCompare(bb[x], OC.getLanguage())\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn aa.length - bb.length\r\n\t},\r\n\r\n\t/**\r\n\t * Calls the callback in a given interval until it returns true\r\n\t *\r\n\t * @param {Function} callback function to call on success\r\n\t * @param {number} interval in milliseconds\r\n\t */\r\n\twaitFor(callback, interval) {\r\n\t\tconst internalCallback = function() {\r\n\t\t\tif (callback() !== true) {\r\n\t\t\t\tsetTimeout(internalCallback, interval)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tinternalCallback()\r\n\t},\r\n\r\n\t/**\r\n\t * Checks if a cookie with the given name is present and is set to the provided value.\r\n\t *\r\n\t * @param {string} name name of the cookie\r\n\t * @param {string} value value of the cookie\r\n\t * @return {boolean} true if the cookie with the given name has the given value\r\n\t */\r\n\tisCookieSetToValue(name, value) {\r\n\t\tconst cookies = document.cookie.split(';')\r\n\t\tfor (let i = 0; i < cookies.length; i++) {\r\n\t\t\tconst cookie = cookies[i].split('=')\r\n\t\t\tif (cookie[0].trim() === name && cookie[1].trim() === value) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false\r\n\t},\r\n}\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nconst base = window._oc_debug\r\n\r\nexport const debug = base\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nlet webroot = window._oc_webroot\r\n\r\nif (typeof webroot === 'undefined') {\r\n\twebroot = location.pathname\r\n\tconst pos = webroot.indexOf('/index.php/')\r\n\tif (pos !== -1) {\r\n\t\twebroot = webroot.substr(0, pos)\r\n\t} else {\r\n\t\twebroot = webroot.substr(0, webroot.lastIndexOf('/'))\r\n\t}\r\n}\r\n\r\nexport default webroot\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nexport const get = context => name => {\r\n\tconst namespaces = name.split('.')\r\n\tconst tail = namespaces.pop()\r\n\r\n\tfor (let i = 0; i < namespaces.length; i++) {\r\n\t\tcontext = context[namespaces[i]]\r\n\t\tif (!context) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\treturn context[tail]\r\n}\r\n\r\n/**\r\n * Set a variable by name\r\n *\r\n * @param {string} context context\r\n * @return {Function} setter\r\n * @deprecated 19.0.0 use https://lodash.com/docs#set\r\n */\r\nexport const set = context => (name, value) => {\r\n\tconst namespaces = name.split('.')\r\n\tconst tail = namespaces.pop()\r\n\r\n\tfor (let i = 0; i < namespaces.length; i++) {\r\n\t\tif (!context[namespaces[i]]) {\r\n\t\t\tcontext[namespaces[i]] = {}\r\n\t\t}\r\n\t\tcontext = context[namespaces[i]]\r\n\t}\r\n\tcontext[tail] = value\r\n\treturn value\r\n}\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Roeland Jago Douma <roeland@famdouma.nl>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport { subscribe } from '@nextcloud/event-bus'\r\n\r\nimport { addScript, addStyle } from './legacy-loader'\r\nimport {\r\n\tajaxConnectionLostHandler,\r\n\tprocessAjaxError,\r\n\tregisterXHRForErrorProcessing,\r\n} from './xhr-error'\r\nimport Apps from './apps'\r\nimport { AppConfig, appConfig } from './appconfig'\r\nimport { appSettings } from './appsettings'\r\nimport appswebroots from './appswebroots'\r\nimport Backbone from './backbone'\r\nimport {\r\n\tbasename,\r\n\tdirname,\r\n\tencodePath,\r\n\tisSamePath,\r\n\tjoinPaths,\r\n} from '@nextcloud/paths'\r\nimport {\r\n\tbuild as buildQueryString,\r\n\tparse as parseQueryString,\r\n} from './query-string'\r\nimport Config from './config'\r\nimport {\r\n\tcoreApps,\r\n\tmenuSpeed,\r\n\tPERMISSION_ALL,\r\n\tPERMISSION_CREATE,\r\n\tPERMISSION_DELETE,\r\n\tPERMISSION_NONE,\r\n\tPERMISSION_READ,\r\n\tPERMISSION_SHARE,\r\n\tPERMISSION_UPDATE,\r\n\tTAG_FAVORITE,\r\n} from './constants'\r\nimport ContactsMenu from './contactsmenu'\r\nimport { currentUser, getCurrentUser } from './currentuser'\r\nimport Dialogs from './dialogs'\r\nimport EventSource from './eventsource'\r\nimport { get, set } from './get_set'\r\nimport { getCapabilities } from './capabilities'\r\nimport {\r\n\tgetHost,\r\n\tgetHostName,\r\n\tgetPort,\r\n\tgetProtocol,\r\n} from './host'\r\nimport {\r\n\tgetToken as getRequestToken,\r\n} from './requesttoken'\r\nimport {\r\n\thideMenus,\r\n\tregisterMenu,\r\n\tshowMenu,\r\n\tunregisterMenu,\r\n} from './menu'\r\nimport { isUserAdmin } from './admin'\r\nimport L10N from './l10n'\r\nimport {\r\n\tgetCanonicalLocale,\r\n\tgetLanguage,\r\n\tgetLocale,\r\n} from '@nextcloud/l10n'\r\n\r\nimport {\r\n\tgenerateUrl,\r\n\tgenerateFilePath,\r\n\tgenerateOcsUrl,\r\n\tgenerateRemoteUrl,\r\n\tgetRootUrl,\r\n\timagePath,\r\n\tlinkTo,\r\n} from '@nextcloud/router'\r\n\r\nimport {\r\n\tlinkToRemoteBase,\r\n} from './routing'\r\nimport msg from './msg'\r\nimport Notification from './notification'\r\nimport PasswordConfirmation from './password-confirmation'\r\nimport Plugins from './plugins'\r\nimport { theme } from './theme'\r\nimport Util from './util'\r\nimport { debug } from './debug'\r\nimport { redirect, reload } from './navigation'\r\nimport webroot from './webroot'\r\n\r\n/** @namespace OC */\r\nexport default {\r\n\t/*\r\n\t * Constants\r\n\t */\r\n\tcoreApps,\r\n\tmenuSpeed,\r\n\tPERMISSION_ALL,\r\n\tPERMISSION_CREATE,\r\n\tPERMISSION_DELETE,\r\n\tPERMISSION_NONE,\r\n\tPERMISSION_READ,\r\n\tPERMISSION_SHARE,\r\n\tPERMISSION_UPDATE,\r\n\tTAG_FAVORITE,\r\n\r\n\t/*\r\n\t * Deprecated helpers to be removed\r\n\t */\r\n\t/**\r\n\t * Check if a user file is allowed to be handled.\r\n\t *\r\n\t * @param {string} file to check\r\n\t * @return {boolean}\r\n\t * @deprecated 17.0.0\r\n\t */\r\n\tfileIsBlacklisted: file => !!(file.match(Config.blacklist_files_regex)),\r\n\r\n\taddScript,\r\n\taddStyle,\r\n\tApps,\r\n\tAppConfig,\r\n\tappConfig,\r\n\tappSettings,\r\n\tappswebroots,\r\n\tBackbone,\r\n\tContactsMenu,\r\n\tconfig: Config,\r\n\t/**\r\n\t * Currently logged in user or null if none\r\n\t *\r\n\t * @type {string}\r\n\t * @deprecated use `getCurrentUser` from https://www.npmjs.com/package/@nextcloud/auth\r\n\t */\r\n\tcurrentUser,\r\n\tdialogs: Dialogs,\r\n\tEventSource,\r\n\t/**\r\n\t * Returns the currently logged in user or null if there is no logged in\r\n\t * user (public page mode)\r\n\t *\r\n\t * @since 9.0.0\r\n\t * @deprecated 19.0.0 use `getCurrentUser` from https://www.npmjs.com/package/@nextcloud/auth\r\n\t */\r\n\tgetCurrentUser,\r\n\tisUserAdmin,\r\n\tL10N,\r\n\r\n\t/**\r\n\t * Ajax error handlers\r\n\t *\r\n\t * @todo remove from here and keep internally -> requires new tests\r\n\t */\r\n\t_ajaxConnectionLostHandler: ajaxConnectionLostHandler,\r\n\t_processAjaxError: processAjaxError,\r\n\tregisterXHRForErrorProcessing,\r\n\r\n\t/**\r\n\t * Capabilities\r\n\t *\r\n\t * @type {Array}\r\n\t * @deprecated 20.0.0 use @nextcloud/capabilities instead\r\n\t */\r\n\tgetCapabilities,\r\n\r\n\t/*\r\n\t * Legacy menu helpers\r\n\t */\r\n\thideMenus,\r\n\tregisterMenu,\r\n\tshowMenu,\r\n\tunregisterMenu,\r\n\r\n\t/*\r\n\t * Path helpers\r\n\t */\r\n\t/**\r\n\t * @deprecated 18.0.0 use https://www.npmjs.com/package/@nextcloud/paths\r\n\t */\r\n\tbasename,\r\n\t/**\r\n\t * @deprecated 18.0.0 use https://www.npmjs.com/package/@nextcloud/paths\r\n\t */\r\n\tencodePath,\r\n\t/**\r\n\t * @deprecated 18.0.0 use https://www.npmjs.com/package/@nextcloud/paths\r\n\t */\r\n\tdirname,\r\n\t/**\r\n\t * @deprecated 18.0.0 use https://www.npmjs.com/package/@nextcloud/paths\r\n\t */\r\n\tisSamePath,\r\n\t/**\r\n\t * @deprecated 18.0.0 use https://www.npmjs.com/package/@nextcloud/paths\r\n\t */\r\n\tjoinPaths,\r\n\r\n\t/**\r\n\t * Host (url) helpers\r\n\t */\r\n\tgetHost,\r\n\tgetHostName,\r\n\tgetPort,\r\n\tgetProtocol,\r\n\r\n\t/**\r\n\t * @deprecated 20.0.0 use `getCanonicalLocale` from https://www.npmjs.com/package/@nextcloud/l10n\r\n\t */\r\n\tgetCanonicalLocale,\r\n\t/**\r\n\t * @deprecated 26.0.0 use `getLocale` from https://www.npmjs.com/package/@nextcloud/l10n\r\n\t */\r\n\tgetLocale,\r\n\t/**\r\n\t * @deprecated 26.0.0 use `getLanguage` from https://www.npmjs.com/package/@nextcloud/l10n\r\n\t */\r\n\tgetLanguage,\r\n\r\n\t/**\r\n\t * Query string helpers\r\n\t */\r\n\tbuildQueryString,\r\n\tparseQueryString,\r\n\r\n\tmsg,\r\n\tNotification,\r\n\tPasswordConfirmation,\r\n\tPlugins,\r\n\ttheme,\r\n\tUtil,\r\n\tdebug,\r\n\t/**\r\n\t * @deprecated 19.0.0 use `generateFilePath` from https://www.npmjs.com/package/@nextcloud/router\r\n\t */\r\n\tfilePath: generateFilePath,\r\n\t/**\r\n\t * @deprecated 19.0.0 use `generateUrl` from https://www.npmjs.com/package/@nextcloud/router\r\n\t */\r\n\tgenerateUrl,\r\n\t/**\r\n\t * @deprecated 19.0.0 use https://lodash.com/docs#get\r\n\t */\r\n\tget: get(window),\r\n\t/**\r\n\t * @deprecated 19.0.0 use https://lodash.com/docs#set\r\n\t */\r\n\tset: set(window),\r\n\t/**\r\n\t * @deprecated 19.0.0 use `getRootUrl` from https://www.npmjs.com/package/@nextcloud/router\r\n\t */\r\n\tgetRootPath: getRootUrl,\r\n\t/**\r\n\t * @deprecated 19.0.0 use `imagePath` from https://www.npmjs.com/package/@nextcloud/router\r\n\t */\r\n\timagePath,\r\n\tredirect,\r\n\treload,\r\n\trequestToken: getRequestToken(),\r\n\t/**\r\n\t * @deprecated 19.0.0 use `linkTo` from https://www.npmjs.com/package/@nextcloud/router\r\n\t */\r\n\tlinkTo,\r\n\t/**\r\n\t * @param {string} service service name\r\n\t * @param {number} version OCS API version\r\n\t * @return {string} OCS API base path\r\n\t * @deprecated 19.0.0 use `generateOcsUrl` from https://www.npmjs.com/package/@nextcloud/router\r\n\t */\r\n\tlinkToOCS: (service, version) => {\r\n\t\treturn generateOcsUrl(service, {}, {\r\n\t\t\tocsVersion: version || 1,\r\n\t\t}) + '/'\r\n\t},\r\n\t/**\r\n\t * @deprecated 19.0.0 use `generateRemoteUrl` from https://www.npmjs.com/package/@nextcloud/router\r\n\t */\r\n\tlinkToRemote: generateRemoteUrl,\r\n\tlinkToRemoteBase,\r\n\t/**\r\n\t * Relative path to Nextcloud root.\r\n\t * For example: \"/nextcloud\"\r\n\t *\r\n\t * @type {string}\r\n\t *\r\n\t * @deprecated 19.0.0 use `getRootUrl` from https://www.npmjs.com/package/@nextcloud/router\r\n\t * @see OC#getRootPath\r\n\t */\r\n\twebroot,\r\n}\r\n\r\n// Keep the request token prop in sync\r\nsubscribe('csrf-token-update', e => {\r\n\tOC.requestToken = e.token\r\n\r\n\t// Logging might help debug (Sentry) issues\r\n\tconsole.info('OC.requestToken changed', e.token)\r\n})\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\n/* eslint-disable */\r\nimport $ from 'jquery'\r\nimport { filePath } from './routing'\r\nimport { generateFilePath } from \"@nextcloud/router\"\r\n\r\n/**\r\n * Opens a popup with the setting for an app.\r\n * @param {string} appid The ID of the app e.g. 'calendar', 'contacts' or 'files'.\r\n * @param {boolean|string} loadJS If true 'js/settings.js' is loaded. If it's a string\r\n * it will attempt to load a script by that name in the 'js' directory.\r\n * @param {boolean} [cache] If true the javascript file won't be forced refreshed. Defaults to true.\r\n * @param {string} [scriptName] The name of the PHP file to load. Defaults to 'settings.php' in\r\n * the root of the app directory hierarchy.\r\n *\r\n * @deprecated 17.0.0 this method is unused and will be removed with Nextcloud 18\r\n */\r\nexport const appSettings = args => {\r\n\tconsole.warn('OC.appSettings is deprecated and will be removed with Nextcloud 18')\r\n\r\n\tif (typeof args === 'undefined' || typeof args.appid === 'undefined') {\r\n\t\tthrow {\r\n\t\t\tname: 'MissingParameter',\r\n\t\t\tmessage: 'The parameter appid is missing'\r\n\t\t}\r\n\t}\r\n\tvar props = { scriptName: 'settings.php', cache: true }\r\n\t$.extend(props, args)\r\n\tvar settings = $('#appsettings')\r\n\tif (settings.length === 0) {\r\n\t\tthrow {\r\n\t\t\tname: 'MissingDOMElement',\r\n\t\t\tmessage: 'There has be be an element with id \"appsettings\" for the popup to show.'\r\n\t\t}\r\n\t}\r\n\tvar popup = $('#appsettings_popup')\r\n\tif (popup.length === 0) {\r\n\t\t$('body').prepend('<div class=\"popup hidden\" id=\"appsettings_popup\"></div>')\r\n\t\tpopup = $('#appsettings_popup')\r\n\t\tpopup.addClass(settings.hasClass('topright') ? 'topright' : 'bottomleft')\r\n\t}\r\n\tif (popup.is(':visible')) {\r\n\t\tpopup.hide().remove()\r\n\t} else {\r\n\t\tconst arrowclass = settings.hasClass('topright') ? 'up' : 'left'\r\n\t\t$.get(generateFilePath(props.appid, '', props.scriptName), function(data) {\r\n\t\t\tpopup.html(data).ready(function() {\r\n\t\t\t\tpopup.prepend('<span class=\"arrow ' + arrowclass + '\"></span><h2>' + t('core', 'Settings') + '</h2><a class=\"close\"></a>').show()\r\n\t\t\t\tpopup.find('.close').bind('click', function() {\r\n\t\t\t\t\tpopup.remove()\r\n\t\t\t\t})\r\n\t\t\t\tif (typeof props.loadJS !== 'undefined') {\r\n\t\t\t\t\tvar scriptname\r\n\t\t\t\t\tif (props.loadJS === true) {\r\n\t\t\t\t\t\tscriptname = 'settings.js'\r\n\t\t\t\t\t} else if (typeof props.loadJS === 'string') {\r\n\t\t\t\t\t\tscriptname = props.loadJS\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow {\r\n\t\t\t\t\t\t\tname: 'InvalidParameter',\r\n\t\t\t\t\t\t\tmessage: 'The \"loadJS\" parameter must be either boolean or a string.'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (props.cache) {\r\n\t\t\t\t\t\t$.ajaxSetup({ cache: true })\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$.getScript(generateFilePath(props.appid, 'js', scriptname))\r\n\t\t\t\t\t\t.fail(function(jqxhr, settings, e) {\r\n\t\t\t\t\t\t\tthrow e\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}).show()\r\n\t\t}, 'html')\r\n\t}\r\n}\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Roeland Jago Douma <roeland@famdouma.nl>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport { getCapabilities as realGetCapabilities } from '@nextcloud/capabilities'\r\n\r\n/**\r\n * Returns the capabilities\r\n *\r\n * @return {Array} capabilities\r\n *\r\n * @since 14.0.0\r\n */\r\nexport const getCapabilities = () => {\r\n\tconsole.warn('OC.getCapabilities is deprecated and will be removed in Nextcloud 21. See @nextcloud/capabilities')\r\n\treturn realGetCapabilities()\r\n}\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nexport const getProtocol = () => window.location.protocol.split(':')[0]\r\n\r\n/**\r\n * Returns the host used to access this Nextcloud instance\r\n * Host is sometimes the same as the hostname but now always.\r\n *\r\n * Examples:\r\n * http://example.com => example.com\r\n * https://example.com => example.com\r\n * http://example.com:8080 => example.com:8080\r\n *\r\n * @return {string} host\r\n *\r\n * @since 8.2.0\r\n * @deprecated 17.0.0 use window.location.host directly\r\n */\r\nexport const getHost = () => window.location.host\r\n\r\n/**\r\n * Returns the hostname used to access this Nextcloud instance\r\n * The hostname is always stripped of the port\r\n *\r\n * @return {string} hostname\r\n * @since 9.0.0\r\n * @deprecated 17.0.0 use window.location.hostname directly\r\n */\r\nexport const getHostName = () => window.location.hostname\r\n\r\n/**\r\n * Returns the port number used to access this Nextcloud instance\r\n *\r\n * @return {number} port number\r\n *\r\n * @since 8.2.0\r\n * @deprecated 17.0.0 use window.location.port directly\r\n */\r\nexport const getPort = () => window.location.port\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Roeland Jago Douma <roeland@famdouma.nl>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport $ from 'jquery'\r\n\r\n/**\r\n * Parses a URL query string into a JS map\r\n *\r\n * @param {string} queryString query string in the format param1=1234&param2=abcde&param3=xyz\r\n * @return {Object<string, string>} map containing key/values matching the URL parameters\r\n */\r\nexport const parse = queryString => {\r\n\tlet pos\r\n\tlet components\r\n\tconst result = {}\r\n\tlet key\r\n\tif (!queryString) {\r\n\t\treturn null\r\n\t}\r\n\tpos = queryString.indexOf('?')\r\n\tif (pos >= 0) {\r\n\t\tqueryString = queryString.substr(pos + 1)\r\n\t}\r\n\tconst parts = queryString.replace(/\\+/g, '%20').split('&')\r\n\tfor (let i = 0; i < parts.length; i++) {\r\n\t\t// split on first equal sign\r\n\t\tconst part = parts[i]\r\n\t\tpos = part.indexOf('=')\r\n\t\tif (pos >= 0) {\r\n\t\t\tcomponents = [\r\n\t\t\t\tpart.substr(0, pos),\r\n\t\t\t\tpart.substr(pos + 1),\r\n\t\t\t]\r\n\t\t} else {\r\n\t\t\t// key only\r\n\t\t\tcomponents = [part]\r\n\t\t}\r\n\t\tif (!components.length) {\r\n\t\t\tcontinue\r\n\t\t}\r\n\t\tkey = decodeURIComponent(components[0])\r\n\t\tif (!key) {\r\n\t\t\tcontinue\r\n\t\t}\r\n\t\t// if equal sign was there, return string\r\n\t\tif (components.length > 1) {\r\n\t\t\tresult[key] = decodeURIComponent(components[1])\r\n\t\t} else {\r\n\t\t\t// no equal sign => null value\r\n\t\t\tresult[key] = null\r\n\t\t}\r\n\t}\r\n\treturn result\r\n}\r\n\r\n/**\r\n * Builds a URL query from a JS map.\r\n *\r\n * @param {Object<string, string>} params map containing key/values matching the URL parameters\r\n * @return {string} String containing a URL query (without question) mark\r\n */\r\nexport const build = params => {\r\n\tif (!params) {\r\n\t\treturn ''\r\n\t}\r\n\treturn $.map(params, function(value, key) {\r\n\t\tlet s = encodeURIComponent(key)\r\n\t\tif (value !== null && typeof (value) !== 'undefined') {\r\n\t\t\ts += '=' + encodeURIComponent(value)\r\n\t\t}\r\n\t\treturn s\r\n\t}).join('&')\r\n}\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nexport default {\r\n\r\n\t/**\r\n\t * @type {Array.<OC.Plugin>}\r\n\t */\r\n\t_plugins: {},\r\n\r\n\t/**\r\n\t * Register plugin\r\n\t *\r\n\t * @param {string} targetName app name / class name to hook into\r\n\t * @param {OC.Plugin} plugin plugin\r\n\t */\r\n\tregister(targetName, plugin) {\r\n\t\tlet plugins = this._plugins[targetName]\r\n\t\tif (!plugins) {\r\n\t\t\tplugins = this._plugins[targetName] = []\r\n\t\t}\r\n\t\tplugins.push(plugin)\r\n\t},\r\n\r\n\t/**\r\n\t * Returns all plugin registered to the given target\r\n\t * name / app name / class name.\r\n\t *\r\n\t * @param {string} targetName app name / class name to hook into\r\n\t * @return {Array.<OC.Plugin>} array of plugins\r\n\t */\r\n\tgetPlugins(targetName) {\r\n\t\treturn this._plugins[targetName] || []\r\n\t},\r\n\r\n\t/**\r\n\t * Call attach() on all plugins registered to the given target name.\r\n\t *\r\n\t * @param {string} targetName app name / class name\r\n\t * @param {object} targetObject to be extended\r\n\t * @param {object} [options] options\r\n\t */\r\n\tattach(targetName, targetObject, options) {\r\n\t\tconst plugins = this.getPlugins(targetName)\r\n\t\tfor (let i = 0; i < plugins.length; i++) {\r\n\t\t\tif (plugins[i].attach) {\r\n\t\t\t\tplugins[i].attach(targetObject, options)\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Call detach() on all plugins registered to the given target name.\r\n\t *\r\n\t * @param {string} targetName app name / class name\r\n\t * @param {object} targetObject to be extended\r\n\t * @param {object} [options] options\r\n\t */\r\n\tdetach(targetName, targetObject, options) {\r\n\t\tconst plugins = this.getPlugins(targetName)\r\n\t\tfor (let i = 0; i < plugins.length; i++) {\r\n\t\t\tif (plugins[i].detach) {\r\n\t\t\t\tplugins[i].detach(targetObject, options)\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n}\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nexport const redirect = targetURL => { window.location = targetURL }\r\n\r\n/**\r\n * Reloads the current page\r\n *\r\n * @deprecated 17.0.0 use window.location.reload directly\r\n */\r\nexport const reload = () => { window.location.reload() }\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Roeland Jago Douma <roeland@famdouma.nl>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport {\r\n\tgetRootUrl as realGetRootUrl,\r\n} from '@nextcloud/router'\r\n\r\n/**\r\n * Creates a relative url for remote use\r\n *\r\n * @param {string} service id\r\n * @return {string} the url\r\n */\r\nexport const linkToRemoteBase = service => {\r\n\treturn realGetRootUrl() + '/remote.php/' + service\r\n}\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Julius Härtl <jus@bitgrid.net>\r\n * @author Roeland Jago Douma <roeland@famdouma.nl>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport $ from 'jquery'\r\nimport { emit } from '@nextcloud/event-bus'\r\nimport { loadState } from '@nextcloud/initial-state'\r\nimport { getCurrentUser } from '@nextcloud/auth'\r\nimport { generateUrl } from '@nextcloud/router'\r\n\r\nimport OC from './OC'\r\nimport { setToken as setRequestToken, getToken as getRequestToken } from './OC/requesttoken'\r\n\r\nlet config = null\r\n/**\r\n * The legacy jsunit tests overwrite OC.config before calling initCore\r\n * therefore we need to wait with assigning the config fallback until initCore calls initSessionHeartBeat\r\n */\r\nconst loadConfig = () => {\r\n\ttry {\r\n\t\tconfig = loadState('core', 'config')\r\n\t} catch (e) {\r\n\t\t// This fallback is just for our legacy jsunit tests since we have no way to mock loadState calls\r\n\t\tconfig = OC.config\r\n\t}\r\n}\r\n\r\n/**\r\n * session heartbeat (defaults to enabled)\r\n *\r\n * @return {boolean}\r\n */\r\nconst keepSessionAlive = () => {\r\n\treturn config.session_keepalive === undefined\r\n\t\t|| !!config.session_keepalive\r\n}\r\n\r\n/**\r\n * get interval in seconds\r\n *\r\n * @return {number}\r\n */\r\nconst getInterval = () => {\r\n\tlet interval = NaN\r\n\tif (config.session_lifetime) {\r\n\t\tinterval = Math.floor(config.session_lifetime / 2)\r\n\t}\r\n\r\n\t// minimum one minute, max 24 hours, default 15 minutes\r\n\treturn Math.min(\r\n\t\t24 * 3600,\r\n\t\tMath.max(\r\n\t\t\t60,\r\n\t\t\tisNaN(interval) ? 900 : interval\r\n\t\t)\r\n\t)\r\n}\r\n\r\nconst getToken = async () => {\r\n\tconst url = generateUrl('/csrftoken')\r\n\r\n\t// Not using Axios here as Axios is not stubbable with the sinon fake server\r\n\t// see https://stackoverflow.com/questions/41516044/sinon-mocha-test-with-async-ajax-calls-didnt-return-promises\r\n\t// see js/tests/specs/coreSpec.js for the tests\r\n\tconst resp = await $.get(url)\r\n\r\n\treturn resp.token\r\n}\r\n\r\nconst poll = async () => {\r\n\ttry {\r\n\t\tconst token = await getToken()\r\n\t\tsetRequestToken(token)\r\n\t} catch (e) {\r\n\t\tconsole.error('session heartbeat failed', e)\r\n\t}\r\n}\r\n\r\nconst startPolling = () => {\r\n\tconst interval = setInterval(poll, getInterval() * 1000)\r\n\r\n\tconsole.info('session heartbeat polling started')\r\n\r\n\treturn interval\r\n}\r\n\r\nconst registerAutoLogout = () => {\r\n\tif (!config.auto_logout || !getCurrentUser()) {\r\n\t\treturn\r\n\t}\r\n\r\n\tlet lastActive = Date.now()\r\n\twindow.addEventListener('mousemove', e => {\r\n\t\tlastActive = Date.now()\r\n\t\tlocalStorage.setItem('lastActive', lastActive)\r\n\t})\r\n\r\n\twindow.addEventListener('touchstart', e => {\r\n\t\tlastActive = Date.now()\r\n\t\tlocalStorage.setItem('lastActive', lastActive)\r\n\t})\r\n\r\n\twindow.addEventListener('storage', e => {\r\n\t\tif (e.key !== 'lastActive') {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlastActive = e.newValue\r\n\t})\r\n\r\n\tsetInterval(function() {\r\n\t\tconst timeout = Date.now() - config.session_lifetime * 1000\r\n\t\tif (lastActive < timeout) {\r\n\t\t\tconsole.info('Inactivity timout reached, logging out')\r\n\t\t\tconst logoutUrl = generateUrl('/logout') + '?requesttoken=' + encodeURIComponent(getRequestToken())\r\n\t\t\twindow.location = logoutUrl\r\n\t\t}\r\n\t}, 1000)\r\n}\r\n\r\n/**\r\n * Calls the server periodically to ensure that session and CSRF\r\n * token doesn't expire\r\n */\r\nexport const initSessionHeartBeat = () => {\r\n\tloadConfig()\r\n\r\n\tregisterAutoLogout()\r\n\r\n\tif (!keepSessionAlive()) {\r\n\t\tconsole.info('session heartbeat disabled')\r\n\t\treturn\r\n\t}\r\n\tlet interval = startPolling()\r\n\r\n\twindow.addEventListener('online', async () => {\r\n\t\tconsole.info('browser is online again, resuming heartbeat')\r\n\t\tinterval = startPolling()\r\n\t\ttry {\r\n\t\t\tawait poll()\r\n\t\t\tconsole.info('session token successfully updated after resuming network')\r\n\r\n\t\t\t// Let apps know we're online and requests will have the new token\r\n\t\t\temit('networkOnline', {\r\n\t\t\t\tsuccess: true,\r\n\t\t\t})\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error('could not update session token after resuming network', e)\r\n\r\n\t\t\t// Let apps know we're online but requests might have an outdated token\r\n\t\t\temit('networkOnline', {\r\n\t\t\t\tsuccess: false,\r\n\t\t\t})\r\n\t\t}\r\n\t})\r\n\twindow.addEventListener('offline', () => {\r\n\t\tconsole.info('browser is offline, stopping heartbeat')\r\n\r\n\t\t// Let apps know we're offline\r\n\t\temit('networkOffline', {})\r\n\r\n\t\tclearInterval(interval)\r\n\t\tconsole.info('session heartbeat polling stopped')\r\n\t})\r\n}\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactsMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactsMenu.vue?vue&type=script&lang=js&\"","<!--\r\n  - @copyright 2023 Christopher Ng <chrng8@gmail.com>\r\n  -\r\n  - @author Christopher Ng <chrng8@gmail.com>\r\n  -\r\n  - @license AGPL-3.0-or-later\r\n  -\r\n  - This program is free software: you can redistribute it and/or modify\r\n  - it under the terms of the GNU Affero General Public License as\r\n  - published by the Free Software Foundation, either version 3 of the\r\n  - License, or (at your option) any later version.\r\n  -\r\n  - This program is distributed in the hope that it will be useful,\r\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\r\n  - GNU Affero General Public License for more details.\r\n  -\r\n  - You should have received a copy of the GNU Affero General Public License\r\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n  -\r\n-->\r\n\r\n<template>\r\n\t<NcHeaderMenu id=\"contactsmenu\"\r\n\t\t:aria-label=\"t('core', 'Search contacts')\"\r\n\t\t@open=\"handleOpen\">\r\n\t\t<template #trigger>\r\n\t\t\t<Contacts :size=\"20\" />\r\n\t\t</template>\r\n\t\t<div id=\"contactsmenu-menu\" />\r\n\t</NcHeaderMenu>\r\n</template>\r\n\r\n<script>\r\nimport NcHeaderMenu from '@nextcloud/vue/dist/Components/NcHeaderMenu.js'\r\n\r\nimport Contacts from 'vue-material-design-icons/Contacts.vue'\r\n\r\nimport OC from '../OC/index.js'\r\n\r\nexport default {\r\n\tname: 'ContactsMenu',\r\n\r\n\tcomponents: {\r\n\t\tContacts,\r\n\t\tNcHeaderMenu,\r\n\t},\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcontactsMenu: null,\r\n\t\t}\r\n\t},\r\n\r\n\tmounted() {\r\n\t\t// eslint-disable-next-line no-new\r\n\t\tthis.contactsMenu = new OC.ContactsMenu({\r\n\t\t\tel: '#contactsmenu-menu',\r\n\t\t})\r\n\t},\r\n\r\n\tmethods: {\r\n\t\thandleOpen() {\r\n\t\t\tthis.contactsMenu?.loadContacts()\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#contactsmenu-menu {\r\n\t/* show 2.5 to 4.5 entries depending on the screen height */\r\n\theight: calc(100vh - 50px * 3);\r\n\tmax-height: calc(50px * 6 + 2px);\r\n\tmin-height: calc(50px * 3.5);\r\n\twidth: 350px;\r\n\r\n\t&:deep {\r\n\t\t.emptycontent {\r\n\t\t\tmargin-top: 5vh !important;\r\n\t\t\tmargin-bottom: 1.5vh;\r\n\t\t\t.icon-loading,\r\n\t\t\t.icon-search {\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t#contactsmenu-search {\r\n\t\t\twidth: calc(100% - 16px);\r\n\t\t\tmargin: 8px;\r\n\t\t\theight: 34px;\r\n\t\t}\r\n\r\n\t\t.content {\r\n\t\t\t/* fixed max height of the parent container without the search input */\r\n\t\t\theight: calc(100vh - 50px * 3 - 50px);\r\n\t\t\tmax-height: calc(50px * 5);\r\n\t\t\tmin-height: calc(50px * 3.5 - 50px);\r\n\t\t\toverflow-y: auto;\r\n\r\n\t\t\t.footer {\r\n\t\t\t\ttext-align: center;\r\n\r\n\t\t\t\ta {\r\n\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tpadding: 12px 0;\r\n\t\t\t\t\topacity: .5;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ta {\r\n\t\t\tpadding: 2px;\r\n\r\n\t\t\t&:focus-visible {\r\n\t\t\t\tbox-shadow: inset 0 0 0 2px var(--color-main-text) !important; // override rule in core/css/headers.scss #header a:focus-visible\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.contact {\r\n\t\t\tdisplay: flex;\r\n\t\t\tposition: relative;\r\n\t\t\talign-items: center;\r\n\t\t\tpadding: 3px 3px 3px 10px;\r\n\r\n\t\t\t.avatar {\r\n\t\t\t\theight: 32px;\r\n\t\t\t\twidth: 32px;\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t}\r\n\r\n\t\t\t.body {\r\n\t\t\t\tflex-grow: 1;\r\n\t\t\t\tpadding-left: 8px;\r\n\t\t\t\tmin-width: 0;\r\n\r\n\t\t\t\tdiv {\r\n\t\t\t\t\tposition: relative;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\toverflow-x: hidden;\r\n\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.last-message, .email-address {\r\n\t\t\t\t\tcolor: var(--color-text-maxcontrast);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.top-action, .second-action, .other-actions {\r\n\t\t\t\twidth: 16px;\r\n\t\t\t\theight: 16px;\r\n\t\t\t\topacity: .5;\r\n\t\t\t\tcursor: pointer;\r\n\r\n\t\t\t\t&:not(button) {\r\n\t\t\t\t\tpadding: 14px;\r\n\t\t\t\t}\r\n\t\t\t\timg {\r\n\t\t\t\t\tfilter: var(--background-invert-if-dark);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&:hover,\r\n\t\t\t\t&:active,\r\n\t\t\t\t&:focus {\r\n\t\t\t\t\topacity: 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tbutton.other-actions {\r\n\t\t\t\twidth: 44px;\r\n\r\n\t\t\t\t&:focus {\r\n\t\t\t\t\tborder-color: transparent;\r\n\t\t\t\t\tbox-shadow: 0 0 0 2px var(--color-main-text);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&:focus-visible {\r\n\t\t\t\t\tborder-radius: var(--border-radius-pill);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/* actions menu */\r\n\t\t\t.menu {\r\n\t\t\t\ttop: 47px;\r\n\t\t\t\tmargin-right: 13px;\r\n\t\t\t}\r\n\t\t\t.popovermenu::after {\r\n\t\t\t\tright: 2px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactsMenu.vue?vue&type=style&index=0&id=1563c388&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactsMenu.vue?vue&type=style&index=0&id=1563c388&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./ContactsMenu.vue?vue&type=template&id=1563c388&scoped=true&\"\nimport script from \"./ContactsMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./ContactsMenu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ContactsMenu.vue?vue&type=style&index=0&id=1563c388&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1563c388\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('NcHeaderMenu',{attrs:{\"id\":\"contactsmenu\",\"aria-label\":_vm.t('core', 'Search contacts')},on:{\"open\":_vm.handleOpen},scopedSlots:_vm._u([{key:\"trigger\",fn:function(){return [_c('Contacts',{attrs:{\"size\":20}})]},proxy:true}])},[_vm._v(\" \"),_c('div',{attrs:{\"id\":\"contactsmenu-menu\"}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n  - @copyright Copyright (c) 2022 Julius Härtl <jus@bitgrid.net>\r\n  -\r\n  - @author Julius Härtl <jus@bitgrid.net>\r\n  -\r\n  - @license GNU AGPL version 3 or any later version\r\n  -\r\n  - This program is free software: you can redistribute it and/or modify\r\n  - it under the terms of the GNU Affero General Public License as\r\n  - published by the Free Software Foundation, either version 3 of the\r\n  - License, or (at your option) any later version.\r\n  -\r\n  - This program is distributed in the hope that it will be useful,\r\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\r\n  - GNU Affero General Public License for more details.\r\n  -\r\n  - You should have received a copy of the GNU Affero General Public License\r\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n  -->\r\n\r\n<template>\r\n\t<nav class=\"app-menu\">\r\n\t\t<ul class=\"app-menu-main\">\r\n\t\t\t<li v-for=\"app in mainAppList\"\r\n\t\t\t\t:key=\"app.id\"\r\n\t\t\t\t:data-app-id=\"app.id\"\r\n\t\t\t\tclass=\"app-menu-entry\"\r\n\t\t\t\t:class=\"{ 'app-menu-entry__active': app.active }\">\r\n\t\t\t\t<a :href=\"app.href\"\r\n\t\t\t\t\t:class=\"{ 'has-unread': app.unread > 0 }\"\r\n\t\t\t\t\t:aria-label=\"appLabel(app)\"\r\n\t\t\t\t\t:title=\"app.name\"\r\n\t\t\t\t\t:aria-current=\"app.active ? 'page' : false\"\r\n\t\t\t\t\t:target=\"app.target ? '_blank' : undefined\"\r\n\t\t\t\t\t:rel=\"app.target ? 'noopener noreferrer' : undefined\">\r\n\t\t\t\t\t<img :src=\"app.icon\" alt=\"\">\r\n\t\t\t\t\t<div class=\"app-menu-entry--label\">\r\n\t\t\t\t\t\t{{ app.name }}\r\n\t\t\t\t\t\t<span v-if=\"app.unread > 0\" class=\"hidden-visually unread-counter\">{{ app.unread }}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</a>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t\t<NcActions class=\"app-menu-more\" :aria-label=\"t('core', 'More apps')\">\r\n\t\t\t<NcActionLink v-for=\"app in popoverAppList\"\r\n\t\t\t\t:key=\"app.id\"\r\n\t\t\t\t:aria-label=\"appLabel(app)\"\r\n\t\t\t\t:aria-current=\"app.active ? 'page' : false\"\r\n\t\t\t\t:href=\"app.href\"\r\n\t\t\t\tclass=\"app-menu-popover-entry\">\r\n\t\t\t\t<template #icon>\r\n\t\t\t\t\t<div class=\"app-icon\" :class=\"{ 'has-unread': app.unread > 0 }\">\r\n\t\t\t\t\t\t<img :src=\"app.icon\" alt=\"\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</template>\r\n\t\t\t\t{{ app.name }}\r\n\t\t\t\t<span v-if=\"app.unread > 0\" class=\"hidden-visually unread-counter\">{{ app.unread }}</span>\r\n\t\t\t</NcActionLink>\r\n\t\t</NcActions>\r\n\t</nav>\r\n</template>\r\n\r\n<script>\r\nimport { loadState } from '@nextcloud/initial-state'\r\nimport { subscribe, unsubscribe } from '@nextcloud/event-bus'\r\nimport NcActions from '@nextcloud/vue/dist/Components/NcActions'\r\nimport NcActionLink from '@nextcloud/vue/dist/Components/NcActionLink'\r\n\r\nexport default {\r\n\tname: 'AppMenu',\r\n\tcomponents: {\r\n\t\tNcActions, NcActionLink,\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tapps: loadState('core', 'apps', {}),\r\n\t\t\tappLimit: 0,\r\n\t\t\tobserver: null,\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tappList() {\r\n\t\t\treturn Object.values(this.apps)\r\n\t\t},\r\n\t\tmainAppList() {\r\n\t\t\treturn this.appList.slice(0, this.appLimit)\r\n\t\t},\r\n\t\tpopoverAppList() {\r\n\t\t\treturn this.appList.slice(this.appLimit)\r\n\t\t},\r\n\t\tappLabel() {\r\n\t\t\treturn (app) => app.name\r\n\t\t\t\t+ (app.active ? ' (' + t('core', 'Currently open') + ')' : '')\r\n\t\t\t\t+ (app.unread > 0 ? ' (' + n('core', '{count} notification', '{count} notifications', app.unread, { count: app.unread }) + ')' : '')\r\n\t\t},\r\n\t},\r\n\tmounted() {\r\n\t\tthis.observer = new ResizeObserver(this.resize)\r\n\t\tthis.observer.observe(this.$el)\r\n\t\tthis.resize()\r\n\t\tsubscribe('nextcloud:app-menu.refresh', this.setApps)\r\n\t},\r\n\tbeforeDestroy() {\r\n\t\tthis.observer.disconnect()\r\n\t\tunsubscribe('nextcloud:app-menu.refresh', this.setApps)\r\n\t},\r\n\tmethods: {\r\n\t\tsetNavigationCounter(id, counter) {\r\n\t\t\tthis.$set(this.apps[id], 'unread', counter)\r\n\t\t},\r\n\t\tsetApps({ apps }) {\r\n\t\t\tthis.apps = apps\r\n\t\t},\r\n\t\tresize() {\r\n\t\t\tconst availableWidth = this.$el.offsetWidth\r\n\t\t\tlet appCount = Math.floor(availableWidth / 50) - 1\r\n\t\t\tconst popoverAppCount = this.appList.length - appCount\r\n\t\t\tif (popoverAppCount === 1) {\r\n\t\t\t\tappCount--\r\n\t\t\t}\r\n\t\t\tif (appCount < 1) {\r\n\t\t\t\tappCount = 0\r\n\t\t\t}\r\n\t\t\tthis.appLimit = appCount\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$header-icon-size: 20px;\r\n\r\n.app-menu {\r\n\twidth: 100%;\r\n\tdisplay: flex;\r\n\tflex-shrink: 1;\r\n\tflex-wrap: wrap;\r\n}\r\n.app-menu-main {\r\n\tdisplay: flex;\r\n\tflex-wrap: nowrap;\r\n\r\n\t.app-menu-entry {\r\n\t\twidth: 50px;\r\n\t\theight: 50px;\r\n\t\tposition: relative;\r\n\t\tdisplay: flex;\r\n\t\topacity: .7;\r\n\t\tfilter: var(--background-image-invert-if-bright);\r\n\r\n\t\t&.app-menu-entry__active {\r\n\t\t\topacity: 1;\r\n\r\n\t\t\t&::before {\r\n\t\t\t\tcontent: \" \";\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tpointer-events: none;\r\n\t\t\t\tborder-bottom-color: var(--color-main-background);\r\n\t\t\t\ttransform: translateX(-50%);\r\n\t\t\t\twidth: 12px;\r\n\t\t\t\theight: 5px;\r\n\t\t\t\tborder-radius: 3px;\r\n\t\t\t\tbackground-color: var(--color-primary-text);\r\n\t\t\t\tleft: 50%;\r\n\t\t\t\tbottom: 6px;\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\ttransition: all 0.1s ease-in-out;\r\n\t\t\t\topacity: 1;\r\n\t\t\t}\r\n\r\n\t\t\t.app-menu-entry--label {\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ta {\r\n\t\t\twidth: calc(100% - 4px);\r\n\t\t\theight: calc(100% - 4px);\r\n\t\t\tmargin: 2px;\r\n\t\t\tcolor: var(--color-primary-text);\r\n\t\t\tposition: relative;\r\n\t\t}\r\n\r\n\t\timg {\r\n\t\t\ttransition: margin 0.1s ease-in-out;\r\n\t\t\twidth: $header-icon-size;\r\n\t\t\theight: $header-icon-size;\r\n\t\t\tpadding: calc((100% - $header-icon-size) / 2);\r\n\t\t\tbox-sizing: content-box;\r\n\t\t}\r\n\r\n\t\t.app-menu-entry--label {\r\n\t\t\topacity: 0;\r\n\t\t\tposition: absolute;\r\n\t\t\tfont-size: 12px;\r\n\t\t\tcolor: var(--color-primary-text);\r\n\t\t\ttext-align: center;\r\n\t\t\tbottom: -5px;\r\n\t\t\tleft: 50%;\r\n\t\t\ttop: 45%;\r\n\t\t\tdisplay: block;\r\n\t\t\tmin-width: 100%;\r\n\t\t\ttransform: translateX(-50%);\r\n\t\t\ttransition: all 0.1s ease-in-out;\r\n\t\t\twidth: 100%;\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t\toverflow: hidden;\r\n\t\t\tletter-spacing: -0.5px;\r\n\t\t}\r\n\r\n\t\t&:hover,\r\n\t\t&:focus-within {\r\n\t\t\topacity: 1;\r\n\t\t\t.app-menu-entry--label {\r\n\t\t\t\topacity: 1;\r\n\t\t\t\tfont-weight: bolder;\r\n\t\t\t\tbottom: 0;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Show labels\r\n\t&:hover,\r\n\t&:focus-within,\r\n\t.app-menu-entry:hover,\r\n\t.app-menu-entry:focus {\r\n\t\topacity: 1;\r\n\r\n\t\timg {\r\n\t\t\tmargin-top: -8px;\r\n\t\t}\r\n\r\n\t\t.app-menu-entry--label {\r\n\t\t\topacity: 1;\r\n\t\t\tbottom: 0;\r\n\t\t}\r\n\r\n\t\t&::before, .app-menu-entry::before {\r\n\t\t\topacity: 0;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n::v-deep .app-menu-more .button-vue--vue-tertiary {\r\n\tcolor: var(--color-primary-text);\r\n\topacity: .7;\r\n\tmargin: 3px;\r\n\tfilter: var(--background-image-invert-if-bright);\r\n\r\n\t&:hover {\r\n\t\topacity: 1;\r\n\t\tbackground-color: transparent !important;\r\n\t}\r\n\r\n\t&:focus-visible {\r\n\t\topacity: 1;\r\n\t\toutline: none !important;\r\n\t}\r\n}\r\n\r\n.app-menu-popover-entry {\r\n\t.app-icon {\r\n\t\tposition: relative;\r\n\t\theight: 44px;\r\n\r\n\t\t&.has-unread::after {\r\n\t\t\tbackground-color: var(--color-main-text);\r\n\t\t}\r\n\r\n\t\timg {\r\n\t\t\twidth: $header-icon-size;\r\n\t\t\theight: $header-icon-size;\r\n\t\t\tpadding: calc((50px - $header-icon-size) / 2);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.has-unread::after {\r\n\tcontent: \"\";\r\n\twidth: 8px;\r\n\theight: 8px;\r\n\tbackground-color: var(--color-primary-text);\r\n\tborder-radius: 50%;\r\n\tposition: absolute;\r\n\tdisplay: block;\r\n\ttop: 10px;\r\n\tright: 10px;\r\n}\r\n\r\n.unread-counter {\r\n\tdisplay: none;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppMenu.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppMenu.vue?vue&type=style&index=0&id=44a795f6&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppMenu.vue?vue&type=style&index=0&id=44a795f6&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./AppMenu.vue?vue&type=template&id=44a795f6&scoped=true&\"\nimport script from \"./AppMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./AppMenu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AppMenu.vue?vue&type=style&index=0&id=44a795f6&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"44a795f6\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('nav',{staticClass:\"app-menu\"},[_c('ul',{staticClass:\"app-menu-main\"},_vm._l((_vm.mainAppList),function(app){return _c('li',{key:app.id,staticClass:\"app-menu-entry\",class:{ 'app-menu-entry__active': app.active },attrs:{\"data-app-id\":app.id}},[_c('a',{class:{ 'has-unread': app.unread > 0 },attrs:{\"href\":app.href,\"aria-label\":_vm.appLabel(app),\"title\":app.name,\"aria-current\":app.active ? 'page' : false,\"target\":app.target ? '_blank' : undefined,\"rel\":app.target ? 'noopener noreferrer' : undefined}},[_c('img',{attrs:{\"src\":app.icon,\"alt\":\"\"}}),_vm._v(\" \"),_c('div',{staticClass:\"app-menu-entry--label\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(app.name)+\"\\n\\t\\t\\t\\t\\t\"),(app.unread > 0)?_c('span',{staticClass:\"hidden-visually unread-counter\"},[_vm._v(_vm._s(app.unread))]):_vm._e()])])])}),0),_vm._v(\" \"),_c('NcActions',{staticClass:\"app-menu-more\",attrs:{\"aria-label\":_vm.t('core', 'More apps')}},_vm._l((_vm.popoverAppList),function(app){return _c('NcActionLink',{key:app.id,staticClass:\"app-menu-popover-entry\",attrs:{\"aria-label\":_vm.appLabel(app),\"aria-current\":app.active ? 'page' : false,\"href\":app.href},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('div',{staticClass:\"app-icon\",class:{ 'has-unread': app.unread > 0 }},[_c('img',{attrs:{\"src\":app.icon,\"alt\":\"\"}})])]},proxy:true}],null,true)},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(app.name)+\"\\n\\t\\t\\t\"),(app.unread > 0)?_c('span',{staticClass:\"hidden-visually unread-counter\"},[_vm._v(_vm._s(app.unread))]):_vm._e()])}),1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n  - @copyright 2023 Christopher Ng <chrng8@gmail.com>\r\n  -\r\n  - @author Christopher Ng <chrng8@gmail.com>\r\n  -\r\n  - @license AGPL-3.0-or-later\r\n  -\r\n  - This program is free software: you can redistribute it and/or modify\r\n  - it under the terms of the GNU Affero General Public License as\r\n  - published by the Free Software Foundation, either version 3 of the\r\n  - License, or (at your option) any later version.\r\n  -\r\n  - This program is distributed in the hope that it will be useful,\r\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\r\n  - GNU Affero General Public License for more details.\r\n  -\r\n  - You should have received a copy of the GNU Affero General Public License\r\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n  -\r\n-->\r\n\r\n<template>\r\n\t<li :id=\"id\"\r\n\t\tclass=\"menu-entry\">\r\n\t\t<a v-if=\"href\"\r\n\t\t\t:href=\"href\"\r\n\t\t\t:class=\"{ active }\"\r\n\t\t\t@click.exact=\"handleClick\">\r\n\t\t\t<NcLoadingIcon v-if=\"loading\"\r\n\t\t\t\tclass=\"menu-entry__loading-icon\"\r\n\t\t\t\t:size=\"18\" />\r\n\t\t\t<img v-else :src=\"cachedIcon\" alt=\"\" />\r\n\t\t\t{{ name }}\r\n\t\t</a>\r\n\t\t<button v-else>\r\n\t\t\t<img :src=\"cachedIcon\" alt=\"\" />\r\n\t\t\t{{ name }}\r\n\t\t</button>\r\n\t</li>\r\n</template>\r\n\r\n<script>\r\nimport { loadState } from '@nextcloud/initial-state'\r\n\r\nimport NcLoadingIcon from '@nextcloud/vue/dist/Components/NcLoadingIcon.js'\r\n\r\nconst versionHash = loadState('core', 'versionHash', '')\r\n\r\nexport default {\r\n\tname: 'UserMenuEntry',\r\n\r\n\tcomponents: {\r\n\t\tNcLoadingIcon,\r\n\t},\r\n\r\n\tprops: {\r\n\t\tid: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tname: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\thref: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tactive: {\r\n\t\t\ttype: Boolean,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\ticon: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t},\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tloading: false,\r\n\t\t}\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\tcachedIcon() {\r\n\t\t\treturn `${this.icon}?v=${versionHash}`\r\n\t\t},\r\n\t},\r\n\r\n\tmethods: {\r\n\t\thandleClick() {\r\n\t\t\tthis.loading = true\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.menu-entry {\r\n\t&__loading-icon {\r\n\t\tmargin-right: 8px;\r\n\t}\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMenuEntry.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMenuEntry.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMenuEntry.vue?vue&type=style&index=0&id=6e59d13c&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMenuEntry.vue?vue&type=style&index=0&id=6e59d13c&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./UserMenuEntry.vue?vue&type=template&id=6e59d13c&scoped=true&\"\nimport script from \"./UserMenuEntry.vue?vue&type=script&lang=js&\"\nexport * from \"./UserMenuEntry.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserMenuEntry.vue?vue&type=style&index=0&id=6e59d13c&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6e59d13c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('li',{staticClass:\"menu-entry\",attrs:{\"id\":_vm.id}},[(_vm.href)?_c('a',{class:{ active: _vm.active },attrs:{\"href\":_vm.href},on:{\"click\":function($event){if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey)return null;return _vm.handleClick.apply(null, arguments)}}},[(_vm.loading)?_c('NcLoadingIcon',{staticClass:\"menu-entry__loading-icon\",attrs:{\"size\":18}}):_c('img',{attrs:{\"src\":_vm.cachedIcon,\"alt\":\"\"}}),_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.name)+\"\\n\\t\")],1):_c('button',[_c('img',{attrs:{\"src\":_vm.cachedIcon,\"alt\":\"\"}}),_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.name)+\"\\n\\t\")])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n  - @copyright 2023 Christopher Ng <chrng8@gmail.com>\r\n  -\r\n  - @author Christopher Ng <chrng8@gmail.com>\r\n  -\r\n  - @license AGPL-3.0-or-later\r\n  -\r\n  - This program is free software: you can redistribute it and/or modify\r\n  - it under the terms of the GNU Affero General Public License as\r\n  - published by the Free Software Foundation, either version 3 of the\r\n  - License, or (at your option) any later version.\r\n  -\r\n  - This program is distributed in the hope that it will be useful,\r\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\r\n  - GNU Affero General Public License for more details.\r\n  -\r\n  - You should have received a copy of the GNU Affero General Public License\r\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n  -\r\n-->\r\n\r\n<template>\r\n\t<NcHeaderMenu id=\"user-menu\"\r\n\t\tclass=\"user-menu\"\r\n\t\t:aria-label=\"t('core', 'Open settings menu')\">\r\n\t\t<template #trigger>\r\n\t\t\t<NcAvatar class=\"user-menu__avatar\"\r\n\t\t\t\t:disable-menu=\"true\"\r\n\t\t\t\t:disable-tooltip=\"true\"\r\n\t\t\t\t:user=\"userId\" />\r\n\t\t</template>\r\n\t\t<nav class=\"user-menu__nav\"\r\n\t\t\t:aria-label=\"t('core', 'Settings menu')\">\r\n\t\t\t<ul>\r\n\t\t\t\t<UserMenuEntry v-for=\"entry in settingsNavEntries\"\r\n\t\t\t\t\tv-bind=\"entry\"\r\n\t\t\t\t\t:key=\"entry.id\" />\r\n\t\t\t</ul>\r\n\t\t</nav>\r\n\t</NcHeaderMenu>\r\n</template>\r\n\r\n<script>\r\nimport { emit } from '@nextcloud/event-bus'\r\nimport { getCurrentUser } from '@nextcloud/auth'\r\nimport { loadState } from '@nextcloud/initial-state'\r\n\r\nimport NcAvatar from '@nextcloud/vue/dist/Components/NcAvatar.js'\r\nimport NcHeaderMenu from '@nextcloud/vue/dist/Components/NcHeaderMenu.js'\r\n\r\nimport UserMenuEntry from '../components/UserMenu/UserMenuEntry.vue'\r\n\r\nconst settingsNavEntries = loadState('core', 'settingsNavEntries', [])\r\n\r\nexport default {\r\n\tname: 'UserMenu',\r\n\r\n\tcomponents: {\r\n\t\tNcAvatar,\r\n\t\tNcHeaderMenu,\r\n\t\tUserMenuEntry,\r\n\t},\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tsettingsNavEntries,\r\n\t\t\tuserId: getCurrentUser()?.uid,\r\n\t\t}\r\n\t},\r\n\r\n\tmounted() {\r\n\t\temit('core:user-menu:mounted')\r\n\t},\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.user-menu {\r\n\tmargin-right: 12px;\r\n\r\n\t&:deep {\r\n\t\t.header-menu {\r\n\t\t\t&__trigger {\r\n\t\t\t\topacity: 1 !important;\r\n\t\t\t\t&:focus-visible {\r\n\t\t\t\t\t.user-menu__avatar {\r\n\t\t\t\t\t\tborder: 2px solid var(--color-primary-text);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t&__carret {\r\n\t\t\t\tdisplay: none !important;\r\n\t\t\t}\r\n\r\n\t\t\t&__content {\r\n\t\t\t\twidth: fit-content !important;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t&__avatar {\r\n\t\t&:active,\r\n\t\t&:focus,\r\n\t\t&:hover {\r\n\t\t\tborder: 2px solid var(--color-primary-text);\r\n\t\t}\r\n\t}\r\n\r\n\t&__nav {\r\n\t\tdisplay: flex;\r\n\t\twidth: 100%;\r\n\r\n\t\tul {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tgap: 2px;\r\n\r\n\t\t\t&:deep {\r\n\t\t\t\tli {\r\n\t\t\t\t\ta,\r\n\t\t\t\t\tbutton {\r\n\t\t\t\t\t\tborder-radius: 6px;\r\n\t\t\t\t\t\tdisplay: inline-flex;\r\n\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\theight: var(--header-menu-item-height);\r\n\t\t\t\t\t\tcolor: var(--color-main-text);\r\n\t\t\t\t\t\tpadding: 10px 8px;\r\n\t\t\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\t\t\twhite-space: nowrap;\r\n\t\t\t\t\t\tposition: relative;\r\n\t\t\t\t\t\twidth: 100%;\r\n\r\n\t\t\t\t\t\t&:hover {\r\n\t\t\t\t\t\t\tbackground-color: var(--color-background-hover);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t&:focus-visible {\r\n\t\t\t\t\t\t\tbackground-color: var(--color-background-hover) !important;\r\n\t\t\t\t\t\t\tbox-shadow: inset 0 0 0 2px var(--color-primary) !important;\r\n\t\t\t\t\t\t\toutline: none !important;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t&:active,\r\n\t\t\t\t\t\t&.active {\r\n\t\t\t\t\t\t\tbackground-color: var(--color-primary-light);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tspan {\r\n\t\t\t\t\t\t\tpadding-bottom: 0;\r\n\t\t\t\t\t\t\tcolor: var(--color-main-text);\r\n\t\t\t\t\t\t\twhite-space: nowrap;\r\n\t\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t\t\t\tmax-width: 110px;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\timg {\r\n\t\t\t\t\t\t\twidth: 16px;\r\n\t\t\t\t\t\t\theight: 16px;\r\n\t\t\t\t\t\t\tmargin-right: 10px;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\timg,\r\n\t\t\t\t\t\tsvg {\r\n\t\t\t\t\t\t\topacity: .7;\r\n\t\t\t\t\t\t\tfilter: var(--background-invert-if-dark);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Override global button styles\r\n\t\t\t\t\tbutton {\r\n\t\t\t\t\t\tbackground-color: transparent;\r\n\t\t\t\t\t\tborder: none;\r\n\t\t\t\t\t\tfont-weight: normal;\r\n\t\t\t\t\t\tmargin: 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMenu.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMenu.vue?vue&type=style&index=0&id=6a818bbc&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMenu.vue?vue&type=style&index=0&id=6a818bbc&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./UserMenu.vue?vue&type=template&id=6a818bbc&scoped=true&\"\nimport script from \"./UserMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./UserMenu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserMenu.vue?vue&type=style&index=0&id=6a818bbc&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6a818bbc\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('NcHeaderMenu',{staticClass:\"user-menu\",attrs:{\"id\":\"user-menu\",\"aria-label\":_vm.t('core', 'Open settings menu')},scopedSlots:_vm._u([{key:\"trigger\",fn:function(){return [_c('NcAvatar',{staticClass:\"user-menu__avatar\",attrs:{\"disable-menu\":true,\"disable-tooltip\":true,\"user\":_vm.userId}})]},proxy:true}])},[_vm._v(\" \"),_c('nav',{staticClass:\"user-menu__nav\",attrs:{\"aria-label\":_vm.t('core', 'Settings menu')}},[_c('ul',_vm._l((_vm.settingsNavEntries),function(entry){return _c('UserMenuEntry',_vm._b({key:entry.id},'UserMenuEntry',entry,false))}),1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author Jan-Christoph Borchardt <hey@jancborchardt.net>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author nacho <nacho@ownyourbits.com>\r\n * @author Vincent Petry <vincent@nextcloud.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\n/* globals Snap */\r\nimport _ from 'underscore'\r\nimport $ from 'jquery'\r\nimport moment from 'moment'\r\n\r\nimport { initSessionHeartBeat } from './session-heartbeat.js'\r\nimport OC from './OC/index.js'\r\nimport { setUp as setUpContactsMenu } from './components/ContactsMenu.js'\r\nimport { setUp as setUpMainMenu } from './components/MainMenu.js'\r\nimport { setUp as setUpUserMenu } from './components/UserMenu.js'\r\nimport PasswordConfirmation from './OC/password-confirmation.js'\r\n\r\n// keep in sync with core/css/variables.scss\r\nconst breakpointMobileWidth = 1024\r\n\r\nconst initLiveTimestamps = () => {\r\n\t// Update live timestamps every 30 seconds\r\n\tsetInterval(() => {\r\n\t\t$('.live-relative-timestamp').each(function() {\r\n\t\t\tconst timestamp = parseInt($(this).attr('data-timestamp'), 10)\r\n\t\t\t$(this).text(moment(timestamp).fromNow())\r\n\t\t})\r\n\t}, 30 * 1000)\r\n}\r\n\r\n/**\r\n * Moment doesn't have aliases for every locale and doesn't parse some locale IDs correctly so we need to alias them\r\n */\r\nconst localeAliases = {\r\n\tzh: 'zh-cn',\r\n\tzh_Hans: 'zh-cn',\r\n\tzh_Hans_CN: 'zh-cn',\r\n\tzh_Hans_HK: 'zh-cn',\r\n\tzh_Hans_MO: 'zh-cn',\r\n\tzh_Hans_SG: 'zh-cn',\r\n\tzh_Hant: 'zh-hk',\r\n\tzh_Hant_HK: 'zh-hk',\r\n\tzh_Hant_MO: 'zh-mo',\r\n\tzh_Hant_TW: 'zh-tw',\r\n}\r\nlet locale = OC.getLocale()\r\nif (Object.prototype.hasOwnProperty.call(localeAliases, locale)) {\r\n\tlocale = localeAliases[locale]\r\n}\r\n\r\n/**\r\n * Set users locale to moment.js as soon as possible\r\n */\r\nmoment.locale(locale)\r\n\r\n/**\r\n * Initializes core\r\n */\r\nexport const initCore = () => {\r\n\t$(window).on('unload.main', () => { OC._unloadCalled = true })\r\n\t$(window).on('beforeunload.main', () => {\r\n\t\t// super-trick thanks to http://stackoverflow.com/a/4651049\r\n\t\t// in case another handler displays a confirmation dialog (ex: navigating away\r\n\t\t// during an upload), there are two possible outcomes: user clicked \"ok\" or\r\n\t\t// \"cancel\"\r\n\r\n\t\t// first timeout handler is called after unload dialog is closed\r\n\t\tsetTimeout(() => {\r\n\t\t\tOC._userIsNavigatingAway = true\r\n\r\n\t\t\t// second timeout event is only called if user cancelled (Chrome),\r\n\t\t\t// but in other browsers it might still be triggered, so need to\r\n\t\t\t// set a higher delay...\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tif (!OC._unloadCalled) {\r\n\t\t\t\t\tOC._userIsNavigatingAway = false\r\n\t\t\t\t}\r\n\t\t\t}, 10000)\r\n\t\t}, 1)\r\n\t})\r\n\t$(document).on('ajaxError.main', function(event, request, settings) {\r\n\t\tif (settings && settings.allowAuthErrors) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tOC._processAjaxError(request)\r\n\t})\r\n\r\n\tinitSessionHeartBeat()\r\n\r\n\tOC.registerMenu($('#expand'), $('#expanddiv'), false, true)\r\n\r\n\t// toggle for menus\r\n\t$(document).on('mouseup.closemenus', event => {\r\n\t\tconst $el = $(event.target)\r\n\t\tif ($el.closest('.menu').length || $el.closest('.menutoggle').length) {\r\n\t\t\t// don't close when clicking on the menu directly or a menu toggle\r\n\t\t\treturn false\r\n\t\t}\r\n\r\n\t\tOC.hideMenus()\r\n\t})\r\n\r\n\tsetUpMainMenu()\r\n\tsetUpUserMenu()\r\n\tsetUpContactsMenu()\r\n\r\n\t// just add snapper for logged in users\r\n\t// and if the app doesn't handle the nav slider itself\r\n\tif ($('#app-navigation').length && !$('html').hasClass('lte9')\r\n\t\t&& !$('#app-content').hasClass('no-snapper')) {\r\n\r\n\t\t// App sidebar on mobile\r\n\t\tconst snapper = new Snap({\r\n\t\t\telement: document.getElementById('app-content'),\r\n\t\t\tdisable: 'right',\r\n\t\t\tmaxPosition: 300, // $navigation-width\r\n\t\t\tminDragDistance: 100,\r\n\t\t})\r\n\r\n\t\t$('#app-content').prepend('<div id=\"app-navigation-toggle\" class=\"icon-menu\" style=\"display:none\" tabindex=\"0\"></div>')\r\n\r\n\t\t// keep track whether snapper is currently animating, and\r\n\t\t// prevent to call open or close while that is the case\r\n\t\t// to avoid duplicating events (snap.js doesn't check this)\r\n\t\tlet animating = false\r\n\t\tsnapper.on('animating', () => {\r\n\t\t\t// we need this because the trigger button\r\n\t\t\t// is also implicitly wired to close by snapper\r\n\t\t\tanimating = true\r\n\t\t})\r\n\t\tsnapper.on('animated', () => {\r\n\t\t\tanimating = false\r\n\t\t})\r\n\t\tsnapper.on('start', () => {\r\n\t\t\t// we need this because dragging triggers that\r\n\t\t\tanimating = true\r\n\t\t})\r\n\t\tsnapper.on('end', () => {\r\n\t\t\t// we need this because dragging stop triggers that\r\n\t\t\tanimating = false\r\n\t\t})\r\n\r\n\t\t// These are necessary because calling open or close\r\n\t\t// on snapper during an animation makes it trigger an\r\n\t\t// unfinishable animation, which itself will continue\r\n\t\t// triggering animating events and cause high CPU load,\r\n\t\t//\r\n\t\t// Ref https://github.com/jakiestfu/Snap.js/issues/216\r\n\t\tconst oldSnapperOpen = snapper.open\r\n\t\tconst oldSnapperClose = snapper.close\r\n\t\tconst _snapperOpen = () => {\r\n\t\t\tif (animating || snapper.state().state !== 'closed') {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\toldSnapperOpen('left')\r\n\t\t}\r\n\r\n\t\tconst _snapperClose = () => {\r\n\t\t\tif (animating || snapper.state().state === 'closed') {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\toldSnapperClose()\r\n\t\t}\r\n\r\n\t\t// Needs to be deferred to properly catch in-between\r\n\t\t// events that snap.js is triggering after dragging.\r\n\t\t//\r\n\t\t// Skipped when running unit tests as we are not testing\r\n\t\t// the snap.js workarounds...\r\n\t\tif (!window.TESTING) {\r\n\t\t\tsnapper.open = () => {\r\n\t\t\t\t_.defer(_snapperOpen)\r\n\t\t\t}\r\n\t\t\tsnapper.close = () => {\r\n\t\t\t\t_.defer(_snapperClose)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$('#app-navigation-toggle').click((e) => {\r\n\t\t\t// close is implicit in the button by snap.js\r\n\t\t\tif (snapper.state().state !== 'left') {\r\n\t\t\t\tsnapper.open()\r\n\t\t\t}\r\n\t\t})\r\n\t\t$('#app-navigation-toggle').keypress(e => {\r\n\t\t\tif (snapper.state().state === 'left') {\r\n\t\t\t\tsnapper.close()\r\n\t\t\t} else {\r\n\t\t\t\tsnapper.open()\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\t// close sidebar when switching navigation entry\r\n\t\tconst $appNavigation = $('#app-navigation')\r\n\t\t$appNavigation.delegate('a, :button', 'click', event => {\r\n\t\t\tconst $target = $(event.target)\r\n\t\t\t// don't hide navigation when changing settings or adding things\r\n\t\t\tif ($target.is('.app-navigation-noclose')\r\n\t\t\t\t|| $target.closest('.app-navigation-noclose').length) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif ($target.is('.app-navigation-entry-utils-menu-button')\r\n\t\t\t\t|| $target.closest('.app-navigation-entry-utils-menu-button').length) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif ($target.is('.add-new')\r\n\t\t\t\t|| $target.closest('.add-new').length) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif ($target.is('#app-settings')\r\n\t\t\t\t|| $target.closest('#app-settings').length) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tsnapper.close()\r\n\t\t})\r\n\r\n\t\tlet navigationBarSlideGestureEnabled = false\r\n\t\tlet navigationBarSlideGestureAllowed = true\r\n\t\tlet navigationBarSlideGestureEnablePending = false\r\n\r\n\t\tOC.allowNavigationBarSlideGesture = () => {\r\n\t\t\tnavigationBarSlideGestureAllowed = true\r\n\r\n\t\t\tif (navigationBarSlideGestureEnablePending) {\r\n\t\t\t\tsnapper.enable()\r\n\r\n\t\t\t\tnavigationBarSlideGestureEnabled = true\r\n\t\t\t\tnavigationBarSlideGestureEnablePending = false\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tOC.disallowNavigationBarSlideGesture = () => {\r\n\t\t\tnavigationBarSlideGestureAllowed = false\r\n\r\n\t\t\tif (navigationBarSlideGestureEnabled) {\r\n\t\t\t\tconst endCurrentDrag = true\r\n\t\t\t\tsnapper.disable(endCurrentDrag)\r\n\r\n\t\t\t\tnavigationBarSlideGestureEnabled = false\r\n\t\t\t\tnavigationBarSlideGestureEnablePending = true\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst toggleSnapperOnSize = () => {\r\n\t\t\tif ($(window).width() > breakpointMobileWidth) {\r\n\t\t\t\tsnapper.close()\r\n\t\t\t\tsnapper.disable()\r\n\r\n\t\t\t\tnavigationBarSlideGestureEnabled = false\r\n\t\t\t\tnavigationBarSlideGestureEnablePending = false\r\n\t\t\t} else if (navigationBarSlideGestureAllowed) {\r\n\t\t\t\tsnapper.enable()\r\n\r\n\t\t\t\tnavigationBarSlideGestureEnabled = true\r\n\t\t\t\tnavigationBarSlideGestureEnablePending = false\r\n\t\t\t} else {\r\n\t\t\t\tnavigationBarSlideGestureEnablePending = true\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$(window).resize(_.debounce(toggleSnapperOnSize, 250))\r\n\r\n\t\t// initial call\r\n\t\ttoggleSnapperOnSize()\r\n\r\n\t}\r\n\r\n\tinitLiveTimestamps()\r\n\tPasswordConfirmation.init()\r\n}\r\n","/**\r\n * @copyright 2019 Julius Härtl <jus@bitgrid.net>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Julius Härtl <jus@bitgrid.net>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport $ from 'jquery'\r\n\r\n$.prototype.tooltip = (function(tooltip) {\r\n\treturn function(config) {\r\n\t\ttry {\r\n\t\t\treturn tooltip.call(this, config)\r\n\t\t} catch (ex) {\r\n\t\t\tif (ex instanceof TypeError && config === 'destroy') {\r\n\t\t\t\tif (window.TESTING === undefined) {\r\n\t\t\t\t\tconsole.error('Deprecated call $.tooltip(\\'destroy\\') has been deprecated and should be removed')\r\n\t\t\t\t}\r\n\t\t\t\treturn tooltip.call(this, 'dispose')\r\n\t\t\t}\r\n\t\t\tif (ex instanceof TypeError && config === 'fixTitle') {\r\n\t\t\t\tif (window.TESTING === undefined) {\r\n\t\t\t\t\tconsole.error('Deprecated call $.tooltip(\\'fixTitle\\') has been deprecated and should be removed')\r\n\t\t\t\t}\r\n\t\t\t\treturn tooltip.call(this, '_fixTitle')\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n})($.prototype.tooltip)\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author Christopher Ng <chrng8@gmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport Vue from 'vue'\r\n\r\nimport UserMenu from '../views/UserMenu.vue'\r\n\r\nexport const setUp = () => {\r\n\tconst mountPoint = document.getElementById('user-menu')\r\n\tif (mountPoint) {\r\n\t\t// eslint-disable-next-line no-new\r\n\t\tnew Vue({\r\n\t\t\tel: mountPoint,\r\n\t\t\trender: h => h(UserMenu),\r\n\t\t})\r\n\t}\r\n}\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Julius Härtl <jus@bitgrid.net>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport { translate as t, translatePlural as n } from '@nextcloud/l10n'\r\nimport Vue from 'vue'\r\n\r\nimport AppMenu from './AppMenu.vue'\r\n\r\nexport const setUp = () => {\r\n\r\n\tVue.mixin({\r\n\t\tmethods: {\r\n\t\t\tt,\r\n\t\t\tn,\r\n\t\t},\r\n\t})\r\n\r\n\tconst container = document.getElementById('header-left__appmenu')\r\n\tif (!container) {\r\n\t\t// no container, possibly we're on a public page\r\n\t\treturn\r\n\t}\r\n\tconst AppMenuApp = Vue.extend(AppMenu)\r\n\tconst appMenu = new AppMenuApp({}).$mount(container)\r\n\r\n\tObject.assign(OC, {\r\n\t\tsetNavigationCounter(id, counter) {\r\n\t\t\tappMenu.setNavigationCounter(id, counter)\r\n\t\t},\r\n\t})\r\n\r\n}\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author Christopher Ng <chrng8@gmail.com>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport Vue from 'vue'\r\n\r\nimport ContactsMenu from '../views/ContactsMenu.vue'\r\n\r\n/**\r\n * @todo move to contacts menu code https://github.com/orgs/nextcloud/projects/31#card-21213129\r\n */\r\nexport const setUp = () => {\r\n\tconst mountPoint = document.getElementById('contactsmenu')\r\n\tif (mountPoint) {\r\n\t\t// eslint-disable-next-line no-new\r\n\t\tnew Vue({\r\n\t\t\tel: mountPoint,\r\n\t\t\trender: h => h(ContactsMenu),\r\n\t\t})\r\n\t}\r\n}\r\n","/**\r\n * @copyright (c) 2017 Arthur Schiwon <blizzz@arthur-schiwon.de>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport $ from 'jquery'\r\n\r\n/*\r\n * Detects links:\r\n * Either the http(s) protocol is given or two strings, basically limited to ascii with the last\r\n * word being at least one digit long,\r\n * followed by at least another character\r\n *\r\n * The downside: anything not ascii is excluded. Not sure how common it is in areas using different\r\n * alphabets… the upside: fake domains with similar looking characters won't be formatted as links\r\n *\r\n * This is a copy of the backend regex in IURLGenerator, make sure to adjust both when changing\r\n */\r\nconst urlRegex = /(\\s|^)(https?:\\/\\/)((?:[-A-Z0-9+_]+\\.)+[-A-Z]+(?:\\/[-A-Z0-9+&@#%?=~_|!:,.;()]*)*)(\\s|$)/ig\r\n\r\n/**\r\n * @param {any} content -\r\n */\r\nexport function plainToRich(content) {\r\n\treturn this.formatLinksRich(content)\r\n}\r\n\r\n/**\r\n * @param {any} content -\r\n */\r\nexport function richToPlain(content) {\r\n\treturn this.formatLinksPlain(content)\r\n}\r\n\r\n/**\r\n * @param {any} content -\r\n */\r\nexport function formatLinksRich(content) {\r\n\treturn content.replace(urlRegex, function(_, leadingSpace, protocol, url, trailingSpace) {\r\n\t\tlet linkText = url\r\n\t\tif (!protocol) {\r\n\t\t\tprotocol = 'https://'\r\n\t\t} else if (protocol === 'http://') {\r\n\t\t\tlinkText = protocol + url\r\n\t\t}\r\n\r\n\t\treturn leadingSpace + '<a class=\"external\" target=\"_blank\" rel=\"noopener noreferrer\" href=\"' + protocol + url + '\">' + linkText + '</a>' + trailingSpace\r\n\t})\r\n}\r\n\r\n/**\r\n * @param {any} content -\r\n */\r\nexport function formatLinksPlain(content) {\r\n\tconst $content = $('<div></div>').html(content)\r\n\t$content.find('a').each(function() {\r\n\t\tconst $this = $(this)\r\n\t\t$this.html($this.attr('href'))\r\n\t})\r\n\treturn $content.html()\r\n}\r\n","/**\r\n * @copyright (c) 2017 Arthur Schiwon <blizzz@arthur-schiwon.de>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport _ from 'underscore'\r\nimport $ from 'jquery'\r\nimport { generateOcsUrl } from '@nextcloud/router'\r\n\r\n/**\r\n * @param {any} options -\r\n */\r\nexport function query(options) {\r\n\toptions = options || {}\r\n\tconst dismissOptions = options.dismiss || {}\r\n\t$.ajax({\r\n\t\ttype: 'GET',\r\n\t\turl: options.url || generateOcsUrl('core/whatsnew?format=json'),\r\n\t\tsuccess: options.success || function(data, statusText, xhr) {\r\n\t\t\tonQuerySuccess(data, statusText, xhr, dismissOptions)\r\n\t\t},\r\n\t\terror: options.error || onQueryError,\r\n\t})\r\n}\r\n\r\n/**\r\n * @param {any} version -\r\n * @param {any} options -\r\n */\r\nexport function dismiss(version, options) {\r\n\toptions = options || {}\r\n\t$.ajax({\r\n\t\ttype: 'POST',\r\n\t\turl: options.url || generateOcsUrl('core/whatsnew'),\r\n\t\tdata: { version: encodeURIComponent(version) },\r\n\t\tsuccess: options.success || onDismissSuccess,\r\n\t\terror: options.error || onDismissError,\r\n\t})\r\n\t// remove element immediately\r\n\t$('.whatsNewPopover').remove()\r\n}\r\n\r\n/**\r\n * @param {any} data -\r\n * @param {any} statusText -\r\n * @param {any} xhr -\r\n * @param {any} dismissOptions -\r\n */\r\nfunction onQuerySuccess(data, statusText, xhr, dismissOptions) {\r\n\tconsole.debug('querying Whats New data was successful: ' + statusText)\r\n\tconsole.debug(data)\r\n\r\n\tif (xhr.status !== 200) {\r\n\t\treturn\r\n\t}\r\n\r\n\tlet item, menuItem, text, icon\r\n\r\n\tconst div = document.createElement('div')\r\n\tdiv.classList.add('popovermenu', 'open', 'whatsNewPopover', 'menu-left')\r\n\r\n\tconst list = document.createElement('ul')\r\n\r\n\t// header\r\n\titem = document.createElement('li')\r\n\tmenuItem = document.createElement('span')\r\n\tmenuItem.className = 'menuitem'\r\n\r\n\ttext = document.createElement('span')\r\n\ttext.innerText = t('core', 'New in') + ' ' + data.ocs.data.product\r\n\ttext.className = 'caption'\r\n\tmenuItem.appendChild(text)\r\n\r\n\ticon = document.createElement('span')\r\n\ticon.className = 'icon-close'\r\n\ticon.onclick = function() {\r\n\t\tdismiss(data.ocs.data.version, dismissOptions)\r\n\t}\r\n\tmenuItem.appendChild(icon)\r\n\r\n\titem.appendChild(menuItem)\r\n\tlist.appendChild(item)\r\n\r\n\t// Highlights\r\n\tfor (const i in data.ocs.data.whatsNew.regular) {\r\n\t\tconst whatsNewTextItem = data.ocs.data.whatsNew.regular[i]\r\n\t\titem = document.createElement('li')\r\n\r\n\t\tmenuItem = document.createElement('span')\r\n\t\tmenuItem.className = 'menuitem'\r\n\r\n\t\ticon = document.createElement('span')\r\n\t\ticon.className = 'icon-checkmark'\r\n\t\tmenuItem.appendChild(icon)\r\n\r\n\t\ttext = document.createElement('p')\r\n\t\ttext.innerHTML = _.escape(whatsNewTextItem)\r\n\t\tmenuItem.appendChild(text)\r\n\r\n\t\titem.appendChild(menuItem)\r\n\t\tlist.appendChild(item)\r\n\t}\r\n\r\n\t// Changelog URL\r\n\tif (!_.isUndefined(data.ocs.data.changelogURL)) {\r\n\t\titem = document.createElement('li')\r\n\r\n\t\tmenuItem = document.createElement('a')\r\n\t\tmenuItem.href = data.ocs.data.changelogURL\r\n\t\tmenuItem.rel = 'noreferrer noopener'\r\n\t\tmenuItem.target = '_blank'\r\n\r\n\t\ticon = document.createElement('span')\r\n\t\ticon.className = 'icon-link'\r\n\t\tmenuItem.appendChild(icon)\r\n\r\n\t\ttext = document.createElement('span')\r\n\t\ttext.innerText = t('core', 'View changelog')\r\n\t\tmenuItem.appendChild(text)\r\n\r\n\t\titem.appendChild(menuItem)\r\n\t\tlist.appendChild(item)\r\n\t}\r\n\r\n\tdiv.appendChild(list)\r\n\tdocument.body.appendChild(div)\r\n}\r\n\r\n/**\r\n * @param {any} x -\r\n * @param {any} t -\r\n * @param {any} e -\r\n */\r\nfunction onQueryError(x, t, e) {\r\n\tconsole.debug('querying Whats New Data resulted in an error: ' + t + e)\r\n\tconsole.debug(x)\r\n}\r\n\r\n/**\r\n * @param {any} data -\r\n */\r\nfunction onDismissSuccess(data) {\r\n\t// noop\r\n}\r\n\r\n/**\r\n * @param {any} data -\r\n */\r\nfunction onDismissError(data) {\r\n\tconsole.debug('dismissing Whats New data resulted in an error: ' + data)\r\n}\r\n","/**\r\n * @copyright Copyright (c) 2022 Joas Schilling <coding@schilljs.com>\r\n *\r\n * @author Joas Schilling <coding@schilljs.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport { loadState } from '@nextcloud/initial-state'\r\n\r\n/**\r\n * Set the page heading\r\n *\r\n * @param {string} heading page title from the history api\r\n * @since 27.0.0\r\n */\r\nexport function setPageHeading(heading) {\r\n\tconst headingEl = document.getElementById('page-heading-level-1')\r\n\tif (headingEl) {\r\n\t\theadingEl.textContent = heading\r\n\t}\r\n}\r\nexport default {\r\n\t/**\r\n\t * @return {boolean} Whether the user opted-out of shortcuts so that they should not be registered\r\n\t */\r\n\tdisableKeyboardShortcuts() {\r\n\t\treturn loadState('theming', 'shortcutsDisabled', false)\r\n\t},\r\n\tsetPageHeading,\r\n}\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Julius Härtl <jus@bitgrid.net>\r\n * @author Roeland Jago Douma <roeland@famdouma.nl>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\n/* eslint-disable @nextcloud/no-deprecations */\r\nimport { initCore } from './init'\r\n\r\nimport _ from 'underscore'\r\nimport $ from 'jquery'\r\nimport 'jquery-migrate/dist/jquery-migrate.min'\r\n// TODO: switch to `jquery-ui` package and import widgets and effects individually\r\n//       `jquery-ui-dist` is used as a workaround for the issue of missing effects\r\nimport 'jquery-ui-dist/jquery-ui'\r\nimport 'jquery-ui-dist/jquery-ui.css'\r\nimport 'jquery-ui-dist/jquery-ui.theme.css'\r\n// END TODO\r\nimport autosize from 'autosize'\r\nimport Backbone from 'backbone'\r\nimport './Polyfill/tooltip'\r\nimport ClipboardJS from 'clipboard'\r\nimport { dav } from 'davclient.js'\r\nimport Handlebars from 'handlebars'\r\nimport md5 from 'blueimp-md5'\r\nimport moment from 'moment'\r\nimport 'select2'\r\nimport 'select2/select2.css'\r\nimport 'snap.js/dist/snap'\r\nimport 'strengthify'\r\nimport 'strengthify/strengthify.css'\r\n\r\nimport OC from './OC/index'\r\nimport OCP from './OCP/index'\r\nimport OCA from './OCA/index'\r\nimport { getToken as getRequestToken } from './OC/requesttoken'\r\n\r\nconst warnIfNotTesting = function() {\r\n\tif (window.TESTING === undefined) {\r\n\t\tconsole.warn.apply(console, arguments)\r\n\t}\r\n}\r\n\r\n/**\r\n * Mark a function as deprecated and automatically\r\n * warn if used!\r\n *\r\n * @param {Function} func the library to deprecate\r\n * @param {string} funcName the name of the library\r\n * @param {number} version the version this gets removed\r\n * @return {Function}\r\n */\r\nconst deprecate = (func, funcName, version) => {\r\n\tconst oldFunc = func\r\n\tconst newFunc = function() {\r\n\t\twarnIfNotTesting(`The ${funcName} library is deprecated! It will be removed in nextcloud ${version}.`)\r\n\t\treturn oldFunc.apply(this, arguments)\r\n\t}\r\n\tObject.assign(newFunc, oldFunc)\r\n\treturn newFunc\r\n}\r\n\r\nconst setDeprecatedProp = (global, cb, msg) => {\r\n\t(Array.isArray(global) ? global : [global]).forEach(global => {\r\n\t\tif (window[global] !== undefined) {\r\n\t\t\tdelete window[global]\r\n\t\t}\r\n\t\tObject.defineProperty(window, global, {\r\n\t\t\tget: () => {\r\n\t\t\t\tif (msg) {\r\n\t\t\t\t\twarnIfNotTesting(`${global} is deprecated: ${msg}`)\r\n\t\t\t\t} else {\r\n\t\t\t\t\twarnIfNotTesting(`${global} is deprecated`)\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn cb()\r\n\t\t\t},\r\n\t\t})\r\n\t})\r\n}\r\n\r\nwindow._ = _\r\nsetDeprecatedProp(['$', 'jQuery'], () => $, 'The global jQuery is deprecated. It will be removed in a later versions without another warning. Please ship your own.')\r\nsetDeprecatedProp('autosize', () => autosize, 'please ship your own, this will be removed in Nextcloud 20')\r\nsetDeprecatedProp('Backbone', () => Backbone, 'please ship your own, this will be removed in Nextcloud 20')\r\nsetDeprecatedProp(['Clipboard', 'ClipboardJS'], () => ClipboardJS, 'please ship your own, this will be removed in Nextcloud 20')\r\nwindow.dav = dav\r\nsetDeprecatedProp('Handlebars', () => Handlebars, 'please ship your own, this will be removed in Nextcloud 20')\r\nsetDeprecatedProp('md5', () => md5, 'please ship your own, this will be removed in Nextcloud 20')\r\nsetDeprecatedProp('moment', () => moment, 'please ship your own, this will be removed in Nextcloud 20')\r\n\r\nwindow.OC = OC\r\nsetDeprecatedProp('initCore', () => initCore, 'this is an internal function')\r\nsetDeprecatedProp('oc_appswebroots', () => OC.appswebroots, 'use OC.appswebroots instead, this will be removed in Nextcloud 20')\r\nsetDeprecatedProp('oc_config', () => OC.config, 'use OC.config instead, this will be removed in Nextcloud 20')\r\nsetDeprecatedProp('oc_current_user', () => OC.getCurrentUser().uid, 'use OC.getCurrentUser().uid instead, this will be removed in Nextcloud 20')\r\nsetDeprecatedProp('oc_debug', () => OC.debug, 'use OC.debug instead, this will be removed in Nextcloud 20')\r\nsetDeprecatedProp('oc_defaults', () => OC.theme, 'use OC.theme instead, this will be removed in Nextcloud 20')\r\nsetDeprecatedProp('oc_isadmin', OC.isUserAdmin, 'use OC.isUserAdmin() instead, this will be removed in Nextcloud 20')\r\nsetDeprecatedProp('oc_requesttoken', () => getRequestToken(), 'use OC.requestToken instead, this will be removed in Nextcloud 20')\r\nsetDeprecatedProp('oc_webroot', () => OC.webroot, 'use OC.getRootPath() instead, this will be removed in Nextcloud 20')\r\nsetDeprecatedProp('OCDialogs', () => OC.dialogs, 'use OC.dialogs instead, this will be removed in Nextcloud 20')\r\nwindow.OCP = OCP\r\nwindow.OCA = OCA\r\n$.fn.select2 = deprecate($.fn.select2, 'select2', 19)\r\n\r\n/**\r\n * translate a string\r\n *\r\n * @param {string} app the id of the app for which to translate the string\r\n * @param {string} text the string to translate\r\n * @param [vars] map of placeholder key to value\r\n * @param {number} [count] number to replace %n with\r\n * @return {string}\r\n */\r\nwindow.t = _.bind(OC.L10N.translate, OC.L10N)\r\n\r\n/**\r\n * translate a string\r\n *\r\n * @param {string} app the id of the app for which to translate the string\r\n * @param {string} text_singular the string to translate for exactly one object\r\n * @param {string} text_plural the string to translate for n objects\r\n * @param {number} count number to determine whether to use singular or plural\r\n * @param [vars] map of placeholder key to value\r\n * @return {string} Translated string\r\n */\r\nwindow.n = _.bind(OC.L10N.translatePlural, OC.L10N)\r\n","/**\r\n * @copyright Copyright (c) 2018 Julius Härtl <jus@bitgrid.net>\r\n *\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Julius Härtl <jus@bitgrid.net>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport escapeHTML from 'escape-html'\r\n\r\n/**\r\n * @typedef TypeDefinition\r\n * @function {Function} action This action is executed to let the user select a resource\r\n * @param {string} icon Contains the icon css class for the type\r\n * @function Object() { [native code] }\r\n */\r\n\r\n/**\r\n * @type {TypeDefinition[]}\r\n */\r\nconst types = {}\r\n\r\n/**\r\n * Those translations will be used by the vue component but they should be shipped with the server\r\n * FIXME: Those translations should be added to the library\r\n *\r\n * @return {Array}\r\n */\r\nexport const l10nProjects = () => {\r\n\treturn [\r\n\t\tt('core', 'Add to a project'),\r\n\t\tt('core', 'Show details'),\r\n\t\tt('core', 'Hide details'),\r\n\t\tt('core', 'Rename project'),\r\n\t\tt('core', 'Failed to rename the project'),\r\n\t\tt('core', 'Failed to create a project'),\r\n\t\tt('core', 'Failed to add the item to the project'),\r\n\t\tt('core', 'Connect items to a project to make them easier to find'),\r\n\t\tt('core', 'Type to search for existing projects'),\r\n\t]\r\n}\r\n\r\nexport default {\r\n\t/**\r\n\t *\r\n\t * @param {string} type type\r\n\t * @param {TypeDefinition} typeDefinition typeDefinition\r\n\t */\r\n\tregisterType(type, typeDefinition) {\r\n\t\ttypes[type] = typeDefinition\r\n\t},\r\n\ttrigger(type) {\r\n\t\treturn types[type].action()\r\n\t},\r\n\tgetTypes() {\r\n\t\treturn Object.keys(types)\r\n\t},\r\n\tgetIcon(type) {\r\n\t\treturn types[type].typeIconClass || ''\r\n\t},\r\n\tgetLabel(type) {\r\n\t\treturn escapeHTML(types[type].typeString || type)\r\n\t},\r\n\tgetLink(type, id) {\r\n\t\t/* TODO: Allow action to be executed instead of href as well */\r\n\t\treturn typeof types[type] !== 'undefined' ? types[type].link(id) : ''\r\n\t},\r\n}\r\n","/**\r\n * @copyright Copyright (c) 2018 Julius Härtl <jus@bitgrid.net>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Julius Härtl <jus@bitgrid.net>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nconst loadedScripts = {}\r\nconst loadedStylesheets = {}\r\n/**\r\n * @namespace OCP\r\n * @class Loader\r\n */\r\nexport default {\r\n\r\n\t/**\r\n\t * Load a script asynchronously\r\n\t *\r\n\t * @param {string} app the app name\r\n\t * @param {string} file the script file name\r\n\t * @return {Promise}\r\n\t */\r\n\tloadScript(app, file) {\r\n\t\tconst key = app + file\r\n\t\tif (Object.prototype.hasOwnProperty.call(loadedScripts, key)) {\r\n\t\t\treturn Promise.resolve()\r\n\t\t}\r\n\t\tloadedScripts[key] = true\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tconst scriptPath = OC.filePath(app, 'js', file)\r\n\t\t\tconst script = document.createElement('script')\r\n\t\t\tscript.src = scriptPath\r\n\t\t\tscript.setAttribute('nonce', btoa(OC.requestToken))\r\n\t\t\tscript.onload = () => resolve()\r\n\t\t\tscript.onerror = () => reject(new Error(`Failed to load script from ${scriptPath}`))\r\n\t\t\tdocument.head.appendChild(script)\r\n\t\t})\r\n\t},\r\n\r\n\t/**\r\n\t * Load a stylesheet file asynchronously\r\n\t *\r\n\t * @param {string} app the app name\r\n\t * @param {string} file the script file name\r\n\t * @return {Promise}\r\n\t */\r\n\tloadStylesheet(app, file) {\r\n\t\tconst key = app + file\r\n\t\tif (Object.prototype.hasOwnProperty.call(loadedStylesheets, key)) {\r\n\t\t\treturn Promise.resolve()\r\n\t\t}\r\n\t\tloadedStylesheets[key] = true\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tconst stylePath = OC.filePath(app, 'css', file)\r\n\t\t\tconst link = document.createElement('link')\r\n\t\t\tlink.href = stylePath\r\n\t\t\tlink.type = 'text/css'\r\n\t\t\tlink.rel = 'stylesheet'\r\n\t\t\tlink.onload = () => resolve()\r\n\t\t\tlink.onerror = () => reject(new Error(`Failed to load stylesheet from ${stylePath}`))\r\n\t\t\tdocument.head.appendChild(link)\r\n\t\t})\r\n\t},\r\n}\r\n","/**\r\n * @copyright Copyright (c) 2019 Julius Härtl <jus@bitgrid.net>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author Julius Härtl <jus@bitgrid.net>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport {\r\n\tshowError,\r\n\tshowInfo, showMessage,\r\n\tshowSuccess,\r\n\tshowWarning,\r\n} from '@nextcloud/dialogs'\r\n\r\nexport default {\r\n\t/**\r\n\t * @deprecated 19.0.0 use `showSuccess` from the `@nextcloud/dialogs` package instead\r\n\t *\r\n\t * @param {string} text the toast text\r\n\t * @param {object} options options\r\n\t * @return {Toast}\r\n\t */\r\n\tsuccess(text, options) {\r\n\t\treturn showSuccess(text, options)\r\n\t},\r\n\t/**\r\n\t * @deprecated 19.0.0 use `showWarning` from the `@nextcloud/dialogs` package instead\r\n\t *\r\n\t * @param {string} text the toast text\r\n\t * @param {object} options options\r\n\t * @return {Toast}\r\n\t */\r\n\twarning(text, options) {\r\n\t\treturn showWarning(text, options)\r\n\t},\r\n\t/**\r\n\t * @deprecated 19.0.0 use `showError` from the `@nextcloud/dialogs` package instead\r\n\t *\r\n\t * @param {string} text the toast text\r\n\t * @param {object} options options\r\n\t * @return {Toast}\r\n\t */\r\n\terror(text, options) {\r\n\t\treturn showError(text, options)\r\n\t},\r\n\t/**\r\n\t * @deprecated 19.0.0 use `showInfo` from the `@nextcloud/dialogs` package instead\r\n\t *\r\n\t * @param {string} text the toast text\r\n\t * @param {object} options options\r\n\t * @return {Toast}\r\n\t */\r\n\tinfo(text, options) {\r\n\t\treturn showInfo(text, options)\r\n\t},\r\n\t/**\r\n\t * @deprecated 19.0.0 use `showMessage` from the `@nextcloud/dialogs` package instead\r\n\t *\r\n\t * @param {string} text the toast text\r\n\t * @param {object} options options\r\n\t * @return {Toast}\r\n\t */\r\n\tmessage(text, options) {\r\n\t\treturn showMessage(text, options)\r\n\t},\r\n\r\n}\r\n","/**\r\n * @copyright Copyright (c) 2016 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Julius Härtl <jus@bitgrid.net>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport { loadState } from '@nextcloud/initial-state'\r\n\r\nimport * as AppConfig from './appconfig'\r\nimport * as Comments from './comments'\r\nimport * as WhatsNew from './whatsnew'\r\n\r\nimport Accessibility from './accessibility'\r\nimport Collaboration from './collaboration'\r\nimport Loader from './loader'\r\nimport Toast from './toast'\r\n\r\n/** @namespace OCP */\r\nexport default {\r\n\tAccessibility,\r\n\tAppConfig,\r\n\tCollaboration,\r\n\tComments,\r\n\tInitialState: {\r\n\t\t/**\r\n\t\t * @deprecated 18.0.0 add https://www.npmjs.com/package/@nextcloud/initial-state to your app\r\n\t\t */\r\n\t\tloadState,\r\n\t},\r\n\tLoader,\r\n\t/**\r\n\t * @deprecated 19.0.0 use the `@nextcloud/dialogs` package instead\r\n\t */\r\n\tToast,\r\n\tWhatsNew,\r\n}\r\n","/**\r\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport $ from 'jquery'\r\n\r\nimport OC from '../OC'\r\n\r\n/**\r\n * This plugin inserts the right avatar for the user, depending on, whether a\r\n * custom avatar is uploaded - which it uses then - or not, and display a\r\n * placeholder with the first letter of the users name instead.\r\n * For this it queries the core_avatar_get route, thus this plugin is fit very\r\n * tightly for owncloud, and it may not work anywhere else.\r\n *\r\n * You may use this on any <div></div>\r\n * Here I'm using <div class=\"avatardiv\"></div> as an example.\r\n *\r\n * There are 5 ways to call this:\r\n *\r\n * 1. $('.avatardiv').avatar('jdoe', 128);\r\n * This will make the div to jdoe's fitting avatar, with a size of 128px.\r\n *\r\n * 2. $('.avatardiv').avatar('jdoe');\r\n * This will make the div to jdoe's fitting avatar. If the div already has a\r\n * height, it will be used for the avatars size. Otherwise this plugin will\r\n * search for 'size' DOM data, to use for avatar size. If neither are available\r\n * it will default to 64px.\r\n *\r\n * 3. $('.avatardiv').avatar();\r\n * This will search the DOM for 'user' data, to use as the username. If there\r\n * is no username available it will default to a placeholder with the value of\r\n * \"?\". The size will be determined the same way, as the second example.\r\n *\r\n * 4. $('.avatardiv').avatar('jdoe', 128, true);\r\n * This will behave like the first example, except it will also append random\r\n * hashes to the custom avatar images, to force image reloading in IE8.\r\n *\r\n * 5. $('.avatardiv').avatar('jdoe', 128, undefined, true);\r\n * This will behave like the first example, but it will hide the avatardiv, if\r\n * it will display the default placeholder. undefined is the ie8fix from\r\n * example 4 and can be either true, or false/undefined, to be ignored.\r\n *\r\n * 6. $('.avatardiv').avatar('jdoe', 128, undefined, true, callback);\r\n * This will behave like the above example, but it will call the function\r\n * defined in callback after the avatar is placed into the DOM.\r\n *\r\n */\r\n\r\n$.fn.avatar = function(user, size, ie8fix, hidedefault, callback, displayname) {\r\n\tconst setAvatarForUnknownUser = function(target) {\r\n\t\ttarget.imageplaceholder('?')\r\n\t\ttarget.css('background-color', '#b9b9b9')\r\n\t}\r\n\r\n\tif (typeof (user) !== 'undefined') {\r\n\t\tuser = String(user)\r\n\t}\r\n\tif (typeof (displayname) !== 'undefined') {\r\n\t\tdisplayname = String(displayname)\r\n\t}\r\n\r\n\tif (typeof (size) === 'undefined') {\r\n\t\tif (this.height() > 0) {\r\n\t\t\tsize = this.height()\r\n\t\t} else if (this.data('size') > 0) {\r\n\t\t\tsize = this.data('size')\r\n\t\t} else {\r\n\t\t\tsize = 64\r\n\t\t}\r\n\t}\r\n\r\n\tthis.height(size)\r\n\tthis.width(size)\r\n\r\n\tif (typeof (user) === 'undefined') {\r\n\t\tif (typeof (this.data('user')) !== 'undefined') {\r\n\t\t\tuser = this.data('user')\r\n\t\t} else {\r\n\t\t\tsetAvatarForUnknownUser(this)\r\n\t\t\treturn\r\n\t\t}\r\n\t}\r\n\r\n\t// sanitize\r\n\tuser = String(user).replace(/\\//g, '')\r\n\r\n\tconst $div = this\r\n\tlet url\r\n\r\n\t// If this is our own avatar we have to use the version attribute\r\n\tif (user === OC.getCurrentUser().uid) {\r\n\t\turl = OC.generateUrl(\r\n\t\t\t'/avatar/{user}/{size}?v={version}',\r\n\t\t\t{\r\n\t\t\t\tuser,\r\n\t\t\t\tsize: Math.ceil(size * window.devicePixelRatio),\r\n\t\t\t\tversion: oc_userconfig.avatar.version,\r\n\t\t\t})\r\n\t} else {\r\n\t\turl = OC.generateUrl(\r\n\t\t\t'/avatar/{user}/{size}',\r\n\t\t\t{\r\n\t\t\t\tuser,\r\n\t\t\t\tsize: Math.ceil(size * window.devicePixelRatio),\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst img = new Image()\r\n\r\n\t// If the new image loads successfully set it.\r\n\timg.onload = function() {\r\n\t\t$div.clearimageplaceholder()\r\n\t\t$div.append(img)\r\n\r\n\t\tif (typeof callback === 'function') {\r\n\t\t\tcallback()\r\n\t\t}\r\n\t}\r\n\t// Fallback when avatar loading fails:\r\n\t// Use old placeholder when a displayname attribute is defined,\r\n\t// otherwise show the unknown user placeholder.\r\n\timg.onerror = function() {\r\n\t\t$div.clearimageplaceholder()\r\n\t\tif (typeof (displayname) !== 'undefined') {\r\n\t\t\t$div.imageplaceholder(user, displayname)\r\n\t\t} else {\r\n\t\t\tsetAvatarForUnknownUser($div)\r\n\t\t}\r\n\r\n\t\tif (typeof callback === 'function') {\r\n\t\t\tcallback()\r\n\t\t}\r\n\t}\r\n\r\n\tif (size < 32) {\r\n\t\t$div.addClass('icon-loading-small')\r\n\t} else {\r\n\t\t$div.addClass('icon-loading')\r\n\t}\r\n\timg.width = size\r\n\timg.height = size\r\n\timg.src = url\r\n\timg.alt = ''\r\n}\r\n","/**\r\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Roeland Jago Douma <roeland@famdouma.nl>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport $ from 'jquery'\r\n\r\nimport OC from '../OC'\r\nimport { isA11yActivation } from '../Util/a11y.js'\r\n\r\nconst LIST = ''\r\n\t+ '<div class=\"menu popovermenu menu-left hidden contactsmenu-popover\">'\r\n\t+ '    <ul>'\r\n\t+ '        <li>'\r\n\t+ '            <a>'\r\n\t+ '                <span class=\"icon-loading-small\"></span>'\r\n\t+ '            </a>'\r\n\t+ '        </li>'\r\n\t+ '    </ul>'\r\n\t+ '</div>'\r\n\r\nconst entryTemplate = require('./contactsmenu/jquery_entry.handlebars')\r\n\r\n$.fn.contactsMenu = function(shareWith, shareType, appendTo) {\r\n\t// 0 - user, 4 - email, 6 - remote\r\n\tconst allowedTypes = [0, 4, 6]\r\n\tif (allowedTypes.indexOf(shareType) === -1) {\r\n\t\treturn\r\n\t}\r\n\r\n\tconst $div = this\r\n\tappendTo.append(LIST)\r\n\tconst $list = appendTo.find('div.contactsmenu-popover')\r\n\r\n\t$div.on('click keydown', function(event) {\r\n\t\tif (!isA11yActivation(event)) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (!$list.hasClass('hidden')) {\r\n\t\t\t$list.addClass('hidden')\r\n\t\t\t$list.hide()\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t$list.removeClass('hidden')\r\n\t\t$list.show()\r\n\r\n\t\tif ($list.hasClass('loaded')) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t$list.addClass('loaded')\r\n\t\t$.ajax(OC.generateUrl('/contactsmenu/findOne'), {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\tshareType,\r\n\t\t\t\tshareWith,\r\n\t\t\t},\r\n\t\t}).then(function(data) {\r\n\t\t\t$list.find('ul').find('li').addClass('hidden')\r\n\r\n\t\t\tlet actions\r\n\t\t\tif (!data.topAction) {\r\n\t\t\t\tactions = [{\r\n\t\t\t\t\thyperlink: '#',\r\n\t\t\t\t\ttitle: t('core', 'No action available'),\r\n\t\t\t\t}]\r\n\t\t\t} else {\r\n\t\t\t\tactions = [data.topAction].concat(data.actions)\r\n\t\t\t}\r\n\r\n\t\t\tactions.forEach(function(action) {\r\n\t\t\t\t$list.find('ul').append(entryTemplate(action))\r\n\t\t\t})\r\n\r\n\t\t\t$div.trigger('load')\r\n\t\t}, function(jqXHR) {\r\n\t\t\t$list.find('ul').find('li').addClass('hidden')\r\n\r\n\t\t\tlet title\r\n\t\t\tif (jqXHR.status === 404) {\r\n\t\t\t\ttitle = t('core', 'No action available')\r\n\t\t\t} else {\r\n\t\t\t\ttitle = t('core', 'Error fetching contact actions')\r\n\t\t\t}\r\n\r\n\t\t\t$list.find('ul').append(entryTemplate({\r\n\t\t\t\thyperlink: '#',\r\n\t\t\t\ttitle,\r\n\t\t\t}))\r\n\r\n\t\t\t$div.trigger('loaderror', jqXHR)\r\n\t\t})\r\n\t})\r\n\r\n\t$(document).click(function(event) {\r\n\t\tconst clickedList = ($list.has(event.target).length > 0)\r\n\t\tlet clickedTarget = ($div.has(event.target).length > 0)\r\n\r\n\t\t$div.each(function() {\r\n\t\t\tif ($(this).is(event.target)) {\r\n\t\t\t\tclickedTarget = true\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tif (clickedList || clickedTarget) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t$list.addClass('hidden')\r\n\t\t$list.hide()\r\n\t})\r\n}\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport $ from 'jquery'\r\n\r\n/**\r\n * check if an element exists.\r\n * allows you to write if ($('#myid').exists()) to increase readability\r\n *\r\n * @see {@link http://stackoverflow.com/questions/31044/is-there-an-exists-function-for-jquery}\r\n * @return {boolean}\r\n */\r\n$.fn.exists = function() {\r\n\treturn this.length > 0\r\n}\r\n","/**\r\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport $ from 'jquery'\r\n\r\n/**\r\n * Filter jQuery selector by attribute value\r\n *\r\n * @param {string} attrName attribute name\r\n * @param {string} attrValue attribute value\r\n * @return {void}\r\n */\r\n$.fn.filterAttr = function(attrName, attrValue) {\r\n\treturn this.filter(function() {\r\n\t\treturn $(this).attr(attrName) === attrValue\r\n\t})\r\n}\r\n","/**\r\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author Gary Kim <gary@garykim.dev>\r\n * @author Joas Schilling <coding@schilljs.com>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport $ from 'jquery'\r\nimport { isA11yActivation } from '../Util/a11y'\r\n\r\n$.widget('oc.ocdialog', {\r\n\toptions: {\r\n\t\twidth: 'auto',\r\n\t\theight: 'auto',\r\n\t\tcloseButton: true,\r\n\t\tcloseOnEscape: true,\r\n\t\tcloseCallback: null,\r\n\t\tmodal: false,\r\n\t},\r\n\t_create() {\r\n\t\tconst self = this\r\n\r\n\t\tthis.originalCss = {\r\n\t\t\tdisplay: this.element[0].style.display,\r\n\t\t\twidth: this.element[0].style.width,\r\n\t\t\theight: this.element[0].style.height,\r\n\t\t}\r\n\r\n\t\tthis.originalTitle = this.element.attr('title')\r\n\t\tthis.options.title = this.options.title || this.originalTitle\r\n\r\n\t\tthis.$dialog = $('<div class=\"oc-dialog\"></div>')\r\n\t\t\t.attr({\r\n\t\t\t\t// Setting tabIndex makes the div focusable\r\n\t\t\t\ttabIndex: -1,\r\n\t\t\t\trole: 'dialog',\r\n\t\t\t})\r\n\t\t\t.insertBefore(this.element)\r\n\t\tthis.$dialog.append(this.element.detach())\r\n\t\tthis.element.removeAttr('title').addClass('oc-dialog-content').appendTo(this.$dialog)\r\n\r\n\t\t// Activate the primary button on enter if there is a single input\r\n\t\tif (self.element.find('input').length === 1) {\r\n\t\t\tconst $input = self.element.find('input')\r\n\t\t\t$input.on('keydown', function(event) {\r\n\t\t\t\tif (isA11yActivation(event)) {\r\n\t\t\t\t\tif (self.$buttonrow) {\r\n\t\t\t\t\t\tconst $button = self.$buttonrow.find('button.primary')\r\n\t\t\t\t\t\tif ($button && !$button.prop('disabled')) {\r\n\t\t\t\t\t\t\t$button.click()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tthis.$dialog.css({\r\n\t\t\tdisplay: 'inline-block',\r\n\t\t\tposition: 'fixed',\r\n\t\t})\r\n\r\n\t\tthis.enterCallback = null\r\n\r\n\t\t$(document).on('keydown keyup', function(event) {\r\n\t\t\tif (\r\n\t\t\t\tevent.target !== self.$dialog.get(0)\r\n\t\t\t\t&& self.$dialog.find($(event.target)).length === 0\r\n\t\t\t) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t// Escape\r\n\t\t\tif (\r\n\t\t\t\tevent.keyCode === 27\r\n\t\t\t\t&& event.type === 'keydown'\r\n\t\t\t\t&& self.options.closeOnEscape\r\n\t\t\t) {\r\n\t\t\t\tevent.stopImmediatePropagation()\r\n\t\t\t\tself.close()\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\t// Enter\r\n\t\t\tif (event.keyCode === 13) {\r\n\t\t\t\tevent.stopImmediatePropagation()\r\n\t\t\t\tif (self.enterCallback !== null) {\r\n\t\t\t\t\tself.enterCallback()\r\n\t\t\t\t\tevent.preventDefault()\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tif (event.type === 'keyup') {\r\n\t\t\t\t\tevent.preventDefault()\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tthis._setOptions(this.options)\r\n\t\tthis._createOverlay()\r\n\t},\r\n\t_init() {\r\n\t\tthis.$dialog.focus()\r\n\t\tthis._trigger('open')\r\n\t},\r\n\t_setOption(key, value) {\r\n\t\tconst self = this\r\n\t\tswitch (key) {\r\n\t\tcase 'title':\r\n\t\t\tif (this.$title) {\r\n\t\t\t\tthis.$title.text(value)\r\n\t\t\t} else {\r\n\t\t\t\tconst $title = $('<h2 class=\"oc-dialog-title\">'\r\n\t\t\t\t\t\t+ value\r\n\t\t\t\t\t\t+ '</h2>')\r\n\t\t\t\tthis.$title = $title.prependTo(this.$dialog)\r\n\t\t\t}\r\n\t\t\tthis._setSizes()\r\n\t\t\tbreak\r\n\t\tcase 'buttons':\r\n\t\t\tif (this.$buttonrow) {\r\n\t\t\t\tthis.$buttonrow.empty()\r\n\t\t\t} else {\r\n\t\t\t\tconst $buttonrow = $('<div class=\"oc-dialog-buttonrow\"></div>')\r\n\t\t\t\tthis.$buttonrow = $buttonrow.appendTo(this.$dialog)\r\n\t\t\t}\r\n\t\t\tif (value.length === 1) {\r\n\t\t\t\tthis.$buttonrow.addClass('onebutton')\r\n\t\t\t} else if (value.length === 2) {\r\n\t\t\t\tthis.$buttonrow.addClass('twobuttons')\r\n\t\t\t} else if (value.length === 3) {\r\n\t\t\t\tthis.$buttonrow.addClass('threebuttons')\r\n\t\t\t}\r\n\t\t\t$.each(value, function(idx, val) {\r\n\t\t\t\tconst $button = $('<button>').text(val.text)\r\n\t\t\t\tif (val.classes) {\r\n\t\t\t\t\t$button.addClass(val.classes)\r\n\t\t\t\t}\r\n\t\t\t\tif (val.defaultButton) {\r\n\t\t\t\t\t$button.addClass('primary')\r\n\t\t\t\t\tself.$defaultButton = $button\r\n\t\t\t\t}\r\n\t\t\t\tself.$buttonrow.append($button)\r\n\t\t\t\t$button.on('click keydown', function(event) {\r\n\t\t\t\t\tif (isA11yActivation(event)) {\r\n\t\t\t\t\t\tval.click.apply(self.element[0], arguments)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\tthis.$buttonrow.find('button')\r\n\t\t\t\t.on('focus', function(event) {\r\n\t\t\t\t\tself.$buttonrow.find('button').removeClass('primary')\r\n\t\t\t\t\t$(this).addClass('primary')\r\n\t\t\t\t})\r\n\t\t\tthis._setSizes()\r\n\t\t\tbreak\r\n\t\tcase 'style':\r\n\t\t\tif (value.buttons !== undefined) {\r\n\t\t\t\tthis.$buttonrow.addClass(value.buttons)\r\n\t\t\t}\r\n\t\t\tbreak\r\n\t\tcase 'closeButton':\r\n\t\t\tif (value) {\r\n\t\t\t\tconst $closeButton = $('<button class=\"oc-dialog-close\"></button>')\r\n\t\t\t\t$closeButton.attr('aria-label', t('core', 'Close \"{dialogTitle}\" dialog', { dialogTitle: this.$title || this.options.title }))\r\n\t\t\t\tthis.$dialog.prepend($closeButton)\r\n\t\t\t\t$closeButton.on('click keydown', function(event) {\r\n\t\t\t\t\tif (isA11yActivation(event)) {\r\n\t\t\t\t\t\tself.options.closeCallback && self.options.closeCallback()\r\n\t\t\t\t\t\tself.close()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tthis.$dialog.find('.oc-dialog-close').remove()\r\n\t\t\t}\r\n\t\t\tbreak\r\n\t\tcase 'width':\r\n\t\t\tthis.$dialog.css('width', value)\r\n\t\t\tbreak\r\n\t\tcase 'height':\r\n\t\t\tthis.$dialog.css('height', value)\r\n\t\t\tbreak\r\n\t\tcase 'close':\r\n\t\t\tthis.closeCB = value\r\n\t\t\tbreak\r\n\t\t}\r\n\t\t// this._super(key, value);\r\n\t\t$.Widget.prototype._setOption.apply(this, arguments)\r\n\t},\r\n\t_setOptions(options) {\r\n\t\t// this._super(options);\r\n\t\t$.Widget.prototype._setOptions.apply(this, arguments)\r\n\t},\r\n\t_setSizes() {\r\n\t\tlet lessHeight = 0\r\n\t\tif (this.$title) {\r\n\t\t\tlessHeight += this.$title.outerHeight(true)\r\n\t\t}\r\n\t\tif (this.$buttonrow) {\r\n\t\t\tlessHeight += this.$buttonrow.outerHeight(true)\r\n\t\t}\r\n\t\tthis.element.css({\r\n\t\t\theight: 'calc(100% - ' + lessHeight + 'px)',\r\n\t\t})\r\n\t},\r\n\t_createOverlay() {\r\n\t\tif (!this.options.modal) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst self = this\r\n\t\tlet contentDiv = $('#content')\r\n\t\tif (contentDiv.length === 0) {\r\n\t\t\t// nextcloud-vue compatibility\r\n\t\t\tcontentDiv = $('.content')\r\n\t\t}\r\n\t\tthis.overlay = $('<div>')\r\n\t\t\t.addClass('oc-dialog-dim')\r\n\t\t\t.appendTo(contentDiv)\r\n\t\tthis.overlay.on('click keydown keyup', function(event) {\r\n\t\t\tif (event.target !== self.$dialog.get(0) && self.$dialog.find($(event.target)).length === 0) {\r\n\t\t\t\tevent.preventDefault()\r\n\t\t\t\tevent.stopPropagation()\r\n\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\t_destroyOverlay() {\r\n\t\tif (!this.options.modal) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (this.overlay) {\r\n\t\t\tthis.overlay.off('click keydown keyup')\r\n\t\t\tthis.overlay.remove()\r\n\t\t\tthis.overlay = null\r\n\t\t}\r\n\t},\r\n\twidget() {\r\n\t\treturn this.$dialog\r\n\t},\r\n\tsetEnterCallback(callback) {\r\n\t\tthis.enterCallback = callback\r\n\t},\r\n\tunsetEnterCallback() {\r\n\t\tthis.enterCallback = null\r\n\t},\r\n\tclose() {\r\n\t\tthis._destroyOverlay()\r\n\t\tconst self = this\r\n\t\t// Ugly hack to catch remaining keyup events.\r\n\t\tsetTimeout(function() {\r\n\t\t\tself._trigger('close', self)\r\n\t\t}, 200)\r\n\r\n\t\tself.$dialog.remove()\r\n\t\tthis.destroy()\r\n\t},\r\n\tdestroy() {\r\n\t\tif (this.$title) {\r\n\t\t\tthis.$title.remove()\r\n\t\t}\r\n\t\tif (this.$buttonrow) {\r\n\t\t\tthis.$buttonrow.remove()\r\n\t\t}\r\n\r\n\t\tif (this.originalTitle) {\r\n\t\t\tthis.element.attr('title', this.originalTitle)\r\n\t\t}\r\n\t\tthis.element.removeClass('oc-dialog-content')\r\n\t\t\t.css(this.originalCss).detach().insertBefore(this.$dialog)\r\n\t\tthis.$dialog.remove()\r\n\t},\r\n})\r\n","/**\r\n * @copyright Copyright (c) 2016 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Roeland Jago Douma <roeland@famdouma.nl>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport $ from 'jquery'\r\nimport escapeHTML from 'escape-html'\r\n\r\n/**\r\n * jQuery plugin for micro templates\r\n *\r\n * Strings are automatically escaped, but that can be disabled by setting\r\n * escapeFunction to null.\r\n *\r\n * Usage examples:\r\n *\r\n *    var htmlStr = '<p>Bake, uncovered, until the {greasystuff} is melted and the {pasta} is heated through, about {min} minutes.</p>'\r\n *    $(htmlStr).octemplate({greasystuff: 'cheese', pasta: 'macaroni', min: 10});\r\n *\r\n *    var htmlStr = '<p>Welcome back {user}</p>';\r\n *    $(htmlStr).octemplate({user: 'John Q. Public'}, {escapeFunction: null});\r\n *\r\n * Be aware that the target string must be wrapped in an HTML element for the\r\n * plugin to work. The following won't work:\r\n *\r\n *      var textStr = 'Welcome back {user}';\r\n *      $(textStr).octemplate({user: 'John Q. Public'});\r\n *\r\n * For anything larger than one-liners, you can use a simple $.get() ajax\r\n * request to get the template, or you can embed them it the page using the\r\n * text/template type:\r\n *\r\n * <script id=\"contactListItemTemplate\" type=\"text/template\">\r\n *    <tr class=\"contact\" data-id=\"{id}\">\r\n *        <td class=\"name\">\r\n *            <input type=\"checkbox\" name=\"id\" value=\"{id}\" /><span class=\"nametext\">{name}</span>\r\n *        </td>\r\n *        <td class=\"email\">\r\n *            <a href=\"mailto:{email}\">{email}</a>\r\n *        </td>\r\n *        <td class=\"phone\">{phone}</td>\r\n *    </tr>\r\n * </script>\r\n *\r\n * var $tmpl = $('#contactListItemTemplate');\r\n * var contacts = // fetched in some ajax call\r\n *\r\n * $.each(contacts, function(idx, contact) {\r\n *         $contactList.append(\r\n *             $tmpl.octemplate({\r\n *                 id: contact.getId(),\r\n *                 name: contact.getDisplayName(),\r\n *                 email: contact.getPreferredEmail(),\r\n *                 phone: contact.getPreferredPhone(),\r\n *             });\r\n *         );\r\n * });\r\n */\r\n/**\r\n * Object Template\r\n * Inspired by micro templating done by e.g. underscore.js\r\n */\r\nconst Template = {\r\n\tinit(vars, options, elem) {\r\n\t\t// Mix in the passed in options with the default options\r\n\t\tthis.vars = vars\r\n\t\tthis.options = $.extend({}, this.options, options)\r\n\r\n\t\tthis.elem = elem\r\n\t\tconst self = this\r\n\r\n\t\tif (typeof this.options.escapeFunction === 'function') {\r\n\t\t\tconst keys = Object.keys(this.vars)\r\n\t\t\tfor (let key = 0; key < keys.length; key++) {\r\n\t\t\t\tif (typeof this.vars[keys[key]] === 'string') {\r\n\t\t\t\t\tthis.vars[keys[key]] = self.options.escapeFunction(this.vars[keys[key]])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst _html = this._build(this.vars)\r\n\t\treturn $(_html)\r\n\t},\r\n\t// From stackoverflow.com/questions/1408289/best-way-to-do-variable-interpolation-in-javascript\r\n\t_build(o) {\r\n\t\tconst data = this.elem.attr('type') === 'text/template' ? this.elem.html() : this.elem.get(0).outerHTML\r\n\t\ttry {\r\n\t\t\treturn data.replace(/{([^{}]*)}/g,\r\n\t\t\t\tfunction(a, b) {\r\n\t\t\t\t\tconst r = o[b]\r\n\t\t\t\t\treturn typeof r === 'string' || typeof r === 'number' ? r : a\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e, 'data:', data)\r\n\t\t}\r\n\t},\r\n\toptions: {\r\n\t\tescapeFunction: escapeHTML,\r\n\t},\r\n}\r\n\r\n$.fn.octemplate = function(vars, options) {\r\n\tvars = vars || {}\r\n\tif (this.length) {\r\n\t\tconst _template = Object.create(Template)\r\n\t\treturn _template.init(vars, options, this)\r\n\t}\r\n}\r\n","/**\r\n * @copyright 2016-2018 John Molakvoæ <skjnldsv@protonmail.com>\r\n * @copyright 2013 Morris Jobke <morris.jobke@gmail.com>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Julius Härtl <jus@bitgrid.net>\r\n * @author Sergey Shliakhov <husband.sergey@gmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\n/* eslint-disable */\r\nimport $ from 'jquery'\r\nimport md5 from 'blueimp-md5'\r\n\r\n/*\r\n * Adds a background color to the element called on and adds the first character\r\n * of the passed in string. This string is also the seed for the generation of\r\n * the background color.\r\n *\r\n * You have following HTML:\r\n *\r\n * <div id=\"albumart\"></div>\r\n *\r\n * And call this from Javascript:\r\n *\r\n * $('#albumart').imageplaceholder('The Album Title');\r\n *\r\n * Which will result in:\r\n *\r\n * <div id=\"albumart\" style=\"background-color: rgb(121, 90, 171); ... \">T</div>\r\n *\r\n * You may also call it like this, to have a different background, than the seed:\r\n *\r\n * $('#albumart').imageplaceholder('The Album Title', 'Album Title');\r\n *\r\n * Resulting in:\r\n *\r\n * <div id=\"albumart\" style=\"background-color: rgb(121, 90, 171); ... \">A</div>\r\n *\r\n */\r\n\r\n/*\r\n* Alternatively, you can use the prototype function to convert your string to rgb colors:\r\n*\r\n* \"a6741a86aded5611a8e46ce16f2ad646\".toRgb()\r\n*\r\n* Will return the rgb parameters within the following object:\r\n*\r\n* Color {r: 208, g: 158, b: 109}\r\n*\r\n*/\r\n\r\nconst toRgb = (s) => {\r\n\t// Normalize hash\r\n\tvar hash = s.toLowerCase()\r\n\r\n\t// Already a md5 hash?\r\n\tif (hash.match(/^([0-9a-f]{4}-?){8}$/) === null) {\r\n\t\thash = md5(hash)\r\n\t}\r\n\r\n\thash = hash.replace(/[^0-9a-f]/g, '')\r\n\r\n\tfunction Color(r, g, b) {\r\n\t\tthis.r = r\r\n\t\tthis.g = g\r\n\t\tthis.b = b\r\n\t}\r\n\r\n\tfunction stepCalc(steps, ends) {\r\n\t\tvar step = new Array(3)\r\n\t\tstep[0] = (ends[1].r - ends[0].r) / steps\r\n\t\tstep[1] = (ends[1].g - ends[0].g) / steps\r\n\t\tstep[2] = (ends[1].b - ends[0].b) / steps\r\n\t\treturn step\r\n\t}\r\n\r\n\tfunction mixPalette(steps, color1, color2) {\r\n\t\tvar palette = []\r\n\t\tpalette.push(color1)\r\n\t\tvar step = stepCalc(steps, [color1, color2])\r\n\t\tfor (var i = 1; i < steps; i++) {\r\n\t\t\tvar r = parseInt(color1.r + (step[0] * i))\r\n\t\t\tvar g = parseInt(color1.g + (step[1] * i))\r\n\t\t\tvar b = parseInt(color1.b + (step[2] * i))\r\n\t\t\tpalette.push(new Color(r, g, b))\r\n\t\t}\r\n\t\treturn palette\r\n\t}\r\n\r\n\tconst red = new Color(182, 70, 157);\r\n\tconst yellow = new Color(221, 203, 85);\r\n\tconst blue = new Color(0, 130, 201); // Nextcloud blue\r\n\t// Number of steps to go from a color to another\r\n\t// 3 colors * 6 will result in 18 generated colors\r\n\tconst steps = 6;\r\n\r\n\tconst palette1 = mixPalette(steps, red, yellow);\r\n\tconst palette2 = mixPalette(steps, yellow, blue);\r\n\tconst palette3 = mixPalette(steps, blue, red);\r\n\r\n\tconst finalPalette = palette1.concat(palette2).concat(palette3);\r\n\r\n\t// Convert a string to an integer evenly\r\n\tfunction hashToInt(hash, maximum) {\r\n\t\tvar finalInt = 0\r\n\t\tvar result = []\r\n\r\n\t\t// Splitting evenly the string\r\n\t\tfor (var i = 0; i < hash.length; i++) {\r\n\t\t\t// chars in md5 goes up to f, hex:16\r\n\t\t\tresult.push(parseInt(hash.charAt(i), 16) % 16)\r\n\t\t}\r\n\t\t// Adds up all results\r\n\t\tfor (var j in result) {\r\n\t\t\tfinalInt += result[j]\r\n\t\t}\r\n\t\t// chars in md5 goes up to f, hex:16\r\n\t\t// make sure we're always using int in our operation\r\n\t\treturn parseInt(parseInt(finalInt) % maximum)\r\n\t}\r\n\r\n\treturn finalPalette[hashToInt(hash, steps * 3)]\r\n}\r\n\r\nString.prototype.toRgb = function() {\r\n\tconsole.warn('String.prototype.toRgb is deprecated! It will be removed in Nextcloud 22.')\r\n\r\n\treturn toRgb(this)\r\n}\r\n\r\n$.fn.imageplaceholder = function(seed, text, size) {\r\n\ttext = text || seed\r\n\r\n\t// Compute the hash\r\n\tvar rgb = toRgb(seed)\r\n\tthis.css('background-color', 'rgb(' + rgb.r + ', ' + rgb.g + ', ' + rgb.b + ')')\r\n\r\n\t// Placeholders are square\r\n\tvar height = this.height() || size || 32\r\n\tthis.height(height)\r\n\tthis.width(height)\r\n\r\n\t// CSS rules\r\n\tthis.css('color', '#fff')\r\n\tthis.css('font-weight', 'normal')\r\n\tthis.css('text-align', 'center')\r\n\r\n\t// calculate the height\r\n\tthis.css('line-height', height + 'px')\r\n\tthis.css('font-size', (height * 0.55) + 'px')\r\n\r\n\tif (seed !== null && seed.length) {\r\n\t\tvar placeholderText = text.replace(/\\s+/g, ' ').trim().split(' ', 2).map((word) => word[0].toUpperCase()).join('')\r\n\t\tthis.html(placeholderText);\r\n\t}\r\n}\r\n\r\n$.fn.clearimageplaceholder = function() {\r\n\tthis.css('background-color', '')\r\n\tthis.css('color', '')\r\n\tthis.css('font-weight', '')\r\n\tthis.css('text-align', '')\r\n\tthis.css('line-height', '')\r\n\tthis.css('font-size', '')\r\n\tthis.html('')\r\n\tthis.removeClass('icon-loading')\r\n\tthis.removeClass('icon-loading-small')\r\n}\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport $ from 'jquery'\r\n\r\nimport { getToken } from '../OC/requesttoken'\r\n\r\n$(document).on('ajaxSend', function(elm, xhr, settings) {\r\n\tif (settings.crossDomain === false) {\r\n\t\txhr.setRequestHeader('requesttoken', getToken())\r\n\t\txhr.setRequestHeader('OCS-APIREQUEST', 'true')\r\n\t}\r\n})\r\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport $ from 'jquery'\r\n\r\n/**\r\n * select a range in an input field\r\n *\r\n * @see {@link http://stackoverflow.com/questions/499126/jquery-set-cursor-position-in-text-area}\r\n * @param {number} start start selection from\r\n * @param {number} end number of char from start\r\n * @return {void}\r\n */\r\n$.fn.selectRange = function(start, end) {\r\n\treturn this.each(function() {\r\n\t\tif (this.setSelectionRange) {\r\n\t\t\tthis.focus()\r\n\t\t\tthis.setSelectionRange(start, end)\r\n\t\t} else if (this.createTextRange) {\r\n\t\t\tconst range = this.createTextRange()\r\n\t\t\trange.collapse(true)\r\n\t\t\trange.moveEnd('character', end)\r\n\t\t\trange.moveStart('character', start)\r\n\t\t\trange.select()\r\n\t\t}\r\n\t})\r\n}\r\n","/**\r\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport $ from 'jquery'\r\n\r\n/**\r\n * @name Show Password\r\n * @description\r\n * @version 1.3.0\r\n * @requires Jquery 1.5\r\n *\r\n * @author Jan Jarfalk <jan.jarfalk@unwrongest.com>\r\n * author-website http://www.unwrongest.com\r\n *\r\n * special-thanks Michel Gratton\r\n *\r\n * @license MIT\r\n */\r\n$.fn.extend({\r\n\tshowPassword(c) {\r\n\r\n\t\t// Setup callback object\r\n\t\tconst callback = { fn: null, args: {} }\r\n\t\tcallback.fn = c\r\n\r\n\t\t// Clones passwords and turn the clones into text inputs\r\n\t\tconst cloneElement = function(element) {\r\n\r\n\t\t\tconst $element = $(element)\r\n\r\n\t\t\tconst $clone = $('<input />')\r\n\r\n\t\t\t// Name added for JQuery Validation compatibility\r\n\t\t\t// Element name is required to avoid script warning.\r\n\t\t\t$clone.attr({\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tclass: $element.attr('class'),\r\n\t\t\t\tstyle: $element.attr('style'),\r\n\t\t\t\tsize: $element.attr('size'),\r\n\t\t\t\tname: $element.attr('name') + '-clone',\r\n\t\t\t\ttabindex: $element.attr('tabindex'),\r\n\t\t\t\tautocomplete: 'off',\r\n\t\t\t})\r\n\r\n\t\t\tif ($element.attr('placeholder') !== undefined) {\r\n\t\t\t\t$clone.attr('placeholder', $element.attr('placeholder'))\r\n\t\t\t}\r\n\r\n\t\t\treturn $clone\r\n\r\n\t\t}\r\n\r\n\t\t// Transfers values between two elements\r\n\t\tconst update = function(a, b) {\r\n\t\t\tb.val(a.val())\r\n\t\t}\r\n\r\n\t\t// Shows a or b depending on checkbox\r\n\t\tconst setState = function(checkbox, a, b) {\r\n\r\n\t\t\tif (checkbox.is(':checked')) {\r\n\t\t\t\tupdate(a, b)\r\n\t\t\t\tb.show()\r\n\t\t\t\ta.hide()\r\n\t\t\t} else {\r\n\t\t\t\tupdate(b, a)\r\n\t\t\t\tb.hide()\r\n\t\t\t\ta.show()\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this.each(function() {\r\n\r\n\t\t\tconst $input = $(this)\r\n\t\t\tconst $checkbox = $($input.data('typetoggle'))\r\n\r\n\t\t\t// Create clone\r\n\t\t\tconst $clone = cloneElement($input)\r\n\t\t\t$clone.insertAfter($input)\r\n\r\n\t\t\t// Set callback arguments\r\n\t\t\tif (callback.fn) {\r\n\t\t\t\tcallback.args.input = $input\r\n\t\t\t\tcallback.args.checkbox = $checkbox\r\n\t\t\t\tcallback.args.clone = $clone\r\n\t\t\t}\r\n\r\n\t\t\t$checkbox.bind('click', function() {\r\n\t\t\t\tsetState($checkbox, $input, $clone)\r\n\t\t\t})\r\n\r\n\t\t\t$input.bind('keyup', function() {\r\n\t\t\t\tupdate($input, $clone)\r\n\t\t\t})\r\n\r\n\t\t\t$clone.bind('keyup', function() {\r\n\t\t\t\tupdate($clone, $input)\r\n\r\n\t\t\t\t// Added for JQuery Validation compatibility\r\n\t\t\t\t// This will trigger validation if it's ON for keyup event\r\n\t\t\t\t$input.trigger('keyup')\r\n\r\n\t\t\t})\r\n\r\n\t\t\t// Added for JQuery Validation compatibility\r\n\t\t\t// This will trigger validation if it's ON for blur event\r\n\t\t\t$clone.bind('blur', function() {\r\n\t\t\t\t$input.trigger('focusout')\r\n\t\t\t})\r\n\r\n\t\t\tsetState($checkbox, $input, $clone)\r\n\r\n\t\t\t// set type of password field clone (type=text) to password right on submit\r\n\t\t\t// to prevent browser save the value of this field\r\n\t\t\t$clone.closest('form').submit(function(e) {\r\n\t\t\t\t// .prop has to be used, because .attr throws\r\n\t\t\t\t// an error while changing a type of an input\r\n\t\t\t\t// element\r\n\t\t\t\t$clone.prop('type', 'password')\r\n\t\t\t})\r\n\r\n\t\t\tif (callback.fn) {\r\n\t\t\t\tcallback.fn(callback.args)\r\n\t\t\t}\r\n\r\n\t\t})\r\n\t},\r\n})\r\n","/**\r\n * @copyright Copyright (c) 2016 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport $ from 'jquery'\r\n\r\n// Set autocomplete width the same as the related input\r\n// See http://stackoverflow.com/a/11845718\r\n$.ui.autocomplete.prototype._resizeMenu = function() {\r\n\tconst ul = this.menu.element\r\n\tul.outerWidth(this.element.outerWidth())\r\n}\r\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./jquery-ui-fixes.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./jquery-ui-fixes.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./jquery.ocdialog.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./jquery.ocdialog.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","/**\r\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Roeland Jago Douma <roeland@famdouma.nl>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport $ from 'jquery'\r\n\r\nimport './avatar'\r\nimport './contactsmenu'\r\nimport './exists'\r\nimport './filterattr'\r\nimport './ocdialog'\r\nimport './octemplate'\r\nimport './placeholder'\r\nimport './requesttoken'\r\nimport './selectrange'\r\nimport './showpassword'\r\nimport './ui-fixes'\r\n\r\nimport './css/jquery-ui-fixes.scss'\r\nimport './css/jquery.ocdialog.scss'\r\n\r\n/**\r\n * Disable automatic evaluation of responses for $.ajax() functions (and its\r\n * higher-level alternatives like $.get() and $.post()).\r\n *\r\n * If a response to a $.ajax() request returns a content type of \"application/javascript\"\r\n * JQuery would previously execute the response body. This is a pretty unexpected\r\n * behaviour and can result in a bypass of our Content-Security-Policy as well as\r\n * multiple unexpected XSS vectors.\r\n */\r\n$.ajaxSetup({\r\n\tcontents: {\r\n\t\tscript: false,\r\n\t},\r\n})\r\n\r\n/**\r\n * Disable execution of eval in jQuery. We do require an allowed eval CSP\r\n * configuration at the moment for handlebars et al. But for jQuery there is\r\n * not much of a reason to execute JavaScript directly via eval.\r\n *\r\n * This thus mitigates some unexpected XSS vectors.\r\n */\r\n$.globalEval = function() {\r\n}\r\n","/**\r\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\r\n *\r\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\r\n * @author John Molakvoæ <skjnldsv@protonmail.com>\r\n * @author Julius Härtl <jus@bitgrid.net>\r\n * @author Roeland Jago Douma <roeland@famdouma.nl>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport $ from 'jquery'\r\nimport 'core-js/stable'\r\nimport 'regenerator-runtime/runtime'\r\nimport './Polyfill/index.js'\r\n\r\n// If you remove the line below, tests won't pass\r\n// eslint-disable-next-line no-unused-vars\r\nimport OC from './OC/index.js'\r\n\r\nimport './globals.js'\r\nimport './jquery/index.js'\r\nimport { initCore } from './init.js'\r\nimport { registerAppsSlideToggle } from './OC/apps.js'\r\n\r\nwindow.addEventListener('DOMContentLoaded', function() {\r\n\tinitCore()\r\n\tregisterAppsSlideToggle()\r\n\r\n\t// fallback to hashchange when no history support\r\n\tif (window.history.pushState) {\r\n\t\twindow.onpopstate = _.bind(OC.Util.History._onPopState, OC.Util.History)\r\n\t} else {\r\n\t\t$(window).on('hashchange', _.bind(OC.Util.History._onPopState, OC.Util.History))\r\n\t}\r\n})\r\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"images/ui-icons_1d2d44_256x240.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_1___ = new URL(\"images/ui-icons_ffffff_256x240.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_2___ = new URL(\"images/ui-icons_ffd27a_256x240.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_3___ = new URL(\"images/ui-bg_diagonals-thick_20_666666_40x40.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_4___ = new URL(\"images/ui-bg_flat_10_000000_40x100.png\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___);\nvar ___CSS_LOADER_URL_REPLACEMENT_3___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_3___);\nvar ___CSS_LOADER_URL_REPLACEMENT_4___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_4___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ui-widget-content{border:1px solid var(--color-border);background:var(--color-main-background) none;color:var(--color-main-text)}.ui-widget-content a{color:var(--color-main-text)}.ui-widget-header{border:none;color:var(--color-main-text);background-image:none}.ui-widget-header a{color:var(--color-main-text)}.ui-state-default,.ui-widget-content .ui-state-default,.ui-widget-header .ui-state-default{border:1px solid var(--color-border);background:var(--color-main-background) none;font-weight:bold;color:#555}.ui-state-default a,.ui-state-default a:link,.ui-state-default a:visited{color:#555}.ui-state-hover,.ui-widget-content .ui-state-hover,.ui-widget-header .ui-state-hover,.ui-state-focus,.ui-widget-content .ui-state-focus,.ui-widget-header .ui-state-focus{border:1px solid #ddd;background:var(--color-main-background) none;font-weight:bold;color:var(--color-main-text)}.ui-state-hover a,.ui-state-hover a:hover,.ui-state-hover a:link,.ui-state-hover a:visited{color:var(--color-main-text)}.ui-state-active,.ui-widget-content .ui-state-active,.ui-widget-header .ui-state-active{border:1px solid var(--color-primary);background:var(--color-main-background) none;font-weight:bold;color:var(--color-main-text)}.ui-state-active a,.ui-state-active a:link,.ui-state-active a:visited{color:var(--color-main-text)}.ui-state-highlight,.ui-widget-content .ui-state-highlight,.ui-widget-header .ui-state-highlight{border:1px solid var(--color-main-background);background:var(--color-main-background) none;color:var(--color-text-light);font-weight:600}.ui-state-highlight a,.ui-widget-content .ui-state-highlight a,.ui-widget-header .ui-state-highlight a{color:var(--color-text-lighter)}.ui-state-error,.ui-widget-content .ui-state-error,.ui-widget-header .ui-state-error{border:var(--color-error);background:var(--color-error) none;color:#fff}.ui-state-error a,.ui-widget-content .ui-state-error a,.ui-widget-header .ui-state-error a{color:#fff}.ui-state-error-text,.ui-widget-content .ui-state-error-text,.ui-widget-header .ui-state-error-text{color:#fff}.ui-state-default .ui-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \")}.ui-state-hover .ui-icon,.ui-state-focus .ui-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \")}.ui-state-active .ui-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \")}.ui-state-highlight .ui-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \")}.ui-state-error .ui-icon,.ui-state-error-text .ui-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_2___ + \")}.ui-icon.ui-icon-none{display:none}.ui-widget-overlay{background:#666 url(\" + ___CSS_LOADER_URL_REPLACEMENT_3___ + \") 50% 50% repeat;opacity:.5}.ui-widget-shadow{margin:-5px 0 0 -5px;padding:5px;background:#000 url(\" + ___CSS_LOADER_URL_REPLACEMENT_4___ + \") 50% 50% repeat-x;opacity:.2;border-radius:5px}.ui-tabs{border:none}.ui-tabs .ui-tabs-nav.ui-corner-all{border-bottom-left-radius:0;border-bottom-right-radius:0}.ui-tabs .ui-tabs-nav{background:none;margin-bottom:15px}.ui-tabs .ui-tabs-nav .ui-state-default{border:none;border-bottom:1px solid rgba(0,0,0,0);font-weight:normal;margin:0 !important;padding:0 !important}.ui-tabs .ui-tabs-nav .ui-state-hover,.ui-tabs .ui-tabs-nav .ui-state-active{border:none;border-bottom:1px solid var(--color-main-text);color:var(--color-main-text)}.ui-tabs .ui-tabs-nav .ui-state-hover a,.ui-tabs .ui-tabs-nav .ui-state-hover a:link,.ui-tabs .ui-tabs-nav .ui-state-hover a:hover,.ui-tabs .ui-tabs-nav .ui-state-hover a:visited,.ui-tabs .ui-tabs-nav .ui-state-active a,.ui-tabs .ui-tabs-nav .ui-state-active a:link,.ui-tabs .ui-tabs-nav .ui-state-active a:hover,.ui-tabs .ui-tabs-nav .ui-state-active a:visited{color:var(--color-main-text)}.ui-tabs .ui-tabs-nav .ui-state-active{font-weight:bold}.ui-autocomplete.ui-menu{padding:0}.ui-autocomplete.ui-menu.item-count-1,.ui-autocomplete.ui-menu.item-count-2{overflow-y:hidden}.ui-autocomplete.ui-menu .ui-menu-item a{color:var(--color-text-lighter);display:block;padding:4px 4px 4px 14px}.ui-autocomplete.ui-menu .ui-menu-item a.ui-state-focus,.ui-autocomplete.ui-menu .ui-menu-item a.ui-state-active{box-shadow:inset 4px 0 var(--color-primary-element);color:var(--color-main-text)}.ui-autocomplete.ui-widget-content{background:var(--color-main-background);border-top:none}.ui-autocomplete.ui-corner-all{border-radius:0;border-bottom-left-radius:var(--border-radius);border-bottom-right-radius:var(--border-radius)}.ui-autocomplete .ui-state-hover,.ui-autocomplete .ui-widget-content .ui-state-hover,.ui-autocomplete .ui-widget-header .ui-state-hover,.ui-autocomplete .ui-state-focus,.ui-autocomplete .ui-widget-content .ui-state-focus,.ui-autocomplete .ui-widget-header .ui-state-focus{border:1px solid rgba(0,0,0,0);background:inherit;color:var(--color-primary-element)}.ui-autocomplete .ui-menu-item a{border-radius:0 !important}.ui-button.primary{background-color:var(--color-primary);color:var(--color-primary-text);border:1px solid var(--color-primary-text)}.ui-button:hover{font-weight:bold !important}.ui-draggable-handle,.ui-selectable{touch-action:pan-y}\", \"\",{\"version\":3,\"sources\":[\"webpack://./core/src/jquery/css/jquery-ui-fixes.scss\"],\"names\":[],\"mappings\":\"AAEA,mBACC,oCAAA,CACA,4CAAA,CACA,4BAAA,CAED,qBACC,4BAAA,CAED,kBACC,WAAA,CACA,4BAAA,CACA,qBAAA,CAED,oBACC,4BAAA,CAKD,2FAGC,oCAAA,CACA,4CAAA,CACA,gBAAA,CACA,UAAA,CAED,yEAGC,UAAA,CAED,0KAMC,qBAAA,CACA,4CAAA,CACA,gBAAA,CACA,4BAAA,CAED,2FAIC,4BAAA,CAED,wFAGC,qCAAA,CACA,4CAAA,CACA,gBAAA,CACA,4BAAA,CAED,sEAGC,4BAAA,CAKD,iGAGC,6CAAA,CACA,4CAAA,CACA,6BAAA,CACA,eAAA,CAED,uGAGC,+BAAA,CAED,qFAGC,yBAAA,CACA,kCAAA,CACA,UAAA,CAED,2FAGC,UAAA,CAED,oGAGC,UAAA,CAKD,2BACC,wDAAA,CAED,kDAEC,wDAAA,CAED,0BACC,wDAAA,CAED,6BACC,wDAAA,CAED,uDAEC,wDAAA,CAED,sBACC,YAAA,CAMD,mBACC,sEAAA,CACA,UAAA,CAED,kBACC,oBAAA,CACA,WAAA,CACA,wEAAA,CACA,UAAA,CACA,iBAAA,CAID,SACC,WAAA,CAEA,oCACC,2BAAA,CACA,4BAAA,CAGD,sBACC,eAAA,CACA,kBAAA,CAEA,wCACC,WAAA,CACA,qCAAA,CACA,kBAAA,CACA,mBAAA,CACA,oBAAA,CAGD,6EAEC,WAAA,CACA,8CAAA,CACA,4BAAA,CACA,0WACC,4BAAA,CAGF,uCACC,gBAAA,CAOF,yBACC,SAAA,CAIA,4EAEC,iBAAA,CAGD,yCACC,+BAAA,CACA,aAAA,CACA,wBAAA,CAEA,iHACC,mDAAA,CACA,4BAAA,CAKH,mCACC,uCAAA,CACA,eAAA,CAGD,+BACC,eAAA,CACA,8CAAA,CACA,+CAAA,CAGD,gRAKC,8BAAA,CACA,kBAAA,CACA,kCAAA,CAIA,iCACC,0BAAA,CAKH,mBACC,qCAAA,CACA,+BAAA,CACA,0CAAA,CAID,iBACI,2BAAA,CAKJ,oCAEC,kBAAA\",\"sourcesContent\":[\"/* Component containers\\r\\n----------------------------------*/\\r\\n.ui-widget-content {\\r\\n\\tborder: 1px solid var(--color-border);\\r\\n\\tbackground: var(--color-main-background) none;\\r\\n\\tcolor: var(--color-main-text);\\r\\n}\\r\\n.ui-widget-content a {\\r\\n\\tcolor: var(--color-main-text);\\r\\n}\\r\\n.ui-widget-header {\\r\\n\\tborder: none;\\r\\n\\tcolor: var(--color-main-text);\\r\\n\\tbackground-image: none;\\r\\n}\\r\\n.ui-widget-header a {\\r\\n\\tcolor: var(--color-main-text);\\r\\n}\\r\\n\\r\\n/* Interaction states\\r\\n----------------------------------*/\\r\\n.ui-state-default,\\r\\n.ui-widget-content .ui-state-default,\\r\\n.ui-widget-header .ui-state-default {\\r\\n\\tborder: 1px solid var(--color-border);\\r\\n\\tbackground: var(--color-main-background) none;\\r\\n\\tfont-weight: bold;\\r\\n\\tcolor: #555;\\r\\n}\\r\\n.ui-state-default a,\\r\\n.ui-state-default a:link,\\r\\n.ui-state-default a:visited {\\r\\n\\tcolor: #555;\\r\\n}\\r\\n.ui-state-hover,\\r\\n.ui-widget-content .ui-state-hover,\\r\\n.ui-widget-header .ui-state-hover,\\r\\n.ui-state-focus,\\r\\n.ui-widget-content .ui-state-focus,\\r\\n.ui-widget-header .ui-state-focus {\\r\\n\\tborder: 1px solid #ddd;\\r\\n\\tbackground: var(--color-main-background) none;\\r\\n\\tfont-weight: bold;\\r\\n\\tcolor: var(--color-main-text);\\r\\n}\\r\\n.ui-state-hover a,\\r\\n.ui-state-hover a:hover,\\r\\n.ui-state-hover a:link,\\r\\n.ui-state-hover a:visited {\\r\\n\\tcolor: var(--color-main-text);\\r\\n}\\r\\n.ui-state-active,\\r\\n.ui-widget-content .ui-state-active,\\r\\n.ui-widget-header .ui-state-active {\\r\\n\\tborder: 1px solid var(--color-primary);\\r\\n\\tbackground: var(--color-main-background) none;\\r\\n\\tfont-weight: bold;\\r\\n\\tcolor: var(--color-main-text);\\r\\n}\\r\\n.ui-state-active a,\\r\\n.ui-state-active a:link,\\r\\n.ui-state-active a:visited {\\r\\n\\tcolor: var(--color-main-text);\\r\\n}\\r\\n\\r\\n/* Interaction Cues\\r\\n----------------------------------*/\\r\\n.ui-state-highlight,\\r\\n.ui-widget-content .ui-state-highlight,\\r\\n.ui-widget-header .ui-state-highlight {\\r\\n\\tborder: 1px solid var(--color-main-background);\\r\\n\\tbackground: var(--color-main-background) none;\\r\\n\\tcolor: var(--color-text-light);\\r\\n\\tfont-weight: 600;\\r\\n}\\r\\n.ui-state-highlight a,\\r\\n.ui-widget-content .ui-state-highlight a,\\r\\n.ui-widget-header .ui-state-highlight a {\\r\\n\\tcolor: var(--color-text-lighter);\\r\\n}\\r\\n.ui-state-error,\\r\\n.ui-widget-content .ui-state-error,\\r\\n.ui-widget-header .ui-state-error {\\r\\n\\tborder: var(--color-error);\\r\\n\\tbackground: var(--color-error) none;\\r\\n\\tcolor: #ffffff;\\r\\n}\\r\\n.ui-state-error a,\\r\\n.ui-widget-content .ui-state-error a,\\r\\n.ui-widget-header .ui-state-error a {\\r\\n\\tcolor: #ffffff;\\r\\n}\\r\\n.ui-state-error-text,\\r\\n.ui-widget-content .ui-state-error-text,\\r\\n.ui-widget-header .ui-state-error-text {\\r\\n\\tcolor: #ffffff;\\r\\n}\\r\\n\\r\\n/* Icons\\r\\n----------------------------------*/\\r\\n.ui-state-default .ui-icon {\\r\\n\\tbackground-image: url('images/ui-icons_1d2d44_256x240.png');\\r\\n}\\r\\n.ui-state-hover .ui-icon,\\r\\n.ui-state-focus .ui-icon {\\r\\n\\tbackground-image: url('images/ui-icons_1d2d44_256x240.png');\\r\\n}\\r\\n.ui-state-active .ui-icon {\\r\\n\\tbackground-image: url('images/ui-icons_1d2d44_256x240.png');\\r\\n}\\r\\n.ui-state-highlight .ui-icon {\\r\\n\\tbackground-image: url('images/ui-icons_ffffff_256x240.png');\\r\\n}\\r\\n.ui-state-error .ui-icon,\\r\\n.ui-state-error-text .ui-icon {\\r\\n\\tbackground-image: url('images/ui-icons_ffd27a_256x240.png');\\r\\n}\\r\\n.ui-icon.ui-icon-none {\\r\\n\\tdisplay: none;\\r\\n}\\r\\n\\r\\n/* Misc visuals\\r\\n----------------------------------*/\\r\\n/* Overlays */\\r\\n.ui-widget-overlay {\\r\\n\\tbackground: #666666 url('images/ui-bg_diagonals-thick_20_666666_40x40.png') 50% 50% repeat;\\r\\n\\topacity: .5;\\r\\n}\\r\\n.ui-widget-shadow {\\r\\n\\tmargin: -5px 0 0 -5px;\\r\\n\\tpadding: 5px;\\r\\n\\tbackground: #000000 url('images/ui-bg_flat_10_000000_40x100.png') 50% 50% repeat-x;\\r\\n\\topacity: .2;\\r\\n\\tborder-radius: 5px;\\r\\n}\\r\\n\\r\\n/* Tabs customizations */\\r\\n.ui-tabs {\\r\\n\\tborder: none;\\r\\n\\r\\n\\t.ui-tabs-nav.ui-corner-all {\\r\\n\\t\\tborder-bottom-left-radius: 0;\\r\\n\\t\\tborder-bottom-right-radius: 0;\\r\\n\\t}\\r\\n\\r\\n\\t.ui-tabs-nav {\\r\\n\\t\\tbackground: none;\\r\\n\\t\\tmargin-bottom: 15px;\\r\\n\\r\\n\\t\\t.ui-state-default {\\r\\n\\t\\t\\tborder: none;\\r\\n\\t\\t\\tborder-bottom: 1px solid transparent;\\r\\n\\t\\t\\tfont-weight: normal;\\r\\n\\t\\t\\tmargin: 0 !important;\\r\\n\\t\\t\\tpadding: 0 !important;\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\t.ui-state-hover,\\r\\n\\t\\t.ui-state-active {\\r\\n\\t\\t\\tborder: none;\\r\\n\\t\\t\\tborder-bottom: 1px solid var(--color-main-text);\\r\\n\\t\\t\\tcolor: var(--color-main-text);\\r\\n\\t\\t\\ta, a:link, a:hover, a:visited {\\r\\n\\t\\t\\t\\tcolor: var(--color-main-text);\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t\\t.ui-state-active {\\r\\n\\t\\t\\tfont-weight: bold;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n}\\r\\n\\r\\n/* Select menus */\\r\\n.ui-autocomplete {\\r\\n\\t&.ui-menu {\\r\\n\\t\\tpadding: 0;\\r\\n\\r\\n\\t\\t/* scrolling starts from three items,\\r\\n\\t\\t * so hide overflow and scrollbars for a clean layout */\\r\\n\\t\\t&.item-count-1,\\r\\n\\t\\t&.item-count-2 {\\r\\n\\t\\t\\toverflow-y: hidden;\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\t.ui-menu-item a {\\r\\n\\t\\t\\tcolor: var(--color-text-lighter);\\r\\n\\t\\t\\tdisplay: block;\\r\\n\\t\\t\\tpadding: 4px 4px 4px 14px;\\r\\n\\r\\n\\t\\t\\t&.ui-state-focus, &.ui-state-active {\\r\\n\\t\\t\\t\\tbox-shadow: inset 4px 0 var(--color-primary-element);\\r\\n\\t\\t\\t\\tcolor: var(--color-main-text);\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\t&.ui-widget-content {\\r\\n\\t\\tbackground: var(--color-main-background);\\r\\n\\t\\tborder-top: none;\\r\\n\\t}\\r\\n\\r\\n\\t&.ui-corner-all {\\r\\n\\t\\tborder-radius: 0;\\r\\n\\t\\tborder-bottom-left-radius: var(--border-radius);\\r\\n\\t\\tborder-bottom-right-radius: var(--border-radius);\\r\\n\\t}\\r\\n\\r\\n\\t.ui-state-hover, .ui-widget-content .ui-state-hover,\\r\\n\\t.ui-widget-header .ui-state-hover,\\r\\n\\t.ui-state-focus,\\r\\n\\t.ui-widget-content .ui-state-focus,\\r\\n\\t.ui-widget-header .ui-state-focus {\\r\\n\\t\\tborder: 1px solid transparent;\\r\\n\\t\\tbackground: inherit;\\r\\n\\t\\tcolor: var(--color-primary-element);\\r\\n\\t}\\r\\n\\r\\n\\t.ui-menu-item {\\r\\n\\t\\ta {\\r\\n\\t\\t\\tborder-radius: 0 !important;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n}\\r\\n\\r\\n.ui-button.primary {\\r\\n\\tbackground-color: var(--color-primary);\\r\\n\\tcolor: var(--color-primary-text);\\r\\n\\tborder: 1px solid var(--color-primary-text);\\r\\n}\\r\\n\\r\\n// fix ui-buttons on hover\\r\\n.ui-button:hover {\\r\\n    font-weight:bold !important;\\r\\n}\\r\\n\\r\\n\\r\\n/* DRAGGABLE */\\r\\n.ui-draggable-handle,\\r\\n.ui-selectable {\\r\\n\\ttouch-action: pan-y;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".oc-dialog{background:var(--color-main-background);color:var(--color-text-light);border-radius:var(--border-radius-large);box-shadow:0 0 30px var(--color-box-shadow);padding:24px;z-index:10000;font-size:100%;box-sizing:border-box;min-width:200px;top:50%;left:50%;transform:translate(-50%, -50%);max-height:calc(100% - 20px);max-width:calc(100% - 20px);overflow:auto}.oc-dialog-title{background:var(--color-main-background)}.oc-dialog-buttonrow{position:relative;display:flex;background:rgba(0,0,0,0);right:0;bottom:0;padding:0;padding-top:10px;box-sizing:border-box;width:100%;background-image:linear-gradient(rgba(255, 255, 255, 0), var(--color-main-background))}.oc-dialog-buttonrow.twobuttons{justify-content:space-between}.oc-dialog-buttonrow.onebutton,.oc-dialog-buttonrow.twobuttons.aside{justify-content:flex-end}.oc-dialog-buttonrow button{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;height:44px;min-width:44px}.oc-dialog-close{position:absolute;width:44px !important;height:44px !important;top:4px;right:4px;padding:25px;background:var(--icon-close-dark) no-repeat center;opacity:.5;border-radius:var(--border-radius-pill)}.oc-dialog-close:hover,.oc-dialog-close:focus,.oc-dialog-close:active{opacity:1}.oc-dialog-dim{background-color:#000;opacity:.2;z-index:9999;position:fixed;top:0;left:0;width:100%;height:100%}body.theme--dark .oc-dialog-dim{opacity:.8}.oc-dialog-content{width:100%;max-width:550px}.oc-dialog.password-confirmation .oc-dialog-content{width:auto}.oc-dialog.password-confirmation .oc-dialog-content input[type=password]{width:100%}.oc-dialog.password-confirmation .oc-dialog-content label{display:none}\", \"\",{\"version\":3,\"sources\":[\"webpack://./core/src/jquery/css/jquery.ocdialog.scss\"],\"names\":[],\"mappings\":\"AAAA,WACC,uCAAA,CACA,6BAAA,CACA,wCAAA,CACA,2CAAA,CACA,YAAA,CACA,aAAA,CACA,cAAA,CACA,qBAAA,CACA,eAAA,CACA,OAAA,CACA,QAAA,CACA,+BAAA,CACA,4BAAA,CACA,2BAAA,CACA,aAAA,CAED,iBACC,uCAAA,CAED,qBACC,iBAAA,CACA,YAAA,CACA,wBAAA,CACA,OAAA,CACA,QAAA,CACA,SAAA,CACA,gBAAA,CACA,qBAAA,CACA,UAAA,CACA,sFAAA,CAEA,gCACO,6BAAA,CAGP,qEAEC,wBAAA,CAGD,4BACI,kBAAA,CACA,eAAA,CACH,sBAAA,CACA,WAAA,CACA,cAAA,CAIF,iBACC,iBAAA,CACA,qBAAA,CACA,sBAAA,CACA,OAAA,CACA,SAAA,CACA,YAAA,CACA,kDAAA,CACA,UAAA,CACA,uCAAA,CAEA,sEAGC,SAAA,CAIF,eACC,qBAAA,CACA,UAAA,CACA,YAAA,CACA,cAAA,CACA,KAAA,CACA,MAAA,CACA,UAAA,CACA,WAAA,CAGD,gCACC,UAAA,CAGD,mBACC,UAAA,CACA,eAAA,CAIA,oDACC,UAAA,CAEA,yEACC,UAAA,CAED,0DACC,YAAA\",\"sourcesContent\":[\".oc-dialog {\\r\\n\\tbackground: var(--color-main-background);\\r\\n\\tcolor: var(--color-text-light);\\r\\n\\tborder-radius: var(--border-radius-large);\\r\\n\\tbox-shadow: 0 0 30px var(--color-box-shadow);\\r\\n\\tpadding: 24px;\\r\\n\\tz-index: 10000;\\r\\n\\tfont-size: 100%;\\r\\n\\tbox-sizing: border-box;\\r\\n\\tmin-width: 200px;\\r\\n\\ttop: 50%;\\r\\n\\tleft: 50%;\\r\\n\\ttransform: translate(-50%, -50%);\\r\\n\\tmax-height: calc(100% - 20px);\\r\\n\\tmax-width: calc(100% - 20px);\\r\\n\\toverflow: auto;\\r\\n}\\r\\n.oc-dialog-title {\\r\\n\\tbackground: var(--color-main-background);\\r\\n}\\r\\n.oc-dialog-buttonrow {\\r\\n\\tposition: relative;\\r\\n\\tdisplay: flex;\\r\\n\\tbackground: transparent;\\r\\n\\tright: 0;\\r\\n\\tbottom: 0;\\r\\n\\tpadding: 0;\\r\\n\\tpadding-top: 10px;\\r\\n\\tbox-sizing: border-box;\\r\\n\\twidth: 100%;\\r\\n\\tbackground-image: linear-gradient(rgba(255, 255, 255, 0.0), var(--color-main-background));\\r\\n\\r\\n\\t&.twobuttons {\\r\\n        justify-content: space-between;\\r\\n    }\\r\\n\\r\\n\\t&.onebutton,\\r\\n\\t&.twobuttons.aside {\\r\\n\\t\\tjustify-content: flex-end;\\r\\n\\t}\\r\\n\\r\\n\\tbutton {\\r\\n\\t    white-space: nowrap;\\r\\n\\t    overflow: hidden;\\r\\n\\t\\ttext-overflow: ellipsis;\\r\\n\\t\\theight: 44px;\\r\\n\\t\\tmin-width: 44px;\\r\\n\\t}\\r\\n}\\r\\n\\r\\n.oc-dialog-close {\\r\\n\\tposition: absolute;\\r\\n\\twidth: 44px !important;\\r\\n\\theight: 44px !important;\\r\\n\\ttop: 4px;\\r\\n\\tright: 4px;\\r\\n\\tpadding: 25px;\\r\\n\\tbackground: var(--icon-close-dark) no-repeat center;\\r\\n\\topacity: .5;\\r\\n\\tborder-radius: var(--border-radius-pill);\\r\\n\\r\\n\\t&:hover,\\r\\n\\t&:focus,\\r\\n\\t&:active {\\r\\n\\t\\topacity: 1;\\r\\n\\t}\\r\\n}\\r\\n\\r\\n.oc-dialog-dim {\\r\\n\\tbackground-color: #000;\\r\\n\\topacity: .2;\\r\\n\\tz-index: 9999;\\r\\n\\tposition: fixed;\\r\\n\\ttop: 0;\\r\\n\\tleft: 0;\\r\\n\\twidth: 100%;\\r\\n\\theight: 100%;\\r\\n}\\r\\n\\r\\nbody.theme--dark .oc-dialog-dim {\\r\\n\\topacity: .8;\\r\\n}\\r\\n\\r\\n.oc-dialog-content {\\r\\n\\twidth: 100%;\\r\\n\\tmax-width: 550px;\\r\\n}\\r\\n\\r\\n.oc-dialog.password-confirmation {\\r\\n\\t.oc-dialog-content {\\r\\n\\t\\twidth: auto;\\r\\n\\r\\n\\t\\tinput[type=password] {\\r\\n\\t\\t\\twidth: 100%;\\r\\n\\t\\t}\\r\\n\\t\\tlabel {\\r\\n\\t\\t\\tdisplay: none;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".app-menu[data-v-44a795f6]{width:100%;display:flex;flex-shrink:1;flex-wrap:wrap}.app-menu-main[data-v-44a795f6]{display:flex;flex-wrap:nowrap}.app-menu-main .app-menu-entry[data-v-44a795f6]{width:50px;height:50px;position:relative;display:flex;opacity:.7;filter:var(--background-image-invert-if-bright)}.app-menu-main .app-menu-entry.app-menu-entry__active[data-v-44a795f6]{opacity:1}.app-menu-main .app-menu-entry.app-menu-entry__active[data-v-44a795f6]::before{content:\\\" \\\";position:absolute;pointer-events:none;border-bottom-color:var(--color-main-background);transform:translateX(-50%);width:12px;height:5px;border-radius:3px;background-color:var(--color-primary-text);left:50%;bottom:6px;display:block;transition:all .1s ease-in-out;opacity:1}.app-menu-main .app-menu-entry.app-menu-entry__active .app-menu-entry--label[data-v-44a795f6]{font-weight:bold}.app-menu-main .app-menu-entry a[data-v-44a795f6]{width:calc(100% - 4px);height:calc(100% - 4px);margin:2px;color:var(--color-primary-text);position:relative}.app-menu-main .app-menu-entry img[data-v-44a795f6]{transition:margin .1s ease-in-out;width:20px;height:20px;padding:calc((100% - 20px)/2);box-sizing:content-box}.app-menu-main .app-menu-entry .app-menu-entry--label[data-v-44a795f6]{opacity:0;position:absolute;font-size:12px;color:var(--color-primary-text);text-align:center;bottom:-5px;left:50%;top:45%;display:block;min-width:100%;transform:translateX(-50%);transition:all .1s ease-in-out;width:100%;text-overflow:ellipsis;overflow:hidden;letter-spacing:-0.5px}.app-menu-main .app-menu-entry[data-v-44a795f6]:hover,.app-menu-main .app-menu-entry[data-v-44a795f6]:focus-within{opacity:1}.app-menu-main .app-menu-entry:hover .app-menu-entry--label[data-v-44a795f6],.app-menu-main .app-menu-entry:focus-within .app-menu-entry--label[data-v-44a795f6]{opacity:1;font-weight:bolder;bottom:0;width:100%;text-overflow:ellipsis;overflow:hidden}.app-menu-main[data-v-44a795f6]:hover,.app-menu-main[data-v-44a795f6]:focus-within,.app-menu-main .app-menu-entry[data-v-44a795f6]:hover,.app-menu-main .app-menu-entry[data-v-44a795f6]:focus{opacity:1}.app-menu-main:hover img[data-v-44a795f6],.app-menu-main:focus-within img[data-v-44a795f6],.app-menu-main .app-menu-entry:hover img[data-v-44a795f6],.app-menu-main .app-menu-entry:focus img[data-v-44a795f6]{margin-top:-8px}.app-menu-main:hover .app-menu-entry--label[data-v-44a795f6],.app-menu-main:focus-within .app-menu-entry--label[data-v-44a795f6],.app-menu-main .app-menu-entry:hover .app-menu-entry--label[data-v-44a795f6],.app-menu-main .app-menu-entry:focus .app-menu-entry--label[data-v-44a795f6]{opacity:1;bottom:0}.app-menu-main[data-v-44a795f6]:hover::before,.app-menu-main:hover .app-menu-entry[data-v-44a795f6]::before,.app-menu-main[data-v-44a795f6]:focus-within::before,.app-menu-main:focus-within .app-menu-entry[data-v-44a795f6]::before,.app-menu-main .app-menu-entry[data-v-44a795f6]:hover::before,.app-menu-main .app-menu-entry:hover .app-menu-entry[data-v-44a795f6]::before,.app-menu-main .app-menu-entry[data-v-44a795f6]:focus::before,.app-menu-main .app-menu-entry:focus .app-menu-entry[data-v-44a795f6]::before{opacity:0}[data-v-44a795f6] .app-menu-more .button-vue--vue-tertiary{color:var(--color-primary-text);opacity:.7;margin:3px;filter:var(--background-image-invert-if-bright)}[data-v-44a795f6] .app-menu-more .button-vue--vue-tertiary:hover{opacity:1;background-color:rgba(0,0,0,0) !important}[data-v-44a795f6] .app-menu-more .button-vue--vue-tertiary:focus-visible{opacity:1;outline:none !important}.app-menu-popover-entry .app-icon[data-v-44a795f6]{position:relative;height:44px}.app-menu-popover-entry .app-icon.has-unread[data-v-44a795f6]::after{background-color:var(--color-main-text)}.app-menu-popover-entry .app-icon img[data-v-44a795f6]{width:20px;height:20px;padding:15px}.has-unread[data-v-44a795f6]::after{content:\\\"\\\";width:8px;height:8px;background-color:var(--color-primary-text);border-radius:50%;position:absolute;display:block;top:10px;right:10px}.unread-counter[data-v-44a795f6]{display:none}\", \"\",{\"version\":3,\"sources\":[\"webpack://./core/src/components/AppMenu.vue\"],\"names\":[],\"mappings\":\"AAGA,2BACC,UAAA,CACA,YAAA,CACA,aAAA,CACA,cAAA,CAED,gCACC,YAAA,CACA,gBAAA,CAEA,gDACC,UAAA,CACA,WAAA,CACA,iBAAA,CACA,YAAA,CACA,UAAA,CACA,+CAAA,CAEA,uEACC,SAAA,CAEA,+EACC,WAAA,CACA,iBAAA,CACA,mBAAA,CACA,gDAAA,CACA,0BAAA,CACA,UAAA,CACA,UAAA,CACA,iBAAA,CACA,0CAAA,CACA,QAAA,CACA,UAAA,CACA,aAAA,CACA,8BAAA,CACA,SAAA,CAGD,8FACC,gBAAA,CAIF,kDACC,sBAAA,CACA,uBAAA,CACA,UAAA,CACA,+BAAA,CACA,iBAAA,CAGD,oDACC,iCAAA,CACA,UAvDgB,CAwDhB,WAxDgB,CAyDhB,6BAAA,CACA,sBAAA,CAGD,uEACC,SAAA,CACA,iBAAA,CACA,cAAA,CACA,+BAAA,CACA,iBAAA,CACA,WAAA,CACA,QAAA,CACA,OAAA,CACA,aAAA,CACA,cAAA,CACA,0BAAA,CACA,8BAAA,CACA,UAAA,CACA,sBAAA,CACA,eAAA,CACA,qBAAA,CAGD,mHAEC,SAAA,CACA,iKACC,SAAA,CACA,kBAAA,CACA,QAAA,CACA,UAAA,CACA,sBAAA,CACA,eAAA,CAOH,+LAIC,SAAA,CAEA,+MACC,eAAA,CAGD,2RACC,SAAA,CACA,QAAA,CAGD,8fACC,SAAA,CAKH,2DACC,+BAAA,CACA,UAAA,CACA,UAAA,CACA,+CAAA,CAEA,iEACC,SAAA,CACA,yCAAA,CAGD,yEACC,SAAA,CACA,uBAAA,CAKD,mDACC,iBAAA,CACA,WAAA,CAEA,qEACC,uCAAA,CAGD,uDACC,UAhJgB,CAiJhB,WAjJgB,CAkJhB,YAAA,CAKH,oCACC,UAAA,CACA,SAAA,CACA,UAAA,CACA,0CAAA,CACA,iBAAA,CACA,iBAAA,CACA,aAAA,CACA,QAAA,CACA,UAAA,CAGD,iCACC,YAAA\",\"sourcesContent\":[\"\\r\\n$header-icon-size: 20px;\\r\\n\\r\\n.app-menu {\\r\\n\\twidth: 100%;\\r\\n\\tdisplay: flex;\\r\\n\\tflex-shrink: 1;\\r\\n\\tflex-wrap: wrap;\\r\\n}\\r\\n.app-menu-main {\\r\\n\\tdisplay: flex;\\r\\n\\tflex-wrap: nowrap;\\r\\n\\r\\n\\t.app-menu-entry {\\r\\n\\t\\twidth: 50px;\\r\\n\\t\\theight: 50px;\\r\\n\\t\\tposition: relative;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\topacity: .7;\\r\\n\\t\\tfilter: var(--background-image-invert-if-bright);\\r\\n\\r\\n\\t\\t&.app-menu-entry__active {\\r\\n\\t\\t\\topacity: 1;\\r\\n\\r\\n\\t\\t\\t&::before {\\r\\n\\t\\t\\t\\tcontent: \\\" \\\";\\r\\n\\t\\t\\t\\tposition: absolute;\\r\\n\\t\\t\\t\\tpointer-events: none;\\r\\n\\t\\t\\t\\tborder-bottom-color: var(--color-main-background);\\r\\n\\t\\t\\t\\ttransform: translateX(-50%);\\r\\n\\t\\t\\t\\twidth: 12px;\\r\\n\\t\\t\\t\\theight: 5px;\\r\\n\\t\\t\\t\\tborder-radius: 3px;\\r\\n\\t\\t\\t\\tbackground-color: var(--color-primary-text);\\r\\n\\t\\t\\t\\tleft: 50%;\\r\\n\\t\\t\\t\\tbottom: 6px;\\r\\n\\t\\t\\t\\tdisplay: block;\\r\\n\\t\\t\\t\\ttransition: all 0.1s ease-in-out;\\r\\n\\t\\t\\t\\topacity: 1;\\r\\n\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\t.app-menu-entry--label {\\r\\n\\t\\t\\t\\tfont-weight: bold;\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\ta {\\r\\n\\t\\t\\twidth: calc(100% - 4px);\\r\\n\\t\\t\\theight: calc(100% - 4px);\\r\\n\\t\\t\\tmargin: 2px;\\r\\n\\t\\t\\tcolor: var(--color-primary-text);\\r\\n\\t\\t\\tposition: relative;\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\timg {\\r\\n\\t\\t\\ttransition: margin 0.1s ease-in-out;\\r\\n\\t\\t\\twidth: $header-icon-size;\\r\\n\\t\\t\\theight: $header-icon-size;\\r\\n\\t\\t\\tpadding: calc((100% - $header-icon-size) / 2);\\r\\n\\t\\t\\tbox-sizing: content-box;\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\t.app-menu-entry--label {\\r\\n\\t\\t\\topacity: 0;\\r\\n\\t\\t\\tposition: absolute;\\r\\n\\t\\t\\tfont-size: 12px;\\r\\n\\t\\t\\tcolor: var(--color-primary-text);\\r\\n\\t\\t\\ttext-align: center;\\r\\n\\t\\t\\tbottom: -5px;\\r\\n\\t\\t\\tleft: 50%;\\r\\n\\t\\t\\ttop: 45%;\\r\\n\\t\\t\\tdisplay: block;\\r\\n\\t\\t\\tmin-width: 100%;\\r\\n\\t\\t\\ttransform: translateX(-50%);\\r\\n\\t\\t\\ttransition: all 0.1s ease-in-out;\\r\\n\\t\\t\\twidth: 100%;\\r\\n\\t\\t\\ttext-overflow: ellipsis;\\r\\n\\t\\t\\toverflow: hidden;\\r\\n\\t\\t\\tletter-spacing: -0.5px;\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\t&:hover,\\r\\n\\t\\t&:focus-within {\\r\\n\\t\\t\\topacity: 1;\\r\\n\\t\\t\\t.app-menu-entry--label {\\r\\n\\t\\t\\t\\topacity: 1;\\r\\n\\t\\t\\t\\tfont-weight: bolder;\\r\\n\\t\\t\\t\\tbottom: 0;\\r\\n\\t\\t\\t\\twidth: 100%;\\r\\n\\t\\t\\t\\ttext-overflow: ellipsis;\\r\\n\\t\\t\\t\\toverflow: hidden;\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\r\\n\\t}\\r\\n\\r\\n\\t// Show labels\\r\\n\\t&:hover,\\r\\n\\t&:focus-within,\\r\\n\\t.app-menu-entry:hover,\\r\\n\\t.app-menu-entry:focus {\\r\\n\\t\\topacity: 1;\\r\\n\\r\\n\\t\\timg {\\r\\n\\t\\t\\tmargin-top: -8px;\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\t.app-menu-entry--label {\\r\\n\\t\\t\\topacity: 1;\\r\\n\\t\\t\\tbottom: 0;\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\t&::before, .app-menu-entry::before {\\r\\n\\t\\t\\topacity: 0;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n}\\r\\n\\r\\n::v-deep .app-menu-more .button-vue--vue-tertiary {\\r\\n\\tcolor: var(--color-primary-text);\\r\\n\\topacity: .7;\\r\\n\\tmargin: 3px;\\r\\n\\tfilter: var(--background-image-invert-if-bright);\\r\\n\\r\\n\\t&:hover {\\r\\n\\t\\topacity: 1;\\r\\n\\t\\tbackground-color: transparent !important;\\r\\n\\t}\\r\\n\\r\\n\\t&:focus-visible {\\r\\n\\t\\topacity: 1;\\r\\n\\t\\toutline: none !important;\\r\\n\\t}\\r\\n}\\r\\n\\r\\n.app-menu-popover-entry {\\r\\n\\t.app-icon {\\r\\n\\t\\tposition: relative;\\r\\n\\t\\theight: 44px;\\r\\n\\r\\n\\t\\t&.has-unread::after {\\r\\n\\t\\t\\tbackground-color: var(--color-main-text);\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\timg {\\r\\n\\t\\t\\twidth: $header-icon-size;\\r\\n\\t\\t\\theight: $header-icon-size;\\r\\n\\t\\t\\tpadding: calc((50px - $header-icon-size) / 2);\\r\\n\\t\\t}\\r\\n\\t}\\r\\n}\\r\\n\\r\\n.has-unread::after {\\r\\n\\tcontent: \\\"\\\";\\r\\n\\twidth: 8px;\\r\\n\\theight: 8px;\\r\\n\\tbackground-color: var(--color-primary-text);\\r\\n\\tborder-radius: 50%;\\r\\n\\tposition: absolute;\\r\\n\\tdisplay: block;\\r\\n\\ttop: 10px;\\r\\n\\tright: 10px;\\r\\n}\\r\\n\\r\\n.unread-counter {\\r\\n\\tdisplay: none;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".menu-entry__loading-icon[data-v-6e59d13c]{margin-right:8px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./core/src/components/UserMenu/UserMenuEntry.vue\"],\"names\":[],\"mappings\":\"AAEC,2CACC,gBAAA\",\"sourcesContent\":[\"\\r\\n.menu-entry {\\r\\n\\t&__loading-icon {\\r\\n\\t\\tmargin-right: 8px;\\r\\n\\t}\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#contactsmenu-menu[data-v-1563c388]{height:calc(100vh - 150px);max-height:302px;min-height:175px;width:350px}#contactsmenu-menu[data-v-1563c388] .emptycontent{margin-top:5vh !important;margin-bottom:1.5vh}#contactsmenu-menu[data-v-1563c388] .emptycontent .icon-loading,#contactsmenu-menu[data-v-1563c388] .emptycontent .icon-search{display:inline-block}#contactsmenu-menu[data-v-1563c388] #contactsmenu-search{width:calc(100% - 16px);margin:8px;height:34px}#contactsmenu-menu[data-v-1563c388] .content{height:calc(100vh - 150px - 50px);max-height:250px;min-height:125px;overflow-y:auto}#contactsmenu-menu[data-v-1563c388] .content .footer{text-align:center}#contactsmenu-menu[data-v-1563c388] .content .footer a{display:block;width:100%;padding:12px 0;opacity:.5}#contactsmenu-menu[data-v-1563c388] a{padding:2px}#contactsmenu-menu[data-v-1563c388] a:focus-visible{box-shadow:inset 0 0 0 2px var(--color-main-text) !important}#contactsmenu-menu[data-v-1563c388] .contact{display:flex;position:relative;align-items:center;padding:3px 3px 3px 10px}#contactsmenu-menu[data-v-1563c388] .contact .avatar{height:32px;width:32px;display:inline-block}#contactsmenu-menu[data-v-1563c388] .contact .body{flex-grow:1;padding-left:8px;min-width:0}#contactsmenu-menu[data-v-1563c388] .contact .body div{position:relative;width:100%;overflow-x:hidden;text-overflow:ellipsis}#contactsmenu-menu[data-v-1563c388] .contact .body .last-message,#contactsmenu-menu[data-v-1563c388] .contact .body .email-address{color:var(--color-text-maxcontrast)}#contactsmenu-menu[data-v-1563c388] .contact .top-action,#contactsmenu-menu[data-v-1563c388] .contact .second-action,#contactsmenu-menu[data-v-1563c388] .contact .other-actions{width:16px;height:16px;opacity:.5;cursor:pointer}#contactsmenu-menu[data-v-1563c388] .contact .top-action:not(button),#contactsmenu-menu[data-v-1563c388] .contact .second-action:not(button),#contactsmenu-menu[data-v-1563c388] .contact .other-actions:not(button){padding:14px}#contactsmenu-menu[data-v-1563c388] .contact .top-action img,#contactsmenu-menu[data-v-1563c388] .contact .second-action img,#contactsmenu-menu[data-v-1563c388] .contact .other-actions img{filter:var(--background-invert-if-dark)}#contactsmenu-menu[data-v-1563c388] .contact .top-action:hover,#contactsmenu-menu[data-v-1563c388] .contact .top-action:active,#contactsmenu-menu[data-v-1563c388] .contact .top-action:focus,#contactsmenu-menu[data-v-1563c388] .contact .second-action:hover,#contactsmenu-menu[data-v-1563c388] .contact .second-action:active,#contactsmenu-menu[data-v-1563c388] .contact .second-action:focus,#contactsmenu-menu[data-v-1563c388] .contact .other-actions:hover,#contactsmenu-menu[data-v-1563c388] .contact .other-actions:active,#contactsmenu-menu[data-v-1563c388] .contact .other-actions:focus{opacity:1}#contactsmenu-menu[data-v-1563c388] .contact button.other-actions{width:44px}#contactsmenu-menu[data-v-1563c388] .contact button.other-actions:focus{border-color:rgba(0,0,0,0);box-shadow:0 0 0 2px var(--color-main-text)}#contactsmenu-menu[data-v-1563c388] .contact button.other-actions:focus-visible{border-radius:var(--border-radius-pill)}#contactsmenu-menu[data-v-1563c388] .contact .menu{top:47px;margin-right:13px}#contactsmenu-menu[data-v-1563c388] .contact .popovermenu::after{right:2px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./core/src/views/ContactsMenu.vue\"],\"names\":[],\"mappings\":\"AACA,oCAEC,0BAAA,CACA,gBAAA,CACA,gBAAA,CACA,WAAA,CAGC,kDACC,yBAAA,CACA,mBAAA,CACA,+HAEC,oBAAA,CAIF,yDACC,uBAAA,CACA,UAAA,CACA,WAAA,CAGD,6CAEC,iCAAA,CACA,gBAAA,CACA,gBAAA,CACA,eAAA,CAEA,qDACC,iBAAA,CAEA,uDACC,aAAA,CACA,UAAA,CACA,cAAA,CACA,UAAA,CAKH,sCACC,WAAA,CAEA,oDACC,4DAAA,CAIF,6CACC,YAAA,CACA,iBAAA,CACA,kBAAA,CACA,wBAAA,CAEA,qDACC,WAAA,CACA,UAAA,CACA,oBAAA,CAGD,mDACC,WAAA,CACA,gBAAA,CACA,WAAA,CAEA,uDACC,iBAAA,CACA,UAAA,CACA,iBAAA,CACA,sBAAA,CAGD,mIACC,mCAAA,CAIF,iLACC,UAAA,CACA,WAAA,CACA,UAAA,CACA,cAAA,CAEA,qNACC,YAAA,CAED,6LACC,uCAAA,CAGD,4kBAGC,SAAA,CAIF,kEACC,UAAA,CAEA,wEACC,0BAAA,CACA,2CAAA,CAGD,gFACC,uCAAA,CAKF,mDACC,QAAA,CACA,iBAAA,CAED,iEACC,SAAA\",\"sourcesContent\":[\"\\r\\n#contactsmenu-menu {\\r\\n\\t/* show 2.5 to 4.5 entries depending on the screen height */\\r\\n\\theight: calc(100vh - 50px * 3);\\r\\n\\tmax-height: calc(50px * 6 + 2px);\\r\\n\\tmin-height: calc(50px * 3.5);\\r\\n\\twidth: 350px;\\r\\n\\r\\n\\t&:deep {\\r\\n\\t\\t.emptycontent {\\r\\n\\t\\t\\tmargin-top: 5vh !important;\\r\\n\\t\\t\\tmargin-bottom: 1.5vh;\\r\\n\\t\\t\\t.icon-loading,\\r\\n\\t\\t\\t.icon-search {\\r\\n\\t\\t\\t\\tdisplay: inline-block;\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\t#contactsmenu-search {\\r\\n\\t\\t\\twidth: calc(100% - 16px);\\r\\n\\t\\t\\tmargin: 8px;\\r\\n\\t\\t\\theight: 34px;\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\t.content {\\r\\n\\t\\t\\t/* fixed max height of the parent container without the search input */\\r\\n\\t\\t\\theight: calc(100vh - 50px * 3 - 50px);\\r\\n\\t\\t\\tmax-height: calc(50px * 5);\\r\\n\\t\\t\\tmin-height: calc(50px * 3.5 - 50px);\\r\\n\\t\\t\\toverflow-y: auto;\\r\\n\\r\\n\\t\\t\\t.footer {\\r\\n\\t\\t\\t\\ttext-align: center;\\r\\n\\r\\n\\t\\t\\t\\ta {\\r\\n\\t\\t\\t\\t\\tdisplay: block;\\r\\n\\t\\t\\t\\t\\twidth: 100%;\\r\\n\\t\\t\\t\\t\\tpadding: 12px 0;\\r\\n\\t\\t\\t\\t\\topacity: .5;\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\ta {\\r\\n\\t\\t\\tpadding: 2px;\\r\\n\\r\\n\\t\\t\\t&:focus-visible {\\r\\n\\t\\t\\t\\tbox-shadow: inset 0 0 0 2px var(--color-main-text) !important; // override rule in core/css/headers.scss #header a:focus-visible\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\t.contact {\\r\\n\\t\\t\\tdisplay: flex;\\r\\n\\t\\t\\tposition: relative;\\r\\n\\t\\t\\talign-items: center;\\r\\n\\t\\t\\tpadding: 3px 3px 3px 10px;\\r\\n\\r\\n\\t\\t\\t.avatar {\\r\\n\\t\\t\\t\\theight: 32px;\\r\\n\\t\\t\\t\\twidth: 32px;\\r\\n\\t\\t\\t\\tdisplay: inline-block;\\r\\n\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\t.body {\\r\\n\\t\\t\\t\\tflex-grow: 1;\\r\\n\\t\\t\\t\\tpadding-left: 8px;\\r\\n\\t\\t\\t\\tmin-width: 0;\\r\\n\\r\\n\\t\\t\\t\\tdiv {\\r\\n\\t\\t\\t\\t\\tposition: relative;\\r\\n\\t\\t\\t\\t\\twidth: 100%;\\r\\n\\t\\t\\t\\t\\toverflow-x: hidden;\\r\\n\\t\\t\\t\\t\\ttext-overflow: ellipsis;\\r\\n\\t\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\t\\t.last-message, .email-address {\\r\\n\\t\\t\\t\\t\\tcolor: var(--color-text-maxcontrast);\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\t.top-action, .second-action, .other-actions {\\r\\n\\t\\t\\t\\twidth: 16px;\\r\\n\\t\\t\\t\\theight: 16px;\\r\\n\\t\\t\\t\\topacity: .5;\\r\\n\\t\\t\\t\\tcursor: pointer;\\r\\n\\r\\n\\t\\t\\t\\t&:not(button) {\\r\\n\\t\\t\\t\\t\\tpadding: 14px;\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\timg {\\r\\n\\t\\t\\t\\t\\tfilter: var(--background-invert-if-dark);\\r\\n\\t\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\t\\t&:hover,\\r\\n\\t\\t\\t\\t&:active,\\r\\n\\t\\t\\t\\t&:focus {\\r\\n\\t\\t\\t\\t\\topacity: 1;\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\tbutton.other-actions {\\r\\n\\t\\t\\t\\twidth: 44px;\\r\\n\\r\\n\\t\\t\\t\\t&:focus {\\r\\n\\t\\t\\t\\t\\tborder-color: transparent;\\r\\n\\t\\t\\t\\t\\tbox-shadow: 0 0 0 2px var(--color-main-text);\\r\\n\\t\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\t\\t&:focus-visible {\\r\\n\\t\\t\\t\\t\\tborder-radius: var(--border-radius-pill);\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\t/* actions menu */\\r\\n\\t\\t\\t.menu {\\r\\n\\t\\t\\t\\ttop: 47px;\\r\\n\\t\\t\\t\\tmargin-right: 13px;\\r\\n\\t\\t\\t}\\r\\n\\t\\t\\t.popovermenu::after {\\r\\n\\t\\t\\t\\tright: 2px;\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t}\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".user-menu[data-v-6a818bbc]{margin-right:12px}.user-menu[data-v-6a818bbc] .header-menu__trigger{opacity:1 !important}.user-menu[data-v-6a818bbc] .header-menu__trigger:focus-visible .user-menu__avatar{border:2px solid var(--color-primary-text)}.user-menu[data-v-6a818bbc] .header-menu__carret{display:none !important}.user-menu[data-v-6a818bbc] .header-menu__content{width:fit-content !important}.user-menu__avatar[data-v-6a818bbc]:active,.user-menu__avatar[data-v-6a818bbc]:focus,.user-menu__avatar[data-v-6a818bbc]:hover{border:2px solid var(--color-primary-text)}.user-menu__nav[data-v-6a818bbc]{display:flex;width:100%}.user-menu__nav ul[data-v-6a818bbc]{display:flex;flex-direction:column;gap:2px}.user-menu__nav ul[data-v-6a818bbc] li a,.user-menu__nav ul[data-v-6a818bbc] li button{border-radius:6px;display:inline-flex;align-items:center;height:var(--header-menu-item-height);color:var(--color-main-text);padding:10px 8px;box-sizing:border-box;white-space:nowrap;position:relative;width:100%}.user-menu__nav ul[data-v-6a818bbc] li a:hover,.user-menu__nav ul[data-v-6a818bbc] li button:hover{background-color:var(--color-background-hover)}.user-menu__nav ul[data-v-6a818bbc] li a:focus-visible,.user-menu__nav ul[data-v-6a818bbc] li button:focus-visible{background-color:var(--color-background-hover) !important;box-shadow:inset 0 0 0 2px var(--color-primary) !important;outline:none !important}.user-menu__nav ul[data-v-6a818bbc] li a:active,.user-menu__nav ul[data-v-6a818bbc] li a.active,.user-menu__nav ul[data-v-6a818bbc] li button:active,.user-menu__nav ul[data-v-6a818bbc] li button.active{background-color:var(--color-primary-light)}.user-menu__nav ul[data-v-6a818bbc] li a span,.user-menu__nav ul[data-v-6a818bbc] li button span{padding-bottom:0;color:var(--color-main-text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:110px}.user-menu__nav ul[data-v-6a818bbc] li a img,.user-menu__nav ul[data-v-6a818bbc] li button img{width:16px;height:16px;margin-right:10px}.user-menu__nav ul[data-v-6a818bbc] li a img,.user-menu__nav ul[data-v-6a818bbc] li a svg,.user-menu__nav ul[data-v-6a818bbc] li button img,.user-menu__nav ul[data-v-6a818bbc] li button svg{opacity:.7;filter:var(--background-invert-if-dark)}.user-menu__nav ul[data-v-6a818bbc] li button{background-color:rgba(0,0,0,0);border:none;font-weight:normal;margin:0}\", \"\",{\"version\":3,\"sources\":[\"webpack://./core/src/views/UserMenu.vue\"],\"names\":[],\"mappings\":\"AACA,4BACC,iBAAA,CAIE,kDACC,oBAAA,CAEC,mFACC,0CAAA,CAKH,iDACC,uBAAA,CAGD,kDACC,4BAAA,CAMF,+HAGC,0CAAA,CAIF,iCACC,YAAA,CACA,UAAA,CAEA,oCACC,YAAA,CACA,qBAAA,CACA,OAAA,CAIE,uFAEC,iBAAA,CACA,mBAAA,CACA,kBAAA,CACA,qCAAA,CACA,4BAAA,CACA,gBAAA,CACA,qBAAA,CACA,kBAAA,CACA,iBAAA,CACA,UAAA,CAEA,mGACC,8CAAA,CAGD,mHACC,yDAAA,CACA,0DAAA,CACA,uBAAA,CAGD,0MAEC,2CAAA,CAGD,iGACC,gBAAA,CACA,4BAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,eAAA,CAGD,+FACC,UAAA,CACA,WAAA,CACA,iBAAA,CAGD,8LAEC,UAAA,CACA,uCAAA,CAKF,8CACC,8BAAA,CACA,WAAA,CACA,kBAAA,CACA,QAAA\",\"sourcesContent\":[\"\\r\\n.user-menu {\\r\\n\\tmargin-right: 12px;\\r\\n\\r\\n\\t&:deep {\\r\\n\\t\\t.header-menu {\\r\\n\\t\\t\\t&__trigger {\\r\\n\\t\\t\\t\\topacity: 1 !important;\\r\\n\\t\\t\\t\\t&:focus-visible {\\r\\n\\t\\t\\t\\t\\t.user-menu__avatar {\\r\\n\\t\\t\\t\\t\\t\\tborder: 2px solid var(--color-primary-text);\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\t&__carret {\\r\\n\\t\\t\\t\\tdisplay: none !important;\\r\\n\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\t&__content {\\r\\n\\t\\t\\t\\twidth: fit-content !important;\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\t&__avatar {\\r\\n\\t\\t&:active,\\r\\n\\t\\t&:focus,\\r\\n\\t\\t&:hover {\\r\\n\\t\\t\\tborder: 2px solid var(--color-primary-text);\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\t&__nav {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\twidth: 100%;\\r\\n\\r\\n\\t\\tul {\\r\\n\\t\\t\\tdisplay: flex;\\r\\n\\t\\t\\tflex-direction: column;\\r\\n\\t\\t\\tgap: 2px;\\r\\n\\r\\n\\t\\t\\t&:deep {\\r\\n\\t\\t\\t\\tli {\\r\\n\\t\\t\\t\\t\\ta,\\r\\n\\t\\t\\t\\t\\tbutton {\\r\\n\\t\\t\\t\\t\\t\\tborder-radius: 6px;\\r\\n\\t\\t\\t\\t\\t\\tdisplay: inline-flex;\\r\\n\\t\\t\\t\\t\\t\\talign-items: center;\\r\\n\\t\\t\\t\\t\\t\\theight: var(--header-menu-item-height);\\r\\n\\t\\t\\t\\t\\t\\tcolor: var(--color-main-text);\\r\\n\\t\\t\\t\\t\\t\\tpadding: 10px 8px;\\r\\n\\t\\t\\t\\t\\t\\tbox-sizing: border-box;\\r\\n\\t\\t\\t\\t\\t\\twhite-space: nowrap;\\r\\n\\t\\t\\t\\t\\t\\tposition: relative;\\r\\n\\t\\t\\t\\t\\t\\twidth: 100%;\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t&:hover {\\r\\n\\t\\t\\t\\t\\t\\t\\tbackground-color: var(--color-background-hover);\\r\\n\\t\\t\\t\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t&:focus-visible {\\r\\n\\t\\t\\t\\t\\t\\t\\tbackground-color: var(--color-background-hover) !important;\\r\\n\\t\\t\\t\\t\\t\\t\\tbox-shadow: inset 0 0 0 2px var(--color-primary) !important;\\r\\n\\t\\t\\t\\t\\t\\t\\toutline: none !important;\\r\\n\\t\\t\\t\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t&:active,\\r\\n\\t\\t\\t\\t\\t\\t&.active {\\r\\n\\t\\t\\t\\t\\t\\t\\tbackground-color: var(--color-primary-light);\\r\\n\\t\\t\\t\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\t\\t\\t\\tspan {\\r\\n\\t\\t\\t\\t\\t\\t\\tpadding-bottom: 0;\\r\\n\\t\\t\\t\\t\\t\\t\\tcolor: var(--color-main-text);\\r\\n\\t\\t\\t\\t\\t\\t\\twhite-space: nowrap;\\r\\n\\t\\t\\t\\t\\t\\t\\toverflow: hidden;\\r\\n\\t\\t\\t\\t\\t\\t\\ttext-overflow: ellipsis;\\r\\n\\t\\t\\t\\t\\t\\t\\tmax-width: 110px;\\r\\n\\t\\t\\t\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\t\\t\\t\\timg {\\r\\n\\t\\t\\t\\t\\t\\t\\twidth: 16px;\\r\\n\\t\\t\\t\\t\\t\\t\\theight: 16px;\\r\\n\\t\\t\\t\\t\\t\\t\\tmargin-right: 10px;\\r\\n\\t\\t\\t\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\t\\t\\t\\timg,\\r\\n\\t\\t\\t\\t\\t\\tsvg {\\r\\n\\t\\t\\t\\t\\t\\t\\topacity: .7;\\r\\n\\t\\t\\t\\t\\t\\t\\tfilter: var(--background-invert-if-dark);\\r\\n\\t\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\t\\t\\t// Override global button styles\\r\\n\\t\\t\\t\\t\\tbutton {\\r\\n\\t\\t\\t\\t\\t\\tbackground-color: transparent;\\r\\n\\t\\t\\t\\t\\t\\tborder: none;\\r\\n\\t\\t\\t\\t\\t\\tfont-weight: normal;\\r\\n\\t\\t\\t\\t\\t\\tmargin: 0;\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t}\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"profileUrl\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.program(5, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":1},\"end\":{\"line\":10,\"column\":8}}})) != null ? stack1 : \"\");\n},\"2\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"profileTitle\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":2},\"end\":{\"line\":7,\"column\":9}}})) != null ? stack1 : \"\");\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\t\t\t<a class=\\\"profile-link--avatar\\\" href=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"profileUrl\") : stack1), depth0))\n    + \"\\\">\\r\\n\t\t\t\t<img src=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"avatar\") : stack1), depth0))\n    + \"&size=32\\\" class=\\\"avatar\\\" srcset=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"avatar\") : stack1), depth0))\n    + \"&size=32 1x, \"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"avatar\") : stack1), depth0))\n    + \"&size=64 2x, \"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"avatar\") : stack1), depth0))\n    + \"&size=128 4x\\\" alt=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"avatarLabel\") : stack1), depth0))\n    + \"\\\">\\r\\n\t\t\t</a>\\r\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\t\t<img src=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"avatar\") : stack1), depth0))\n    + \"&size=32\\\" class=\\\"avatar\\\" srcset=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"avatar\") : stack1), depth0))\n    + \"&size=32 1x, \"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"avatar\") : stack1), depth0))\n    + \"&size=64 2x, \"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"avatar\") : stack1), depth0))\n    + \"&size=128 4x\\\" alt=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"avatarLabel\") : stack1), depth0))\n    + \"\\\">\\r\\n\";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"profileUrl\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(8, data, 0),\"inverse\":container.program(11, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":1},\"end\":{\"line\":20,\"column\":8}}})) != null ? stack1 : \"\");\n},\"8\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"profileTitle\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(9, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":2},\"end\":{\"line\":17,\"column\":9}}})) != null ? stack1 : \"\");\n},\"9\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\t\t\t<a class=\\\"profile-link--avatar\\\" href=\\\"\"\n    + container.escapeExpression(container.lambda(((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"profileUrl\") : stack1), depth0))\n    + \"\\\">\\r\\n\t\t\t\t<div class=\\\"avatar\\\"></div>\\r\\n\t\t\t</a>\\r\\n\";\n},\"11\":function(container,depth0,helpers,partials,data) {\n    return \"\t\t<div class=\\\"avatar\\\"></div>\\r\\n\";\n},\"13\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"profileTitle\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(14, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":23,\"column\":1},\"end\":{\"line\":29,\"column\":8}}})) != null ? stack1 : \"\")\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"topAction\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(16, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":30,\"column\":1},\"end\":{\"line\":34,\"column\":8}}})) != null ? stack1 : \"\");\n},\"14\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\t\t<a class=\\\"body profile-link--full-name\\\" href=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"profileUrl\") : stack1), depth0))\n    + \"\\\">\\r\\n\t\t\t<div class=\\\"full-name\\\">\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"fullName\") : stack1), depth0))\n    + \"</div>\\r\\n\t\t\t<div class=\\\"last-message\\\">\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"lastMessage\") : stack1), depth0))\n    + \"</div>\\r\\n\t\t\t<div class=\\\"email-address\\\">\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"emailAddresses\") : stack1), depth0))\n    + \"</div>\\r\\n\t\t</a>\\r\\n\";\n},\"16\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\t\t<a class=\\\"top-action\\\" href=\\\"\"\n    + alias2(alias1(((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"topAction\") : stack1)) != null ? lookupProperty(stack1,\"hyperlink\") : stack1), depth0))\n    + \"\\\" title=\\\"\"\n    + alias2(alias1(((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"topAction\") : stack1)) != null ? lookupProperty(stack1,\"title\") : stack1), depth0))\n    + \"\\\">\\r\\n\t\t\t<img src=\\\"\"\n    + alias2(alias1(((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"topAction\") : stack1)) != null ? lookupProperty(stack1,\"icon\") : stack1), depth0))\n    + \"\\\" alt=\\\"\"\n    + alias2(alias1(((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"topAction\") : stack1)) != null ? lookupProperty(stack1,\"title\") : stack1), depth0))\n    + \"\\\">\\r\\n\t\t</a>\\r\\n\";\n},\"18\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"topAction\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(19, data, 0),\"inverse\":container.program(21, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":35,\"column\":0},\"end\":{\"line\":50,\"column\":0}}})) != null ? stack1 : \"\");\n},\"19\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\t<a class=\\\"body\\\" href=\\\"\"\n    + alias2(alias1(((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"topAction\") : stack1)) != null ? lookupProperty(stack1,\"hyperlink\") : stack1), depth0))\n    + \"\\\">\\r\\n\t\t<div class=\\\"full-name\\\">\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"fullName\") : stack1), depth0))\n    + \"</div>\\r\\n\t\t<div class=\\\"last-message\\\">\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"lastMessage\") : stack1), depth0))\n    + \"</div>\\r\\n\t\t<div class=\\\"email-address\\\">\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"emailAddresses\") : stack1), depth0))\n    + \"</div>\\r\\n\t</a>\\r\\n  \t<a class=\\\"top-action\\\" href=\\\"\"\n    + alias2(alias1(((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"topAction\") : stack1)) != null ? lookupProperty(stack1,\"hyperlink\") : stack1), depth0))\n    + \"\\\" title=\\\"\"\n    + alias2(alias1(((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"topAction\") : stack1)) != null ? lookupProperty(stack1,\"title\") : stack1), depth0))\n    + \"\\\">\\r\\n  \t\t<img src=\\\"\"\n    + alias2(alias1(((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"topAction\") : stack1)) != null ? lookupProperty(stack1,\"icon\") : stack1), depth0))\n    + \"\\\" alt=\\\"\"\n    + alias2(alias1(((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"topAction\") : stack1)) != null ? lookupProperty(stack1,\"title\") : stack1), depth0))\n    + \"\\\">\\r\\n\t</a>\\r\\n\";\n},\"21\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\t<div class=\\\"body\\\">\\r\\n\t\t<div class=\\\"full-name\\\">\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"fullName\") : stack1), depth0))\n    + \"</div>\\r\\n\t\t<div class=\\\"last-message\\\">\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"lastMessage\") : stack1), depth0))\n    + \"</div>\\r\\n\t\t<div class=\\\"email-address\\\">\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"emailAddresses\") : stack1), depth0))\n    + \"</div>\\r\\n\t</div>\\r\\n\";\n},\"23\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<a class=\\\"second-action\\\" href=\\\"\"\n    + alias2(alias1(((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"secondAction\") : stack1)) != null ? lookupProperty(stack1,\"hyperlink\") : stack1), depth0))\n    + \"\\\" title=\\\"\"\n    + alias2(alias1(((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"secondAction\") : stack1)) != null ? lookupProperty(stack1,\"title\") : stack1), depth0))\n    + \"\\\">\\r\\n\t<img src=\\\"\"\n    + alias2(alias1(((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"secondAction\") : stack1)) != null ? lookupProperty(stack1,\"icon\") : stack1), depth0))\n    + \"\\\" alt=\\\"\"\n    + alias2(alias1(((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"secondAction\") : stack1)) != null ? lookupProperty(stack1,\"title\") : stack1), depth0))\n    + \"\\\">\\r\\n</a>\\r\\n\";\n},\"25\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\t<button class=\\\"other-actions icon-more\\\"></button>\\r\\n\t<div class=\\\"menu popovermenu\\\">\\r\\n\t\t<ul>\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"actions\") : stack1),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(26, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":60,\"column\":3},\"end\":{\"line\":67,\"column\":12}}})) != null ? stack1 : \"\")\n    + \"\t\t</ul>\\r\\n\t</div>\\r\\n\";\n},\"26\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\t\t\t<li>\\r\\n\t\t\t\t<a href=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"hyperlink\") || (depth0 != null ? lookupProperty(depth0,\"hyperlink\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"hyperlink\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":62,\"column\":13},\"end\":{\"line\":62,\"column\":26}}}) : helper)))\n    + \"\\\">\\r\\n\t\t\t\t\t<img src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"icon\") || (depth0 != null ? lookupProperty(depth0,\"icon\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"icon\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":63,\"column\":15},\"end\":{\"line\":63,\"column\":23}}}) : helper)))\n    + \"\\\" alt=\\\"\\\">\\r\\n\t\t\t\t\t<span>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":64,\"column\":11},\"end\":{\"line\":64,\"column\":20}}}) : helper)))\n    + \"</span>\\r\\n\t\t\t\t</a>\\r\\n\t\t\t</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"avatar\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(7, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":21,\"column\":7}}})) != null ? stack1 : \"\")\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"profileUrl\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(13, data, 0),\"inverse\":container.program(18, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":22,\"column\":0},\"end\":{\"line\":50,\"column\":7}}})) != null ? stack1 : \"\")\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"hasTwoActions\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(23, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":51,\"column\":0},\"end\":{\"line\":55,\"column\":7}}})) != null ? stack1 : \"\")\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"contact\") : depth0)) != null ? lookupProperty(stack1,\"hasManyActions\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(25, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":56,\"column\":0},\"end\":{\"line\":70,\"column\":7}}})) != null ? stack1 : \"\");\n},\"useData\":true});","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"emptycontent\\\">\\r\\n\t<div class=\\\"icon-search\\\"></div>\\r\\n\t<h2>\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"couldNotLoadText\") || (depth0 != null ? lookupProperty(depth0,\"couldNotLoadText\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"couldNotLoadText\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":5},\"end\":{\"line\":3,\"column\":25}}}) : helper)))\n    + \"</h2>\\r\\n</div>\\r\\n\";\n},\"useData\":true});","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"emptycontent\\\">\\r\\n\t<div class=\\\"icon-search\\\"></div>\\r\\n\t<h2>\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"noContactsFoundText\") || (depth0 != null ? lookupProperty(depth0,\"noContactsFoundText\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"noContactsFoundText\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":5},\"end\":{\"line\":4,\"column\":28}}}) : helper)))\n    + \"</h2>\\r\\n</div>\\r\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"footer\\\"><a href=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"contactsAppURL\") || (depth0 != null ? lookupProperty(depth0,\"contactsAppURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"contactsAppURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":29},\"end\":{\"line\":9,\"column\":47}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"showAllContactsText\") || (depth0 != null ? lookupProperty(depth0,\"showAllContactsText\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"showAllContactsText\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":49},\"end\":{\"line\":9,\"column\":72}}}) : helper)))\n    + \"</a></div>\\r\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"canInstallApp\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(6, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":10,\"column\":0},\"end\":{\"line\":12,\"column\":0}}})) != null ? stack1 : \"\");\n},\"6\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"footer\\\"><a href=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"contactsAppMgmtURL\") || (depth0 != null ? lookupProperty(depth0,\"contactsAppMgmtURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"contactsAppMgmtURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":29},\"end\":{\"line\":11,\"column\":51}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"contactsAppMgmtText\") || (depth0 != null ? lookupProperty(depth0,\"contactsAppMgmtText\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"contactsAppMgmtText\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":53},\"end\":{\"line\":11,\"column\":76}}}) : helper)))\n    + \"</a></div>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"unless\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"contacts\") : depth0)) != null ? lookupProperty(stack1,\"length\") : stack1),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":6,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"<div id=\\\"contactsmenu-contacts\\\"></div>\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"contactsAppEnabled\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.program(5, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":0},\"end\":{\"line\":12,\"column\":7}}})) != null ? stack1 : \"\");\n},\"useData\":true});","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"emptycontent\\\">\\r\\n\t<div class=\\\"icon-loading\\\"></div>\\r\\n\t<h2>\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"loadingText\") || (depth0 != null ? lookupProperty(depth0,\"loadingText\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"loadingText\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":5},\"end\":{\"line\":3,\"column\":20}}}) : helper)))\n    + \"</h2>\\r\\n</div>\\r\\n\";\n},\"useData\":true});","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<label class=\\\"hidden-visually\\\" for=\\\"contactsmenu-search\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"searchContactsText\") || (depth0 != null ? lookupProperty(depth0,\"searchContactsText\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"searchContactsText\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":57},\"end\":{\"line\":1,\"column\":79}}}) : helper)))\n    + \"</label>\\r\\n<input id=\\\"contactsmenu-search\\\" type=\\\"search\\\" placeholder=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"searchContactsText\") || (depth0 != null ? lookupProperty(depth0,\"searchContactsText\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"searchContactsText\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":59},\"end\":{\"line\":2,\"column\":81}}}) : helper)))\n    + \"\\\" value=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"searchTerm\") || (depth0 != null ? lookupProperty(depth0,\"searchTerm\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"searchTerm\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":90},\"end\":{\"line\":2,\"column\":104}}}) : helper)))\n    + \"\\\">\\r\\n<div class=\\\"content\\\">\\r\\n</div>\\r\\n\";\n},\"useData\":true});","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<img src=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"icon\") || (depth0 != null ? lookupProperty(depth0,\"icon\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"icon\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":24},\"end\":{\"line\":3,\"column\":32}}}) : helper)))\n    + \"\\\">\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li>\\r\\n\t<a href=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"hyperlink\") || (depth0 != null ? lookupProperty(depth0,\"hyperlink\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"hyperlink\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":10},\"end\":{\"line\":2,\"column\":23}}}) : helper)))\n    + \"\\\">\\r\\n\t\t\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"icon\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":2},\"end\":{\"line\":3,\"column\":41}}})) != null ? stack1 : \"\")\n    + \"\\r\\n\t\t<span>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":8},\"end\":{\"line\":4,\"column\":17}}}) : helper)))\n    + \"</span>\\r\\n\t</a>\\r\\n</li>\\r\\n\";\n},\"useData\":true});","var map = {\n\t\"./af\": 42786,\n\t\"./af.js\": 42786,\n\t\"./ar\": 30867,\n\t\"./ar-dz\": 14130,\n\t\"./ar-dz.js\": 14130,\n\t\"./ar-kw\": 96135,\n\t\"./ar-kw.js\": 96135,\n\t\"./ar-ly\": 56440,\n\t\"./ar-ly.js\": 56440,\n\t\"./ar-ma\": 47702,\n\t\"./ar-ma.js\": 47702,\n\t\"./ar-sa\": 16040,\n\t\"./ar-sa.js\": 16040,\n\t\"./ar-tn\": 37100,\n\t\"./ar-tn.js\": 37100,\n\t\"./ar.js\": 30867,\n\t\"./az\": 31083,\n\t\"./az.js\": 31083,\n\t\"./be\": 9808,\n\t\"./be.js\": 9808,\n\t\"./bg\": 68338,\n\t\"./bg.js\": 68338,\n\t\"./bm\": 67438,\n\t\"./bm.js\": 67438,\n\t\"./bn\": 8905,\n\t\"./bn-bd\": 76225,\n\t\"./bn-bd.js\": 76225,\n\t\"./bn.js\": 8905,\n\t\"./bo\": 11560,\n\t\"./bo.js\": 11560,\n\t\"./br\": 1278,\n\t\"./br.js\": 1278,\n\t\"./bs\": 80622,\n\t\"./bs.js\": 80622,\n\t\"./ca\": 2468,\n\t\"./ca.js\": 2468,\n\t\"./cs\": 5822,\n\t\"./cs.js\": 5822,\n\t\"./cv\": 50877,\n\t\"./cv.js\": 50877,\n\t\"./cy\": 47373,\n\t\"./cy.js\": 47373,\n\t\"./da\": 24780,\n\t\"./da.js\": 24780,\n\t\"./de\": 59740,\n\t\"./de-at\": 60217,\n\t\"./de-at.js\": 60217,\n\t\"./de-ch\": 60894,\n\t\"./de-ch.js\": 60894,\n\t\"./de.js\": 59740,\n\t\"./dv\": 5300,\n\t\"./dv.js\": 5300,\n\t\"./el\": 50837,\n\t\"./el.js\": 50837,\n\t\"./en-au\": 78348,\n\t\"./en-au.js\": 78348,\n\t\"./en-ca\": 77925,\n\t\"./en-ca.js\": 77925,\n\t\"./en-gb\": 22243,\n\t\"./en-gb.js\": 22243,\n\t\"./en-ie\": 46436,\n\t\"./en-ie.js\": 46436,\n\t\"./en-il\": 47207,\n\t\"./en-il.js\": 47207,\n\t\"./en-in\": 44175,\n\t\"./en-in.js\": 44175,\n\t\"./en-nz\": 76319,\n\t\"./en-nz.js\": 76319,\n\t\"./en-sg\": 31662,\n\t\"./en-sg.js\": 31662,\n\t\"./eo\": 92915,\n\t\"./eo.js\": 92915,\n\t\"./es\": 55655,\n\t\"./es-do\": 55251,\n\t\"./es-do.js\": 55251,\n\t\"./es-mx\": 96112,\n\t\"./es-mx.js\": 96112,\n\t\"./es-us\": 71146,\n\t\"./es-us.js\": 71146,\n\t\"./es.js\": 55655,\n\t\"./et\": 5603,\n\t\"./et.js\": 5603,\n\t\"./eu\": 77763,\n\t\"./eu.js\": 77763,\n\t\"./fa\": 76959,\n\t\"./fa.js\": 76959,\n\t\"./fi\": 11897,\n\t\"./fi.js\": 11897,\n\t\"./fil\": 42549,\n\t\"./fil.js\": 42549,\n\t\"./fo\": 94694,\n\t\"./fo.js\": 94694,\n\t\"./fr\": 94470,\n\t\"./fr-ca\": 63049,\n\t\"./fr-ca.js\": 63049,\n\t\"./fr-ch\": 52330,\n\t\"./fr-ch.js\": 52330,\n\t\"./fr.js\": 94470,\n\t\"./fy\": 5044,\n\t\"./fy.js\": 5044,\n\t\"./ga\": 29295,\n\t\"./ga.js\": 29295,\n\t\"./gd\": 2101,\n\t\"./gd.js\": 2101,\n\t\"./gl\": 38794,\n\t\"./gl.js\": 38794,\n\t\"./gom-deva\": 27884,\n\t\"./gom-deva.js\": 27884,\n\t\"./gom-latn\": 23168,\n\t\"./gom-latn.js\": 23168,\n\t\"./gu\": 95349,\n\t\"./gu.js\": 95349,\n\t\"./he\": 24206,\n\t\"./he.js\": 24206,\n\t\"./hi\": 30094,\n\t\"./hi.js\": 30094,\n\t\"./hr\": 30316,\n\t\"./hr.js\": 30316,\n\t\"./hu\": 22138,\n\t\"./hu.js\": 22138,\n\t\"./hy-am\": 11423,\n\t\"./hy-am.js\": 11423,\n\t\"./id\": 29218,\n\t\"./id.js\": 29218,\n\t\"./is\": 90135,\n\t\"./is.js\": 90135,\n\t\"./it\": 90626,\n\t\"./it-ch\": 10150,\n\t\"./it-ch.js\": 10150,\n\t\"./it.js\": 90626,\n\t\"./ja\": 39183,\n\t\"./ja.js\": 39183,\n\t\"./jv\": 24286,\n\t\"./jv.js\": 24286,\n\t\"./ka\": 12105,\n\t\"./ka.js\": 12105,\n\t\"./kk\": 47772,\n\t\"./kk.js\": 47772,\n\t\"./km\": 18758,\n\t\"./km.js\": 18758,\n\t\"./kn\": 79282,\n\t\"./kn.js\": 79282,\n\t\"./ko\": 33730,\n\t\"./ko.js\": 33730,\n\t\"./ku\": 1408,\n\t\"./ku.js\": 1408,\n\t\"./ky\": 33291,\n\t\"./ky.js\": 33291,\n\t\"./lb\": 36841,\n\t\"./lb.js\": 36841,\n\t\"./lo\": 55466,\n\t\"./lo.js\": 55466,\n\t\"./lt\": 57010,\n\t\"./lt.js\": 57010,\n\t\"./lv\": 37595,\n\t\"./lv.js\": 37595,\n\t\"./me\": 39861,\n\t\"./me.js\": 39861,\n\t\"./mi\": 35493,\n\t\"./mi.js\": 35493,\n\t\"./mk\": 95966,\n\t\"./mk.js\": 95966,\n\t\"./ml\": 87341,\n\t\"./ml.js\": 87341,\n\t\"./mn\": 5115,\n\t\"./mn.js\": 5115,\n\t\"./mr\": 10370,\n\t\"./mr.js\": 10370,\n\t\"./ms\": 9847,\n\t\"./ms-my\": 41237,\n\t\"./ms-my.js\": 41237,\n\t\"./ms.js\": 9847,\n\t\"./mt\": 72126,\n\t\"./mt.js\": 72126,\n\t\"./my\": 56165,\n\t\"./my.js\": 56165,\n\t\"./nb\": 64924,\n\t\"./nb.js\": 64924,\n\t\"./ne\": 16744,\n\t\"./ne.js\": 16744,\n\t\"./nl\": 93901,\n\t\"./nl-be\": 59814,\n\t\"./nl-be.js\": 59814,\n\t\"./nl.js\": 93901,\n\t\"./nn\": 83877,\n\t\"./nn.js\": 83877,\n\t\"./oc-lnc\": 92135,\n\t\"./oc-lnc.js\": 92135,\n\t\"./pa-in\": 15858,\n\t\"./pa-in.js\": 15858,\n\t\"./pl\": 64495,\n\t\"./pl.js\": 64495,\n\t\"./pt\": 89520,\n\t\"./pt-br\": 57971,\n\t\"./pt-br.js\": 57971,\n\t\"./pt.js\": 89520,\n\t\"./ro\": 96459,\n\t\"./ro.js\": 96459,\n\t\"./ru\": 21793,\n\t\"./ru.js\": 21793,\n\t\"./sd\": 40950,\n\t\"./sd.js\": 40950,\n\t\"./se\": 10490,\n\t\"./se.js\": 10490,\n\t\"./si\": 90124,\n\t\"./si.js\": 90124,\n\t\"./sk\": 64249,\n\t\"./sk.js\": 64249,\n\t\"./sl\": 14985,\n\t\"./sl.js\": 14985,\n\t\"./sq\": 51104,\n\t\"./sq.js\": 51104,\n\t\"./sr\": 49131,\n\t\"./sr-cyrl\": 79915,\n\t\"./sr-cyrl.js\": 79915,\n\t\"./sr.js\": 49131,\n\t\"./ss\": 85893,\n\t\"./ss.js\": 85893,\n\t\"./sv\": 98760,\n\t\"./sv.js\": 98760,\n\t\"./sw\": 91172,\n\t\"./sw.js\": 91172,\n\t\"./ta\": 27333,\n\t\"./ta.js\": 27333,\n\t\"./te\": 23110,\n\t\"./te.js\": 23110,\n\t\"./tet\": 52095,\n\t\"./tet.js\": 52095,\n\t\"./tg\": 27321,\n\t\"./tg.js\": 27321,\n\t\"./th\": 9041,\n\t\"./th.js\": 9041,\n\t\"./tk\": 19005,\n\t\"./tk.js\": 19005,\n\t\"./tl-ph\": 75768,\n\t\"./tl-ph.js\": 75768,\n\t\"./tlh\": 89444,\n\t\"./tlh.js\": 89444,\n\t\"./tr\": 72397,\n\t\"./tr.js\": 72397,\n\t\"./tzl\": 28254,\n\t\"./tzl.js\": 28254,\n\t\"./tzm\": 51106,\n\t\"./tzm-latn\": 30699,\n\t\"./tzm-latn.js\": 30699,\n\t\"./tzm.js\": 51106,\n\t\"./ug-cn\": 9288,\n\t\"./ug-cn.js\": 9288,\n\t\"./uk\": 67691,\n\t\"./uk.js\": 67691,\n\t\"./ur\": 13795,\n\t\"./ur.js\": 13795,\n\t\"./uz\": 6791,\n\t\"./uz-latn\": 60588,\n\t\"./uz-latn.js\": 60588,\n\t\"./uz.js\": 6791,\n\t\"./vi\": 65666,\n\t\"./vi.js\": 65666,\n\t\"./x-pseudo\": 14378,\n\t\"./x-pseudo.js\": 14378,\n\t\"./yo\": 75805,\n\t\"./yo.js\": 75805,\n\t\"./zh-cn\": 83839,\n\t\"./zh-cn.js\": 83839,\n\t\"./zh-hk\": 55726,\n\t\"./zh-hk.js\": 55726,\n\t\"./zh-mo\": 99807,\n\t\"./zh-mo.js\": 99807,\n\t\"./zh-tw\": 74152,\n\t\"./zh-tw.js\": 74152\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 46700;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 2943;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t2943: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunknextcloud\"] = self[\"webpackChunknextcloud\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [7874], function() { return __webpack_require__(82777); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","loadedScripts","loadedStyles","updatableNotification","getDefaultNotificationFunction","setDefault","callback","this","hide","$row","_","undefined","each","$","toastify","hideToast","console","error","call","showHtml","html","options","isHTML","timeout","TOAST_PERMANENT_TIMEOUT","toast","showMessage","toastElement","show","text","toString","split","join","escapeHTML","showUpdate","showTemporary","TOAST_DEFAULT_TIMEOUT","isHidden","find","length","ajaxConnectionLostHandler","Notification","t","trailing","dynamicSlideToggleEnabled","enableDynamicSlideToggle","Apps","$el","removeClass","trigger","addClass","method","endpoint","OC","type","toUpperCase","url","generateOcsUrl","data","success","bind","getApps","getKeys","app","getValue","key","defaultValue","setValue","value","deleteKey","appConfig","window","oc_appconfig","AppConfig","_oc_appswebroots","methodMap","create","update","patch","delete","read","parsePropFindResult","result","davProperties","subResult","props","href","propStat","status","properties","propKey","id","parseIdFromLocation","queryPos","indexOf","substr","parts","pop","isSuccessStatus","callPropPatch","client","model","headers","propPatch","attrs","changedProp","warn","convertModelAttributesToDavProperties","changed","then","toJSON","Backbone","VendorBackbone","Object","assign","davCall","dav","baseUrl","xmlNamespaces","resolveUrl","requestToken","propFind","depth","response","propsMapping","results","body","shift","callPropFind","request","callMkCol","responseJson","locationHeader","xhr","getResponseHeader","callMethod","davSync","params","isCollection","Collection","hasInnerCollection","usePUT","collection","Error","urlError","JSON","stringify","processData","prototype","textStatus","errorThrown","context","_oc_config","Contact","Model","defaults","fullName","lastMessage","actions","hasOneAction","hasTwoActions","hasManyActions","initialize","get","set","ContactCollection","ContactsListView","View","_collection","_subViews","render","self","forEach","contact","item","ContactsListItemView","append","on","_onChildActionMenuToggle","push","$src","view","className","_template","_model","_actionMenuShown","events","contactTemplate","require","template","_onOtherActionMenuOpened","delegateEvents","imageplaceholder","tooltip","placement","_onToggleActionsMenu","is","ContactsMenuView","_loadingTemplate","_errorTemplate","_contentTemplate","_contactsTemplate","_contacts","_searchTerm","templates","loading","menu","list","_onSearch","e","searchTerm","val","loadingTemplate","errorTemplate","couldNotLoadText","contentTemplate","searchContactsText","contactsTemplate","noContactsFoundText","showAllContactsText","contactsAppMgmtText","showLoading","loadingText","showError","showContacts","viewData","contacts","contactsAppEnabled","contactsAppURL","canInstallApp","contactsAppMgmtURL","searchVal","focus","ContactsMenu","_view","_contactsPromise","el","loadContacts","_getContacts","Promise","resolve","filter","term","catch","rawUid","document","getElementsByTagName","getAttribute","displayName","currentUser","Search","isA11yActivation","event","global","emit","token","Dialogs","YES_NO_BUTTONS","OK_BUTTONS","FILEPICKER_TYPE_CHOOSE","FILEPICKER_TYPE_MOVE","FILEPICKER_TYPE_COPY","FILEPICKER_TYPE_COPY_MOVE","FILEPICKER_TYPE_CUSTOM","dialogsCounter","alert","title","modal","message","OK_BUTTON","info","confirm","confirmDestructive","buttons","confirmHtml","prompt","name","password","_getMessageTemplate","$tmpl","dialogName","dialogId","$dlg","octemplate","dialog_name","input","attr","label","buttonlist","click","ocdialog","defaultButton","closeOnEscape","close","filepicker","multiselect","mimetypeFilter","path","sortField","sortOrder","emptyText","newText","filesClient","OCA","Sharing","PublicApp","fileList","filelist","allowDirectoryChooser","_getFilePickerTemplate","$filePicker","emptytext","newtext","nameCol","sizeCol","modifiedCol","target","prepend","$showGridView","_onGridviewChange","_getGridSettings","newButton","stopImmediatePropagation","preventDefault","$input","submit","newName","lastPos","lastIndexOf","selectRange","$form","$submit","stopPropagation","filename","trimmedName","trim","match","isFileNameValid","file","escape","checkInput","newname","createDirectory","always","_fillFilePicker","ready","$fileListHeader","$filelist","$filelistContainer","$dirTree","_handleTreeListSelect","_handlePickerClick","dir","currentTarget","functionToCall","returnType","datapath","index","element","selectedName","button","width","height","style","remove","buttonEnableDisable","closest","prop","fail","content","dialogType","allowHtml","escapeFunction","cancel","classes","confirmClasses","closeCallback","_fileexistsshown","fileexists","original","replacement","controller","dialogDeferred","resampleHermite","canvas","W","H","W2","H2","Math","round","img","getContext","getImageData","img2","data2","ratio_w","ratio_h","ratio_w_half","ceil","ratio_h_half","j","i","x2","weight","weights","weights_alpha","gx_r","gx_g","gx_b","gx_a","center_y","yy","floor","dy","abs","center_x","w0","xx","dx","w","sqrt","clearRect","max","putImageData","addConflict","$conflicts","$conflict","clone","$originalDiv","$replacementDiv","size","mtime","lastModified","directory","urlSpec","x","y","c","etag","forceIcon","previewpath","Files","generatePreviewUrl","replace","css","FileReader","reader","onload","blob","Blob","URL","webkitURL","originalUrl","createObjectURL","image","Image","src","createElement","min","drawImage","toDataURL","readAsArrayBuffer","reject","getCroppedPreview","checkboxId","count","n","parent","children","_getFileExistsTemplate","allnewfiles","allexistingfiles","why","what","onCancel","onContinue","closeButton","$primaryButton","updatePrimaryButton","checkedCount","$checkbox","promise","gridview","toggleClass","isGridView","hasClass","defer","$filePickerTemplate","tmpl","$listTmpl","detach","jqXHR","$messageTemplate","$fileexistsTemplate","empty","advancedFilter","getFolderContents","files","_changeButtonsText","mimetype","showHiddenInput","getElementById","startsWith","comparator","Comparators","fileInfo1","fileInfo2","sort","file1","file2","isFavorite","fileInfo","tags","_fillSlug","idx","entry","simpleSize","sizeColor","isEncrypted","icon","parseInt","pow","filename1","filename2","date","previewUrl","addButton","$template","paths","prependTo","getOcDialog","$element","ctrlKey","copyText","folder","moveText","eq","manageFromDocument","getToken","setToken","newToken","OCEventSource","joinChar","dataStr","typelessListeners","closed","listeners","encodeURIComponent","useFallBack","EventSource","iframeId","iframeCount","fallBackSources","iframe","source","onmessage","parse","listen","fallBackCallBack","done","lastLength","addEventListener","currentMenu","currentMenuToggle","hideMenus","complete","lastMenu","slideUp","apply","arguments","isAdmin","_oc_isadmin","load","loadTranslations","register","_unregister","unregister","translate","translatePlural","Handlebars","startSaving","selector","startAction","stop","finishedSaving","finishedAction","finishedSuccess","finishedError","delay","fadeOut","pageLoadTime","init","requirePasswordConfirmation","moment","requiresPasswordConfirmation","serverTimeDiff","nc_pageLoad","timeSinceLogin","nc_lastLogin","backendAllowsPasswordConfirmation","rejectCallback","config","_confirmPassword","$dialog","$error","$buttons","generateUrl","lastLogin","theme","_theme","_handlers","_pushState","strParams","history","pushState","location","pathname","navigator","userAgent","toLowerCase","pattern","patterns","querySelectorAll","ii","fill","stroke","removeAttribute","setAttribute","replaceState","hash","_cancelPop","addOnPopStateHandler","handler","_parseHashQuery","pos","_decodeQuery","query","parseUrlQuery","search","_onPopState","state","chunkify","tz","charAt","m","History","humanFileSize","computerFileSize","string","s","bytes","matches","parseFloat","isFinite","b","k","kb","mb","gb","g","tb","pb","p","formatDate","timestamp","format","TESTING","relativeModifiedDate","diff","fromNow","getScrollBarWidth","_scrollBarWidth","inner","outer","position","top","left","visibility","overflow","appendChild","w1","offsetWidth","w2","clientWidth","removeChild","stripTime","Date","getFullYear","getMonth","getDate","naturalSortCompare","a","aa","bb","aNum","Number","bNum","localeCompare","waitFor","interval","internalCallback","setTimeout","isCookieSetToValue","cookies","cookie","debug","_oc_debug","webroot","_oc_webroot","coreApps","menuSpeed","PERMISSION_ALL","PERMISSION_CREATE","PERMISSION_DELETE","PERMISSION_NONE","PERMISSION_READ","PERMISSION_SHARE","PERMISSION_UPDATE","TAG_FAVORITE","fileIsBlacklisted","Config","addScript","script","generateFilePath","addStyle","createStyleSheet","appSettings","args","appid","scriptName","cache","settings","popup","arrowclass","loadJS","scriptname","jqxhr","appswebroots","dialogs","getCurrentUser","uid","isUserAdmin","L10N","_ajaxConnectionLostHandler","_processAjaxError","statusText","timer","setInterval","clearInterval","registerXHRForErrorProcessing","readyState","getCapabilities","realGetCapabilities","registerMenu","$toggle","$menuEl","toggle","headerMenu","isClickableElement","slideToggle","showMenu","unregisterMenu","off","basename","encodePath","dirname","isSamePath","joinPaths","getHost","host","getHostName","hostname","getPort","port","getProtocol","protocol","getCanonicalLocale","getLocale","getLanguage","buildQueryString","parseQueryString","queryString","components","part","decodeURIComponent","msg","PasswordConfirmation","Plugins","_plugins","targetName","plugin","plugins","getPlugins","attach","targetObject","Util","filePath","namespaces","tail","getRootPath","getRootUrl","imagePath","redirect","targetURL","reload","getRequestToken","linkTo","linkToOCS","service","version","ocsVersion","linkToRemote","generateRemoteUrl","linkToRemoteBase","realGetRootUrl","subscribe","resp","poll","setRequestToken","startPolling","NaN","session_lifetime","isNaN","getInterval","Contacts","NcHeaderMenu","contactsMenu","mounted","methods","handleOpen","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","_vm","_c","_self","scopedSlots","_u","fn","proxy","_v","NcActions","NcActionLink","apps","appLimit","observer","computed","appList","mainAppList","popoverAppList","appLabel","beforeDestroy","unsubscribe","setNavigationCounter","setApps","resize","appCount","staticClass","_l","class","active","unread","_s","_e","NcLoadingIcon","required","cachedIcon","handleClick","$event","shiftKey","altKey","metaKey","NcAvatar","UserMenuEntry","settingsNavEntries","userId","_b","localeAliases","zh","zh_Hans","zh_Hans_CN","zh_Hans_HK","zh_Hans_MO","zh_Hans_SG","zh_Hant","zh_Hant_HK","zh_Hant_MO","zh_Hant_TW","locale","hasOwnProperty","initCore","mountPoint","allowAuthErrors","loadState","loadConfig","auto_logout","lastActive","now","localStorage","setItem","newValue","logoutUrl","registerAutoLogout","session_keepalive","initSessionHeartBeat","Vue","container","appMenu","AppMenu","$mount","counter","setUpMainMenu","h","UserMenu","setUpContactsMenu","snapper","Snap","disable","maxPosition","minDragDistance","animating","oldSnapperOpen","open","oldSnapperClose","_snapperOpen","_snapperClose","keypress","delegate","$target","navigationBarSlideGestureEnabled","navigationBarSlideGestureAllowed","navigationBarSlideGestureEnablePending","enable","toggleSnapperOnSize","ex","TypeError","urlRegex","plainToRich","formatLinksRich","richToPlain","formatLinksPlain","leadingSpace","trailingSpace","linkText","$content","$this","dismissOptions","dismiss","menuItem","div","classList","add","innerText","ocs","product","onclick","whatsNew","regular","whatsNewTextItem","innerHTML","changelogURL","rel","onQuerySuccess","onQueryError","onDismissSuccess","onDismissError","func","funcName","oldFunc","newFunc","disableKeyboardShortcuts","setPageHeading","heading","headingEl","textContent","types","loadedStylesheets","loadScript","scriptPath","btoa","onerror","head","loadStylesheet","stylePath","link","showSuccess","warning","showWarning","showInfo","Accessibility","Collaboration","registerType","typeDefinition","action","getTypes","keys","getIcon","typeIconClass","getLabel","typeString","getLink","Comments","InitialState","Loader","Toast","WhatsNew","warnIfNotTesting","setDeprecatedProp","cb","Array","isArray","defineProperty","autosize","ClipboardJS","md5","OCP","user","ie8fix","hidedefault","displayname","setAvatarForUnknownUser","String","$div","devicePixelRatio","oc_userconfig","avatar","clearimageplaceholder","alt","entryTemplate","shareWith","shareType","appendTo","$list","topAction","concat","hyperlink","clickedList","has","clickedTarget","attrName","attrValue","_create","originalCss","display","originalTitle","tabIndex","role","insertBefore","removeAttr","$buttonrow","$button","enterCallback","keyCode","_setOptions","_createOverlay","_init","_trigger","_setOption","$title","_setSizes","$defaultButton","$closeButton","dialogTitle","closeCB","lessHeight","outerHeight","contentDiv","overlay","_destroyOverlay","widget","setEnterCallback","unsetEnterCallback","destroy","Template","vars","elem","_html","_build","o","outerHTML","r","toRgb","Color","mixPalette","steps","color1","color2","palette","step","ends","stepCalc","red","yellow","blue","palette1","palette2","palette3","maximum","finalInt","hashToInt","seed","rgb","placeholderText","map","word","elm","crossDomain","setRequestHeader","start","end","setSelectionRange","createTextRange","range","collapse","moveEnd","moveStart","select","showPassword","setState","checkbox","$clone","tabindex","autocomplete","cloneElement","insertAfter","outerWidth","contents","areaSelector","area","hideArea","slideDown","showArea","onpopstate","___CSS_LOADER_URL_IMPORT_0___","___CSS_LOADER_URL_IMPORT_1___","___CSS_LOADER_URL_IMPORT_2___","___CSS_LOADER_URL_IMPORT_3___","___CSS_LOADER_URL_IMPORT_4___","___CSS_LOADER_EXPORT___","___CSS_LOADER_URL_REPLACEMENT_0___","___CSS_LOADER_URL_REPLACEMENT_1___","___CSS_LOADER_URL_REPLACEMENT_2___","___CSS_LOADER_URL_REPLACEMENT_3___","___CSS_LOADER_URL_REPLACEMENT_4___","module","exports","depth0","helpers","partials","stack1","lookupProperty","propertyName","nullContext","program","noop","alias1","lambda","alias2","escapeExpression","helper","hooks","helperMissing","alias3","alias4","webpackContext","req","webpackContextResolve","__webpack_require__","code","__webpack_module_cache__","moduleId","cachedModule","loaded","__webpack_modules__","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","every","splice","getter","__esModule","d","definition","enumerable","globalThis","Function","obj","Symbol","toStringTag","nmd","baseURI","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","nc","__webpack_exports__"],"sourceRoot":""}