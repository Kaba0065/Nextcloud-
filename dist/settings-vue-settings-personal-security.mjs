/*! third party licenses: dist/vendor.LICENSE.txt */
import{bR as jt,bO as Lt,bD as vt,bE as W,aM as gt,X as Dt,b as Ft,k as zt,F as Pt,O as Kt,$ as Ot,aj as _t,R as Yt,bA as qt,aH as bt}from"./core-common.mjs";import{p as Wt}from"./chunks/v-tooltip.esm-CZvp28yr.mjs";import"./chunks/index-Ca0QcE7e.mjs";import{v as st}from"./chunks/toast-7xJhDYMn-BrG8uCqw.mjs";import{H as It}from"./chunks/style-3JoZM1Ml.mjs";import{d as $t,c as Jt,P as Qt}from"./chunks/pinia-CiO45M-I.mjs";import{l as V}from"./chunks/logger-DsZcYtCa.mjs";import{a9 as Nt,aa as Gt,ab as Ht,ac as Vt,ad as Zt,ae as Xt,af as te,ag as ee,ah as re,ai as ne,aj as oe,ak as ie,n as dt,al as Mt}from"./chunks/icons-BxSPavMS.mjs";import"./chunks/_setToString-D2g9rVjk.mjs";import"./chunks/_Set-Cq4kerQ7.mjs";import"./chunks/_isIterateeCall-cIIcpi4J.mjs";import"./chunks/isPlainObject-wZJk5EJL.mjs";const wt=jt("/settings/personal/authtokens"),ae=()=>new Promise(u=>{window.OC.dialogs.confirm(W("settings","Do you really want to wipe your data from this device?"),W("settings","Confirm wipe"),u,!0)});var kt=(u=>(u[u.TEMPORARY_TOKEN=0]="TEMPORARY_TOKEN",u[u.PERMANENT_TOKEN=1]="PERMANENT_TOKEN",u[u.WIPING_TOKEN=2]="WIPING_TOKEN",u))(kt||{});const Rt=$t("auth-token",{state(){return{tokens:Lt("settings","app_tokens",[])}},actions:{async updateToken(u){const{data:k}=await vt.put("".concat(wt,"/").concat(u.id),u);return k},async addToken(u){V.debug("Creating a new app token");try{await It();const{data:k}=await vt.post(wt,{name:u});return this.tokens.push(k.deviceToken),V.debug("App token created"),k}catch{return null}},async deleteToken(u){V.debug("Deleting app token",{token:u}),this.tokens=this.tokens.filter(({id:k})=>k!==u.id);try{return await vt.delete("".concat(wt,"/").concat(u.id)),V.debug("App token deleted"),!0}catch(k){V.error("Could not delete app token",{error:k}),st(W("settings","Could not delete the app token")),this.tokens.push(u)}return!1},async wipeToken(u){V.debug("Wiping app token",{token:u});try{if(await It(),!await ae()){V.debug("Wipe aborted by user");return}return await vt.post("".concat(wt,"/wipe/").concat(u.id)),V.debug("App token marked for wipe",{token:u}),u.type=2,u.canRename=!1,!0}catch(k){V.error("Could not wipe app token",{error:k}),st(W("settings","Error while wiping the device with the token"))}return!1},async renameToken(u,k){V.debug("renaming app token ".concat(u.id," from ").concat(u.name," to '").concat(k,"'"));const v=u.name;u.name=k;try{return await this.updateToken(u),V.debug("App token name updated"),!0}catch(S){V.error("Could not update app token name",{error:S}),st(W("settings","Error while updating device token name")),u.name=v}return!1},async setTokenScope(u,k,v){V.debug("Updating app token scope",{token:u,scope:k,value:v});const S=u.scope[k];u.scope[k]=v;try{return await this.updateToken(u),V.debug("app token scope updated"),!0}catch(p){V.error("could not update app token scope",{error:p}),st(W("settings","Error while updating device token scope")),u.scope[k]=S}return!1}}}),xt={ie:/(?:MSIE|Trident|Trident\/7.0; rv)[ :](\d+)/,edge:/^Mozilla\/5\.0 \([^)]+\) AppleWebKit\/[0-9.]+ \(KHTML, like Gecko\) Chrome\/[0-9.]+ (?:Mobile Safari|Safari)\/[0-9.]+ Edge\/[0-9.]+$/,firefox:/^Mozilla\/5\.0 \([^)]*(Windows|OS X|Linux)[^)]+\) Gecko\/[0-9.]+ Firefox\/(\d+)(?:\.\d)?$/,chrome:/^Mozilla\/5\.0 \([^)]*(Windows|OS X|Linux)[^)]+\) AppleWebKit\/[0-9.]+ \(KHTML, like Gecko\) Chrome\/(\d+)[0-9.]+ (?:Mobile Safari|Safari)\/[0-9.]+$/,safari:/^Mozilla\/5\.0 \([^)]*(Windows|OS X)[^)]+\) AppleWebKit\/[0-9.]+ \(KHTML, like Gecko\)(?: Version\/([0-9]+)[0-9.]+)? Safari\/[0-9.A-Z]+$/,androidChrome:/Android.*(?:; (.*) Build\/).*Chrome\/(\d+)[0-9.]+/,iphone:/ *CPU +iPhone +OS +([0-9]+)_(?:[0-9_])+ +like +Mac +OS +X */,ipad:/\(iPad; *CPU +OS +([0-9]+)_(?:[0-9_])+ +like +Mac +OS +X */,iosClient:/^Mozilla\/5\.0 \(iOS\) (?:ownCloud|Nextcloud)-iOS.*$/,androidClient:/^Mozilla\/5\.0 \(Android\) (?:ownCloud|Nextcloud)-android.*$/,iosTalkClient:/^Mozilla\/5\.0 \(iOS\) Nextcloud-Talk.*$/,androidTalkClient:/^Mozilla\/5\.0 \(Android\) Nextcloud-Talk.*$/,davx5:/DAV(?:droid|x5)\/([^ ]+)/,webPirate:/(Sailfish).*WebPirate\/(\d+)/,sailfishBrowser:/(Sailfish).*SailfishBrowser\/(\d+)/,neon:/Neon \d+\.\d+\.\d+\+\d+/},se={edge:"Microsoft Edge",firefox:"Firefox",chrome:"Google Chrome",safari:"Safari",androidChrome:W("settings","Google Chrome for Android"),iphone:"iPhone",ipad:"iPad",iosClient:W("settings","{productName} iOS app",{productName:window.oc_defaults.productName}),androidClient:W("settings","{productName} Android app",{productName:window.oc_defaults.productName}),iosTalkClient:W("settings","{productName} Talk for iOS",{productName:window.oc_defaults.productName}),androidTalkClient:W("settings","{productName} Talk for Android",{productName:window.oc_defaults.productName}),syncClient:W("settings","Sync client"),davx5:"DAVx5",webPirate:"WebPirate",sailfishBrowser:"SailfishBrowser",neon:"Neon"},ue=gt({name:"AuthToken",components:{NcActions:Dt,NcActionButton:Ft,NcActionCheckbox:zt,NcButton:Pt,NcDateTime:Kt,NcIconSvgWrapper:Ot,NcTextField:_t},props:{token:{type:Object,required:!0}},setup(){return{authTokenStore:Rt()}},data(){return{actionOpen:!1,renaming:!1,newName:"",oldName:"",mdiCheck:Nt}},computed:{canChangeScope(){return this.token.type===kt.PERMANENT_TOKEN},client(){var u;const k=this.token.name.match(/Mozilla\/5\.0 \((\w+)\) (?:mirall|csyncoC)\/(\d+\.\d+\.\d+)/);if(k)return{id:"syncClient",os:k[1],version:k[2]};for(const v in xt){const S=this.token.name.match(xt[v]);if(S)return{id:v,os:S[2]&&S[1],version:(u=S[2])!=null?u:S[1]}}return null},tokenLastActivity(){return this.token.lastActivity*1e3},tokenIcon(){var u;if(this.token.type===kt.PERMANENT_TOKEN)return Gt;switch((u=this.client)==null?void 0:u.id){case"edge":return ie;case"firefox":return oe;case"chrome":return ne;case"safari":return re;case"androidChrome":case"androidClient":case"androidTalkClient":return ee;case"iphone":case"iosClient":case"iosTalkClient":return te;case"ipad":return Xt;case"davx5":return Zt;case"syncClient":return Vt;case"webPirate":case"sailfishBrowser":default:return Ht}},tokenLabel(){if(this.token.current)return W("settings","This session");if(this.client===null)return this.token.name;const u=se[this.client.id];return this.client.os?W("settings","{client} - {version} ({system})",{client:u,system:this.client.os,version:this.client.version}):this.client.version?W("settings","{client} - {version}",{client:u,version:this.client.version}):u},wiping(){return this.token.type===kt.WIPING_TOKEN}},methods:{t:W,updateFileSystemScope(u){this.authTokenStore.setTokenScope(this.token,"filesystem",u)},startRename(){this.actionOpen=!1,this.oldName=this.token.name,this.newName=this.token.name,this.renaming=!0,this.$nextTick(()=>{this.$refs.input.select()})},cancelRename(){this.renaming=!1},revoke(){this.actionOpen=!1,this.authTokenStore.deleteToken(this.token)},rename(){this.renaming=!1,this.authTokenStore.renameToken(this.token,this.newName)},wipe(){this.actionOpen=!1,this.authTokenStore.wipeToken(this.token)}}});var fe=function(){var u=this,k=u._self._c;return u._self._setupProxy,k("tr",{class:["auth-token",{"auth-token--wiping":u.wiping}],attrs:{"data-id":u.token.id}},[k("td",{staticClass:"auth-token__name"},[k("NcIconSvgWrapper",{attrs:{path:u.tokenIcon}}),k("div",{staticClass:"auth-token__name-wrapper"},[u.token.canRename&&u.renaming?k("form",{staticClass:"auth-token__name-form",on:{submit:function(v){return v.preventDefault(),v.stopPropagation(),u.rename.apply(null,arguments)}}},[k("NcTextField",{ref:"input",attrs:{value:u.newName,label:u.t("settings","Device name"),"show-trailing-button":!0,"trailing-button-label":u.t("settings","Cancel renaming")},on:{"update:value":function(v){u.newName=v},"trailing-button-click":u.cancelRename,keyup:function(v){return!v.type.indexOf("key")&&u._k(v.keyCode,"esc",27,v.key,["Esc","Escape"])?null:u.cancelRename.apply(null,arguments)}}}),k("NcButton",{attrs:{"aria-label":u.t("settings","Save new name"),type:"tertiary","native-type":"submit"},scopedSlots:u._u([{key:"icon",fn:function(){return[k("NcIconSvgWrapper",{attrs:{path:u.mdiCheck}})]},proxy:!0}],null,!1,1018299955)})],1):k("span",[u._v(u._s(u.tokenLabel))]),u.wiping?k("span",{staticClass:"wiping-warning"},[u._v("("+u._s(u.t("settings","Marked for remote wipe"))+")")]):u._e()])],1),k("td",[k("NcDateTime",{staticClass:"auth-token__last-activity",attrs:{"ignore-seconds":!0,timestamp:u.tokenLastActivity}})],1),k("td",{staticClass:"auth-token__actions"},[u.token.current?u._e():k("NcActions",{attrs:{title:u.t("settings","Device settings"),"aria-label":u.t("settings","Device settings"),open:u.actionOpen},on:{"update:open":function(v){u.actionOpen=v}}},[u.canChangeScope?k("NcActionCheckbox",{attrs:{checked:u.token.scope.filesystem},on:{"update:checked":u.updateFileSystemScope}},[u._v(" "+u._s(u.t("settings","Allow filesystem access"))+" ")]):u._e(),u.token.canRename?k("NcActionButton",{attrs:{icon:"icon-rename"},on:{click:function(v){return v.stopPropagation(),v.preventDefault(),u.startRename.apply(null,arguments)}}},[u._v(" "+u._s(u.t("settings","Rename"))+" ")]):u._e(),u.token.canDelete?[u.token.type!==2?[k("NcActionButton",{attrs:{icon:"icon-delete"},on:{click:function(v){return v.stopPropagation(),v.preventDefault(),u.revoke.apply(null,arguments)}}},[u._v(" "+u._s(u.t("settings","Revoke"))+" ")]),k("NcActionButton",{attrs:{icon:"icon-delete"},on:{click:function(v){return v.stopPropagation(),v.preventDefault(),u.wipe.apply(null,arguments)}}},[u._v(" "+u._s(u.t("settings","Wipe device"))+" ")])]:u.token.type===2?k("NcActionButton",{attrs:{icon:"icon-delete",name:u.t("settings","Revoke")},on:{click:function(v){return v.stopPropagation(),v.preventDefault(),u.revoke.apply(null,arguments)}}},[u._v(" "+u._s(u.t("settings","Revoking this token might prevent the wiping of your device if it has not started the wipe yet."))+" ")]):u._e()]:u._e()],2)],1)])},ce=[],he=dt(ue,fe,ce,!1,null,"a28a758c",null,null);const le=he.exports,pe=gt({name:"AuthTokenList",components:{AuthToken:le},setup(){return{authTokenStore:Rt()}},computed:{sortedTokens(){return[...this.authTokenStore.tokens].sort((u,k)=>k.lastActivity-u.lastActivity)}},methods:{t:W}});var ge=function(){var u=this,k=u._self._c;return u._self._setupProxy,k("table",{staticClass:"token-list",attrs:{id:"app-tokens-table"}},[k("thead",[k("tr",[k("th",{staticClass:"token-list__header-device"},[u._v(" "+u._s(u.t("settings","Device"))+" ")]),k("th",{staticClass:"toke-list__header-activity"},[u._v(" "+u._s(u.t("settings","Last activity"))+" ")]),k("th",[k("span",{staticClass:"hidden-visually"},[u._v(" "+u._s(u.t("settings","Actions"))+" ")])])])]),k("tbody",{staticClass:"token-list__body"},u._l(u.sortedTokens,function(v){return k("AuthToken",{key:v.id,attrs:{token:v}})}),1)])},de=[],ye=dt(pe,ge,de,!1,null,"d4497ed1",null,null);const ve=ye.exports;function mt(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function we(u,k){return k={exports:{}},u(k,k.exports),k.exports}var Tt=we(function(u,k){(function(v){u.exports=v()})(function(){return function(){function v(S,p,y){function f(s,d){if(!p[s]){if(!S[s]){var o=typeof mt=="function"&&mt;if(!d&&o)return o(s,!0);if(a)return a(s,!0);var m=new Error("Cannot find module '"+s+"'");throw m.code="MODULE_NOT_FOUND",m}var E=p[s]={exports:{}};S[s][0].call(E.exports,function(P){var _=S[s][1][P];return f(_||P)},E,E.exports,v,S,p,y)}return p[s].exports}for(var a=typeof mt=="function"&&mt,i=0;i<y.length;i++)f(y[i]);return f}return v}()({1:[function(v,S,p){S.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}},{}],2:[function(v,S,p){var y=v("./utils").getSymbolSize;p.getRowColCoords=function(f){if(f===1)return[];for(var a=Math.floor(f/7)+2,i=y(f),s=i===145?26:Math.ceil((i-13)/(2*a-2))*2,d=[i-7],o=1;o<a-1;o++)d[o]=d[o-1]-s;return d.push(6),d.reverse()},p.getPositions=function(f){for(var a=[],i=p.getRowColCoords(f),s=i.length,d=0;d<s;d++)for(var o=0;o<s;o++)d===0&&o===0||d===0&&o===s-1||d===s-1&&o===0||a.push([i[d],i[o]]);return a}},{"./utils":21}],3:[function(v,S,p){var y=v("./mode"),f=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(i){this.mode=y.ALPHANUMERIC,this.data=i}a.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(i){var s;for(s=0;s+2<=this.data.length;s+=2){var d=f.indexOf(this.data[s])*45;d+=f.indexOf(this.data[s+1]),i.put(d,11)}this.data.length%2&&i.put(f.indexOf(this.data[s]),6)},S.exports=a},{"./mode":14}],4:[function(v,S,p){function y(){this.buffer=[],this.length=0}y.prototype={get:function(f){var a=Math.floor(f/8);return(this.buffer[a]>>>7-f%8&1)===1},put:function(f,a){for(var i=0;i<a;i++)this.putBit((f>>>a-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(f){var a=Math.floor(this.length/8);this.buffer.length<=a&&this.buffer.push(0),f&&(this.buffer[a]|=128>>>this.length%8),this.length++}},S.exports=y},{}],5:[function(v,S,p){var y=v("../utils/buffer");function f(a){if(!a||a<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=a,this.data=y.alloc(a*a),this.reservedBit=y.alloc(a*a)}f.prototype.set=function(a,i,s,d){var o=a*this.size+i;this.data[o]=s,d&&(this.reservedBit[o]=!0)},f.prototype.get=function(a,i){return this.data[a*this.size+i]},f.prototype.xor=function(a,i,s){this.data[a*this.size+i]^=s},f.prototype.isReserved=function(a,i){return this.reservedBit[a*this.size+i]},S.exports=f},{"../utils/buffer":28}],6:[function(v,S,p){var y=v("../utils/buffer"),f=v("./mode");function a(i){this.mode=f.BYTE,this.data=y.from(i)}a.getBitsLength=function(i){return i*8},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(i){for(var s=0,d=this.data.length;s<d;s++)i.put(this.data[s],8)},S.exports=a},{"../utils/buffer":28,"./mode":14}],7:[function(v,S,p){var y=v("./error-correction-level"),f=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];p.getBlocksCount=function(i,s){switch(s){case y.L:return f[(i-1)*4+0];case y.M:return f[(i-1)*4+1];case y.Q:return f[(i-1)*4+2];case y.H:return f[(i-1)*4+3];default:return}},p.getTotalCodewordsCount=function(i,s){switch(s){case y.L:return a[(i-1)*4+0];case y.M:return a[(i-1)*4+1];case y.Q:return a[(i-1)*4+2];case y.H:return a[(i-1)*4+3];default:return}}},{"./error-correction-level":8}],8:[function(v,S,p){p.L={bit:1},p.M={bit:0},p.Q={bit:3},p.H={bit:2};function y(f){if(typeof f!="string")throw new Error("Param is not a string");var a=f.toLowerCase();switch(a){case"l":case"low":return p.L;case"m":case"medium":return p.M;case"q":case"quartile":return p.Q;case"h":case"high":return p.H;default:throw new Error("Unknown EC Level: "+f)}}p.isValid=function(f){return f&&typeof f.bit<"u"&&f.bit>=0&&f.bit<4},p.from=function(f,a){if(p.isValid(f))return f;try{return y(f)}catch{return a}}},{}],9:[function(v,S,p){var y=v("./utils").getSymbolSize,f=7;p.getPositions=function(a){var i=y(a);return[[0,0],[i-f,0],[0,i-f]]}},{"./utils":21}],10:[function(v,S,p){var y=v("./utils"),f=1335,a=21522,i=y.getBCHDigit(f);p.getEncodedBits=function(s,d){for(var o=s.bit<<3|d,m=o<<10;y.getBCHDigit(m)-i>=0;)m^=f<<y.getBCHDigit(m)-i;return(o<<10|m)^a}},{"./utils":21}],11:[function(v,S,p){var y=v("../utils/buffer"),f=y.alloc(512),a=y.alloc(256);(function(){for(var i=1,s=0;s<255;s++)f[s]=i,a[i]=s,i<<=1,i&256&&(i^=285);for(s=255;s<512;s++)f[s]=f[s-255]})(),p.log=function(i){if(i<1)throw new Error("log("+i+")");return a[i]},p.exp=function(i){return f[i]},p.mul=function(i,s){return i===0||s===0?0:f[a[i]+a[s]]}},{"../utils/buffer":28}],12:[function(v,S,p){var y=v("./mode"),f=v("./utils");function a(i){this.mode=y.KANJI,this.data=i}a.getBitsLength=function(i){return i*13},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(i){var s;for(s=0;s<this.data.length;s++){var d=f.toSJIS(this.data[s]);if(d>=33088&&d<=40956)d-=33088;else if(d>=57408&&d<=60351)d-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+"\nMake sure your charset is UTF-8");d=(d>>>8&255)*192+(d&255),i.put(d,13)}},S.exports=a},{"./mode":14,"./utils":21}],13:[function(v,S,p){p.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var y={N1:3,N2:3,N3:40,N4:10};p.isValid=function(a){return a!=null&&a!==""&&!isNaN(a)&&a>=0&&a<=7},p.from=function(a){return p.isValid(a)?parseInt(a,10):void 0},p.getPenaltyN1=function(a){for(var i=a.size,s=0,d=0,o=0,m=null,E=null,P=0;P<i;P++){d=o=0,m=E=null;for(var _=0;_<i;_++){var I=a.get(P,_);I===m?d++:(d>=5&&(s+=y.N1+(d-5)),m=I,d=1),I=a.get(_,P),I===E?o++:(o>=5&&(s+=y.N1+(o-5)),E=I,o=1)}d>=5&&(s+=y.N1+(d-5)),o>=5&&(s+=y.N1+(o-5))}return s},p.getPenaltyN2=function(a){for(var i=a.size,s=0,d=0;d<i-1;d++)for(var o=0;o<i-1;o++){var m=a.get(d,o)+a.get(d,o+1)+a.get(d+1,o)+a.get(d+1,o+1);(m===4||m===0)&&s++}return s*y.N2},p.getPenaltyN3=function(a){for(var i=a.size,s=0,d=0,o=0,m=0;m<i;m++){d=o=0;for(var E=0;E<i;E++)d=d<<1&2047|a.get(m,E),E>=10&&(d===1488||d===93)&&s++,o=o<<1&2047|a.get(E,m),E>=10&&(o===1488||o===93)&&s++}return s*y.N3},p.getPenaltyN4=function(a){for(var i=0,s=a.data.length,d=0;d<s;d++)i+=a.data[d];var o=Math.abs(Math.ceil(i*100/s/5)-10);return o*y.N4};function f(a,i,s){switch(a){case p.Patterns.PATTERN000:return(i+s)%2===0;case p.Patterns.PATTERN001:return i%2===0;case p.Patterns.PATTERN010:return s%3===0;case p.Patterns.PATTERN011:return(i+s)%3===0;case p.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case p.Patterns.PATTERN101:return i*s%2+i*s%3===0;case p.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case p.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+a)}}p.applyMask=function(a,i){for(var s=i.size,d=0;d<s;d++)for(var o=0;o<s;o++)i.isReserved(o,d)||i.xor(o,d,f(a,o,d))},p.getBestMask=function(a,i){for(var s=Object.keys(p.Patterns).length,d=0,o=1/0,m=0;m<s;m++){i(m),p.applyMask(m,a);var E=p.getPenaltyN1(a)+p.getPenaltyN2(a)+p.getPenaltyN3(a)+p.getPenaltyN4(a);p.applyMask(m,a),E<o&&(o=E,d=m)}return d}},{}],14:[function(v,S,p){var y=v("./version-check"),f=v("./regex");p.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},p.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},p.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},p.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},p.MIXED={bit:-1},p.getCharCountIndicator=function(i,s){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!y.isValid(s))throw new Error("Invalid version: "+s);return s>=1&&s<10?i.ccBits[0]:s<27?i.ccBits[1]:i.ccBits[2]},p.getBestModeForData=function(i){return f.testNumeric(i)?p.NUMERIC:f.testAlphanumeric(i)?p.ALPHANUMERIC:f.testKanji(i)?p.KANJI:p.BYTE},p.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},p.isValid=function(i){return i&&i.bit&&i.ccBits};function a(i){if(typeof i!="string")throw new Error("Param is not a string");var s=i.toLowerCase();switch(s){case"numeric":return p.NUMERIC;case"alphanumeric":return p.ALPHANUMERIC;case"kanji":return p.KANJI;case"byte":return p.BYTE;default:throw new Error("Unknown mode: "+i)}}p.from=function(i,s){if(p.isValid(i))return i;try{return a(i)}catch{return s}}},{"./regex":19,"./version-check":22}],15:[function(v,S,p){var y=v("./mode");function f(a){this.mode=y.NUMERIC,this.data=a.toString()}f.getBitsLength=function(a){return 10*Math.floor(a/3)+(a%3?a%3*3+1:0)},f.prototype.getLength=function(){return this.data.length},f.prototype.getBitsLength=function(){return f.getBitsLength(this.data.length)},f.prototype.write=function(a){var i,s,d;for(i=0;i+3<=this.data.length;i+=3)s=this.data.substr(i,3),d=parseInt(s,10),a.put(d,10);var o=this.data.length-i;o>0&&(s=this.data.substr(i),d=parseInt(s,10),a.put(d,o*3+1))},S.exports=f},{"./mode":14}],16:[function(v,S,p){var y=v("../utils/buffer"),f=v("./galois-field");p.mul=function(a,i){for(var s=y.alloc(a.length+i.length-1),d=0;d<a.length;d++)for(var o=0;o<i.length;o++)s[d+o]^=f.mul(a[d],i[o]);return s},p.mod=function(a,i){for(var s=y.from(a);s.length-i.length>=0;){for(var d=s[0],o=0;o<i.length;o++)s[o]^=f.mul(i[o],d);for(var m=0;m<s.length&&s[m]===0;)m++;s=s.slice(m)}return s},p.generateECPolynomial=function(a){for(var i=y.from([1]),s=0;s<a;s++)i=p.mul(i,[1,f.exp(s)]);return i}},{"../utils/buffer":28,"./galois-field":11}],17:[function(v,S,p){var y=v("../utils/buffer"),f=v("./utils"),a=v("./error-correction-level"),i=v("./bit-buffer"),s=v("./bit-matrix"),d=v("./alignment-pattern"),o=v("./finder-pattern"),m=v("./mask-pattern"),E=v("./error-correction-code"),P=v("./reed-solomon-encoder"),_=v("./version"),I=v("./format-info"),R=v("./mode"),C=v("./segments"),N=v("isarray");function M(O,U){for(var z=O.size,x=o.getPositions(U),F=0;F<x.length;F++)for(var Y=x[F][0],D=x[F][1],K=-1;K<=7;K++)if(!(Y+K<=-1||z<=Y+K))for(var q=-1;q<=7;q++)D+q<=-1||z<=D+q||(K>=0&&K<=6&&(q===0||q===6)||q>=0&&q<=6&&(K===0||K===6)||K>=2&&K<=4&&q>=2&&q<=4?O.set(Y+K,D+q,!0,!0):O.set(Y+K,D+q,!1,!0))}function B(O){for(var U=O.size,z=8;z<U-8;z++){var x=z%2===0;O.set(z,6,x,!0),O.set(6,z,x,!0)}}function g(O,U){for(var z=d.getPositions(U),x=0;x<z.length;x++)for(var F=z[x][0],Y=z[x][1],D=-2;D<=2;D++)for(var K=-2;K<=2;K++)D===-2||D===2||K===-2||K===2||D===0&&K===0?O.set(F+D,Y+K,!0,!0):O.set(F+D,Y+K,!1,!0)}function c(O,U){for(var z=O.size,x=_.getEncodedBits(U),F,Y,D,K=0;K<18;K++)F=Math.floor(K/3),Y=K%3+z-8-3,D=(x>>K&1)===1,O.set(F,Y,D,!0),O.set(Y,F,D,!0)}function l(O,U,z){var x=O.size,F=I.getEncodedBits(U,z),Y,D;for(Y=0;Y<15;Y++)D=(F>>Y&1)===1,Y<6?O.set(Y,8,D,!0):Y<8?O.set(Y+1,8,D,!0):O.set(x-15+Y,8,D,!0),Y<8?O.set(8,x-Y-1,D,!0):Y<9?O.set(8,15-Y-1+1,D,!0):O.set(8,15-Y-1,D,!0);O.set(x-8,8,1,!0)}function A(O,U){for(var z=O.size,x=-1,F=z-1,Y=7,D=0,K=z-1;K>0;K-=2)for(K===6&&K--;;){for(var q=0;q<2;q++)if(!O.isReserved(F,K-q)){var ot=!1;D<U.length&&(ot=(U[D]>>>Y&1)===1),O.set(F,K-q,ot),Y--,Y===-1&&(D++,Y=7)}if(F+=x,F<0||z<=F){F-=x,x=-x;break}}}function T(O,U,z){var x=new i;z.forEach(function(ot){x.put(ot.mode.bit,4),x.put(ot.getLength(),R.getCharCountIndicator(ot.mode,O)),ot.write(x)});var F=f.getSymbolTotalCodewords(O),Y=E.getTotalCodewordsCount(O,U),D=(F-Y)*8;for(x.getLengthInBits()+4<=D&&x.put(0,4);x.getLengthInBits()%8!==0;)x.putBit(0);for(var K=(D-x.getLengthInBits())/8,q=0;q<K;q++)x.put(q%2?17:236,8);return j(x,O,U)}function j(O,U,z){for(var x=f.getSymbolTotalCodewords(U),F=E.getTotalCodewordsCount(U,z),Y=x-F,D=E.getBlocksCount(U,z),K=x%D,q=D-K,ot=Math.floor(x/D),Z=Math.floor(Y/D),Ct=Z+1,Q=ot-Z,et=new P(Q),ut=0,at=new Array(D),ft=new Array(D),ct=0,At=y.from(O.buffer),it=0;it<D;it++){var ht=it<q?Z:Ct;at[it]=At.slice(ut,ut+ht),ft[it]=et.encode(at[it]),ut+=ht,ct=Math.max(ct,ht)}var lt=y.alloc(x),pt=0,nt,X;for(nt=0;nt<ct;nt++)for(X=0;X<D;X++)nt<at[X].length&&(lt[pt++]=at[X][nt]);for(nt=0;nt<Q;nt++)for(X=0;X<D;X++)lt[pt++]=ft[X][nt];return lt}function H(O,U,z,x){var F;if(N(O))F=C.fromArray(O);else if(typeof O=="string"){var Y=U;if(!Y){var D=C.rawSplit(O);Y=_.getBestVersionForData(D,z)}F=C.fromString(O,Y||40)}else throw new Error("Invalid data");var K=_.getBestVersionForData(F,z);if(!K)throw new Error("The amount of data is too big to be stored in a QR Code");if(!U)U=K;else if(U<K)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+K+".\n");var q=T(U,z,F),ot=f.getSymbolSize(U),Z=new s(ot);return M(Z,U),B(Z),g(Z,U),l(Z,z,0),U>=7&&c(Z,U),A(Z,q),isNaN(x)&&(x=m.getBestMask(Z,l.bind(null,Z,z))),m.applyMask(x,Z),l(Z,z,x),{modules:Z,version:U,errorCorrectionLevel:z,maskPattern:x,segments:F}}p.create=function(O,U){if(typeof O>"u"||O==="")throw new Error("No input text");var z=a.M,x,F;return typeof U<"u"&&(z=a.from(U.errorCorrectionLevel,a.M),x=_.from(U.version),F=m.from(U.maskPattern),U.toSJISFunc&&f.setToSJISFunction(U.toSJISFunc)),H(O,x,z,F)}},{"../utils/buffer":28,"./alignment-pattern":2,"./bit-buffer":4,"./bit-matrix":5,"./error-correction-code":7,"./error-correction-level":8,"./finder-pattern":9,"./format-info":10,"./mask-pattern":13,"./mode":14,"./reed-solomon-encoder":18,"./segments":20,"./utils":21,"./version":23,isarray:33}],18:[function(v,S,p){var y=v("../utils/buffer"),f=v("./polynomial"),a=v("buffer").Buffer;function i(s){this.genPoly=void 0,this.degree=s,this.degree&&this.initialize(this.degree)}i.prototype.initialize=function(s){this.degree=s,this.genPoly=f.generateECPolynomial(this.degree)},i.prototype.encode=function(s){if(!this.genPoly)throw new Error("Encoder not initialized");var d=y.alloc(this.degree),o=a.concat([s,d],s.length+this.degree),m=f.mod(o,this.genPoly),E=this.degree-m.length;if(E>0){var P=y.alloc(this.degree);return m.copy(P,E),P}return m},S.exports=i},{"../utils/buffer":28,"./polynomial":16,buffer:30}],19:[function(v,S,p){var y="[0-9]+",f="[A-Z $%*+\\-./:]+",a="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";a=a.replace(/u/g,"\\u");var i="(?:(?![A-Z0-9 $%*+\\-./:]|"+a+")(?:.|[\r\n]))+";p.KANJI=new RegExp(a,"g"),p.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),p.BYTE=new RegExp(i,"g"),p.NUMERIC=new RegExp(y,"g"),p.ALPHANUMERIC=new RegExp(f,"g");var s=new RegExp("^"+a+"$"),d=new RegExp("^"+y+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");p.testKanji=function(m){return s.test(m)},p.testNumeric=function(m){return d.test(m)},p.testAlphanumeric=function(m){return o.test(m)}},{}],20:[function(v,S,p){var y=v("./mode"),f=v("./numeric-data"),a=v("./alphanumeric-data"),i=v("./byte-data"),s=v("./kanji-data"),d=v("./regex"),o=v("./utils"),m=v("dijkstrajs");function E(B){return unescape(encodeURIComponent(B)).length}function P(B,g,c){for(var l=[],A;(A=B.exec(c))!==null;)l.push({data:A[0],index:A.index,mode:g,length:A[0].length});return l}function _(B){var g=P(d.NUMERIC,y.NUMERIC,B),c=P(d.ALPHANUMERIC,y.ALPHANUMERIC,B),l,A;o.isKanjiModeEnabled()?(l=P(d.BYTE,y.BYTE,B),A=P(d.KANJI,y.KANJI,B)):(l=P(d.BYTE_KANJI,y.BYTE,B),A=[]);var T=g.concat(c,l,A);return T.sort(function(j,H){return j.index-H.index}).map(function(j){return{data:j.data,mode:j.mode,length:j.length}})}function I(B,g){switch(g){case y.NUMERIC:return f.getBitsLength(B);case y.ALPHANUMERIC:return a.getBitsLength(B);case y.KANJI:return s.getBitsLength(B);case y.BYTE:return i.getBitsLength(B)}}function R(B){return B.reduce(function(g,c){var l=g.length-1>=0?g[g.length-1]:null;return l&&l.mode===c.mode?(g[g.length-1].data+=c.data,g):(g.push(c),g)},[])}function C(B){for(var g=[],c=0;c<B.length;c++){var l=B[c];switch(l.mode){case y.NUMERIC:g.push([l,{data:l.data,mode:y.ALPHANUMERIC,length:l.length},{data:l.data,mode:y.BYTE,length:l.length}]);break;case y.ALPHANUMERIC:g.push([l,{data:l.data,mode:y.BYTE,length:l.length}]);break;case y.KANJI:g.push([l,{data:l.data,mode:y.BYTE,length:E(l.data)}]);break;case y.BYTE:g.push([{data:l.data,mode:y.BYTE,length:E(l.data)}])}}return g}function N(B,g){for(var c={},l={start:{}},A=["start"],T=0;T<B.length;T++){for(var j=B[T],H=[],O=0;O<j.length;O++){var U=j[O],z=""+T+O;H.push(z),c[z]={node:U,lastCount:0},l[z]={};for(var x=0;x<A.length;x++){var F=A[x];c[F]&&c[F].node.mode===U.mode?(l[F][z]=I(c[F].lastCount+U.length,U.mode)-I(c[F].lastCount,U.mode),c[F].lastCount+=U.length):(c[F]&&(c[F].lastCount=U.length),l[F][z]=I(U.length,U.mode)+4+y.getCharCountIndicator(U.mode,g))}}A=H}for(x=0;x<A.length;x++)l[A[x]].end=0;return{map:l,table:c}}function M(B,g){var c,l=y.getBestModeForData(B);if(c=y.from(g,l),c!==y.BYTE&&c.bit<l.bit)throw new Error('"'+B+'" cannot be encoded with mode '+y.toString(c)+".\n Suggested mode is: "+y.toString(l));switch(c===y.KANJI&&!o.isKanjiModeEnabled()&&(c=y.BYTE),c){case y.NUMERIC:return new f(B);case y.ALPHANUMERIC:return new a(B);case y.KANJI:return new s(B);case y.BYTE:return new i(B)}}p.fromArray=function(B){return B.reduce(function(g,c){return typeof c=="string"?g.push(M(c,null)):c.data&&g.push(M(c.data,c.mode)),g},[])},p.fromString=function(B,g){for(var c=_(B,o.isKanjiModeEnabled()),l=C(c),A=N(l,g),T=m.find_path(A.map,"start","end"),j=[],H=1;H<T.length-1;H++)j.push(A.table[T[H]].node);return p.fromArray(R(j))},p.rawSplit=function(B){return p.fromArray(_(B,o.isKanjiModeEnabled()))}},{"./alphanumeric-data":3,"./byte-data":6,"./kanji-data":12,"./mode":14,"./numeric-data":15,"./regex":19,"./utils":21,dijkstrajs:31}],21:[function(v,S,p){var y,f=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];p.getSymbolSize=function(a){if(!a)throw new Error('"version" cannot be null or undefined');if(a<1||a>40)throw new Error('"version" should be in range from 1 to 40');return a*4+17},p.getSymbolTotalCodewords=function(a){return f[a]},p.getBCHDigit=function(a){for(var i=0;a!==0;)i++,a>>>=1;return i},p.setToSJISFunction=function(a){if(typeof a!="function")throw new Error('"toSJISFunc" is not a valid function.');y=a},p.isKanjiModeEnabled=function(){return typeof y<"u"},p.toSJIS=function(a){return y(a)}},{}],22:[function(v,S,p){p.isValid=function(y){return!isNaN(y)&&y>=1&&y<=40}},{}],23:[function(v,S,p){var y=v("./utils"),f=v("./error-correction-code"),a=v("./error-correction-level"),i=v("./mode"),s=v("./version-check"),d=v("isarray"),o=7973,m=y.getBCHDigit(o);function E(R,C,N){for(var M=1;M<=40;M++)if(C<=p.getCapacity(M,N,R))return M}function P(R,C){return i.getCharCountIndicator(R,C)+4}function _(R,C){var N=0;return R.forEach(function(M){var B=P(M.mode,C);N+=B+M.getBitsLength()}),N}function I(R,C){for(var N=1;N<=40;N++){var M=_(R,N);if(M<=p.getCapacity(N,C,i.MIXED))return N}}p.from=function(R,C){return s.isValid(R)?parseInt(R,10):C},p.getCapacity=function(R,C,N){if(!s.isValid(R))throw new Error("Invalid QR Code version");typeof N>"u"&&(N=i.BYTE);var M=y.getSymbolTotalCodewords(R),B=f.getTotalCodewordsCount(R,C),g=(M-B)*8;if(N===i.MIXED)return g;var c=g-P(N,R);switch(N){case i.NUMERIC:return Math.floor(c/10*3);case i.ALPHANUMERIC:return Math.floor(c/11*2);case i.KANJI:return Math.floor(c/13);case i.BYTE:default:return Math.floor(c/8)}},p.getBestVersionForData=function(R,C){var N,M=a.from(C,a.M);if(d(R)){if(R.length>1)return I(R,M);if(R.length===0)return 1;N=R[0]}else N=R;return E(N.mode,N.getLength(),M)},p.getEncodedBits=function(R){if(!s.isValid(R)||R<7)throw new Error("Invalid QR Code version");for(var C=R<<12;y.getBCHDigit(C)-m>=0;)C^=o<<y.getBCHDigit(C)-m;return R<<12|C}},{"./error-correction-code":7,"./error-correction-level":8,"./mode":14,"./utils":21,"./version-check":22,isarray:33}],24:[function(v,S,p){var y=v("./can-promise"),f=v("./core/qrcode"),a=v("./renderer/canvas"),i=v("./renderer/svg-tag.js");function s(d,o,m,E,P){var _=[].slice.call(arguments,1),I=_.length,R=typeof _[I-1]=="function";if(!R&&!y())throw new Error("Callback required as last argument");if(R){if(I<2)throw new Error("Too few arguments provided");I===2?(P=m,m=o,o=E=void 0):I===3&&(o.getContext&&typeof P>"u"?(P=E,E=void 0):(P=E,E=m,m=o,o=void 0))}else{if(I<1)throw new Error("Too few arguments provided");return I===1?(m=o,o=E=void 0):I===2&&!o.getContext&&(E=m,m=o,o=void 0),new Promise(function(N,M){try{var B=f.create(m,E);N(d(B,o,E))}catch(g){M(g)}})}try{var C=f.create(m,E);P(null,d(C,o,E))}catch(N){P(N)}}p.create=f.create,p.toCanvas=s.bind(null,a.render),p.toDataURL=s.bind(null,a.renderToDataURL),p.toString=s.bind(null,function(d,o,m){return i.render(d,m)})},{"./can-promise":1,"./core/qrcode":17,"./renderer/canvas":25,"./renderer/svg-tag.js":26}],25:[function(v,S,p){var y=v("./utils");function f(i,s,d){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=d,s.width=d,s.style.height=d+"px",s.style.width=d+"px"}function a(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}p.render=function(i,s,d){var o=d,m=s;typeof o>"u"&&(!s||!s.getContext)&&(o=s,s=void 0),s||(m=a()),o=y.getOptions(o);var E=y.getImageWidth(i.modules.size,o),P=m.getContext("2d"),_=P.createImageData(E,E);return y.qrToImageData(_.data,i,o),f(P,m,E),P.putImageData(_,0,0),m},p.renderToDataURL=function(i,s,d){var o=d;typeof o>"u"&&(!s||!s.getContext)&&(o=s,s=void 0),o||(o={});var m=p.render(i,s,o),E=o.type||"image/png",P=o.rendererOpts||{};return m.toDataURL(E,P.quality)}},{"./utils":27}],26:[function(v,S,p){var y=v("./utils");function f(s,d){var o=s.a/255,m=d+'="'+s.hex+'"';return o<1?m+" "+d+'-opacity="'+o.toFixed(2).slice(1)+'"':m}function a(s,d,o){var m=s+d;return typeof o<"u"&&(m+=" "+o),m}function i(s,d,o){for(var m="",E=0,P=!1,_=0,I=0;I<s.length;I++){var R=Math.floor(I%d),C=Math.floor(I/d);!R&&!P&&(P=!0),s[I]?(_++,I>0&&R>0&&s[I-1]||(m+=P?a("M",R+o,.5+C+o):a("m",E,0),E=0,P=!1),R+1<d&&s[I+1]||(m+=a("h",_),_=0)):E++}return m}p.render=function(s,d,o){var m=y.getOptions(d),E=s.modules.size,P=s.modules.data,_=E+m.margin*2,I=m.color.light.a?"<path "+f(m.color.light,"fill")+' d="M0 0h'+_+"v"+_+'H0z"/>':"",R="<path "+f(m.color.dark,"stroke")+' d="'+i(P,E,m.margin)+'"/>',C='viewBox="0 0 '+_+" "+_+'"',N=m.width?'width="'+m.width+'" height="'+m.width+'" ':"",M='<svg xmlns="http://www.w3.org/2000/svg" '+N+C+' shape-rendering="crispEdges">'+I+R+"</svg>\n";return typeof o=="function"&&o(null,M),M}},{"./utils":27}],27:[function(v,S,p){function y(f){if(typeof f=="number"&&(f=f.toString()),typeof f!="string")throw new Error("Color should be defined as hex string");var a=f.slice().replace("#","").split("");if(a.length<3||a.length===5||a.length>8)throw new Error("Invalid hex color: "+f);(a.length===3||a.length===4)&&(a=Array.prototype.concat.apply([],a.map(function(s){return[s,s]}))),a.length===6&&a.push("F","F");var i=parseInt(a.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+a.slice(0,6).join("")}}p.getOptions=function(f){f||(f={}),f.color||(f.color={});var a=typeof f.margin>"u"||f.margin===null||f.margin<0?4:f.margin,i=f.width&&f.width>=21?f.width:void 0,s=f.scale||4;return{width:i,scale:i?4:s,margin:a,color:{dark:y(f.color.dark||"#000000ff"),light:y(f.color.light||"#ffffffff")},type:f.type,rendererOpts:f.rendererOpts||{}}},p.getScale=function(f,a){return a.width&&a.width>=f+a.margin*2?a.width/(f+a.margin*2):a.scale},p.getImageWidth=function(f,a){var i=p.getScale(f,a);return Math.floor((f+a.margin*2)*i)},p.qrToImageData=function(f,a,i){for(var s=a.modules.size,d=a.modules.data,o=p.getScale(s,i),m=Math.floor((s+i.margin*2)*o),E=i.margin*o,P=[i.color.light,i.color.dark],_=0;_<m;_++)for(var I=0;I<m;I++){var R=(_*m+I)*4,C=i.color.light;if(_>=E&&I>=E&&_<m-E&&I<m-E){var N=Math.floor((_-E)/o),M=Math.floor((I-E)/o);C=P[d[N*s+M]?1:0]}f[R++]=C.r,f[R++]=C.g,f[R++]=C.b,f[R]=C.a}}},{}],28:[function(v,S,p){var y=v("isarray");function f(){try{var g=new Uint8Array(1);return g.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},g.foo()===42}catch{return!1}}i.TYPED_ARRAY_SUPPORT=f();var a=i.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function i(g,c,l){return!i.TYPED_ARRAY_SUPPORT&&!(this instanceof i)?new i(g,c,l):typeof g=="number"?m(this,g):B(this,g,c,l)}i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}));function s(g){if(g>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return g|0}function d(g){return g!==g}function o(g,c){var l;return i.TYPED_ARRAY_SUPPORT?(l=new Uint8Array(c),l.__proto__=i.prototype):(l=g,l===null&&(l=new i(c)),l.length=c),l}function m(g,c){var l=o(g,c<0?0:s(c)|0);if(!i.TYPED_ARRAY_SUPPORT)for(var A=0;A<c;++A)l[A]=0;return l}function E(g,c){var l=C(c)|0,A=o(g,l),T=A.write(c);return T!==l&&(A=A.slice(0,T)),A}function P(g,c){for(var l=c.length<0?0:s(c.length)|0,A=o(g,l),T=0;T<l;T+=1)A[T]=c[T]&255;return A}function _(g,c,l,A){if(l<0||c.byteLength<l)throw new RangeError("'offset' is out of bounds");if(c.byteLength<l+(A||0))throw new RangeError("'length' is out of bounds");var T;return l===void 0&&A===void 0?T=new Uint8Array(c):A===void 0?T=new Uint8Array(c,l):T=new Uint8Array(c,l,A),i.TYPED_ARRAY_SUPPORT?T.__proto__=i.prototype:T=P(g,T),T}function I(g,c){if(i.isBuffer(c)){var l=s(c.length)|0,A=o(g,l);return A.length===0||c.copy(A,0,0,l),A}if(c){if(typeof ArrayBuffer<"u"&&c.buffer instanceof ArrayBuffer||"length"in c)return typeof c.length!="number"||d(c.length)?o(g,0):P(g,c);if(c.type==="Buffer"&&Array.isArray(c.data))return P(g,c.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function R(g,c){c=c||1/0;for(var l,A=g.length,T=null,j=[],H=0;H<A;++H){if(l=g.charCodeAt(H),l>55295&&l<57344){if(!T){if(l>56319){(c-=3)>-1&&j.push(239,191,189);continue}else if(H+1===A){(c-=3)>-1&&j.push(239,191,189);continue}T=l;continue}if(l<56320){(c-=3)>-1&&j.push(239,191,189),T=l;continue}l=(T-55296<<10|l-56320)+65536}else T&&(c-=3)>-1&&j.push(239,191,189);if(T=null,l<128){if((c-=1)<0)break;j.push(l)}else if(l<2048){if((c-=2)<0)break;j.push(l>>6|192,l&63|128)}else if(l<65536){if((c-=3)<0)break;j.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((c-=4)<0)break;j.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return j}function C(g){if(i.isBuffer(g))return g.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(g)||g instanceof ArrayBuffer))return g.byteLength;typeof g!="string"&&(g=""+g);var c=g.length;return c===0?0:R(g).length}function N(g,c,l,A){for(var T=0;T<A&&!(T+l>=c.length||T>=g.length);++T)c[T+l]=g[T];return T}function M(g,c,l,A){return N(R(c,g.length-l),g,l,A)}function B(g,c,l,A){if(typeof c=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&c instanceof ArrayBuffer?_(g,c,l,A):typeof c=="string"?E(g,c):I(g,c)}i.prototype.write=function(g,c,l){c===void 0?(l=this.length,c=0):l===void 0&&typeof c=="string"?(l=this.length,c=0):isFinite(c)&&(c=c|0,isFinite(l)?l=l|0:l=void 0);var A=this.length-c;if((l===void 0||l>A)&&(l=A),g.length>0&&(l<0||c<0)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");return M(this,g,c,l)},i.prototype.slice=function(g,c){var l=this.length;g=~~g,c=c===void 0?l:~~c,g<0?(g+=l,g<0&&(g=0)):g>l&&(g=l),c<0?(c+=l,c<0&&(c=0)):c>l&&(c=l),c<g&&(c=g);var A;if(i.TYPED_ARRAY_SUPPORT)A=this.subarray(g,c),A.__proto__=i.prototype;else{var T=c-g;A=new i(T,void 0);for(var j=0;j<T;++j)A[j]=this[j+g]}return A},i.prototype.copy=function(g,c,l,A){if(l||(l=0),!A&&A!==0&&(A=this.length),c>=g.length&&(c=g.length),c||(c=0),A>0&&A<l&&(A=l),A===l||g.length===0||this.length===0)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(l<0||l>=this.length)throw new RangeError("sourceStart out of bounds");if(A<0)throw new RangeError("sourceEnd out of bounds");A>this.length&&(A=this.length),g.length-c<A-l&&(A=g.length-c+l);var T=A-l,j;if(this===g&&l<c&&c<A)for(j=T-1;j>=0;--j)g[j+c]=this[j+l];else if(T<1e3||!i.TYPED_ARRAY_SUPPORT)for(j=0;j<T;++j)g[j+c]=this[j+l];else Uint8Array.prototype.set.call(g,this.subarray(l,l+T),c);return T},i.prototype.fill=function(g,c,l){if(typeof g=="string"){if(typeof c=="string"?(c=0,l=this.length):typeof l=="string"&&(l=this.length),g.length===1){var A=g.charCodeAt(0);A<256&&(g=A)}}else typeof g=="number"&&(g=g&255);if(c<0||this.length<c||this.length<l)throw new RangeError("Out of range index");if(l<=c)return this;c=c>>>0,l=l===void 0?this.length:l>>>0,g||(g=0);var T;if(typeof g=="number")for(T=c;T<l;++T)this[T]=g;else{var j=i.isBuffer(g)?g:new i(g),H=j.length;for(T=0;T<l-c;++T)this[T+c]=j[T%H]}return this},i.concat=function(g,c){if(!y(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return o(null,0);var l;if(c===void 0)for(c=0,l=0;l<g.length;++l)c+=g[l].length;var A=m(null,c),T=0;for(l=0;l<g.length;++l){var j=g[l];if(!i.isBuffer(j))throw new TypeError('"list" argument must be an Array of Buffers');j.copy(A,T),T+=j.length}return A},i.byteLength=C,i.prototype._isBuffer=!0,i.isBuffer=function(g){return!!(g!=null&&g._isBuffer)},S.exports.alloc=function(g){var c=new i(g);return c.fill(0),c},S.exports.from=function(g){return new i(g)}},{isarray:33}],29:[function(v,S,p){p.byteLength=m,p.toByteArray=P,p.fromByteArray=R;for(var y=[],f=[],a=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,d=i.length;s<d;++s)y[s]=i[s],f[i.charCodeAt(s)]=s;f[45]=62,f[95]=63;function o(C){var N=C.length;if(N%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var M=C.indexOf("=");M===-1&&(M=N);var B=M===N?0:4-M%4;return[M,B]}function m(C){var N=o(C),M=N[0],B=N[1];return(M+B)*3/4-B}function E(C,N,M){return(N+M)*3/4-M}function P(C){var N,M=o(C),B=M[0],g=M[1],c=new a(E(C,B,g)),l=0,A=g>0?B-4:B,T;for(T=0;T<A;T+=4)N=f[C.charCodeAt(T)]<<18|f[C.charCodeAt(T+1)]<<12|f[C.charCodeAt(T+2)]<<6|f[C.charCodeAt(T+3)],c[l++]=N>>16&255,c[l++]=N>>8&255,c[l++]=N&255;return g===2&&(N=f[C.charCodeAt(T)]<<2|f[C.charCodeAt(T+1)]>>4,c[l++]=N&255),g===1&&(N=f[C.charCodeAt(T)]<<10|f[C.charCodeAt(T+1)]<<4|f[C.charCodeAt(T+2)]>>2,c[l++]=N>>8&255,c[l++]=N&255),c}function _(C){return y[C>>18&63]+y[C>>12&63]+y[C>>6&63]+y[C&63]}function I(C,N,M){for(var B,g=[],c=N;c<M;c+=3)B=(C[c]<<16&16711680)+(C[c+1]<<8&65280)+(C[c+2]&255),g.push(_(B));return g.join("")}function R(C){for(var N,M=C.length,B=M%3,g=[],c=16383,l=0,A=M-B;l<A;l+=c)g.push(I(C,l,l+c>A?A:l+c));return B===1?(N=C[M-1],g.push(y[N>>2]+y[N<<4&63]+"==")):B===2&&(N=(C[M-2]<<8)+C[M-1],g.push(y[N>>10]+y[N>>4&63]+y[N<<2&63]+"=")),g.join("")}},{}],30:[function(v,S,p){var y=v("base64-js"),f=v("ieee754"),a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;p.Buffer=o,p.SlowBuffer=B,p.INSPECT_MAX_BYTES=50;var i=2147483647;p.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var e=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(e,r),e.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function d(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=new Uint8Array(e);return Object.setPrototypeOf(r,o.prototype),r}function o(e,r,n){if(typeof e=="number"){if(typeof r=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(e)}return m(e,r,n)}typeof Symbol<"u"&&Symbol.species!=null&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192;function m(e,r,n){if(typeof e=="string")return I(e,r);if(ArrayBuffer.isView(e))return R(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(X(e,ArrayBuffer)||e&&X(e.buffer,ArrayBuffer))return C(e,r,n);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var h=e.valueOf&&e.valueOf();if(h!=null&&h!==e)return o.from(h,r,n);var w=N(e);if(w)return w;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return o.from(e[Symbol.toPrimitive]("string"),r,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}o.from=function(e,r,n){return m(e,r,n)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function E(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function P(e,r,n){return E(e),e<=0?d(e):r!==void 0?typeof n=="string"?d(e).fill(r,n):d(e).fill(r):d(e)}o.alloc=function(e,r,n){return P(e,r,n)};function _(e){return E(e),d(e<0?0:M(e)|0)}o.allocUnsafe=function(e){return _(e)},o.allocUnsafeSlow=function(e){return _(e)};function I(e,r){if((typeof r!="string"||r==="")&&(r="utf8"),!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var n=g(e,r)|0,h=d(n),w=h.write(e,r);return w!==n&&(h=h.slice(0,w)),h}function R(e){for(var r=e.length<0?0:M(e.length)|0,n=d(r),h=0;h<r;h+=1)n[h]=e[h]&255;return n}function C(e,r,n){if(r<0||e.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<r+(n||0))throw new RangeError('"length" is outside of buffer bounds');var h;return r===void 0&&n===void 0?h=new Uint8Array(e):n===void 0?h=new Uint8Array(e,r):h=new Uint8Array(e,r,n),Object.setPrototypeOf(h,o.prototype),h}function N(e){if(o.isBuffer(e)){var r=M(e.length)|0,n=d(r);return n.length===0||e.copy(n,0,0,r),n}if(e.length!==void 0)return typeof e.length!="number"||Et(e.length)?d(0):R(e);if(e.type==="Buffer"&&Array.isArray(e.data))return R(e.data)}function M(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return e|0}function B(e){return+e!=e&&(e=0),o.alloc(+e)}o.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==o.prototype},o.compare=function(e,r){if(X(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),X(r,Uint8Array)&&(r=o.from(r,r.offset,r.byteLength)),!o.isBuffer(e)||!o.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;for(var n=e.length,h=r.length,w=0,b=Math.min(n,h);w<b;++w)if(e[w]!==r[w]){n=e[w],h=r[w];break}return n<h?-1:h<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return o.alloc(0);var n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var h=o.allocUnsafe(r),w=0;for(n=0;n<e.length;++n){var b=e[n];if(X(b,Uint8Array)&&(b=o.from(b)),!o.isBuffer(b))throw new TypeError('"list" argument must be an Array of Buffers');b.copy(h,w),w+=b.length}return h};function g(e,r){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||X(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,h=arguments.length>2&&arguments[2]===!0;if(!h&&n===0)return 0;for(var w=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return it(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return pt(e).length;default:if(w)return h?-1:it(e).length;r=(""+r).toLowerCase(),w=!0}}o.byteLength=g;function c(e,r,n){var h=!1;if((r===void 0||r<0)&&(r=0),r>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,r>>>=0,n<=r))return"";for(e||(e="utf8");;)switch(e){case"hex":return Z(this,r,n);case"utf8":case"utf-8":return Y(this,r,n);case"ascii":return q(this,r,n);case"latin1":case"binary":return ot(this,r,n);case"base64":return F(this,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ct(this,r,n);default:if(h)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),h=!0}}o.prototype._isBuffer=!0;function l(e,r,n){var h=e[r];e[r]=e[n],e[n]=h}o.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)l(this,r,r+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)l(this,r,r+3),l(this,r+1,r+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)l(this,r,r+7),l(this,r+1,r+6),l(this,r+2,r+5),l(this,r+3,r+4);return this},o.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?Y(this,0,e):c.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:o.compare(this,e)===0},o.prototype.inspect=function(){var e="",r=p.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},a&&(o.prototype[a]=o.prototype.inspect),o.prototype.compare=function(e,r,n,h,w){if(X(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),h===void 0&&(h=0),w===void 0&&(w=this.length),r<0||n>e.length||h<0||w>this.length)throw new RangeError("out of range index");if(h>=w&&r>=n)return 0;if(h>=w)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,h>>>=0,w>>>=0,this===e)return 0;for(var b=w-h,L=n-r,$=Math.min(b,L),tt=this.slice(h,w),J=e.slice(r,n),G=0;G<$;++G)if(tt[G]!==J[G]){b=tt[G],L=J[G];break}return b<L?-1:L<b?1:0};function A(e,r,n,h,w){if(e.length===0)return-1;if(typeof n=="string"?(h=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,Et(n)&&(n=w?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(w)return-1;n=e.length-1}else if(n<0)if(w)n=0;else return-1;if(typeof r=="string"&&(r=o.from(r,h)),o.isBuffer(r))return r.length===0?-1:T(e,r,n,h,w);if(typeof r=="number")return r=r&255,typeof Uint8Array.prototype.indexOf=="function"?w?Uint8Array.prototype.indexOf.call(e,r,n):Uint8Array.prototype.lastIndexOf.call(e,r,n):T(e,[r],n,h,w);throw new TypeError("val must be string, number or Buffer")}function T(e,r,n,h,w){var b=1,L=e.length,$=r.length;if(h!==void 0&&(h=String(h).toLowerCase(),h==="ucs2"||h==="ucs-2"||h==="utf16le"||h==="utf-16le")){if(e.length<2||r.length<2)return-1;b=2,L/=2,$/=2,n/=2}function tt(Bt,St){return b===1?Bt[St]:Bt.readUInt16BE(St*b)}var J;if(w){var G=-1;for(J=n;J<L;J++)if(tt(e,J)===tt(r,G===-1?0:J-G)){if(G===-1&&(G=J),J-G+1===$)return G*b}else G!==-1&&(J-=J-G),G=-1}else for(n+$>L&&(n=L-$),J=n;J>=0;J--){for(var rt=!0,yt=0;yt<$;yt++)if(tt(e,J+yt)!==tt(r,yt)){rt=!1;break}if(rt)return J}return-1}o.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1},o.prototype.indexOf=function(e,r,n){return A(this,e,r,n,!0)},o.prototype.lastIndexOf=function(e,r,n){return A(this,e,r,n,!1)};function j(e,r,n,h){n=Number(n)||0;var w=e.length-n;h?(h=Number(h),h>w&&(h=w)):h=w;var b=r.length;h>b/2&&(h=b/2);for(var L=0;L<h;++L){var $=parseInt(r.substr(L*2,2),16);if(Et($))return L;e[n+L]=$}return L}function H(e,r,n,h){return nt(it(r,e.length-n),e,n,h)}function O(e,r,n,h){return nt(ht(r),e,n,h)}function U(e,r,n,h){return O(e,r,n,h)}function z(e,r,n,h){return nt(pt(r),e,n,h)}function x(e,r,n,h){return nt(lt(r,e.length-n),e,n,h)}o.prototype.write=function(e,r,n,h){if(r===void 0)h="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")h=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,h===void 0&&(h="utf8")):(h=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var w=this.length-r;if((n===void 0||n>w)&&(n=w),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");h||(h="utf8");for(var b=!1;;)switch(h){case"hex":return j(this,e,r,n);case"utf8":case"utf-8":return H(this,e,r,n);case"ascii":return O(this,e,r,n);case"latin1":case"binary":return U(this,e,r,n);case"base64":return z(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,r,n);default:if(b)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase(),b=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function F(e,r,n){return r===0&&n===e.length?y.fromByteArray(e):y.fromByteArray(e.slice(r,n))}function Y(e,r,n){n=Math.min(e.length,n);for(var h=[],w=r;w<n;){var b=e[w],L=null,$=b>239?4:b>223?3:b>191?2:1;if(w+$<=n){var tt,J,G,rt;switch($){case 1:b<128&&(L=b);break;case 2:tt=e[w+1],(tt&192)===128&&(rt=(b&31)<<6|tt&63,rt>127&&(L=rt));break;case 3:tt=e[w+1],J=e[w+2],(tt&192)===128&&(J&192)===128&&(rt=(b&15)<<12|(tt&63)<<6|J&63,rt>2047&&(rt<55296||rt>57343)&&(L=rt));break;case 4:tt=e[w+1],J=e[w+2],G=e[w+3],(tt&192)===128&&(J&192)===128&&(G&192)===128&&(rt=(b&15)<<18|(tt&63)<<12|(J&63)<<6|G&63,rt>65535&&rt<1114112&&(L=rt))}}L===null?(L=65533,$=1):L>65535&&(L-=65536,h.push(L>>>10&1023|55296),L=56320|L&1023),h.push(L),w+=$}return K(h)}var D=4096;function K(e){var r=e.length;if(r<=D)return String.fromCharCode.apply(String,e);for(var n="",h=0;h<r;)n+=String.fromCharCode.apply(String,e.slice(h,h+=D));return n}function q(e,r,n){var h="";n=Math.min(e.length,n);for(var w=r;w<n;++w)h+=String.fromCharCode(e[w]&127);return h}function ot(e,r,n){var h="";n=Math.min(e.length,n);for(var w=r;w<n;++w)h+=String.fromCharCode(e[w]);return h}function Z(e,r,n){var h=e.length;(!r||r<0)&&(r=0),(!n||n<0||n>h)&&(n=h);for(var w="",b=r;b<n;++b)w+=Ut[e[b]];return w}function Ct(e,r,n){for(var h=e.slice(r,n),w="",b=0;b<h.length;b+=2)w+=String.fromCharCode(h[b]+h[b+1]*256);return w}o.prototype.slice=function(e,r){var n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);var h=this.subarray(e,r);return Object.setPrototypeOf(h,o.prototype),h};function Q(e,r,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+r>n)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Q(e,r,this.length);for(var h=this[e],w=1,b=0;++b<r&&(w*=256);)h+=this[e+b]*w;return h},o.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Q(e,r,this.length);for(var h=this[e+--r],w=1;r>0&&(w*=256);)h+=this[e+--r]*w;return h},o.prototype.readUInt8=function(e,r){return e=e>>>0,r||Q(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||Q(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||Q(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||Q(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},o.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||Q(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Q(e,r,this.length);for(var h=this[e],w=1,b=0;++b<r&&(w*=256);)h+=this[e+b]*w;return w*=128,h>=w&&(h-=Math.pow(2,8*r)),h},o.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Q(e,r,this.length);for(var h=r,w=1,b=this[e+--h];h>0&&(w*=256);)b+=this[e+--h]*w;return w*=128,b>=w&&(b-=Math.pow(2,8*r)),b},o.prototype.readInt8=function(e,r){return e=e>>>0,r||Q(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},o.prototype.readInt16LE=function(e,r){e=e>>>0,r||Q(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n},o.prototype.readInt16BE=function(e,r){e=e>>>0,r||Q(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n},o.prototype.readInt32LE=function(e,r){return e=e>>>0,r||Q(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,r){return e=e>>>0,r||Q(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,r){return e=e>>>0,r||Q(e,4,this.length),f.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,r){return e=e>>>0,r||Q(e,4,this.length),f.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||Q(e,8,this.length),f.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||Q(e,8,this.length),f.read(this,e,!1,52,8)};function et(e,r,n,h,w,b){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>w||r<b)throw new RangeError('"value" argument is out of bounds');if(n+h>e.length)throw new RangeError("Index out of range")}o.prototype.writeUIntLE=function(e,r,n,h){if(e=+e,r=r>>>0,n=n>>>0,!h){var w=Math.pow(2,8*n)-1;et(this,e,r,n,w,0)}var b=1,L=0;for(this[r]=e&255;++L<n&&(b*=256);)this[r+L]=e/b&255;return r+n},o.prototype.writeUIntBE=function(e,r,n,h){if(e=+e,r=r>>>0,n=n>>>0,!h){var w=Math.pow(2,8*n)-1;et(this,e,r,n,w,0)}var b=n-1,L=1;for(this[r+b]=e&255;--b>=0&&(L*=256);)this[r+b]=e/L&255;return r+n},o.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||et(this,e,r,1,255,0),this[r]=e&255,r+1},o.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||et(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2},o.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||et(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2},o.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||et(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4},o.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||et(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4},o.prototype.writeIntLE=function(e,r,n,h){if(e=+e,r=r>>>0,!h){var w=Math.pow(2,8*n-1);et(this,e,r,n,w-1,-w)}var b=0,L=1,$=0;for(this[r]=e&255;++b<n&&(L*=256);)e<0&&$===0&&this[r+b-1]!==0&&($=1),this[r+b]=(e/L>>0)-$&255;return r+n},o.prototype.writeIntBE=function(e,r,n,h){if(e=+e,r=r>>>0,!h){var w=Math.pow(2,8*n-1);et(this,e,r,n,w-1,-w)}var b=n-1,L=1,$=0;for(this[r+b]=e&255;--b>=0&&(L*=256);)e<0&&$===0&&this[r+b+1]!==0&&($=1),this[r+b]=(e/L>>0)-$&255;return r+n},o.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||et(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1},o.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||et(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2},o.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||et(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2},o.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||et(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4},o.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||et(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function ut(e,r,n,h,w,b){if(n+h>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function at(e,r,n,h,w){return r=+r,n=n>>>0,w||ut(e,r,n,4),f.write(e,r,n,h,23,4),n+4}o.prototype.writeFloatLE=function(e,r,n){return at(this,e,r,!0,n)},o.prototype.writeFloatBE=function(e,r,n){return at(this,e,r,!1,n)};function ft(e,r,n,h,w){return r=+r,n=n>>>0,w||ut(e,r,n,8),f.write(e,r,n,h,52,8),n+8}o.prototype.writeDoubleLE=function(e,r,n){return ft(this,e,r,!0,n)},o.prototype.writeDoubleBE=function(e,r,n){return ft(this,e,r,!1,n)},o.prototype.copy=function(e,r,n,h){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!h&&h!==0&&(h=this.length),r>=e.length&&(r=e.length),r||(r=0),h>0&&h<n&&(h=n),h===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length),e.length-r<h-n&&(h=e.length-r+n);var w=h-n;if(this===e&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(r,n,h);else if(this===e&&n<r&&r<h)for(var b=w-1;b>=0;--b)e[b+r]=this[b+n];else Uint8Array.prototype.set.call(e,this.subarray(n,h),r);return w},o.prototype.fill=function(e,r,n,h){if(typeof e=="string"){if(typeof r=="string"?(h=r,r=0,n=this.length):typeof n=="string"&&(h=n,n=this.length),h!==void 0&&typeof h!="string")throw new TypeError("encoding must be a string");if(typeof h=="string"&&!o.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(e.length===1){var w=e.charCodeAt(0);(h==="utf8"&&w<128||h==="latin1")&&(e=w)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var b;if(typeof e=="number")for(b=r;b<n;++b)this[b]=e;else{var L=o.isBuffer(e)?e:o.from(e,h),$=L.length;if($===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(b=0;b<n-r;++b)this[b+r]=L[b%$]}return this};var ct=/[^+/0-9A-Za-z-_]/g;function At(e){if(e=e.split("=")[0],e=e.trim().replace(ct,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function it(e,r){r=r||1/0;for(var n,h=e.length,w=null,b=[],L=0;L<h;++L){if(n=e.charCodeAt(L),n>55295&&n<57344){if(!w){if(n>56319){(r-=3)>-1&&b.push(239,191,189);continue}else if(L+1===h){(r-=3)>-1&&b.push(239,191,189);continue}w=n;continue}if(n<56320){(r-=3)>-1&&b.push(239,191,189),w=n;continue}n=(w-55296<<10|n-56320)+65536}else w&&(r-=3)>-1&&b.push(239,191,189);if(w=null,n<128){if((r-=1)<0)break;b.push(n)}else if(n<2048){if((r-=2)<0)break;b.push(n>>6|192,n&63|128)}else if(n<65536){if((r-=3)<0)break;b.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((r-=4)<0)break;b.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return b}function ht(e){for(var r=[],n=0;n<e.length;++n)r.push(e.charCodeAt(n)&255);return r}function lt(e,r){for(var n,h,w,b=[],L=0;L<e.length&&!((r-=2)<0);++L)n=e.charCodeAt(L),h=n>>8,w=n%256,b.push(w),b.push(h);return b}function pt(e){return y.toByteArray(At(e))}function nt(e,r,n,h){for(var w=0;w<h&&!(w+n>=r.length||w>=e.length);++w)r[w+n]=e[w];return w}function X(e,r){return e instanceof r||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===r.name}function Et(e){return e!==e}var Ut=function(){for(var e="0123456789abcdef",r=new Array(256),n=0;n<16;++n)for(var h=n*16,w=0;w<16;++w)r[h+w]=e[n]+e[w];return r}()},{"base64-js":29,ieee754:32}],31:[function(v,S,p){var y={single_source_shortest_paths:function(f,a,i){var s={},d={};d[a]=0;var o=y.PriorityQueue.make();o.push(a,0);for(var m,E,P,_,I,R,C,N,M;!o.empty();){m=o.pop(),E=m.value,_=m.cost,I=f[E]||{};for(P in I)I.hasOwnProperty(P)&&(R=I[P],C=_+R,N=d[P],M=typeof d[P]>"u",(M||N>C)&&(d[P]=C,o.push(P,C),s[P]=E))}if(typeof i<"u"&&typeof d[i]>"u"){var B=["Could not find a path from ",a," to ",i,"."].join("");throw new Error(B)}return s},extract_shortest_path_from_predecessor_list:function(f,a){for(var i=[],s=a;s;)i.push(s),f[s],s=f[s];return i.reverse(),i},find_path:function(f,a,i){var s=y.single_source_shortest_paths(f,a,i);return y.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(f){var a=y.PriorityQueue,i={},s;f=f||{};for(s in a)a.hasOwnProperty(s)&&(i[s]=a[s]);return i.queue=[],i.sorter=f.sorter||a.default_sorter,i},default_sorter:function(f,a){return f.cost-a.cost},push:function(f,a){var i={value:f,cost:a};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof S<"u"&&(S.exports=y)},{}],32:[function(v,S,p){p.read=function(y,f,a,i,s){var d,o,m=s*8-i-1,E=(1<<m)-1,P=E>>1,_=-7,I=a?s-1:0,R=a?-1:1,C=y[f+I];for(I+=R,d=C&(1<<-_)-1,C>>=-_,_+=m;_>0;d=d*256+y[f+I],I+=R,_-=8);for(o=d&(1<<-_)-1,d>>=-_,_+=i;_>0;o=o*256+y[f+I],I+=R,_-=8);if(d===0)d=1-P;else{if(d===E)return o?NaN:(C?-1:1)*(1/0);o=o+Math.pow(2,i),d=d-P}return(C?-1:1)*o*Math.pow(2,d-i)},p.write=function(y,f,a,i,s,d){var o,m,E,P=d*8-s-1,_=(1<<P)-1,I=_>>1,R=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,C=i?0:d-1,N=i?1:-1,M=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(m=isNaN(f)?1:0,o=_):(o=Math.floor(Math.log(f)/Math.LN2),f*(E=Math.pow(2,-o))<1&&(o--,E*=2),o+I>=1?f+=R/E:f+=R*Math.pow(2,1-I),f*E>=2&&(o++,E/=2),o+I>=_?(m=0,o=_):o+I>=1?(m=(f*E-1)*Math.pow(2,s),o=o+I):(m=f*Math.pow(2,I-1)*Math.pow(2,s),o=0));s>=8;y[a+C]=m&255,C+=N,m/=256,s-=8);for(o=o<<s|m,P+=s;P>0;y[a+C]=o&255,C+=N,o/=256,P-=8);y[a+C-N]|=M*128}},{}],33:[function(v,S,p){var y={}.toString;S.exports=Array.isArray||function(f){return y.call(f)=="[object Array]"}},{}]},{},[24])(24)})}),me={name:"qrcode",props:{value:null,options:Object,tag:{type:String,default:"canvas"}},render:function(u){return u(this.tag,this.$slots.default)},watch:{$props:{deep:!0,immediate:!0,handler:function(){this.$el&&this.generate()}}},methods:{generate:function(){var u=this,k=this.options,v=this.tag,S=String(this.value);v==="canvas"?Tt.toCanvas(this.$el,S,k,function(p){if(p)throw p}):v==="img"?Tt.toDataURL(S,k,function(p,y){if(p)throw p;u.$el.src=y}):Tt.toString(S,k,function(p,y){if(p)throw p;u.$el.innerHTML=y})}},mounted:function(){this.generate()}};const be=gt({name:"AuthTokenSetupDialog",components:{NcButton:Pt,NcDialog:Yt,NcIconSvgWrapper:Ot,NcTextField:_t,QR:me},props:{token:{type:Object,required:!1,default:null}},data(){return{isNameCopied:!1,isPasswordCopied:!1,showQRCode:!1}},computed:{open:{get(){return this.token!==null},set(u){u||this.$emit("close")}},copyPasswordIcon(){return this.isPasswordCopied?Nt:Mt},copyNameIcon(){return this.isNameCopied?Nt:Mt},appPassword(){var u,k;return(k=(u=this.token)==null?void 0:u.token)!=null?k:""},loginName(){var u,k;return(k=(u=this.token)==null?void 0:u.loginName)!=null?k:""},qrUrl(){const u=window.location.protocol+"//"+window.location.host+qt();return"nc://login/user:".concat(this.loginName,"&password:").concat(this.appPassword,"&server:").concat(u)},copyPasswordLabel(){return this.isPasswordCopied?W("settings","App password copied!"):W("settings","Copy app password")},copyLoginNameLabel(){return this.isNameCopied?W("settings","Login name copied!"):W("settings","Copy login name")}},watch:{token(){this.showQRCode=!1},open(){this.open&&this.$nextTick(()=>{this.$refs.appPassword.select()})}},methods:{t:W,async copyPassword(){try{await navigator.clipboard.writeText(this.appPassword),this.isPasswordCopied=!0}catch(u){this.isPasswordCopied=!1,V.error(u),st(W("settings","Could not copy app password. Please copy it manually."))}finally{setTimeout(()=>{this.isPasswordCopied=!1},4e3)}},async copyLoginName(){try{await navigator.clipboard.writeText(this.loginName),this.isNameCopied=!0}catch(u){this.isNameCopied=!1,V.error(u),st(W("settings","Could not copy login name. Please copy it manually."))}finally{setTimeout(()=>{this.isNameCopied=!1},4e3)}}}});var ke=function(){var u=this,k=u._self._c;return u._self._setupProxy,k("NcDialog",{attrs:{open:u.open,name:u.t("settings","New app password"),"content-classes":"token-dialog"},on:{"update:open":function(v){u.open=v}}},[k("p",[u._v(" "+u._s(u.t("settings","Use the credentials below to configure your app or device. For security reasons this password will only be shown once."))+" ")]),k("div",{staticClass:"token-dialog__name"},[k("NcTextField",{attrs:{label:u.t("settings","Username"),value:u.loginName,readonly:""}}),k("NcButton",{attrs:{type:"tertiary",title:u.copyLoginNameLabel,"aria-label":u.copyLoginNameLabel},on:{click:u.copyLoginName},scopedSlots:u._u([{key:"icon",fn:function(){return[k("NcIconSvgWrapper",{attrs:{path:u.copyNameIcon}})]},proxy:!0}])})],1),k("div",{staticClass:"token-dialog__password"},[k("NcTextField",{ref:"appPassword",attrs:{label:u.t("settings","Password"),value:u.appPassword,readonly:""}}),k("NcButton",{attrs:{type:"tertiary",title:u.copyPasswordLabel,"aria-label":u.copyPasswordLabel},on:{click:u.copyPassword},scopedSlots:u._u([{key:"icon",fn:function(){return[k("NcIconSvgWrapper",{attrs:{path:u.copyPasswordIcon}})]},proxy:!0}])})],1),k("div",{staticClass:"token-dialog__qrcode"},[u.showQRCode?k("QR",{attrs:{value:u.qrUrl}}):k("NcButton",{on:{click:function(v){u.showQRCode=!0}}},[u._v(" "+u._s(u.t("settings","Show QR code for mobile apps"))+" ")])],1)])},Ce=[],Ae=dt(be,ke,Ce,!1,null,"70d594ab",null,null);const Ee=Ae.exports,Te=gt({name:"AuthTokenSetup",components:{NcButton:Pt,NcTextField:_t,AuthTokenSetupDialog:Ee},setup(){return{authTokenStore:Rt()}},data(){return{deviceName:"",loading:!1,newToken:null}},methods:{t:W,reset(){this.loading=!1,this.deviceName="",this.newToken=null},async submit(){try{this.loading=!0,this.newToken=await this.authTokenStore.addToken(this.deviceName)}catch(u){V.error(u),st(W("settings","Error while creating device token")),this.reset()}finally{this.loading=!1}}}});var Ne=function(){var u=this,k=u._self._c;return u._self._setupProxy,k("form",{staticClass:"row spacing",attrs:{id:"generate-app-token-section"},on:{submit:function(v){return v.preventDefault(),u.submit.apply(null,arguments)}}},[k("NcTextField",{staticClass:"app-name-text-field",attrs:{value:u.deviceName,type:"text",maxlength:120,disabled:u.loading,label:u.t("settings","App name"),placeholder:u.t("settings","App name")},on:{"update:value":function(v){u.deviceName=v}}}),k("NcButton",{attrs:{type:"primary",disabled:u.loading||u.deviceName.length===0,"native-type":"submit"}},[u._v(" "+u._s(u.t("settings","Create new app password"))+" ")]),k("AuthTokenSetupDialog",{attrs:{token:u.newToken},on:{close:function(v){u.newToken=null}}})],1)},Pe=[],_e=dt(Te,Ne,Pe,!1,null,"91e034c7",null,null);const Re=_e.exports,Be=gt({name:"AuthTokenSection",components:{AuthTokenList:ve,AuthTokenSetup:Re},data(){return{canCreateToken:Lt("settings","can_create_app_token")}},methods:{t:W}});var Se=function(){var u=this,k=u._self._c;return u._self._setupProxy,k("div",{staticClass:"section",attrs:{id:"security"}},[k("h2",[u._v(u._s(u.t("settings","Devices & sessions",{},void 0,{sanitize:!1})))]),k("p",{staticClass:"settings-hint hidden-when-empty"},[u._v(" "+u._s(u.t("settings","Web, desktop and mobile clients currently logged in to your account."))+" ")]),k("AuthTokenList"),u.canCreateToken?k("AuthTokenSetup"):u._e()],1)},Ie=[],Me=dt(Be,Se,Ie,!1,null,null,null,null);const xe=Me.exports,Le=Jt();bt.use(Qt),bt.use(Wt,{defaultHtml:!1}),bt.prototype.t=t;const Oe=bt.extend(xe);new Oe({pinia:Le}).$mount("#security-authtokens");
