/*! For license information please see apps_files_sharing_src_views_SharingTab_vue-apps_files_sharing_src_views_SharingTab_vue.js.LICENSE.txt */
"use strict";(self.webpackChunknextcloud=self.webpackChunknextcloud||[]).push([["apps_files_sharing_src_views_SharingTab_vue"],{86864:function(t,e,r){var n=r(87537),i=r.n(n),a=r(23645),o=r.n(a)()(i());o.push([t.id,".sharing-entry[data-v-ec1ee21e]{display:flex;align-items:center;height:44px}.sharing-entry__summary[data-v-ec1ee21e]{padding:8px;padding-left:10px;display:flex;flex-direction:column;justify-content:center;width:80%;min-width:80%}.sharing-entry__summary__desc[data-v-ec1ee21e]{display:inline-block;padding-bottom:0;line-height:1.2em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sharing-entry__summary__desc p[data-v-ec1ee21e],.sharing-entry__summary__desc small[data-v-ec1ee21e]{color:var(--color-text-maxcontrast)}.sharing-entry__summary__desc-unique[data-v-ec1ee21e]{color:var(--color-text-maxcontrast)}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingEntry.vue"],names:[],mappings:"AACA,gCACC,YAAA,CACA,kBAAA,CACA,WAAA,CACA,yCACC,WAAA,CACA,iBAAA,CACA,YAAA,CACA,qBAAA,CACA,sBAAA,CACA,SAAA,CACA,aAAA,CAEA,+CACC,oBAAA,CACA,gBAAA,CACA,iBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CAEA,sGAEC,mCAAA,CAGD,sDACC,mCAAA",sourcesContent:["\n.sharing-entry {\n\tdisplay: flex;\n\talign-items: center;\n\theight: 44px;\n\t&__summary {\n\t\tpadding: 8px;\n\t\tpadding-left: 10px;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\twidth: 80%;\n\t\tmin-width: 80%;\n\n\t\t&__desc {\n\t\t\tdisplay: inline-block;\n\t\t\tpadding-bottom: 0;\n\t\t\tline-height: 1.2em;\n\t\t\twhite-space: nowrap;\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\n\t\t\tp,\n\t\t\tsmall {\n\t\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\t}\n\n\t\t\t&-unique {\n\t\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\t}\n\t\t}\n\t}\n\n}\n"],sourceRoot:""}]),e.Z=o},72021:function(t,e,r){var n=r(87537),i=r.n(n),a=r(23645),o=r.n(a)()(i());o.push([t.id,".sharing-entry[data-v-283ca89e]{display:flex;align-items:center;height:44px}.sharing-entry__desc[data-v-283ca89e]{display:flex;flex-direction:column;justify-content:space-between;padding:8px;padding-left:10px;line-height:1.2em}.sharing-entry__desc p[data-v-283ca89e]{color:var(--color-text-maxcontrast)}.sharing-entry__actions[data-v-283ca89e]{margin-left:auto}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingEntryInherited.vue"],names:[],mappings:"AACA,gCACC,YAAA,CACA,kBAAA,CACA,WAAA,CACA,sCACC,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,WAAA,CACA,iBAAA,CACA,iBAAA,CACA,wCACC,mCAAA,CAGF,yCACC,gBAAA",sourcesContent:["\n.sharing-entry {\n\tdisplay: flex;\n\talign-items: center;\n\theight: 44px;\n\t&__desc {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\tpadding: 8px;\n\t\tpadding-left: 10px;\n\t\tline-height: 1.2em;\n\t\tp {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\t}\n\t&__actions {\n\t\tmargin-left: auto;\n\t}\n}\n"],sourceRoot:""}]),e.Z=o},49061:function(t,e,r){var n=r(87537),i=r.n(n),a=r(23645),o=r.n(a)()(i());o.push([t.id,".sharing-entry__internal .avatar-external[data-v-510ad265]{width:32px;height:32px;line-height:32px;font-size:18px;background-color:var(--color-text-maxcontrast);border-radius:50%;flex-shrink:0}.sharing-entry__internal .icon-checkmark-color[data-v-510ad265]{opacity:1}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingEntryInternal.vue"],names:[],mappings:"AAEC,2DACC,UAAA,CACA,WAAA,CACA,gBAAA,CACA,cAAA,CACA,8CAAA,CACA,iBAAA,CACA,aAAA,CAED,gEACC,SAAA",sourcesContent:["\n.sharing-entry__internal {\n\t.avatar-external {\n\t\twidth: 32px;\n\t\theight: 32px;\n\t\tline-height: 32px;\n\t\tfont-size: 18px;\n\t\tbackground-color: var(--color-text-maxcontrast);\n\t\tborder-radius: 50%;\n\t\tflex-shrink: 0;\n\t}\n\t.icon-checkmark-color {\n\t\topacity: 1;\n\t}\n}\n"],sourceRoot:""}]),e.Z=o},9634:function(t,e,r){var n=r(87537),i=r.n(n),a=r(23645),o=r.n(a)()(i());o.push([t.id,".sharing-entry[data-v-7192de7a]{display:flex;align-items:center;min-height:44px}.sharing-entry__summary[data-v-7192de7a]{padding:8px;padding-left:10px;display:flex;justify-content:space-between;width:80%;min-width:80%}.sharing-entry__summary__desc[data-v-7192de7a]{display:flex;flex-direction:column;line-height:1.2em}.sharing-entry__summary__desc p[data-v-7192de7a]{color:var(--color-text-maxcontrast)}.sharing-entry__summary__desc__title[data-v-7192de7a]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.sharing-entry:not(.sharing-entry--share) .sharing-entry__actions .new-share-link[data-v-7192de7a]{border-top:1px solid var(--color-border)}.sharing-entry[data-v-7192de7a] .avatar-link-share{background-color:var(--color-primary-element)}.sharing-entry .sharing-entry__action--public-upload[data-v-7192de7a]{border-bottom:1px solid var(--color-border)}.sharing-entry__loading[data-v-7192de7a]{width:44px;height:44px;margin:0;padding:14px;margin-left:auto}.sharing-entry .action-item~.action-item[data-v-7192de7a],.sharing-entry .action-item~.sharing-entry__loading[data-v-7192de7a]{margin-left:0}.sharing-entry .icon-checkmark-color[data-v-7192de7a]{opacity:1}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingEntryLink.vue"],names:[],mappings:"AACA,gCACC,YAAA,CACA,kBAAA,CACA,eAAA,CAEA,yCACC,WAAA,CACA,iBAAA,CACA,YAAA,CACA,6BAAA,CACA,SAAA,CACA,aAAA,CAED,+CACC,YAAA,CACA,qBAAA,CACA,iBAAA,CAEA,iDACC,mCAAA,CAGD,sDACC,sBAAA,CACA,eAAA,CACA,kBAAA,CAUD,mGACC,wCAAA,CAIF,mDACC,6CAAA,CAGD,sEACC,2CAAA,CAGD,yCACC,UAAA,CACA,WAAA,CACA,QAAA,CACA,YAAA,CACA,gBAAA,CAOA,+HAEC,aAAA,CAIF,sDACC,SAAA",sourcesContent:["\n.sharing-entry {\n\tdisplay: flex;\n\talign-items: center;\n\tmin-height: 44px;\n\n\t&__summary {\n\t\tpadding: 8px;\n\t\tpadding-left: 10px;\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\twidth: 80%;\n\t\tmin-width: 80%;\n\n\t&__desc {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tline-height: 1.2em;\n\n\t\tp {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\n\t\t&__title {\n\t\t\ttext-overflow: ellipsis;\n\t\t\toverflow: hidden;\n\t\t\twhite-space: nowrap;\n\t\t}\n\t  }\n\n\t  &__copy {\n\n\t  }\n\t}\n\n\t&:not(.sharing-entry--share) &__actions {\n\t\t.new-share-link {\n\t\t\tborder-top: 1px solid var(--color-border);\n\t\t}\n\t}\n\n\t::v-deep .avatar-link-share {\n\t\tbackground-color: var(--color-primary-element);\n\t}\n\n\t.sharing-entry__action--public-upload {\n\t\tborder-bottom: 1px solid var(--color-border);\n\t}\n\n\t&__loading {\n\t\twidth: 44px;\n\t\theight: 44px;\n\t\tmargin: 0;\n\t\tpadding: 14px;\n\t\tmargin-left: auto;\n\t}\n\n\t// put menus to the left\n\t// but only the first one\n\t.action-item {\n\n\t\t~.action-item,\n\t\t~.sharing-entry__loading {\n\t\t\tmargin-left: 0;\n\t\t}\n\t}\n\n\t.icon-checkmark-color {\n\t\topacity: 1;\n\t}\n}\n"],sourceRoot:""}]),e.Z=o},94345:function(t,e,r){var n=r(87537),i=r.n(n),a=r(23645),o=r.n(a)()(i());o.push([t.id,".share-select[data-v-c003ab64]{position:relative;cursor:pointer}.share-select .trigger-text[data-v-c003ab64]{display:flex;flex-direction:row;align-items:center;font-size:12.5px;gap:2px;color:var(--color-primary-element)}.share-select .share-select-dropdown[data-v-c003ab64]{position:absolute;display:flex;flex-direction:column;top:100%;left:0;background-color:var(--color-main-background);border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.2);padding:4px 0;z-index:1}.share-select .share-select-dropdown .dropdown-item[data-v-c003ab64]{padding:8px;font-size:12px;background:none;border:none;border-radius:0;font:inherit;cursor:pointer;color:inherit;outline:none;width:100%;white-space:nowrap;text-align:left}.share-select .share-select-dropdown .dropdown-item[data-v-c003ab64]:hover{background-color:#f2f2f2}.share-select .share-select-dropdown .dropdown-item.selected[data-v-c003ab64]{background-color:#f0f0f0}.share-select .share-select-dropdown[data-v-c003ab64]{max-height:0;overflow:hidden;transition:max-height .3s ease}.share-select.active .share-select-dropdown[data-v-c003ab64]{max-height:200px}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingEntryQuickShareSelect.vue"],names:[],mappings:"AACA,+BACC,iBAAA,CACA,cAAA,CAEA,6CACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,gBAAA,CACA,OAAA,CACA,kCAAA,CAGD,sDACC,iBAAA,CACA,YAAA,CACA,qBAAA,CACA,QAAA,CACA,MAAA,CACA,6CAAA,CACA,iBAAA,CACA,mCAAA,CACA,aAAA,CACA,SAAA,CAEA,qEACC,WAAA,CACA,cAAA,CACA,eAAA,CACA,WAAA,CACA,eAAA,CACA,YAAA,CACA,cAAA,CACA,aAAA,CACA,YAAA,CACA,UAAA,CACA,kBAAA,CACA,eAAA,CAEA,2EACC,wBAAA,CAGD,8EACC,wBAAA,CAMH,sDACC,YAAA,CACA,eAAA,CACA,8BAAA,CAGD,6DACC,gBAAA",sourcesContent:["\n.share-select {\n\tposition: relative;\n\tcursor: pointer;\n\n\t.trigger-text {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t\tfont-size: 12.5px;\n\t\tgap: 2px;\n\t\tcolor: var(--color-primary-element);\n\t}\n\n\t.share-select-dropdown {\n\t\tposition: absolute;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\ttop: 100%;\n\t\tleft: 0;\n\t\tbackground-color: var(--color-main-background);\n\t\tborder-radius: 8px;\n\t\tbox-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n\t\tpadding: 4px 0;\n\t\tz-index: 1;\n\n\t\t.dropdown-item {\n\t\t\tpadding: 8px;\n\t\t\tfont-size: 12px;\n\t\t\tbackground: none;\n\t\t\tborder: none;\n\t\t\tborder-radius: 0;\n\t\t\tfont: inherit;\n\t\t\tcursor: pointer;\n\t\t\tcolor: inherit;\n\t\t\toutline: none;\n\t\t\twidth: 100%;\n\t\t\twhite-space: nowrap;\n\t\t\ttext-align: left;\n\n\t\t\t&:hover {\n\t\t\t\tbackground-color: #f2f2f2;\n\t\t\t}\n\n\t\t\t&.selected {\n\t\t\t\tbackground-color: #f0f0f0;\n\t\t\t}\n\t\t}\n\t}\n\n\t/* Optional: Add a transition effect for smoother dropdown animation */\n\t.share-select-dropdown {\n\t\tmax-height: 0;\n\t\toverflow: hidden;\n\t\ttransition: max-height 0.3s ease;\n\t}\n\n\t&.active .share-select-dropdown {\n\t\tmax-height: 200px;\n\t\t/* Adjust the value to your desired height */\n\t}\n}\n"],sourceRoot:""}]),e.Z=o},66452:function(t,e,r){var n=r(87537),i=r.n(n),a=r(23645),o=r.n(a)()(i());o.push([t.id,".sharing-entry[data-v-1852ea78]{display:flex;align-items:center;min-height:44px}.sharing-entry__desc[data-v-1852ea78]{padding:8px;padding-left:10px;line-height:1.2em;position:relative;flex:1 1;min-width:0}.sharing-entry__desc p[data-v-1852ea78]{color:var(--color-text-maxcontrast)}.sharing-entry__title[data-v-1852ea78]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;max-width:inherit}.sharing-entry__actions[data-v-1852ea78]{margin-left:auto !important}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingEntrySimple.vue"],names:[],mappings:"AACA,gCACC,YAAA,CACA,kBAAA,CACA,eAAA,CACA,sCACC,WAAA,CACA,iBAAA,CACA,iBAAA,CACA,iBAAA,CACA,QAAA,CACA,WAAA,CACA,wCACC,mCAAA,CAGF,uCACC,kBAAA,CACA,sBAAA,CACA,eAAA,CACA,iBAAA,CAED,yCACC,2BAAA",sourcesContent:["\n.sharing-entry {\n\tdisplay: flex;\n\talign-items: center;\n\tmin-height: 44px;\n\t&__desc {\n\t\tpadding: 8px;\n\t\tpadding-left: 10px;\n\t\tline-height: 1.2em;\n\t\tposition: relative;\n\t\tflex: 1 1;\n\t\tmin-width: 0;\n\t\tp {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\t}\n\t&__title {\n\t\twhite-space: nowrap;\n\t\ttext-overflow: ellipsis;\n\t\toverflow: hidden;\n\t\tmax-width: inherit;\n\t}\n\t&__actions {\n\t\tmargin-left: auto !important;\n\t}\n}\n"],sourceRoot:""}]),e.Z=o},83434:function(t,e,r){var n=r(87537),i=r.n(n),a=r(23645),o=r.n(a)()(i());o.push([t.id,".sharing-search{display:flex;flex-direction:column;margin-bottom:4px}.sharing-search label[for=sharing-search-input]{margin-bottom:2px}.sharing-search__input{width:100%;margin:10px 0}.vs__dropdown-menu span[lookup] .avatardiv{background-image:var(--icon-search-white);background-repeat:no-repeat;background-position:center;background-color:var(--color-text-maxcontrast) !important}.vs__dropdown-menu span[lookup] .avatardiv div{display:none}","",{version:3,sources:["webpack://./apps/files_sharing/src/components/SharingInput.vue"],names:[],mappings:"AACA,gBACC,YAAA,CACA,qBAAA,CACA,iBAAA,CAEA,gDACC,iBAAA,CAGD,uBACC,UAAA,CACA,aAAA,CAOA,2CACC,yCAAA,CACA,2BAAA,CACA,0BAAA,CACA,yDAAA,CACA,+CACC,YAAA",sourcesContent:['\n.sharing-search {\n\tdisplay: flex;\n\tflex-direction: column;\n\tmargin-bottom: 4px;\n\n\tlabel[for="sharing-search-input"] {\n\t\tmargin-bottom: 2px;\n\t}\n\n\t&__input {\n\t\twidth: 100%;\n\t\tmargin: 10px 0;\n\t}\n}\n\n.vs__dropdown-menu {\n\t// properly style the lookup entry\n\tspan[lookup] {\n\t\t.avatardiv {\n\t\t\tbackground-image: var(--icon-search-white);\n\t\t\tbackground-repeat: no-repeat;\n\t\t\tbackground-position: center;\n\t\t\tbackground-color: var(--color-text-maxcontrast) !important;\n\t\t\tdiv {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t}\n\t}\n}\n'],sourceRoot:""}]),e.Z=o},15985:function(t,e,r){var n=r(87537),i=r.n(n),a=r(23645),o=r.n(a)()(i());o.push([t.id,".sharingTabDetailsView[data-v-912a6a32]{display:flex;flex-direction:column;align-items:flex-start;width:96%;margin:0 auto}.sharingTabDetailsView__header[data-v-912a6a32]{display:flex;align-items:center;box-sizing:border-box;margin:.2em}.sharingTabDetailsView__header span[data-v-912a6a32]{display:flex;align-items:center}.sharingTabDetailsView__header span h1[data-v-912a6a32]{font-size:15px;padding-left:.3em}.sharingTabDetailsView__quick-permissions[data-v-912a6a32]{display:flex;justify-content:center;margin-bottom:.2em;width:100%;margin:0 auto;border-radius:0}.sharingTabDetailsView__quick-permissions div[data-v-912a6a32]{width:100%}.sharingTabDetailsView__quick-permissions div span[data-v-912a6a32]{width:100%}.sharingTabDetailsView__quick-permissions div span span[data-v-912a6a32]:nth-child(1){align-items:center;justify-content:center;color:var(--color-primary-element);padding:.1em}.sharingTabDetailsView__quick-permissions div span[data-v-912a6a32] label span{display:flex;flex-direction:column}.sharingTabDetailsView__advanced-control[data-v-912a6a32]{width:100%}.sharingTabDetailsView__advanced-control button[data-v-912a6a32]{margin-top:.5em}.sharingTabDetailsView__advanced[data-v-912a6a32]{width:100%;margin-bottom:.5em;text-align:left;padding-left:0}.sharingTabDetailsView__advanced section textarea[data-v-912a6a32],.sharingTabDetailsView__advanced section div.mx-datepicker[data-v-912a6a32]{width:100%}.sharingTabDetailsView__advanced section textarea[data-v-912a6a32]{height:80px}.sharingTabDetailsView__advanced section span[data-v-912a6a32] label{padding-left:0 !important;background-color:initial !important;border:none !important}.sharingTabDetailsView__advanced section section.custom-permissions-group[data-v-912a6a32]{padding-left:1.5em}.sharingTabDetailsView__delete>button[data-v-912a6a32]:first-child{color:#df0707}.sharingTabDetailsView__footer[data-v-912a6a32]{width:100%;display:flex;position:sticky;bottom:0;flex-direction:column;justify-content:space-between;align-items:flex-start}.sharingTabDetailsView__footer .button-group[data-v-912a6a32]{display:flex;justify-content:space-between;width:100%;margin-top:16px}.sharingTabDetailsView__footer .button-group button[data-v-912a6a32]{margin-left:16px}.sharingTabDetailsView__footer .button-group button[data-v-912a6a32]:first-child{margin-left:0}","",{version:3,sources:["webpack://./apps/files_sharing/src/views/SharingDetailsTab.vue"],names:[],mappings:"AACA,wCACC,YAAA,CACA,qBAAA,CACA,sBAAA,CACA,SAAA,CACA,aAAA,CAEA,gDACC,YAAA,CACA,kBAAA,CACA,qBAAA,CACA,WAAA,CAEA,qDACC,YAAA,CACA,kBAAA,CAEA,wDACC,cAAA,CACA,iBAAA,CAMH,2DACC,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,UAAA,CACA,aAAA,CACA,eAAA,CAEA,+DACC,UAAA,CAEA,oEACC,UAAA,CAEA,sFACC,kBAAA,CACA,sBAAA,CACA,kCAAA,CACA,YAAA,CAKA,+EACC,YAAA,CACA,qBAAA,CAQL,0DACC,UAAA,CAEA,iEACC,eAAA,CAKF,kDACC,UAAA,CACA,kBAAA,CACA,eAAA,CACA,cAAA,CAIC,+IAEC,UAAA,CAGD,mEACC,WAAA,CAaA,qEACC,yBAAA,CACA,mCAAA,CACA,sBAAA,CAIF,2FACC,kBAAA,CAMF,mEACC,aAAA,CAIF,gDACC,UAAA,CACA,YAAA,CACA,eAAA,CACA,QAAA,CACA,qBAAA,CACA,6BAAA,CACA,sBAAA,CAEA,8DACC,YAAA,CACA,6BAAA,CACA,UAAA,CACA,eAAA,CAEA,qEACC,gBAAA,CAEA,iFACC,aAAA",sourcesContent:["\n.sharingTabDetailsView {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-start;\n\twidth: 96%;\n\tmargin: 0 auto;\n\n\t&__header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tbox-sizing: border-box;\n\t\tmargin: 0.2em;\n\n\t\tspan {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\n\t\t\th1 {\n\t\t\t\tfont-size: 15px;\n\t\t\t\tpadding-left: 0.3em;\n\t\t\t}\n\n\t\t}\n\t}\n\n\t&__quick-permissions {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\tmargin-bottom: 0.2em;\n\t\twidth: 100%;\n\t\tmargin: 0 auto;\n\t\tborder-radius: 0;\n\n\t\tdiv {\n\t\t\twidth: 100%;\n\n\t\t\tspan {\n\t\t\t\twidth: 100%;\n\n\t\t\t\tspan:nth-child(1) {\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tcolor: var(--color-primary-element);\n\t\t\t\t\tpadding: 0.1em;\n\t\t\t\t}\n\n\t\t\t\t::v-deep label {\n\n\t\t\t\t\tspan {\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n\n\t&__advanced-control {\n\t\twidth: 100%;\n\n\t\tbutton {\n\t\t\tmargin-top: 0.5em;\n\t\t}\n\n\t}\n\n\t&__advanced {\n\t\twidth: 100%;\n\t\tmargin-bottom: 0.5em;\n\t\ttext-align: left;\n\t\tpadding-left: 0;\n\n\t\tsection {\n\n\t\t\ttextarea,\n\t\t\tdiv.mx-datepicker {\n\t\t\t\twidth: 100%;\n\t\t\t}\n\n\t\t\ttextarea {\n\t\t\t\theight: 80px;\n\t\t\t}\n\n\t\t\t/*\n              The following style is applied out of the component's scope\n              to remove padding from the label.checkbox-radio-switch__label,\n              which is used to group radio checkbox items. The use of ::v-deep\n              ensures that the padding is modified without being affected by\n              the component's scoping.\n              Without this achieving left alignment for the checkboxes would not\n              be possible.\n            */\n\t\t\tspan {\n\t\t\t\t::v-deep label {\n\t\t\t\t\tpadding-left: 0 !important;\n\t\t\t\t\tbackground-color: initial !important;\n\t\t\t\t\tborder: none !important;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsection.custom-permissions-group {\n\t\t\t\tpadding-left: 1.5em;\n\t\t\t}\n\t\t}\n\t}\n\n\t&__delete {\n\t\t>button:first-child {\n\t\t\tcolor: rgb(223, 7, 7);\n\t\t}\n\t}\n\n\t&__footer {\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\tposition: sticky;\n\t\tbottom: 0;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\talign-items: flex-start;\n\n\t\t.button-group {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\twidth: 100%;\n\t\t\tmargin-top: 16px;\n\n\t\t\tbutton {\n\t\t\t\tmargin-left: 16px;\n\n\t\t\t\t&:first-child {\n\t\t\t\t\tmargin-left: 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n"],sourceRoot:""}]),e.Z=o},84772:function(t,e,r){var n=r(87537),i=r.n(n),a=r(23645),o=r.n(a)()(i());o.push([t.id,".sharing-entry__inherited .avatar-shared[data-v-05b67dc8]{width:32px;height:32px;line-height:32px;font-size:18px;background-color:var(--color-text-maxcontrast);border-radius:50%;flex-shrink:0}","",{version:3,sources:["webpack://./apps/files_sharing/src/views/SharingInherited.vue"],names:[],mappings:"AAEC,0DACC,UAAA,CACA,WAAA,CACA,gBAAA,CACA,cAAA,CACA,8CAAA,CACA,iBAAA,CACA,aAAA",sourcesContent:["\n.sharing-entry__inherited {\n\t.avatar-shared {\n\t\twidth: 32px;\n\t\theight: 32px;\n\t\tline-height: 32px;\n\t\tfont-size: 18px;\n\t\tbackground-color: var(--color-text-maxcontrast);\n\t\tborder-radius: 50%;\n\t\tflex-shrink: 0;\n\t}\n}\n"],sourceRoot:""}]),e.Z=o},56828:function(t,e,r){var n=r(87537),i=r.n(n),a=r(23645),o=r.n(a)()(i());o.push([t.id,".emptyContentWithSections[data-v-56ce9ab4]{margin:1rem auto}.sharingTab__content[data-v-56ce9ab4]{padding:0 6px}.sharingTab__additionalContent[data-v-56ce9ab4]{margin:44px 0}","",{version:3,sources:["webpack://./apps/files_sharing/src/views/SharingTab.vue"],names:[],mappings:"AACA,2CACC,gBAAA,CAIA,sCACC,aAAA,CAGD,gDACC,aAAA",sourcesContent:["\n.emptyContentWithSections {\n\tmargin: 1rem auto;\n}\n\n.sharingTab {\n\t&__content {\n\t\tpadding: 0 6px;\n\t}\n\n\t&__additionalContent {\n\t\tmargin: 44px 0;\n\t}\n}\n"],sourceRoot:""}]),e.Z=o},56512:function(e,r,n){n.r(r),n.d(r,{default:function(){return qr}});var i=n(91887),a=n(79753),o=n(75925),s=n.n(o),c=n(93664),u=n(43554);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,a=void 0,a=function(t,e){if("object"!==h(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===h(a)?a:String(a)),n)}var i,a}var f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._shareConfig=(0,u.j)("files_sharing","shareConfig",{})}var e,r,n;return e=t,(r=[{key:"isPublicUploadEnabled",get:function(){return this._shareConfig.allowPublicUploads}},{key:"isShareWithLinkAllowed",get:function(){return document.getElementById("allowShareWithLink")&&"yes"===document.getElementById("allowShareWithLink").value}},{key:"federatedShareDocLink",get:function(){return OC.appConfig.core.federatedCloudShareDoc}},{key:"defaultExpirationDate",get:function(){return this.isDefaultExpireDateEnabled?new Date((new Date).setDate((new Date).getDate()+this.defaultExpireDate)):null}},{key:"defaultInternalExpirationDate",get:function(){return this.isDefaultInternalExpireDateEnabled?new Date((new Date).setDate((new Date).getDate()+this.defaultInternalExpireDate)):null}},{key:"defaultRemoteExpirationDateString",get:function(){return this.isDefaultRemoteExpireDateEnabled?new Date((new Date).setDate((new Date).getDate()+this.defaultRemoteExpireDate)):null}},{key:"enforcePasswordForPublicLink",get:function(){return!0===OC.appConfig.core.enforcePasswordForPublicLink}},{key:"enableLinkPasswordByDefault",get:function(){return!0===OC.appConfig.core.enableLinkPasswordByDefault}},{key:"isDefaultExpireDateEnforced",get:function(){return!0===OC.appConfig.core.defaultExpireDateEnforced}},{key:"isDefaultExpireDateEnabled",get:function(){return!0===OC.appConfig.core.defaultExpireDateEnabled}},{key:"isDefaultInternalExpireDateEnforced",get:function(){return!0===OC.appConfig.core.defaultInternalExpireDateEnforced}},{key:"isDefaultRemoteExpireDateEnforced",get:function(){return!0===OC.appConfig.core.defaultRemoteExpireDateEnforced}},{key:"isDefaultInternalExpireDateEnabled",get:function(){return!0===OC.appConfig.core.defaultInternalExpireDateEnabled}},{key:"isDefaultRemoteExpireDateEnabled",get:function(){return!0===OC.appConfig.core.defaultRemoteExpireDateEnabled}},{key:"isRemoteShareAllowed",get:function(){return!0===OC.appConfig.core.remoteShareAllowed}},{key:"isMailShareAllowed",get:function(){var t,e,r=OC.getCapabilities();return void 0!==(null==r||null===(t=r.files_sharing)||void 0===t?void 0:t.sharebymail)&&!0===(null==r||null===(e=r.files_sharing)||void 0===e||null===(e=e.public)||void 0===e?void 0:e.enabled)}},{key:"defaultExpireDate",get:function(){return OC.appConfig.core.defaultExpireDate}},{key:"defaultInternalExpireDate",get:function(){return OC.appConfig.core.defaultInternalExpireDate}},{key:"defaultRemoteExpireDate",get:function(){return OC.appConfig.core.defaultRemoteExpireDate}},{key:"isResharingAllowed",get:function(){return!0===OC.appConfig.core.resharingAllowed}},{key:"isPasswordForMailSharesRequired",get:function(){return void 0!==OC.getCapabilities().files_sharing.sharebymail&&OC.getCapabilities().files_sharing.sharebymail.password.enforced}},{key:"shouldAlwaysShowUnique",get:function(){var t;return!0===(null===(t=OC.getCapabilities().files_sharing)||void 0===t||null===(t=t.sharee)||void 0===t?void 0:t.always_show_unique)}},{key:"allowGroupSharing",get:function(){return!0===OC.appConfig.core.allowGroupSharing}},{key:"maxAutocompleteResults",get:function(){return parseInt(OC.config["sharing.maxAutocompleteResults"],10)||25}},{key:"minSearchStringLength",get:function(){return parseInt(OC.config["sharing.minSearchStringLength"],10)||0}},{key:"passwordPolicy",get:function(){var t=OC.getCapabilities();return t.password_policy?t.password_policy:{}}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),d=n(41922),p=n(25108);function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function v(t){var e=function(t,e){if("object"!==y(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===y(e)?e:String(e)}var m=function(){function t(e){var r,n,i,a;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=void 0,(i=v(i="_share"))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a,e.ocs&&e.ocs.data&&e.ocs.data[0]&&(e=e.ocs.data[0]),e.hide_download=!!e.hide_download,e.mail_send=!!e.mail_send,e.attributes)try{e.attributes=JSON.parse(e.attributes)}catch(t){p.warn('Could not parse share attributes returned by server: "'+e.attributes+'"')}e.attributes=null!==(r=e.attributes)&&void 0!==r?r:[],this._share=e}var e,r,n;return e=t,(r=[{key:"state",get:function(){return this._share}},{key:"id",get:function(){return this._share.id}},{key:"type",get:function(){return this._share.share_type}},{key:"permissions",get:function(){return this._share.permissions},set:function(t){this._share.permissions=t}},{key:"attributes",get:function(){return this._share.attributes}},{key:"owner",get:function(){return this._share.uid_owner}},{key:"ownerDisplayName",get:function(){return this._share.displayname_owner}},{key:"shareWith",get:function(){return this._share.share_with}},{key:"shareWithDisplayName",get:function(){return this._share.share_with_displayname||this._share.share_with}},{key:"shareWithDisplayNameUnique",get:function(){return this._share.share_with_displayname_unique||this._share.share_with}},{key:"shareWithLink",get:function(){return this._share.share_with_link}},{key:"shareWithAvatar",get:function(){return this._share.share_with_avatar}},{key:"uidFileOwner",get:function(){return this._share.uid_file_owner}},{key:"displaynameFileOwner",get:function(){return this._share.displayname_file_owner||this._share.uid_file_owner}},{key:"createdTime",get:function(){return this._share.stime}},{key:"expireDate",get:function(){return this._share.expiration},set:function(t){this._share.expiration=t}},{key:"token",get:function(){return this._share.token}},{key:"note",get:function(){return this._share.note},set:function(t){this._share.note=t}},{key:"label",get:function(){return this._share.label},set:function(t){this._share.label=t}},{key:"mailSend",get:function(){return!0===this._share.mail_send}},{key:"hideDownload",get:function(){return!0===this._share.hide_download},set:function(t){this._share.hide_download=!0===t}},{key:"password",get:function(){return this._share.password},set:function(t){this._share.password=t}},{key:"passwordExpirationTime",get:function(){return this._share.password_expiration_time},set:function(t){this._share.password_expiration_time=t}},{key:"sendPasswordByTalk",get:function(){return this._share.send_password_by_talk},set:function(t){this._share.send_password_by_talk=t}},{key:"path",get:function(){return this._share.path}},{key:"itemType",get:function(){return this._share.item_type}},{key:"mimetype",get:function(){return this._share.mimetype}},{key:"fileSource",get:function(){return this._share.file_source}},{key:"fileTarget",get:function(){return this._share.file_target}},{key:"fileParent",get:function(){return this._share.file_parent}},{key:"hasReadPermission",get:function(){return!!(this.permissions&OC.PERMISSION_READ)}},{key:"hasCreatePermission",get:function(){return!!(this.permissions&OC.PERMISSION_CREATE)}},{key:"hasDeletePermission",get:function(){return!!(this.permissions&OC.PERMISSION_DELETE)}},{key:"hasUpdatePermission",get:function(){return!!(this.permissions&OC.PERMISSION_UPDATE)}},{key:"hasSharePermission",get:function(){return!!(this.permissions&OC.PERMISSION_SHARE)}},{key:"hasDownloadPermission",get:function(){for(var t in this._share.attributes){var e=this._share.attributes[t];if("permissions"===e.scope&&"download"===e.key)return e.enabled}return!0},set:function(t){this.setAttribute("permissions","download",!!t)}},{key:"setAttribute",value:function(t,e,r){var n={scope:t,key:e,enabled:r};for(var i in this._share.attributes){var a=this._share.attributes[i];if(a.scope===n.scope&&a.key===n.key)return void this._share.attributes.splice(i,1,n)}this._share.attributes.push(n)}},{key:"canEdit",get:function(){return!0===this._share.can_edit}},{key:"canDelete",get:function(){return!0===this._share.can_delete}},{key:"viaFileid",get:function(){return this._share.via_fileid}},{key:"viaPath",get:function(){return this._share.via_path}},{key:"parent",get:function(){return this._share.parent}},{key:"storageId",get:function(){return this._share.storage_id}},{key:"storage",get:function(){return this._share.storage}},{key:"itemSource",get:function(){return this._share.item_source}},{key:"status",get:function(){return this._share.status}}])&&g(e.prototype,r),n&&g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),A={data:function(){return{SHARE_TYPES:d.D}}},w=n(64024),_=n(76212),E=n.n(_),b=n(12945),S=n.n(b),x={name:"SharingEntrySimple",components:{NcActions:S()},props:{title:{type:String,default:"",required:!0},subtitle:{type:String,default:""},isUnique:{type:Boolean,default:!0},ariaExpanded:{type:Boolean,default:null}},computed:{ariaExpandedValue:function(){return null===this.ariaExpanded?this.ariaExpanded:this.ariaExpanded?"true":"false"}}},C=n(93379),k=n.n(C),P=n(7795),T=n.n(P),D=n(90569),L=n.n(D),O=n(3565),R=n.n(O),N=n(19216),I=n.n(N),j=n(44589),Y=n.n(j),H=n(66452),F={};F.styleTagTransform=Y(),F.setAttributes=R(),F.insert=L().bind(null,"head"),F.domAPI=T(),F.insertStyleElement=I();k()(H.Z,F),H.Z&&H.Z.locals&&H.Z.locals;var B=n(51900),U=(0,B.Z)(x,(function(){var t=this,e=t._self._c;return e("li",{staticClass:"sharing-entry"},[t._t("avatar"),t._v(" "),e("div",{staticClass:"sharing-entry__desc"},[e("span",{staticClass:"sharing-entry__title"},[t._v(t._s(t.title))]),t._v(" "),t.subtitle?e("p",[t._v("\n\t\t\t"+t._s(t.subtitle)+"\n\t\t")]):t._e()]),t._v(" "),t.$slots.default?e("NcActions",{ref:"actionsComponent",staticClass:"sharing-entry__actions",attrs:{"menu-align":"right","aria-expanded":t.ariaExpandedValue}},[t._t("default")],2):t._e()],2)}),[],!1,null,"1852ea78",null).exports,G=n(25108);function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function W(){W=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,i){var a=e&&e.prototype instanceof f?e:f,o=Object.create(a.prototype),s=new x(i||[]);return n(o,"_invoke",{value:_(t,r,s)}),o}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function d(){}function p(){}var y={};c(y,a,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(C([])));v&&v!==e&&r.call(v,a)&&(y=v);var m=p.prototype=f.prototype=Object.create(y);function A(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function i(n,a,o,s){var c=h(t[n],t,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==M(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){i("next",t,o,s)}),(function(t){i("throw",t,o,s)})):e.resolve(l).then((function(t){u.value=t,o(u)}),(function(t){return i("throw",t,o,s)}))}s(c.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function _(t,e,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return k()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=E(o,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),l;var i=h(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,l;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function C(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=p,n(m,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=c(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,s,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},A(w.prototype),c(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var o=new w(u(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},A(m),c(m,s,"Generator"),c(m,a,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=C,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:C(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function q(t,e,r,n,i,a,o){try{var s=t[a](o),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}var Z={name:"SharingEntryInternal",components:{NcActionLink:E(),SharingEntrySimple:U},props:{fileInfo:{type:Object,default:function(){},required:!0}},data:function(){return{copied:!1,copySuccess:!1}},computed:{internalLink:function(){return window.location.protocol+"//"+window.location.host+(0,a.generateUrl)("/f/")+this.fileInfo.id},copyLinkTooltip:function(){return this.copied?this.copySuccess?"":t("files_sharing","Cannot copy, please copy the link manually"):t("files_sharing","Copy internal link to clipboard")},internalLinkSubtitle:function(){return"dir"===this.fileInfo.type?t("files_sharing","Only works for users with access to this folder"):t("files_sharing","Only works for users with access to this file")}},methods:{copyLink:function(){var e,r=this;return(e=W().mark((function e(){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(r.internalLink);case 3:(0,w.s$)(t("files_sharing","Link copied")),r.$refs.shareEntrySimple.$refs.actionsComponent.$el.focus(),r.copySuccess=!0,r.copied=!0,e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),r.copySuccess=!1,r.copied=!0,G.error(e.t0);case 14:return e.prev=14,setTimeout((function(){r.copySuccess=!1,r.copied=!1}),4e3),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,9,14,17]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(t){q(a,n,i,o,s,"next",t)}function s(t){q(a,n,i,o,s,"throw",t)}o(void 0)}))})()}}},V=Z,$=n(49061),z={};z.styleTagTransform=Y(),z.setAttributes=R(),z.insert=L().bind(null,"head"),z.domAPI=T(),z.insertStyleElement=I();k()($.Z,z),$.Z&&$.Z.locals&&$.Z.locals;var Q=(0,B.Z)(V,(function(){var t=this,e=t._self._c;return e("ul",[e("SharingEntrySimple",{ref:"shareEntrySimple",staticClass:"sharing-entry__internal",attrs:{title:t.t("files_sharing","Internal link"),subtitle:t.internalLinkSubtitle},scopedSlots:t._u([{key:"avatar",fn:function(){return[e("div",{staticClass:"avatar-external icon-external-white"})]},proxy:!0}])},[t._v(" "),e("NcActionLink",{attrs:{href:t.internalLink,"aria-label":t.copyLinkTooltip,title:t.copyLinkTooltip,target:"_blank",icon:t.copied&&t.copySuccess?"icon-checkmark-color":"icon-clippy"},on:{click:function(e){return e.preventDefault(),t.copyLink.apply(null,arguments)}}})],1)],1)}),[],!1,null,"510ad265",null),K=Q.exports,J=n(77958),X=n(20296),tt=n.n(X),et=n(36456),rt=n.n(et),nt=n(25108);function it(t){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(t)}function at(){at=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,i){var a=e&&e.prototype instanceof f?e:f,o=Object.create(a.prototype),s=new x(i||[]);return n(o,"_invoke",{value:_(t,r,s)}),o}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function d(){}function p(){}var y={};c(y,a,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(C([])));v&&v!==e&&r.call(v,a)&&(y=v);var m=p.prototype=f.prototype=Object.create(y);function A(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function i(n,a,o,s){var c=h(t[n],t,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==it(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){i("next",t,o,s)}),(function(t){i("throw",t,o,s)})):e.resolve(l).then((function(t){u.value=t,o(u)}),(function(t){return i("throw",t,o,s)}))}s(c.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function _(t,e,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return k()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=E(o,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),l;var i=h(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,l;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function C(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=p,n(m,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=c(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,s,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},A(w.prototype),c(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var o=new w(u(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},A(m),c(m,s,"Generator"),c(m,a,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=C,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:C(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function ot(t,e,r,n,i,a,o){try{var s=t[a](o),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}var st=new f,ct="abcdefgijkmnopqrstwxyzABCDEFGHJKLMNPQRSTWXYZ23456789";function ut(){return ht.apply(this,arguments)}function ht(){var e;return e=at().mark((function e(){var r,n,i,a,o;return at().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!st.passwordPolicy.api||!st.passwordPolicy.api.generate){e.next=14;break}return e.prev=1,e.next=4,c.Z.get(st.passwordPolicy.api.generate);case 4:if(!(r=e.sent).data.ocs.data.password){e.next=8;break}return(0,w.s$)(t("files_sharing","Password created successfully")),e.abrupt("return",r.data.ocs.data.password);case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),nt.info("Error generating password from password_policy",e.t0),(0,w.x2)(t("files_sharing","Error generating password from password policy"));case 14:for(n=new Uint8Array(10),i=ct.length/255,self.crypto.getRandomValues(n),a="",o=0;o<n.length;o++)a+=ct.charAt(n[o]*i);return e.abrupt("return",a);case 20:case"end":return e.stop()}}),e,null,[[1,10]])})),ht=function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(t){ot(a,n,i,o,s,"next",t)}function s(t){ot(a,n,i,o,s,"throw",t)}o(void 0)}))},ht.apply(this,arguments)}n(35449);var lt=n(69183),ft=n(25108);function dt(t){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(t)}function pt(){pt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,i){var a=e&&e.prototype instanceof f?e:f,o=Object.create(a.prototype),s=new x(i||[]);return n(o,"_invoke",{value:_(t,r,s)}),o}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function d(){}function p(){}var y={};c(y,a,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(C([])));v&&v!==e&&r.call(v,a)&&(y=v);var m=p.prototype=f.prototype=Object.create(y);function A(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function i(n,a,o,s){var c=h(t[n],t,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==dt(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){i("next",t,o,s)}),(function(t){i("throw",t,o,s)})):e.resolve(l).then((function(t){u.value=t,o(u)}),(function(t){return i("throw",t,o,s)}))}s(c.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function _(t,e,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return k()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=E(o,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),l;var i=h(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,l;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function C(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=p,n(m,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=c(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,s,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},A(w.prototype),c(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var o=new w(u(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},A(m),c(m,s,"Generator"),c(m,a,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=C,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:C(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function yt(t,e,r,n,i,a,o){try{var s=t[a](o),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function gt(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function o(t){yt(a,n,i,o,s,"next",t)}function s(t){yt(a,n,i,o,s,"throw",t)}o(void 0)}))}}var vt=(0,a.generateOcsUrl)("apps/files_sharing/api/v1/shares"),mt={methods:{createShare:function(e){return gt(pt().mark((function r(){var n,i,a,o,s,u,h,l,f,d,p,y,g,v,A,w;return pt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.path,i=e.permissions,a=e.shareType,o=e.shareWith,s=e.publicUpload,u=e.password,h=e.sendPasswordByTalk,l=e.expireDate,f=e.label,d=e.note,p=e.attributes,r.prev=1,r.next=4,c.Z.post(vt,{path:n,permissions:i,shareType:a,shareWith:o,publicUpload:s,password:u,sendPasswordByTalk:h,expireDate:l,label:f,note:d,attributes:p});case 4:if(null!=(g=r.sent)&&null!==(y=g.data)&&void 0!==y&&y.ocs){r.next=7;break}throw g;case 7:return v=new m(g.data.ocs.data),(0,lt.j8)("files_sharing:share:created",{share:v}),r.abrupt("return",v);case 12:throw r.prev=12,r.t0=r.catch(1),ft.error("Error while creating share",r.t0),w=null===r.t0||void 0===r.t0||null===(A=r.t0.response)||void 0===A||null===(A=A.data)||void 0===A||null===(A=A.ocs)||void 0===A||null===(A=A.meta)||void 0===A?void 0:A.message,OC.Notification.showTemporary(w?t("files_sharing","Error creating the share: {errorMessage}",{errorMessage:w}):t("files_sharing","Error creating the share"),{type:"error"}),r.t0;case 18:case"end":return r.stop()}}),r,null,[[1,12]])})))()},deleteShare:function(e){return gt(pt().mark((function r(){var n,i,a,o;return pt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c.Z.delete(vt+"/".concat(e));case 3:if(null!=(i=r.sent)&&null!==(n=i.data)&&void 0!==n&&n.ocs){r.next=6;break}throw i;case 6:return(0,lt.j8)("files_sharing:share:deleted",{id:e}),r.abrupt("return",!0);case 10:throw r.prev=10,r.t0=r.catch(0),ft.error("Error while deleting share",r.t0),o=null===r.t0||void 0===r.t0||null===(a=r.t0.response)||void 0===a||null===(a=a.data)||void 0===a||null===(a=a.ocs)||void 0===a||null===(a=a.meta)||void 0===a?void 0:a.message,OC.Notification.showTemporary(o?t("files_sharing","Error deleting the share: {errorMessage}",{errorMessage:o}):t("files_sharing","Error deleting the share"),{type:"error"}),r.t0;case 16:case"end":return r.stop()}}),r,null,[[0,10]])})))()},updateShare:function(e,r){return gt(pt().mark((function n(){var i,a,o,s,u;return pt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c.Z.put(vt+"/".concat(e),r);case 3:if(a=n.sent,(0,lt.j8)("files_sharing:share:updated",{id:e}),null!=a&&null!==(i=a.data)&&void 0!==i&&i.ocs){n.next=9;break}throw a;case 9:return n.abrupt("return",a.data.ocs.data);case 10:n.next=18;break;case 12:throw n.prev=12,n.t0=n.catch(0),ft.error("Error while updating share",n.t0),400!==n.t0.response.status&&(s=null===n.t0||void 0===n.t0||null===(o=n.t0.response)||void 0===o||null===(o=o.data)||void 0===o||null===(o=o.ocs)||void 0===o||null===(o=o.meta)||void 0===o?void 0:o.message,OC.Notification.showTemporary(s?t("files_sharing","Error updating the share: {errorMessage}",{errorMessage:s}):t("files_sharing","Error updating the share"),{type:"error"})),u=n.t0.response.data.ocs.meta.message,new Error(u);case 18:case"end":return n.stop()}}),n,null,[[0,12]])})))()}}};function At(t){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},At(t)}function wt(){wt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,i){var a=e&&e.prototype instanceof f?e:f,o=Object.create(a.prototype),s=new x(i||[]);return n(o,"_invoke",{value:_(t,r,s)}),o}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function d(){}function p(){}var y={};c(y,a,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(C([])));v&&v!==e&&r.call(v,a)&&(y=v);var m=p.prototype=f.prototype=Object.create(y);function A(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function i(n,a,o,s){var c=h(t[n],t,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==At(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){i("next",t,o,s)}),(function(t){i("throw",t,o,s)})):e.resolve(l).then((function(t){u.value=t,o(u)}),(function(t){return i("throw",t,o,s)}))}s(c.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function _(t,e,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return k()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=E(o,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),l;var i=h(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,l;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function C(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=p,n(m,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=c(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,s,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},A(w.prototype),c(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var o=new w(u(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},A(m),c(m,s,"Generator"),c(m,a,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=C,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:C(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function _t(t,e,r,n,i,a,o){try{var s=t[a](o),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}var Et={methods:{openSharingDetails:function(t){var e,r=this;return(e=wt().mark((function e(){var n,i;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},!t.handler){e.next=9;break}return r.suggestions&&(t.suggestions=r.suggestions,t.fileInfo=r.fileInfo,t.query=r.query),e.next=5,t.handler(t);case 5:n=e.sent,n=new m(n),e.next=10;break;case 9:n=r.mapShareRequestToShareObject(t);case 10:i={fileInfo:r.fileInfo,share:n},r.$emit("open-sharing-details",i);case 12:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(t){_t(a,n,i,o,s,"next",t)}function s(t){_t(a,n,i,o,s,"throw",t)}o(void 0)}))})()},openShareDetailsForCustomSettings:function(t){t.setCustomPermissions=!0,this.openSharingDetails(t)},mapShareRequestToShareObject:function(t){if(t.id)return t;var e={attributes:[{enabled:!0,key:"download",scope:"permissions"}],share_type:t.shareType,share_with:t.shareWith,is_no_user:t.isNoUser,user:t.shareWith,share_with_displayname:t.displayName,subtitle:t.subtitle,permissions:t.permissions,expiration:""};return new m(e)}}},bt=n(25108);function St(t){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},St(t)}function xt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ct(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xt(Object(r),!0).forEach((function(e){kt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function kt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==St(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==St(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===St(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pt(){Pt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,i){var a=e&&e.prototype instanceof f?e:f,o=Object.create(a.prototype),s=new x(i||[]);return n(o,"_invoke",{value:_(t,r,s)}),o}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function d(){}function p(){}var y={};c(y,a,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(C([])));v&&v!==e&&r.call(v,a)&&(y=v);var m=p.prototype=f.prototype=Object.create(y);function A(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function i(n,a,o,s){var c=h(t[n],t,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==St(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){i("next",t,o,s)}),(function(t){i("throw",t,o,s)})):e.resolve(l).then((function(t){u.value=t,o(u)}),(function(t){return i("throw",t,o,s)}))}s(c.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function _(t,e,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return k()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=E(o,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),l;var i=h(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,l;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function C(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=p,n(m,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=c(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,s,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},A(w.prototype),c(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var o=new w(u(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},A(m),c(m,s,"Generator"),c(m,a,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=C,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:C(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Tt(t,e,r,n,i,a,o){try{var s=t[a](o),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function Dt(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function o(t){Tt(a,n,i,o,s,"next",t)}function s(t){Tt(a,n,i,o,s,"throw",t)}o(void 0)}))}}var Lt={name:"SharingInput",components:{NcSelect:rt()},mixins:[A,mt,Et],props:{shares:{type:Array,default:function(){return[]},required:!0},linkShares:{type:Array,default:function(){return[]},required:!0},fileInfo:{type:Object,default:function(){},required:!0},reshare:{type:m,default:null},canReshare:{type:Boolean,required:!0}},data:function(){return{config:new f,loading:!1,query:"",recommendations:[],ShareSearch:OCA.Sharing.ShareSearch.state,suggestions:[],value:null}},computed:{externalResults:function(){return this.ShareSearch.results},inputPlaceholder:function(){var e=this.config.isRemoteShareAllowed;return this.canReshare?e?t("files_sharing","Name, email, or Federated Cloud ID …"):t("files_sharing","Name or email …"):t("files_sharing","Resharing is not allowed")},isValidQuery:function(){return this.query&&""!==this.query.trim()&&this.query.length>this.config.minSearchStringLength},options:function(){return this.isValidQuery?this.suggestions:this.recommendations},noResultText:function(){return this.loading?t("files_sharing","Searching …"):t("files_sharing","No elements found.")}},mounted:function(){this.getRecommendations()},methods:{asyncFind:function(t){var e=this;return Dt(Pt().mark((function r(){return Pt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.query=t.trim(),!e.isValidQuery){r.next=5;break}return e.loading=!0,r.next=5,e.debounceGetSuggestions(t);case 5:case"end":return r.stop()}}),r)})))()},getSuggestions:function(e){var r=arguments,n=this;return Dt(Pt().mark((function i(){var o,s,u,h,l,f,d,p,y,g,v,m,A;return Pt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=r.length>1&&void 0!==r[1]&&r[1],n.loading=!0,!0===OC.getCapabilities().files_sharing.sharee.query_lookup_default&&(o=!0),s=[n.SHARE_TYPES.SHARE_TYPE_USER,n.SHARE_TYPES.SHARE_TYPE_GROUP,n.SHARE_TYPES.SHARE_TYPE_REMOTE,n.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP,n.SHARE_TYPES.SHARE_TYPE_CIRCLE,n.SHARE_TYPES.SHARE_TYPE_ROOM,n.SHARE_TYPES.SHARE_TYPE_GUEST,n.SHARE_TYPES.SHARE_TYPE_DECK,n.SHARE_TYPES.SHARE_TYPE_SCIENCEMESH],!0===OC.getCapabilities().files_sharing.public.enabled&&s.push(n.SHARE_TYPES.SHARE_TYPE_EMAIL),u=null,i.prev=6,i.next=9,c.Z.get((0,a.generateOcsUrl)("apps/files_sharing/api/v1/sharees"),{params:{format:"json",itemType:"dir"===n.fileInfo.type?"folder":"file",search:e,lookup:o,perPage:n.config.maxAutocompleteResults,shareType:s}});case 9:u=i.sent,i.next=16;break;case 12:return i.prev=12,i.t0=i.catch(6),bt.error("Error fetching suggestions",i.t0),i.abrupt("return");case 16:h=u.data.ocs.data,l=u.data.ocs.data.exact,h.exact=[],f=Object.values(l).reduce((function(t,e){return t.concat(e)}),[]),d=Object.values(h).reduce((function(t,e){return t.concat(e)}),[]),p=n.filterOutExistingShares(f).map((function(t){return n.formatForMultiselect(t)})).sort((function(t,e){return t.shareType-e.shareType})),y=n.filterOutExistingShares(d).map((function(t){return n.formatForMultiselect(t)})).sort((function(t,e){return t.shareType-e.shareType})),g=[],h.lookupEnabled&&!o&&g.push({id:"global-lookup",isNoUser:!0,displayName:t("files_sharing","Search globally"),lookup:!0}),v=n.externalResults.filter((function(t){return!t.condition||t.condition(n)})),m=p.concat(y).concat(v).concat(g),A=m.reduce((function(t,e){return e.displayName?(t[e.displayName]||(t[e.displayName]=0),t[e.displayName]++,t):t}),{}),n.suggestions=m.map((function(t){return A[t.displayName]>1&&!t.desc?Ct(Ct({},t),{},{desc:t.shareWithDisplayNameUnique}):t})),n.loading=!1,bt.info("suggestions",n.suggestions);case 31:case"end":return i.stop()}}),i,null,[[6,12]])})))()},debounceGetSuggestions:tt()((function(){this.getSuggestions.apply(this,arguments)}),300),getRecommendations:function(){var t=this;return Dt(Pt().mark((function e(){var r,n,i;return Pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,r=null,e.prev=2,e.next=5,c.Z.get((0,a.generateOcsUrl)("apps/files_sharing/api/v1/sharees_recommended"),{params:{format:"json",itemType:t.fileInfo.type}});case 5:r=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),bt.error("Error fetching recommendations",e.t0),e.abrupt("return");case 12:n=t.externalResults.filter((function(e){return!e.condition||e.condition(t)})),i=Object.values(r.data.ocs.data.exact).reduce((function(t,e){return t.concat(e)}),[]),t.recommendations=t.filterOutExistingShares(i).map((function(e){return t.formatForMultiselect(e)})).concat(n),t.loading=!1,bt.info("recommendations",t.recommendations);case 17:case"end":return e.stop()}}),e,null,[[2,8]])})))()},filterOutExistingShares:function(t){var e=this;return t.reduce((function(t,r){if("object"!==St(r))return t;try{if(r.value.shareType===e.SHARE_TYPES.SHARE_TYPE_USER){if(r.value.shareWith===(0,J.ts)().uid)return t;if(e.reshare&&r.value.shareWith===e.reshare.owner)return t}if(r.value.shareType===e.SHARE_TYPES.SHARE_TYPE_EMAIL){if(-1!==e.linkShares.map((function(t){return t.shareWith})).indexOf(r.value.shareWith.trim()))return t}else{var n=e.shares.reduce((function(t,e){return t[e.shareWith]=e.type,t}),{}),i=r.value.shareWith.trim();if(i in n&&n[i]===r.value.shareType)return t}t.push(r)}catch(e){return t}return t}),[])},shareTypeToIcon:function(e){switch(e){case this.SHARE_TYPES.SHARE_TYPE_GUEST:return{icon:"icon-user",iconTitle:t("files_sharing","Guest")};case this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP:case this.SHARE_TYPES.SHARE_TYPE_GROUP:return{icon:"icon-group",iconTitle:t("files_sharing","Group")};case this.SHARE_TYPES.SHARE_TYPE_EMAIL:return{icon:"icon-mail",iconTitle:t("files_sharing","Email")};case this.SHARE_TYPES.SHARE_TYPE_CIRCLE:return{icon:"icon-circle",iconTitle:t("files_sharing","Circle")};case this.SHARE_TYPES.SHARE_TYPE_ROOM:return{icon:"icon-room",iconTitle:t("files_sharing","Talk conversation")};case this.SHARE_TYPES.SHARE_TYPE_DECK:return{icon:"icon-deck",iconTitle:t("files_sharing","Deck board")};case this.SHARE_TYPES.SHARE_TYPE_SCIENCEMESH:return{icon:"icon-sciencemesh",iconTitle:t("files_sharing","ScienceMesh")};default:return{}}},formatForMultiselect:function(e){var r,n;if(e.value.shareType===this.SHARE_TYPES.SHARE_TYPE_USER&&this.config.shouldAlwaysShowUnique)r=null!==(n=e.shareWithDisplayNameUnique)&&void 0!==n?n:"";else if(e.value.shareType!==this.SHARE_TYPES.SHARE_TYPE_REMOTE&&e.value.shareType!==this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP||!e.value.server)if(e.value.shareType===this.SHARE_TYPES.SHARE_TYPE_EMAIL)r=e.value.shareWith;else{var i;r=null!==(i=e.shareWithDescription)&&void 0!==i?i:""}else r=t("files_sharing","on {server}",{server:e.value.server});return Ct({shareWith:e.value.shareWith,shareType:e.value.shareType,user:e.uuid||e.value.shareWith,isNoUser:e.value.shareType!==this.SHARE_TYPES.SHARE_TYPE_USER,displayName:e.name||e.label,subtitle:r,shareWithDisplayNameUnique:e.shareWithDisplayNameUnique||""},this.shareTypeToIcon(e.value.shareType))},addShare:function(t){var e=this;return Dt(Pt().mark((function r(){var n,i,a,o;return Pt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.value=null,!t.lookup){r.next=6;break}return r.next=4,e.getSuggestions(e.query,!0);case 4:return e.$nextTick((function(){e.$refs.select.$children[0].open=!0})),r.abrupt("return",!0);case 6:if(!t.handler){r.next=12;break}return r.next=9,t.handler(e);case 9:return n=r.sent,e.$emit("add:share",new m(n)),r.abrupt("return",!0);case 12:if(e.loading=!0,bt.debug("Adding a new share from the input for",t),r.prev=14,i=null,!e.config.enforcePasswordForPublicLink||t.shareType!==e.SHARE_TYPES.SHARE_TYPE_EMAIL){r.next=20;break}return r.next=19,ut();case 19:i=r.sent;case 20:return a=(e.fileInfo.path+"/"+e.fileInfo.name).replace("//","/"),r.next=23,e.createShare({path:a,shareType:t.shareType,shareWith:t.shareWith,password:i,permissions:e.fileInfo.sharePermissions&OC.getCapabilities().files_sharing.default_permissions,attributes:JSON.stringify(e.fileInfo.shareAttributes)});case 23:if(o=r.sent,!i){r.next=32;break}return o.newPassword=i,r.next=28,new Promise((function(t){e.$emit("add:share",o,t)}));case 28:r.sent.open=!0,r.next=33;break;case 32:e.$emit("add:share",o);case 33:return r.next=35,e.getRecommendations();case 35:r.next=42;break;case 37:r.prev=37,r.t0=r.catch(14),e.$nextTick((function(){e.$refs.select.$children[0].open=!0})),e.query=t.shareWith,bt.error("Error while adding new share",r.t0);case 42:return r.prev=42,e.loading=!1,r.finish(42);case 45:case"end":return r.stop()}}),r,null,[[14,37,42,45]])})))()}}},Ot=Lt,Rt=n(83434),Nt={};Nt.styleTagTransform=Y(),Nt.setAttributes=R(),Nt.insert=L().bind(null,"head"),Nt.domAPI=T(),Nt.insertStyleElement=I();k()(Rt.Z,Nt),Rt.Z&&Rt.Z.locals&&Rt.Z.locals;var It=(0,B.Z)(Ot,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"sharing-search"},[e("label",{attrs:{for:"sharing-search-input"}},[t._v(t._s(t.t("files_sharing","Search for share recipients")))]),t._v(" "),e("NcSelect",{ref:"select",staticClass:"sharing-search__input",attrs:{"input-id":"sharing-search-input",disabled:!t.canReshare,loading:t.loading,filterable:!1,placeholder:t.inputPlaceholder,"clear-search-on-blur":function(){return!1},"user-select":!0,options:t.options},on:{search:t.asyncFind,"option:selected":t.openSharingDetails},scopedSlots:t._u([{key:"no-options",fn:function(e){var r=e.search;return[t._v("\n\t\t\t"+t._s(r?t.noResultText:t.t("files_sharing","No recommendations. Start typing."))+"\n\t\t")]}}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)}),[],!1,null,null,null),jt=It.exports,Yt=n(45400),Ht=n.n(Yt),Ft=n(65358),Bt=n(1162),Ut=n.n(Bt),Gt=n(63593),Mt={NONE:0,READ:1,UPDATE:2,CREATE:4,DELETE:8,SHARE:16},Wt={READ_ONLY:Mt.READ,UPLOAD_AND_UPDATE:Mt.READ|Mt.UPDATE|Mt.CREATE|Mt.DELETE,FILE_DROP:Mt.CREATE,ALL:Mt.UPDATE|Mt.CREATE|Mt.READ|Mt.DELETE|Mt.SHARE,ALL_FILE:Mt.UPDATE|Mt.READ|Mt.SHARE};function qt(t,e){return t!==Mt.NONE&&(t&e)===e}var Zt=n(25108);function Vt(t){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vt(t)}function $t(){$t=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,i){var a=e&&e.prototype instanceof f?e:f,o=Object.create(a.prototype),s=new x(i||[]);return n(o,"_invoke",{value:_(t,r,s)}),o}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function d(){}function p(){}var y={};c(y,a,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(C([])));v&&v!==e&&r.call(v,a)&&(y=v);var m=p.prototype=f.prototype=Object.create(y);function A(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function i(n,a,o,s){var c=h(t[n],t,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Vt(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){i("next",t,o,s)}),(function(t){i("throw",t,o,s)})):e.resolve(l).then((function(t){u.value=t,o(u)}),(function(t){return i("throw",t,o,s)}))}s(c.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function _(t,e,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return k()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=E(o,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),l;var i=h(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,l;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function C(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=p,n(m,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=c(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,s,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},A(w.prototype),c(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var o=new w(u(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},A(m),c(m,s,"Generator"),c(m,a,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=C,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:C(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function zt(t,e,r,n,i,a,o){try{var s=t[a](o),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function Qt(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function o(t){zt(a,n,i,o,s,"next",t)}function s(t){zt(a,n,i,o,s,"throw",t)}o(void 0)}))}}var Kt={mixins:[mt,A],props:{fileInfo:{type:Object,default:function(){},required:!0},share:{type:m,default:null},isUnique:{type:Boolean,default:!0}},data:function(){var t;return{config:new f,errors:{},loading:!1,saving:!1,open:!1,updateQueue:new Gt.Z({concurrency:1}),reactiveState:null===(t=this.share)||void 0===t?void 0:t.state}},computed:{hasNote:{get:function(){return""!==this.share.note},set:function(t){this.share.note=t?null:""}},dateTomorrow:function(){return new Date((new Date).setDate((new Date).getDate()+1))},lang:function(){var t=window.dayNamesShort?window.dayNamesShort:["Sun.","Mon.","Tue.","Wed.","Thu.","Fri.","Sat."],e=window.monthNamesShort?window.monthNamesShort:["Jan.","Feb.","Mar.","Apr.","May.","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec."];return{formatLocale:{firstDayOfWeek:window.firstDay?window.firstDay:0,monthsShort:e,weekdaysMin:t,weekdaysShort:t},monthFormat:"MMM"}},isFolder:function(){return"dir"===this.fileInfo.type},isPublicShare:function(){var t,e=null!==(t=this.share.shareType)&&void 0!==t?t:this.share.type;return[this.SHARE_TYPES.SHARE_TYPE_LINK,this.SHARE_TYPES.SHARE_TYPE_EMAIL].includes(e)},isShareOwner:function(){return this.share&&this.share.owner===(0,J.ts)().uid},hasCustomPermissions:function(){return![Wt.ALL,Wt.READ_ONLY,Wt.FILE_DROP].includes(this.share.permissions)}},methods:{checkShare:function(t){if(t.password&&("string"!=typeof t.password||""===t.password.trim()))return!1;if(t.expirationDate&&!t.expirationDate.isValid())return!1;return!0},parseDateString:function(t){var e;if(t){return new Date(null===(e=t.match(/([0-9]{4}-[0-9]{2}-[0-9]{2})/i))||void 0===e?void 0:e.pop())}},formatDateToString:function(t){return new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())).toISOString().split("T")[0]},onExpirationChange:function(t){this.share.expireDate=this.formatDateToString(new Date(t))},onExpirationDisable:function(){this.share.expireDate=""},onNoteChange:function(t){this.$set(this.share,"newNote",t.trim())},onNoteSubmit:function(){this.share.newNote&&(this.share.note=this.share.newNote,this.$delete(this.share,"newNote"),this.queueUpdate("note"))},onDelete:function(){var e=this;return Qt($t().mark((function r(){var n;return $t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e.loading=!0,e.open=!1,r.next=5,e.deleteShare(e.share.id);case 5:Zt.debug("Share deleted",e.share.id),n="file"===e.share.itemType?t("files_sharing",'File "{path}" has been unshared',{path:e.share.path}):t("files_sharing",'Folder "{path}" has been unshared',{path:e.share.path}),(0,w.s$)(n),e.$emit("remove:share",e.share),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),e.open=!0;case 14:return r.prev=14,e.loading=!1,r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[0,11,14,17]])})))()},queueUpdate:function(){for(var e=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];if(0!==n.length){if(this.share.id){var a={};return n.forEach((function(t){"object"===Vt(e.share[t])?a[t]=JSON.stringify(e.share[t]):a[t]=e.share[t].toString()})),void this.updateQueue.add(Qt($t().mark((function r(){var i,o;return $t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.saving=!0,e.errors={},r.prev=2,r.next=5,e.updateShare(e.share.id,a);case 5:i=r.sent,n.indexOf("password")>=0&&(e.$delete(e.share,"newPassword"),e.share.passwordExpirationTime=i.password_expiration_time),e.$delete(e.errors,n[0]),(0,w.s$)(t("files_sharing","Share {propertyName} saved",{propertyName:n[0]})),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(2),(o=r.t0.message)&&""!==o&&(e.onSyncError(n[0],o),(0,w.x2)(t("files_sharing",o)));case 15:return r.prev=15,e.saving=!1,r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[2,11,15,18]])}))))}Zt.debug("Updated local share",this.share)}},onSyncError:function(t,e){switch(this.open=!0,t){case"password":case"pending":case"expireDate":case"label":case"note":this.$set(this.errors,t,e);var r=this.$refs[t];if(r){r.$el&&(r=r.$el);var n=r.querySelector(".focusable");n&&n.focus()}break;case"sendPasswordByTalk":this.$set(this.errors,t,e),this.share.sendPasswordByTalk=!this.share.sendPasswordByTalk}},debounceQueueUpdate:tt()((function(t){this.queueUpdate(t)}),500)}},Jt={name:"SharingEntryInherited",components:{NcActionButton:Ht(),NcActionLink:E(),NcActionText:Ut(),NcAvatar:s(),SharingEntrySimple:U},mixins:[Kt],props:{share:{type:m,required:!0}},computed:{viaFileTargetUrl:function(){return(0,a.generateUrl)("/f/{fileid}",{fileid:this.share.viaFileid})},viaFolderName:function(){return(0,Ft.EZ)(this.share.viaPath)}}},Xt=n(72021),te={};te.styleTagTransform=Y(),te.setAttributes=R(),te.insert=L().bind(null,"head"),te.domAPI=T(),te.insertStyleElement=I();k()(Xt.Z,te),Xt.Z&&Xt.Z.locals&&Xt.Z.locals;var ee=(0,B.Z)(Jt,(function(){var t=this,e=t._self._c;return e("SharingEntrySimple",{key:t.share.id,staticClass:"sharing-entry__inherited",attrs:{title:t.share.shareWithDisplayName},scopedSlots:t._u([{key:"avatar",fn:function(){return[e("NcAvatar",{staticClass:"sharing-entry__avatar",attrs:{user:t.share.shareWith,"display-name":t.share.shareWithDisplayName}})]},proxy:!0}])},[t._v(" "),e("NcActionText",{attrs:{icon:"icon-user"}},[t._v("\n\t\t"+t._s(t.t("files_sharing","Added by {initiator}",{initiator:t.share.ownerDisplayName}))+"\n\t")]),t._v(" "),t.share.viaPath&&t.share.viaFileid?e("NcActionLink",{attrs:{icon:"icon-folder",href:t.viaFileTargetUrl}},[t._v("\n\t\t"+t._s(t.t("files_sharing","Via “{folder}”",{folder:t.viaFolderName}))+"\n\t")]):t._e(),t._v(" "),t.share.canDelete?e("NcActionButton",{attrs:{icon:"icon-close"},on:{click:function(e){return e.preventDefault(),t.onDelete.apply(null,arguments)}}},[t._v("\n\t\t"+t._s(t.t("files_sharing","Unshare"))+"\n\t")]):t._e()],1)}),[],!1,null,"283ca89e",null),re=ee.exports,ne=n(25108);function ie(t){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ie(t)}function ae(){ae=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,i){var a=e&&e.prototype instanceof f?e:f,o=Object.create(a.prototype),s=new x(i||[]);return n(o,"_invoke",{value:_(t,r,s)}),o}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function d(){}function p(){}var y={};c(y,a,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(C([])));v&&v!==e&&r.call(v,a)&&(y=v);var m=p.prototype=f.prototype=Object.create(y);function A(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function i(n,a,o,s){var c=h(t[n],t,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==ie(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){i("next",t,o,s)}),(function(t){i("throw",t,o,s)})):e.resolve(l).then((function(t){u.value=t,o(u)}),(function(t){return i("throw",t,o,s)}))}s(c.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function _(t,e,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return k()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=E(o,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),l;var i=h(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,l;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function C(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=p,n(m,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=c(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,s,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},A(w.prototype),c(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var o=new w(u(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},A(m),c(m,s,"Generator"),c(m,a,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=C,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:C(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function oe(t,e,r,n,i,a,o){try{var s=t[a](o),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}var se={name:"SharingInherited",components:{NcActionButton:Ht(),SharingEntryInherited:re,SharingEntrySimple:U},props:{fileInfo:{type:Object,default:function(){},required:!0}},data:function(){return{loaded:!1,loading:!1,showInheritedShares:!1,shares:[]}},computed:{showInheritedSharesIcon:function(){return this.loading?"icon-loading-small":this.showInheritedShares?"icon-triangle-n":"icon-triangle-s"},mainTitle:function(){return t("files_sharing","Others with access")},subTitle:function(){return this.showInheritedShares&&0===this.shares.length?t("files_sharing","No other users with access found"):""},toggleTooltip:function(){return"dir"===this.fileInfo.type?t("files_sharing","Toggle list of others with access to this directory"):t("files_sharing","Toggle list of others with access to this file")},fullPath:function(){return"".concat(this.fileInfo.path,"/").concat(this.fileInfo.name).replace("//","/")}},watch:{fileInfo:function(){this.resetState()}},methods:{toggleInheritedShares:function(){this.showInheritedShares=!this.showInheritedShares,this.showInheritedShares?this.fetchInheritedShares():this.resetState()},fetchInheritedShares:function(){var e,r=this;return(e=ae().mark((function e(){var n,i;return ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.loading=!0,e.prev=1,n=(0,a.generateOcsUrl)("apps/files_sharing/api/v1/shares/inherited?format=json&path={path}",{path:r.fullPath}),e.next=5,c.Z.get(n);case 5:i=e.sent,r.shares=i.data.ocs.data.map((function(t){return new m(t)})).sort((function(t,e){return e.createdTime-t.createdTime})),ne.info(r.shares),r.loaded=!0,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),OC.Notification.showTemporary(t("files_sharing","Unable to fetch inherited shares"),{type:"error"});case 14:return e.prev=14,r.loading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(t){oe(a,n,i,o,s,"next",t)}function s(t){oe(a,n,i,o,s,"throw",t)}o(void 0)}))})()},resetState:function(){this.loaded=!1,this.loading=!1,this.showInheritedShares=!1,this.shares=[]},removeShare:function(t){var e=this.shares.findIndex((function(e){return e===t}));this.shares.splice(e,1)}}},ce=se,ue=n(84772),he={};he.styleTagTransform=Y(),he.setAttributes=R(),he.insert=L().bind(null,"head"),he.domAPI=T(),he.insertStyleElement=I();k()(ue.Z,he),ue.Z&&ue.Z.locals&&ue.Z.locals;var le=(0,B.Z)(ce,(function(){var t=this,e=t._self._c;return e("ul",{attrs:{id:"sharing-inherited-shares"}},[e("SharingEntrySimple",{staticClass:"sharing-entry__inherited",attrs:{title:t.mainTitle,subtitle:t.subTitle,"aria-expanded":t.showInheritedShares},scopedSlots:t._u([{key:"avatar",fn:function(){return[e("div",{staticClass:"avatar-shared icon-more-white"})]},proxy:!0}])},[t._v(" "),e("NcActionButton",{attrs:{icon:t.showInheritedSharesIcon,"aria-label":t.toggleTooltip,title:t.toggleTooltip},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.toggleInheritedShares.apply(null,arguments)}}})],1),t._v(" "),t._l(t.shares,(function(r){return e("SharingEntryInherited",{key:r.id,attrs:{"file-info":t.fileInfo,share:r},on:{"remove:share":t.removeShare}})}))],2)}),[],!1,null,"05b67dc8",null),fe=le.exports,de=n(20144),pe=n(79570),ye=n.n(pe),ge=n(875),ve=n.n(ge),me=n(37087),Ae=n(3641),we=n(44291),_e={components:{DropdownIcon:Ae.Z},mixins:[Kt,Et,A],props:{share:{type:Object,required:!0},toggle:{type:Boolean,default:!1}},data:function(){return{selectedOption:"",showDropdown:this.toggle,focusTrap:null}},computed:{canViewText:function(){return t("files_sharing","View only")},canEditText:function(){return t("files_sharing","Can edit")},fileDropText:function(){return t("files_sharing","File drop")},customPermissionsText:function(){return t("files_sharing","Custom permissions")},preSelectedOption:function(){return(this.share.permissions&~Mt.SHARE)===Wt.READ_ONLY?this.canViewText:this.share.permissions===Wt.ALL||this.share.permissions===Wt.ALL_FILE?this.canEditText:(this.share.permissions&~Mt.SHARE)===Wt.FILE_DROP?this.fileDropText:this.customPermissionsText},options:function(){var t=[this.canViewText,this.canEditText];return this.supportsFileDrop&&t.push(this.fileDropText),t.push(this.customPermissionsText),t},supportsFileDrop:function(){if(this.isFolder&&this.config.isPublicUploadEnabled){var t,e=null!==(t=this.share.type)&&void 0!==t?t:this.share.shareType;return[this.SHARE_TYPES.SHARE_TYPE_LINK,this.SHARE_TYPES.SHARE_TYPE_EMAIL].includes(e)}return!1},dropDownPermissionValue:function(){switch(this.selectedOption){case this.canEditText:return this.isFolder?Wt.ALL:Wt.ALL_FILE;case this.fileDropText:return Wt.FILE_DROP;case this.customPermissionsText:return"custom";case this.canViewText:default:return Wt.READ_ONLY}},dropdownId:function(){return"dropdown-".concat(Math.random().toString(36).substr(2,9))}},watch:{toggle:function(t){this.showDropdown=t}},mounted:function(){this.initializeComponent(),window.addEventListener("click",this.handleClickOutside)},beforeDestroy:function(){window.removeEventListener("click",this.handleClickOutside)},methods:{toggleDropdown:function(){var t=this;this.showDropdown=!this.showDropdown,this.showDropdown?this.$nextTick((function(){t.useFocusTrap()})):this.clearFocusTrap()},closeDropdown:function(){this.clearFocusTrap(),this.showDropdown=!1},selectOption:function(t){this.selectedOption=t,t===this.customPermissionsText?this.$emit("open-sharing-details"):(this.share.permissions=this.dropDownPermissionValue,this.queueUpdate("permissions")),this.showDropdown=!1},initializeComponent:function(){this.selectedOption=this.preSelectedOption},handleClickOutside:function(t){var e=this.$refs.quickShareDropdownContainer;e&&!e.contains(t.target)&&(this.showDropdown=!1)},useFocusTrap:function(){Object.assign(window,{_nc_focus_trap:window._nc_focus_trap||[]});var t=this.$refs.quickShareDropdown;this.focusTrap=(0,we.createFocusTrap)(t,{allowOutsideClick:!0,trapStack:window._nc_focus_trap}),this.focusTrap.activate()},clearFocusTrap:function(){var t;null===(t=this.focusTrap)||void 0===t||t.deactivate(),this.focusTrap=null},shiftFocusForward:function(){var t=document.activeElement.nextElementSibling;t||(t=this.$refs.quickShareDropdown.firstElementChild),t.focus()},shiftFocusBackward:function(){var t=document.activeElement.previousElementSibling;t||(t=this.$refs.quickShareDropdown.lastElementChild),t.focus()},handleArrowUp:function(){this.shiftFocusBackward()},handleArrowDown:function(){this.shiftFocusForward()}}},Ee=_e,be=n(94345),Se={};Se.styleTagTransform=Y(),Se.setAttributes=R(),Se.insert=L().bind(null,"head"),Se.domAPI=T(),Se.insertStyleElement=I();k()(be.Z,Se),be.Z&&be.Z.locals&&be.Z.locals;var xe=(0,B.Z)(Ee,(function(){var t=this,e=t._self._c;return e("div",{ref:"quickShareDropdownContainer",class:{active:t.showDropdown,"share-select":!0}},[e("span",{staticClass:"trigger-text",attrs:{id:t.dropdownId,"aria-expanded":t.showDropdown,"aria-haspopup":!0,"aria-label":"Quick share options dropdown"},on:{click:t.toggleDropdown}},[t._v("\n\t\t"+t._s(t.selectedOption)+"\n\t\t"),e("DropdownIcon",{attrs:{size:15}})],1),t._v(" "),t.showDropdown?e("div",{ref:"quickShareDropdown",staticClass:"share-select-dropdown",attrs:{"aria-labelledby":t.dropdownId,tabindex:"0"},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.handleArrowDown.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.handleArrowUp.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.closeDropdown.apply(null,arguments)}]}},t._l(t.options,(function(r){return e("button",{key:r,class:{"dropdown-item":!0,selected:r===t.selectedOption},attrs:{"aria-selected":r===t.selectedOption},on:{click:function(e){return t.selectOption(r)}}},[t._v("\n\t\t\t"+t._s(r)+"\n\t\t")])})),0):t._e()])}),[],!1,null,"c003ab64",null),Ce=xe.exports,ke={name:"ExternalShareAction",props:{id:{type:String,required:!0},action:{type:Object,default:function(){return{}}},fileInfo:{type:Object,default:function(){},required:!0},share:{type:m,default:null}},computed:{data:function(){return this.action.data(this)}}},Pe=(0,B.Z)(ke,(function(){var t=this;return(0,t._self._c)(t.data.is,t._g(t._b({tag:"Component"},"Component",t.data,!1),t.action.handlers),[t._v("\n\t"+t._s(t.data.text)+"\n")])}),[],!1,null,null,null).exports,Te=n(25108);function De(t){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},De(t)}function Le(){Le=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,i){var a=e&&e.prototype instanceof f?e:f,o=Object.create(a.prototype),s=new x(i||[]);return n(o,"_invoke",{value:_(t,r,s)}),o}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function d(){}function p(){}var y={};c(y,a,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(C([])));v&&v!==e&&r.call(v,a)&&(y=v);var m=p.prototype=f.prototype=Object.create(y);function A(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function i(n,a,o,s){var c=h(t[n],t,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==De(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){i("next",t,o,s)}),(function(t){i("throw",t,o,s)})):e.resolve(l).then((function(t){u.value=t,o(u)}),(function(t){return i("throw",t,o,s)}))}s(c.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function _(t,e,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return k()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=E(o,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),l;var i=h(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,l;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function C(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=p,n(m,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=c(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,s,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},A(w.prototype),c(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var o=new w(u(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},A(m),c(m,s,"Generator"),c(m,a,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=C,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:C(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Oe(t,e,r,n,i,a,o){try{var s=t[a](o),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function Re(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function o(t){Oe(a,n,i,o,s,"next",t)}function s(t){Oe(a,n,i,o,s,"throw",t)}o(void 0)}))}}var Ne={name:"SharingEntryLink",components:{ExternalShareAction:Pe,NcActions:S(),NcActionButton:Ht(),NcActionInput:ye(),NcActionLink:E(),NcActionText:Ut(),NcActionSeparator:ve(),NcAvatar:s(),Tune:me.Z,QuickShareSelect:Ce},mixins:[Kt,Et],props:{canReshare:{type:Boolean,default:!0},index:{type:Number,default:null}},data:function(){return{showDropdown:!1,copySuccess:!0,copied:!1,pending:!1,ExternalLegacyLinkActions:OCA.Sharing.ExternalLinkActions.state,ExternalShareActions:OCA.Sharing.ExternalShareActions.state}},computed:{title:function(){if(this.share&&this.share.id){if(!this.isShareOwner&&this.share.ownerDisplayName)return this.isEmailShareType?t("files_sharing","{shareWith} by {initiator}",{shareWith:this.share.shareWith,initiator:this.share.ownerDisplayName}):t("files_sharing","Shared via link by {initiator}",{initiator:this.share.ownerDisplayName});if(this.share.label&&""!==this.share.label.trim())return this.isEmailShareType?t("files_sharing","Mail share ({label})",{label:this.share.label.trim()}):t("files_sharing","Share link ({label})",{label:this.share.label.trim()});if(this.isEmailShareType)return this.share.shareWith}return this.index>1?t("files_sharing","Share link ({index})",{index:this.index}):t("files_sharing","Share link")},subtitle:function(){return this.isEmailShareType&&this.title!==this.share.shareWith?this.share.shareWith:null},hasExpirationDate:{get:function(){return this.config.isDefaultExpireDateEnforced||!!this.share.expireDate},set:function(t){var e=this.config.defaultExpirationDate||new Date((new Date).setDate((new Date).getDate()+1));this.share.expireDate=t?this.formatDateToString(e):"",Te.debug("Expiration date status",t,this.share.expireDate)}},dateMaxEnforced:function(){return this.config.isDefaultExpireDateEnforced?new Date((new Date).setDate((new Date).getDate()+this.config.defaultExpireDate)):null},isPasswordProtected:{get:function(){return this.config.enforcePasswordForPublicLink||!!this.share.password},set:function(t){var e=this;return Re(Le().mark((function r(){return Le().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=de.default,r.t1=e.share,!t){r.next=8;break}return r.next=5,ut();case 5:r.t2=r.sent,r.next=9;break;case 8:r.t2="";case 9:r.t3=r.t2,r.t0.set.call(r.t0,r.t1,"password",r.t3),de.default.set(e.share,"newPassword",e.share.password);case 12:case"end":return r.stop()}}),r)})))()}},passwordExpirationTime:function(){if(null===this.share.passwordExpirationTime)return null;var t=moment(this.share.passwordExpirationTime);return!(t.diff(moment())<0)&&t.fromNow()},isTalkEnabled:function(){return void 0!==OC.appswebroots.spreed},isPasswordProtectedByTalkAvailable:function(){return this.isPasswordProtected&&this.isTalkEnabled},isPasswordProtectedByTalk:{get:function(){return this.share.sendPasswordByTalk},set:function(t){var e=this;return Re(Le().mark((function r(){return Le().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.share.sendPasswordByTalk=t;case 1:case"end":return r.stop()}}),r)})))()}},isEmailShareType:function(){return!!this.share&&this.share.type===this.SHARE_TYPES.SHARE_TYPE_EMAIL},canTogglePasswordProtectedByTalkAvailable:function(){return!!this.isPasswordProtected&&!(this.isEmailShareType&&!this.hasUnsavedPassword)},pendingPassword:function(){return this.config.enableLinkPasswordByDefault&&this.share&&!this.share.id},pendingEnforcedPassword:function(){return this.config.enforcePasswordForPublicLink&&this.share&&!this.share.id},pendingExpirationDate:function(){return this.config.isDefaultExpireDateEnforced&&this.share&&!this.share.id},hasUnsavedPassword:function(){return void 0!==this.share.newPassword},shareLink:function(){return window.location.protocol+"//"+window.location.host+(0,a.generateUrl)("/s/")+this.share.token},actionsTooltip:function(){return t("files_sharing",'Actions for "{title}"',{title:this.title})},copyLinkTooltip:function(){return this.copied?this.copySuccess?"":t("files_sharing","Cannot copy, please copy the link manually"):t("files_sharing",'Copy public link of "{title}" to clipboard',{title:this.title})},externalLegacyLinkActions:function(){return this.ExternalLegacyLinkActions.actions},externalLinkActions:function(){return this.ExternalShareActions.actions.filter((function(t){return t.shareType.includes(d.D.SHARE_TYPE_LINK)||t.shareType.includes(d.D.SHARE_TYPE_EMAIL)}))},isPasswordPolicyEnabled:function(){return"object"===De(this.config.passwordPolicy)},canChangeHideDownload:function(){return this.fileInfo.shareAttributes.some((function(t){return"download"===t.key&&"permissions"===t.scope&&!1===t.enabled}))}},methods:{onNewLinkShare:function(){var e=this;return Re(Le().mark((function r(){var n,i,a,o;return Le().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.loading){r.next=2;break}return r.abrupt("return");case 2:if(n={share_type:d.D.SHARE_TYPE_LINK},e.config.isDefaultExpireDateEnforced&&(n.expiration=e.formatDateToString(e.config.defaultExpirationDate)),!(e.config.enableLinkPasswordByDefault||e.config.enforcePasswordForPublicLink||e.config.isDefaultExpireDateEnforced)){r.next=37;break}if(e.pending=!0,!e.share||e.share.id){r.next=24;break}if(!e.checkShare(e.share)){r.next=21;break}return r.prev=8,r.next=11,e.pushNewLinkShare(e.share,!0);case 11:r.next=18;break;case 13:return r.prev=13,r.t0=r.catch(8),e.pending=!1,Te.error(r.t0),r.abrupt("return",!1);case 18:return r.abrupt("return",!0);case 21:return e.open=!0,OC.Notification.showTemporary(t("files_sharing","Error, please enter proper password and/or expiration date")),r.abrupt("return",!1);case 24:if(!e.config.enableLinkPasswordByDefault&&!e.config.enforcePasswordForPublicLink){r.next=28;break}return r.next=27,ut();case 27:n.password=r.sent;case 28:return i=new m(n),r.next=31,new Promise((function(t){e.$emit("add:share",i,t)}));case 31:a=r.sent,e.open=!1,e.pending=!1,a.open=!0,r.next=40;break;case 37:return o=new m(n),r.next=40,e.pushNewLinkShare(o);case 40:case"end":return r.stop()}}),r,null,[[8,13]])})))()},pushNewLinkShare:function(e,r){var n=this;return Re(Le().mark((function i(){var a,o,s,c,u,h;return Le().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,!n.loading){i.next=3;break}return i.abrupt("return",!0);case 3:return n.loading=!0,n.errors={},a=(n.fileInfo.path+"/"+n.fileInfo.name).replace("//","/"),o={path:a,shareType:d.D.SHARE_TYPE_LINK,password:e.password,expireDate:e.expireDate,attributes:JSON.stringify(n.fileInfo.shareAttributes)},Te.debug("Creating link share with options",o),i.next=10,n.createShare(o);case 10:if(s=i.sent,n.open=!1,Te.debug("Link share created",s),!r){i.next=19;break}return i.next=16,new Promise((function(t){n.$emit("update:share",s,t)}));case 16:c=i.sent,i.next=22;break;case 19:return i.next=21,new Promise((function(t){n.$emit("add:share",s,t)}));case 21:c=i.sent;case 22:n.config.enforcePasswordForPublicLink||c.copyLink(),(0,w.s$)(t("files_sharing","Link share created")),i.next=35;break;case 26:if(i.prev=26,i.t0=i.catch(0),h=null===i.t0||void 0===i.t0||null===(u=i.t0.response)||void 0===u||null===(u=u.data)||void 0===u||null===(u=u.ocs)||void 0===u||null===(u=u.meta)||void 0===u?void 0:u.message){i.next=33;break}return(0,w.x2)(t("files_sharing","Error while creating the share")),Te.error(i.t0),i.abrupt("return");case 33:throw h.match(/password/i)?n.onSyncError("password",h):h.match(/date/i)?n.onSyncError("expireDate",h):n.onSyncError("pending",h),i.t0;case 35:return i.prev=35,n.loading=!1,i.finish(35);case 38:case"end":return i.stop()}}),i,null,[[0,26,35,38]])})))()},copyLink:function(){var e=this;return Re(Le().mark((function r(){return Le().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,navigator.clipboard.writeText(e.shareLink);case 3:(0,w.s$)(t("files_sharing","Link copied")),e.$refs.copyButton.$el.focus(),e.copySuccess=!0,e.copied=!0,r.next=14;break;case 9:r.prev=9,r.t0=r.catch(0),e.copySuccess=!1,e.copied=!0,Te.error(r.t0);case 14:return r.prev=14,setTimeout((function(){e.copySuccess=!1,e.copied=!1}),4e3),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[0,9,14,17]])})))()},onPasswordChange:function(t){this.$set(this.share,"newPassword",t)},onPasswordDisable:function(){this.share.password="",this.$delete(this.share,"newPassword"),this.share.id&&this.queueUpdate("password")},onPasswordSubmit:function(){this.hasUnsavedPassword&&(this.share.password=this.share.newPassword.trim(),this.queueUpdate("password"))},onPasswordProtectedByTalkChange:function(){this.hasUnsavedPassword&&(this.share.password=this.share.newPassword.trim()),this.queueUpdate("sendPasswordByTalk","password")},onMenuClose:function(){this.onPasswordSubmit(),this.onNoteSubmit()},onCancel:function(){this.$emit("remove:share",this.share)},toggleQuickShareSelect:function(){this.showDropdown=!this.showDropdown}}},Ie=Ne,je=n(9634),Ye={};Ye.styleTagTransform=Y(),Ye.setAttributes=R(),Ye.insert=L().bind(null,"head"),Ye.domAPI=T(),Ye.insertStyleElement=I();k()(je.Z,Ye),je.Z&&je.Z.locals&&je.Z.locals;var He=(0,B.Z)(Ie,(function(){var t=this,e=t._self._c;return e("li",{staticClass:"sharing-entry sharing-entry__link",class:{"sharing-entry--share":t.share}},[e("NcAvatar",{staticClass:"sharing-entry__avatar",attrs:{"is-no-user":!0,"icon-class":t.isEmailShareType?"avatar-link-share icon-mail-white":"avatar-link-share icon-public-white"}}),t._v(" "),e("div",{staticClass:"sharing-entry__summary"},[e("div",{staticClass:"sharing-entry__desc",on:{click:function(e){return e.preventDefault(),t.toggleQuickShareSelect.apply(null,arguments)}}},[e("span",{staticClass:"sharing-entry__title",attrs:{title:t.title}},[t._v("\n\t\t\t\t"+t._s(t.title)+"\n\t\t\t")]),t._v(" "),t.subtitle?e("p",[t._v("\n\t\t\t\t"+t._s(t.subtitle)+"\n\t\t\t")]):t._e(),t._v(" "),t.share&&void 0!==t.share.permissions?e("QuickShareSelect",{attrs:{share:t.share,"file-info":t.fileInfo,toggle:t.showDropdown},on:{"open-sharing-details":function(e){return t.openShareDetailsForCustomSettings(t.share)}}}):t._e()],1),t._v(" "),t.share&&!t.isEmailShareType&&t.share.token?e("NcActions",{ref:"copyButton",staticClass:"sharing-entry__copy"},[e("NcActionLink",{attrs:{href:t.shareLink,target:"_blank",title:t.copyLinkTooltip,"aria-label":t.copyLinkTooltip,icon:t.copied&&t.copySuccess?"icon-checkmark-color":"icon-clippy"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.copyLink.apply(null,arguments)}}})],1):t._e()],1),t._v(" "),!t.pending&&(t.pendingPassword||t.pendingEnforcedPassword||t.pendingExpirationDate)?e("NcActions",{staticClass:"sharing-entry__actions",attrs:{"aria-label":t.actionsTooltip,"menu-align":"right",open:t.open},on:{"update:open":function(e){t.open=e},close:t.onNewLinkShare}},[t.errors.pending?e("NcActionText",{class:{error:t.errors.pending},attrs:{icon:"icon-error"}},[t._v("\n\t\t\t"+t._s(t.errors.pending)+"\n\t\t")]):e("NcActionText",{attrs:{icon:"icon-info"}},[t._v("\n\t\t\t"+t._s(t.t("files_sharing","Please enter the following required information before creating the share"))+"\n\t\t")]),t._v(" "),t.pendingEnforcedPassword?e("NcActionText",{attrs:{icon:"icon-password"}},[t._v("\n\t\t\t"+t._s(t.t("files_sharing","Password protection (enforced)"))+"\n\t\t")]):t.pendingPassword?e("NcActionCheckbox",{staticClass:"share-link-password-checkbox",attrs:{checked:t.isPasswordProtected,disabled:t.config.enforcePasswordForPublicLink||t.saving},on:{"update:checked":function(e){t.isPasswordProtected=e},uncheck:t.onPasswordDisable}},[t._v("\n\t\t\t"+t._s(t.t("files_sharing","Password protection"))+"\n\t\t")]):t._e(),t._v(" "),t.pendingEnforcedPassword||t.share.password?e("NcActionInput",{staticClass:"share-link-password",attrs:{value:t.share.password,disabled:t.saving,required:t.config.enableLinkPasswordByDefault||t.config.enforcePasswordForPublicLink,minlength:t.isPasswordPolicyEnabled&&t.config.passwordPolicy.minLength,icon:"",autocomplete:"new-password"},on:{"update:value":function(e){return t.$set(t.share,"password",e)},submit:t.onNewLinkShare}},[t._v("\n\t\t\t"+t._s(t.t("files_sharing","Enter a password"))+"\n\t\t")]):t._e(),t._v(" "),t.pendingExpirationDate?e("NcActionText",{attrs:{icon:"icon-calendar-dark"}},[t._v("\n\t\t\t"+t._s(t.t("files_sharing","Expiration date (enforced)"))+"\n\t\t")]):t._e(),t._v(" "),t.pendingExpirationDate?e("NcActionInput",{staticClass:"share-link-expire-date",attrs:{disabled:t.saving,"is-native-picker":!0,"hide-label":!0,value:new Date(t.share.expireDate),type:"date",min:t.dateTomorrow,max:t.dateMaxEnforced},on:{input:t.onExpirationChange}},[t._v("\n\t\t\t"+t._s(t.t("files_sharing","Enter a date"))+"\n\t\t")]):t._e(),t._v(" "),e("NcActionButton",{attrs:{icon:"icon-checkmark"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.onNewLinkShare.apply(null,arguments)}}},[t._v("\n\t\t\t"+t._s(t.t("files_sharing","Create share"))+"\n\t\t")]),t._v(" "),e("NcActionButton",{attrs:{icon:"icon-close"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.onCancel.apply(null,arguments)}}},[t._v("\n\t\t\t"+t._s(t.t("files_sharing","Cancel"))+"\n\t\t")])],1):t.loading?e("div",{staticClass:"icon-loading-small sharing-entry__loading"}):e("NcActions",{staticClass:"sharing-entry__actions",attrs:{"aria-label":t.actionsTooltip,"menu-align":"right",open:t.open},on:{"update:open":function(e){t.open=e},close:t.onMenuClose}},[t.share?[t.share.canEdit&&t.canReshare?[e("NcActionButton",{attrs:{disabled:t.saving},on:{click:function(e){return e.preventDefault(),t.openSharingDetails.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Tune")]},proxy:!0}],null,!1,961531849)},[t._v("\n\t\t\t\t\t"+t._s(t.t("files_sharing","Customize link"))+"\n\t\t\t\t")])]:t._e(),t._v(" "),e("NcActionSeparator"),t._v(" "),t._l(t.externalLinkActions,(function(r){return e("ExternalShareAction",{key:r.id,attrs:{id:r.id,action:r,"file-info":t.fileInfo,share:t.share}})})),t._v(" "),t._l(t.externalLegacyLinkActions,(function(r,n){var i=r.icon,a=r.url,o=r.name;return e("NcActionLink",{key:n,attrs:{href:a(t.shareLink),icon:i,target:"_blank"}},[t._v("\n\t\t\t\t"+t._s(o)+"\n\t\t\t")])})),t._v(" "),!t.isEmailShareType&&t.canReshare?e("NcActionButton",{staticClass:"new-share-link",attrs:{icon:"icon-add"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.onNewLinkShare.apply(null,arguments)}}},[t._v("\n\t\t\t\t"+t._s(t.t("files_sharing","Add another link"))+"\n\t\t\t")]):t._e(),t._v(" "),t.share.canDelete?e("NcActionButton",{attrs:{icon:"icon-close",disabled:t.saving},on:{click:function(e){return e.preventDefault(),t.onDelete.apply(null,arguments)}}},[t._v("\n\t\t\t\t"+t._s(t.t("files_sharing","Unshare"))+"\n\t\t\t")]):t._e()]:t.canReshare?e("NcActionButton",{staticClass:"new-share-link",attrs:{title:t.t("files_sharing","Create a new share link"),"aria-label":t.t("files_sharing","Create a new share link"),icon:t.loading?"icon-loading-small":"icon-add"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.onNewLinkShare.apply(null,arguments)}}}):t._e()],2)],1)}),[],!1,null,"7192de7a",null),Fe={name:"SharingLinkList",components:{SharingEntryLink:He.exports},mixins:[A,Et],props:{fileInfo:{type:Object,default:function(){},required:!0},shares:{type:Array,default:function(){return[]},required:!0},canReshare:{type:Boolean,required:!0}},data:function(){return{canLinkShare:OC.getCapabilities().files_sharing.public.enabled}},computed:{hasLinkShares:function(){var t=this;return this.shares.filter((function(e){return e.type===t.SHARE_TYPES.SHARE_TYPE_LINK})).length>0},hasShares:function(){return this.shares.length>0}},methods:{addShare:function(t,e){this.shares.unshift(t),this.awaitForShare(t,e)},awaitForShare:function(t,e){var r=this;this.$nextTick((function(){var n=r.$children.find((function(e){return e.share===t}));n&&e(n)}))},removeShare:function(t){var e=this.shares.findIndex((function(e){return e===t}));this.shares.splice(e,1)}}},Be=Fe,Ue=(0,B.Z)(Be,(function(){var t=this,e=t._self._c;return t.canLinkShare?e("ul",{staticClass:"sharing-link-list"},[!t.hasLinkShares&&t.canReshare?e("SharingEntryLink",{attrs:{"can-reshare":t.canReshare,"file-info":t.fileInfo},on:{"add:share":t.addShare}}):t._e(),t._v(" "),t.hasShares?t._l(t.shares,(function(r,n){return e("SharingEntryLink",{key:r.id,attrs:{index:t.shares.length>1?n+1:null,"can-reshare":t.canReshare,share:t.shares[n],"file-info":t.fileInfo},on:{"update:share":[function(e){return t.$set(t.shares,n,e)},function(e){return t.awaitForShare.apply(t,arguments)}],"add:share":function(e){return t.addShare.apply(t,arguments)},"remove:share":t.removeShare,"open-sharing-details":function(e){return t.openSharingDetails(r)}}})})):t._e()],2):t._e()}),[],!1,null,null,null),Ge=Ue.exports,Me=n(10861),We=n.n(Me),qe=n(89115);function Ze(t){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ze(t)}var Ve={name:"SharingEntry",components:{NcButton:We(),NcAvatar:s(),DotsHorizontalIcon:qe.default,NcSelect:rt(),QuickShareSelect:Ce},mixins:[Kt,Et],data:function(){return{showDropdown:!1}},computed:{title:function(){var e=this.share.shareWithDisplayName;return this.share.type===this.SHARE_TYPES.SHARE_TYPE_GROUP?e+=" (".concat(t("files_sharing","group"),")"):this.share.type===this.SHARE_TYPES.SHARE_TYPE_ROOM?e+=" (".concat(t("files_sharing","conversation"),")"):this.share.type===this.SHARE_TYPES.SHARE_TYPE_REMOTE?e+=" (".concat(t("files_sharing","remote"),")"):this.share.type===this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP?e+=" (".concat(t("files_sharing","remote group"),")"):this.share.type===this.SHARE_TYPES.SHARE_TYPE_GUEST&&(e+=" (".concat(t("files_sharing","guest"),")")),e},tooltip:function(){if(this.share.owner!==this.share.uidFileOwner){var e={user:this.share.shareWithDisplayName,owner:this.share.ownerDisplayName};return this.share.type===this.SHARE_TYPES.SHARE_TYPE_GROUP?t("files_sharing","Shared with the group {user} by {owner}",e):this.share.type===this.SHARE_TYPES.SHARE_TYPE_ROOM?t("files_sharing","Shared with the conversation {user} by {owner}",e):t("files_sharing","Shared with {user} by {owner}",e)}return null},hasStatus:function(){return this.share.type===this.SHARE_TYPES.SHARE_TYPE_USER&&("object"===Ze(this.share.status)&&!Array.isArray(this.share.status))}},methods:{onMenuClose:function(){this.onNoteSubmit()},toggleQuickShareSelect:function(){this.showDropdown=!this.showDropdown}}},$e=n(86864),ze={};ze.styleTagTransform=Y(),ze.setAttributes=R(),ze.insert=L().bind(null,"head"),ze.domAPI=T(),ze.insertStyleElement=I();k()($e.Z,ze),$e.Z&&$e.Z.locals&&$e.Z.locals;var Qe=(0,B.Z)(Ve,(function(){var t=this,e=t._self._c;return e("li",{staticClass:"sharing-entry"},[e("NcAvatar",{staticClass:"sharing-entry__avatar",attrs:{"is-no-user":t.share.type!==t.SHARE_TYPES.SHARE_TYPE_USER,user:t.share.shareWith,"display-name":t.share.shareWithDisplayName,"menu-position":"left",url:t.share.shareWithAvatar}}),t._v(" "),e("div",{staticClass:"sharing-entry__summary",on:{click:function(e){return e.preventDefault(),t.toggleQuickShareSelect.apply(null,arguments)}}},[e(t.share.shareWithLink?"a":"div",{tag:"component",staticClass:"sharing-entry__summary__desc",attrs:{title:t.tooltip,"aria-label":t.tooltip,href:t.share.shareWithLink}},[e("span",[t._v(t._s(t.title)+"\n\t\t\t\t"),t.isUnique?t._e():e("span",{staticClass:"sharing-entry__summary__desc-unique"},[t._v(" ("+t._s(t.share.shareWithDisplayNameUnique)+")")]),t._v(" "),t.hasStatus&&t.share.status.message?e("small",[t._v("("+t._s(t.share.status.message)+")")]):t._e()])]),t._v(" "),e("QuickShareSelect",{attrs:{share:t.share,"file-info":t.fileInfo,toggle:t.showDropdown},on:{"open-sharing-details":function(e){return t.openShareDetailsForCustomSettings(t.share)}}})],1),t._v(" "),e("NcButton",{staticClass:"sharing-entry__action",attrs:{"aria-label":t.t("files_sharing","Open Sharing Details"),type:"tertiary-no-background"},on:{click:function(e){return t.openSharingDetails(t.share)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DotsHorizontalIcon",{attrs:{size:20}})]},proxy:!0}])})],1)}),[],!1,null,"ec1ee21e",null);function Ke(t){return function(t){if(Array.isArray(t))return Je(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Je(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Je(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Xe={name:"SharingList",components:{SharingEntry:Qe.exports},mixins:[A,Et],props:{fileInfo:{type:Object,default:function(){},required:!0},shares:{type:Array,default:function(){return[]},required:!0}},computed:{hasShares:function(){return 0===this.shares.length},isUnique:function(){var t=this;return function(e){return Ke(t.shares).filter((function(r){return e.type===t.SHARE_TYPES.SHARE_TYPE_USER&&e.shareWithDisplayName===r.shareWithDisplayName})).length<=1}}}},tr=(0,B.Z)(Xe,(function(){var t=this,e=t._self._c;return e("ul",{staticClass:"sharing-sharee-list"},t._l(t.shares,(function(r){return e("SharingEntry",{key:r.id,attrs:{"file-info":t.fileInfo,share:r,"is-unique":t.isUnique(r)},on:{"open-sharing-details":function(e){return t.openSharingDetails(r)}}})})),1)}),[],!1,null,null,null).exports,er=n(36029),rr=n.n(er),nr=n(36767),ir=n.n(nr),ar=n(19286),or=n.n(ar),sr=n(20571),cr=n.n(sr),ur=n(10549),hr=n(82675),lr=n(2887),fr=n(41447),dr=n(33024),pr=n(89412),yr=n(42055),gr=n(76205),vr=n(96457),mr=n(86119),Ar=n(20404),wr=n(25108);function _r(t){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_r(t)}function Er(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function br(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Er(Object(r),!0).forEach((function(e){Sr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Er(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Sr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==_r(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===_r(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xr(){xr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,i){var a=e&&e.prototype instanceof f?e:f,o=Object.create(a.prototype),s=new x(i||[]);return n(o,"_invoke",{value:_(t,r,s)}),o}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function d(){}function p(){}var y={};c(y,a,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(C([])));v&&v!==e&&r.call(v,a)&&(y=v);var m=p.prototype=f.prototype=Object.create(y);function A(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function i(n,a,o,s){var c=h(t[n],t,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==_r(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){i("next",t,o,s)}),(function(t){i("throw",t,o,s)})):e.resolve(l).then((function(t){u.value=t,o(u)}),(function(t){return i("throw",t,o,s)}))}s(c.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function _(t,e,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return k()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=E(o,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),l;var i=h(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,l;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function C(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=p,n(m,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=c(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,s,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},A(w.prototype),c(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var o=new w(u(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},A(m),c(m,s,"Generator"),c(m,a,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=C,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:C(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Cr(t,e,r,n,i,a,o){try{var s=t[a](o),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function kr(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function o(t){Cr(a,n,i,o,s,"next",t)}function s(t){Cr(a,n,i,o,s,"throw",t)}o(void 0)}))}}var Pr={name:"SharingDetailsTab",components:{NcAvatar:s(),NcButton:We(),NcInputField:rr(),NcDatetimePicker:ir(),NcDateTimePickerNative:or(),NcCheckboxRadioSwitch:cr(),CloseIcon:hr.default,CircleIcon:ur.Z,EditIcon:lr.default,LinkIcon:dr.Z,GroupIcon:pr.Z,ShareIcon:yr.Z,UserIcon:gr.Z,UploadIcon:mr.Z,ViewIcon:vr.default,MenuDownIcon:Ar.Z,DotsHorizontalIcon:qe.default},mixins:[A,mt,Kt],props:{shareRequestValue:{type:Object,required:!1},fileInfo:{type:Object,required:!0},share:{type:Object,required:!0}},data:function(){return{writeNoteToRecipientIsChecked:!1,sharingPermission:Wt.ALL.toString(),revertSharingPermission:Wt.ALL.toString(),setCustomPermissions:!1,passwordError:!1,advancedSectionAccordionExpanded:!1,bundledPermissions:Wt,isFirstComponentLoad:!0,test:!1}},computed:{title:function(){var e=t("files_sharing","Share with ");return this.share.type===this.SHARE_TYPES.SHARE_TYPE_USER?e+=this.share.shareWithDisplayName:this.share.type===this.SHARE_TYPES.SHARE_TYPE_LINK?e=t("files_sharing","Share link"):this.share.type===this.SHARE_TYPES.SHARE_TYPE_GROUP?e+=" (".concat(t("files_sharing","group"),")"):this.share.type===this.SHARE_TYPES.SHARE_TYPE_ROOM?e+=" (".concat(t("files_sharing","conversation"),")"):this.share.type===this.SHARE_TYPES.SHARE_TYPE_REMOTE?e+=" (".concat(t("files_sharing","remote"),")"):this.share.type===this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP?e+=" (".concat(t("files_sharing","remote group"),")"):this.share.type===this.SHARE_TYPES.SHARE_TYPE_GUEST&&(e+=" (".concat(t("files_sharing","guest"),")")),e},canEdit:{get:function(){return this.share.hasUpdatePermission},set:function(t){this.updateAtomicPermissions({isEditChecked:t})}},canCreate:{get:function(){return this.share.hasCreatePermission},set:function(t){this.updateAtomicPermissions({isCreateChecked:t})}},canDelete:{get:function(){return this.share.hasDeletePermission},set:function(t){this.updateAtomicPermissions({isDeleteChecked:t})}},canReshare:{get:function(){return this.share.hasSharePermission},set:function(t){this.updateAtomicPermissions({isReshareChecked:t})}},canDownload:{get:function(){return this.share.hasDownloadPermission},set:function(t){this.updateAtomicPermissions({isDownloadChecked:t})}},hasRead:{get:function(){return this.share.hasReadPermission},set:function(t){this.updateAtomicPermissions({isReadChecked:t})}},hasExpirationDate:{get:function(){return!!this.share.expireDate||this.config.isDefaultInternalExpireDateEnforced},set:function(t){this.share.expireDate=t?this.formatDateToString(this.defaultExpiryDate):""}},isPasswordProtected:{get:function(){return this.config.enforcePasswordForPublicLink||!!this.share.password},set:function(t){var e=this;return kr(xr().mark((function r(){return xr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t){r.next=6;break}return r.next=3,ut();case 3:r.t0=r.sent,r.next=7;break;case 6:r.t0="";case 7:e.share.password=r.t0,e.$set(e.share,"newPassword",e.share.password);case 9:case"end":return r.stop()}}),r)})))()}},isFolder:function(){return"dir"===this.fileInfo.type},dateMaxEnforced:function(){return!this.isRemote&&this.config.isDefaultInternalExpireDateEnforced?new Date((new Date).setDate((new Date).getDate()+1+this.config.defaultInternalExpireDate)):this.config.isDefaultRemoteExpireDateEnforced?new Date((new Date).setDate((new Date).getDate()+1+this.config.defaultRemoteExpireDate)):null},isSetDownloadButtonVisible:function(){return this.isFolder||["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation"].includes(this.fileInfo.mimetype)},isPasswordEnforced:function(){return this.isPublicShare&&this.config.enforcePasswordForPublicLink},isExpiryDateEnforced:function(){return this.config.isDefaultInternalExpireDateEnforced},defaultExpiryDate:function(){return(this.isGroupShare||this.isUserShare)&&this.config.isDefaultInternalExpireDateEnabled?new Date(this.config.defaultInternalExpirationDate):this.isRemoteShare&&this.config.isDefaultRemoteExpireDateEnabled?new Date(this.config.defaultRemoteExpireDateEnabled):this.isPublicShare&&this.config.isDefaultExpireDateEnabled?new Date(this.config.defaultExpirationDate):new Date((new Date).setDate((new Date).getDate()+1))},isUserShare:function(){return this.share.type===this.SHARE_TYPES.SHARE_TYPE_USER},isGroupShare:function(){return this.share.type===this.SHARE_TYPES.SHARE_TYPE_GROUP},isRemoteShare:function(){return this.share.type===this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP||this.share.type===this.SHARE_TYPES.SHARE_TYPE_REMOTE},isNewShare:function(){return null===this.share.id||void 0===this.share.id},allowsFileDrop:function(){return!(!this.isFolder||!this.config.isPublicUploadEnabled||this.share.type!==this.SHARE_TYPES.SHARE_TYPE_LINK&&this.share.type!==this.SHARE_TYPES.SHARE_TYPE_EMAIL)},hasFileDropPermissions:function(){return this.share.permissions===this.bundledPermissions.FILE_DROP},shareButtonText:function(){return this.isNewShare?t("file_sharing","Save share"):t("file_sharing","Update share")},canSetEdit:function(){return this.fileInfo.sharePermissions&OC.PERMISSION_UPDATE||this.canEdit},canSetCreate:function(){return this.fileInfo.sharePermissions&OC.PERMISSION_CREATE||this.canCreate},canSetDelete:function(){return this.fileInfo.sharePermissions&OC.PERMISSION_DELETE||this.canDelete},canSetReshare:function(){return this.fileInfo.sharePermissions&OC.PERMISSION_SHARE||this.canReshare},canSetDownload:function(){return this.fileInfo.canDownload()||this.canDownload},hasUnsavedPassword:function(){return void 0!==this.share.newPassword},passwordExpirationTime:function(){if(null===this.share.passwordExpirationTime)return null;var t=moment(this.share.passwordExpirationTime);return!(t.diff(moment())<0)&&t.fromNow()},isTalkEnabled:function(){return void 0!==OC.appswebroots.spreed},isPasswordProtectedByTalkAvailable:function(){return this.isPasswordProtected&&this.isTalkEnabled},isPasswordProtectedByTalk:{get:function(){return this.share.sendPasswordByTalk},set:function(t){var e=this;return kr(xr().mark((function r(){return xr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.share.sendPasswordByTalk=t;case 1:case"end":return r.stop()}}),r)})))()}},isEmailShareType:function(){return!!this.share&&this.share.type===this.SHARE_TYPES.SHARE_TYPE_EMAIL},canTogglePasswordProtectedByTalkAvailable:function(){return!(!this.isPublicShare||!this.isPasswordProtected)&&!(this.isEmailShareType&&!this.hasUnsavedPassword)},canChangeHideDownload:function(){return this.fileInfo.shareAttributes.some((function(t){return"download"===t.key&&"permissions"===t.scope&&!1===t.enabled}))},customPermissionsList:function(){var t=[];qt(this.share.permissions,Mt.READ)&&t.push("read"),qt(this.share.permissions,Mt.CREATE)&&t.push("create"),qt(this.share.permissions,Mt.UPDATE)&&t.push("update"),qt(this.share.permissions,Mt.DELETE)&&t.push("delete"),qt(this.share.permissions,Mt.SHARE)&&t.push("share"),this.share.hasDownloadPermission&&t.push("download");return t.map((function(t,e){return 0===e?t[0].toUpperCase()+t.substring(1):t})).join(", ")}},watch:{setCustomPermissions:function(t){this.sharingPermission=t?"custom":this.revertSharingPermission}},beforeMount:function(){this.initializePermissions(),this.initializeAttributes(),wr.debug("shareSentIn",this.share),wr.debug("config",this.config)},methods:{updateAtomicPermissions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.isReadChecked,r=void 0===e?this.hasRead:e,n=t.isEditChecked,i=void 0===n?this.canEdit:n,a=t.isCreateChecked,o=void 0===a?this.canCreate:a,s=t.isDeleteChecked,c=void 0===s?this.canDelete:s,u=t.isReshareChecked,h=void 0===u?this.canReshare:u,l=t.isDownloadChecked,f=void 0===l?this.canDownload:l,d=0|(r?Mt.READ:0)|(o?Mt.CREATE:0)|(c?Mt.DELETE:0)|(i?Mt.UPDATE:0)|(h?Mt.SHARE:0);this.share.permissions=d,this.share.hasDownloadPermission!==f&&this.$set(this.share,"hasDownloadPermission",f)},expandCustomPermissions:function(){this.advancedSectionAccordionExpanded||(this.advancedSectionAccordionExpanded=!0),this.toggleCustomPermissions()},toggleCustomPermissions:function(t){var e="custom"===this.sharingPermission;this.revertSharingPermission=e?"custom":t,this.setCustomPermissions=e},initializeAttributes:function(){if(!this.isNewShare){var t=!1;this.isValidShareAttribute(this.share.note)&&(this.writeNoteToRecipientIsChecked=!0,t=!0),this.isValidShareAttribute(this.share.password)&&(t=!0),this.isValidShareAttribute(this.share.expireDate)&&(t=!0),this.isValidShareAttribute(this.share.label)&&(t=!0),t&&(this.advancedSectionAccordionExpanded=!0)}},initializePermissions:function(){this.share.share_type&&(this.share.type=this.share.share_type),"shareType"in this.share&&(this.share.type=this.share.shareType),this.isNewShare?this.isPublicShare?this.sharingPermission=Wt.READ_ONLY.toString():this.sharingPermission=Wt.ALL.toString():this.hasCustomPermissions||this.share.setCustomPermissions?(this.sharingPermission="custom",this.advancedSectionAccordionExpanded=!0,this.setCustomPermissions=!0):this.sharingPermission=this.share.permissions.toString()},saveShare:function(){var t=this;return kr(xr().mark((function e(){var r,n,i,a,o;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=["permissions","attributes","note","expireDate"],n=["label","password","hideDownload"],t.isPublicShare&&r.push.apply(r,n),i=parseInt(t.sharingPermission),t.setCustomPermissions?t.updateAtomicPermissions():t.share.permissions=i,t.isFolder||t.share.permissions!==Wt.ALL||(t.share.permissions=Wt.ALL_FILE),t.writeNoteToRecipientIsChecked||(t.share.note=""),!t.isPasswordProtected){e.next=18;break}if(!t.isValidShareAttribute(t.share.newPassword)){e.next=13;break}t.share.password=t.share.newPassword,t.$delete(t.share,"newPassword"),e.next=16;break;case 13:if(!t.isPasswordEnforced){e.next=16;break}return t.passwordError=!0,e.abrupt("return");case 16:e.next=19;break;case 18:t.share.password="";case 19:if(t.hasExpirationDate||(t.share.expireDate=""),!t.isNewShare){e.next=31;break}return a={permissions:t.share.permissions,shareType:t.share.type,shareWith:t.share.shareWith,attributes:t.share.attributes,note:t.share.note,fileInfo:t.fileInfo},t.hasExpirationDate&&(a.expireDate=t.share.expireDate),t.isPasswordProtected&&(a.password=t.share.password),e.next=26,t.addShare(a,t.fileInfo);case 26:o=e.sent,t.share=o,t.$emit("add:share",t.share),e.next=32;break;case 31:t.queueUpdate.apply(t,r);case 32:t.$emit("close-sharing-details");case 33:case"end":return e.stop()}}),e)})))()},addShare:function(t,e){var r=this;return kr(xr().mark((function n(){var i,a;return xr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return wr.debug("Adding a new share from the input for",t),n.prev=1,i=(e.path+"/"+e.name).replace("//","/"),n.next=5,r.createShare(br(br(br({path:i,shareType:t.shareType,shareWith:t.shareWith,permissions:t.permissions,attributes:JSON.stringify(e.shareAttributes)},t.note?{note:t.note}:{}),t.password?{password:t.password}:{}),t.expireDate?{expireDate:t.expireDate}:{}));case 5:return a=n.sent,n.abrupt("return",a);case 9:n.prev=9,n.t0=n.catch(1),wr.error("Error while adding new share",n.t0);case 12:return n.prev=12,n.finish(12);case 14:case"end":return n.stop()}}),n,null,[[1,9,12,14]])})))()},removeShare:function(){var t=this;return kr(xr().mark((function e(){return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.onDelete();case 2:t.$emit("close-sharing-details");case 3:case"end":return e.stop()}}),e)})))()},onPasswordChange:function(t){this.passwordError=!this.isValidShareAttribute(t),this.$set(this.share,"newPassword",t)},onPasswordProtectedByTalkChange:function(){this.hasUnsavedPassword&&(this.share.password=this.share.newPassword.trim()),this.queueUpdate("sendPasswordByTalk","password")},isValidShareAttribute:function(t){return![null,void 0].includes(t)&&t.trim().length>0},getShareTypeIcon:function(t){switch(t){case this.SHARE_TYPES.SHARE_TYPE_LINK:return dr.Z;case this.SHARE_TYPES.SHARE_TYPE_GUEST:return gr.Z;case this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP:case this.SHARE_TYPES.SHARE_TYPE_GROUP:return pr.Z;case this.SHARE_TYPES.SHARE_TYPE_EMAIL:return fr.Z;case this.SHARE_TYPES.SHARE_TYPE_CIRCLE:return ur.Z;case this.SHARE_TYPES.SHARE_TYPE_ROOM:case this.SHARE_TYPES.SHARE_TYPE_DECK:case this.SHARE_TYPES.SHARE_TYPE_SCIENCEMESH:return yr.Z;default:return null}}}},Tr=Pr,Dr=n(15985),Lr={};Lr.styleTagTransform=Y(),Lr.setAttributes=R(),Lr.insert=L().bind(null,"head"),Lr.domAPI=T(),Lr.insertStyleElement=I();k()(Dr.Z,Lr),Dr.Z&&Dr.Z.locals&&Dr.Z.locals;var Or=(0,B.Z)(Tr,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"sharingTabDetailsView"},[e("div",{staticClass:"sharingTabDetailsView__header"},[e("span",[t.isUserShare?e("NcAvatar",{staticClass:"sharing-entry__avatar",attrs:{"is-no-user":t.share.shareType!==t.SHARE_TYPES.SHARE_TYPE_USER,user:t.share.shareWith,"display-name":t.share.shareWithDisplayName,"menu-position":"left",url:t.share.shareWithAvatar}}):t._e(),t._v(" "),e(t.getShareTypeIcon(t.share.type),{tag:"component",attrs:{size:32}})],1),t._v(" "),e("span",[e("h1",[t._v(t._s(t.title))])])]),t._v(" "),e("div",{staticClass:"sharingTabDetailsView__quick-permissions"},[e("div",[e("NcCheckboxRadioSwitch",{attrs:{"button-variant":!0,checked:t.sharingPermission,value:t.bundledPermissions.READ_ONLY.toString(),name:"sharing_permission_radio",type:"radio","button-variant-grouped":"vertical"},on:{"update:checked":[function(e){t.sharingPermission=e},t.toggleCustomPermissions]},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ViewIcon",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.t("files_sharing","View only"))+"\n\t\t\t\t")]),t._v(" "),e("NcCheckboxRadioSwitch",{attrs:{"button-variant":!0,checked:t.sharingPermission,value:t.bundledPermissions.ALL.toString(),name:"sharing_permission_radio",type:"radio","button-variant-grouped":"vertical"},on:{"update:checked":[function(e){t.sharingPermission=e},t.toggleCustomPermissions]},scopedSlots:t._u([{key:"icon",fn:function(){return[e("EditIcon",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.t("files_sharing","Allow upload and editing"))+"\n\t\t\t\t")]),t._v(" "),t.allowsFileDrop?e("NcCheckboxRadioSwitch",{attrs:{"button-variant":!0,checked:t.sharingPermission,value:t.bundledPermissions.FILE_DROP.toString(),name:"sharing_permission_radio",type:"radio","button-variant-grouped":"vertical"},on:{"update:checked":[function(e){t.sharingPermission=e},t.toggleCustomPermissions]},scopedSlots:t._u([{key:"icon",fn:function(){return[e("UploadIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,1083194048)},[t._v("\n\t\t\t\t"+t._s(t.t("files_sharing","File drop"))+"\n\t\t\t\t"),e("small",[t._v(t._s(t.t("files_sharing","Upload only")))])]):t._e(),t._v(" "),e("NcCheckboxRadioSwitch",{attrs:{"button-variant":!0,checked:t.sharingPermission,value:"custom",name:"sharing_permission_radio",type:"radio","button-variant-grouped":"vertical"},on:{"update:checked":[function(e){t.sharingPermission=e},t.expandCustomPermissions]},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DotsHorizontalIcon",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.t("files_sharing","Custom permissions"))+"\n\t\t\t\t"),e("small",[t._v(t._s(t.t("files_sharing",t.customPermissionsList)))])])],1)]),t._v(" "),e("div",{staticClass:"sharingTabDetailsView__advanced-control"},[e("NcButton",{attrs:{type:"tertiary",alignment:"end-reverse"},on:{click:function(e){t.advancedSectionAccordionExpanded=!t.advancedSectionAccordionExpanded}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("MenuDownIcon")]},proxy:!0}])},[t._v("\n\t\t\t"+t._s(t.t("files_sharing","Advanced settings"))+"\n\t\t\t")])],1),t._v(" "),t.advancedSectionAccordionExpanded?e("div",{staticClass:"sharingTabDetailsView__advanced"},[e("section",[t.isPublicShare?e("NcInputField",{attrs:{value:t.share.label,type:"text",label:t.t("file_sharing","Share label")},on:{"update:value":function(e){return t.$set(t.share,"label",e)}}}):t._e(),t._v(" "),t.isPublicShare?[e("NcCheckboxRadioSwitch",{attrs:{checked:t.isPasswordProtected,disabled:t.isPasswordEnforced},on:{"update:checked":function(e){t.isPasswordProtected=e}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("file_sharing","Set password"))+"\n\t\t\t\t")]),t._v(" "),t.isPasswordProtected?e("NcInputField",{attrs:{type:t.hasUnsavedPassword?"text":"password",value:t.hasUnsavedPassword?t.share.newPassword:"***************",error:t.passwordError,required:t.isPasswordEnforced,label:t.t("file_sharing","Password")},on:{"update:value":t.onPasswordChange}}):t._e(),t._v(" "),t.isEmailShareType&&t.passwordExpirationTime?e("span",{attrs:{icon:"icon-info"}},[t._v("\n\t\t\t\t\t"+t._s(t.t("files_sharing","Password expires {passwordExpirationTime}",{passwordExpirationTime:t.passwordExpirationTime}))+"\n\t\t\t\t")]):t.isEmailShareType&&null!==t.passwordExpirationTime?e("span",{attrs:{icon:"icon-error"}},[t._v("\n\t\t\t\t\t"+t._s(t.t("files_sharing","Password expired"))+"\n\t\t\t\t")]):t._e()]:t._e(),t._v(" "),e("NcCheckboxRadioSwitch",{attrs:{checked:t.hasExpirationDate,disabled:t.isExpiryDateEnforced},on:{"update:checked":function(e){t.hasExpirationDate=e}}},[t._v("\n\t\t\t\t"+t._s(t.isExpiryDateEnforced?t.t("files_sharing","Expiration date (enforced)"):t.t("files_sharing","Set expiration date"))+"\n\t\t\t")]),t._v(" "),t.hasExpirationDate?e("NcDateTimePickerNative",{attrs:{id:"share-date-picker",value:new Date(t.share.expireDate),min:t.dateTomorrow,max:t.dateMaxEnforced,"hide-label":!0,disabled:t.isExpiryDateEnforced,placeholder:t.t("file_sharing","Expiration date"),type:"date"},on:{input:t.onExpirationChange}}):t._e(),t._v(" "),t.isPublicShare?e("NcCheckboxRadioSwitch",{attrs:{disabled:t.canChangeHideDownload,checked:t.share.hideDownload},on:{"update:checked":[function(e){return t.$set(t.share,"hideDownload",e)},function(e){return t.queueUpdate("hideDownload")}]}},[t._v("\n\t\t\t\t"+t._s(t.t("file_sharing","Hide download"))+"\n\t\t\t")]):t._e(),t._v(" "),t.canTogglePasswordProtectedByTalkAvailable?e("NcCheckboxRadioSwitch",{attrs:{checked:t.isPasswordProtectedByTalk},on:{"update:checked":[function(e){t.isPasswordProtectedByTalk=e},t.onPasswordProtectedByTalkChange]}},[t._v("\n\t\t\t\t"+t._s(t.t("file_sharing","Video verification"))+"\n\t\t\t")]):t._e(),t._v(" "),e("NcCheckboxRadioSwitch",{attrs:{checked:t.writeNoteToRecipientIsChecked},on:{"update:checked":function(e){t.writeNoteToRecipientIsChecked=e}}},[t._v("\n\t\t\t\t"+t._s(t.t("file_sharing","Note to recipient"))+"\n\t\t\t")]),t._v(" "),t.writeNoteToRecipientIsChecked?[e("textarea",{domProps:{value:t.share.note},on:{input:function(e){t.share.note=e.target.value}}})]:t._e(),t._v(" "),e("NcCheckboxRadioSwitch",{attrs:{checked:t.setCustomPermissions},on:{"update:checked":function(e){t.setCustomPermissions=e}}},[t._v("\n\t\t\t\t"+t._s(t.t("file_sharing","Custom permissions"))+"\n\t\t\t")]),t._v(" "),t.setCustomPermissions?e("section",{staticClass:"custom-permissions-group"},[e("NcCheckboxRadioSwitch",{attrs:{disabled:!t.allowsFileDrop&&t.share.type===t.SHARE_TYPES.SHARE_TYPE_LINK,checked:t.hasRead},on:{"update:checked":function(e){t.hasRead=e}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("file_sharing","Read"))+"\n\t\t\t\t")]),t._v(" "),t.isFolder?e("NcCheckboxRadioSwitch",{attrs:{disabled:!t.canSetCreate,checked:t.canCreate},on:{"update:checked":function(e){t.canCreate=e}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("file_sharing","Create"))+"\n\t\t\t\t")]):t._e(),t._v(" "),e("NcCheckboxRadioSwitch",{attrs:{disabled:!t.canSetEdit,checked:t.canEdit},on:{"update:checked":function(e){t.canEdit=e}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("file_sharing","Update"))+"\n\t\t\t\t")]),t._v(" "),t.config.isResharingAllowed&&t.share.type!==t.SHARE_TYPES.SHARE_TYPE_LINK?e("NcCheckboxRadioSwitch",{attrs:{disabled:!t.canSetReshare,checked:t.canReshare},on:{"update:checked":function(e){t.canReshare=e}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("file_sharing","Share"))+"\n\t\t\t\t")]):t._e(),t._v(" "),t.isPublicShare?t._e():e("NcCheckboxRadioSwitch",{attrs:{disabled:!t.canSetDownload,checked:t.canDownload},on:{"update:checked":function(e){t.canDownload=e}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("file_sharing","Download"))+"\n\t\t\t\t")]),t._v(" "),e("NcCheckboxRadioSwitch",{attrs:{disabled:!t.canSetDelete,checked:t.canDelete},on:{"update:checked":function(e){t.canDelete=e}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("file_sharing","Delete"))+"\n\t\t\t\t")])],1):t._e()],2)]):t._e(),t._v(" "),e("div",{staticClass:"sharingTabDetailsView__delete"},[t.isNewShare?t._e():e("NcButton",{attrs:{"aria-label":t.t("files_sharing","Delete share"),disabled:!1,readonly:!1,type:"tertiary"},on:{click:function(e){return e.preventDefault(),t.removeShare.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CloseIcon",{attrs:{size:16}})]},proxy:!0}],null,!1,2746485232)},[t._v("\n\t\t\t"+t._s(t.t("files_sharing","Delete share"))+"\n\t\t")])],1),t._v(" "),e("div",{staticClass:"sharingTabDetailsView__footer"},[e("div",{staticClass:"button-group"},[e("NcButton",{on:{click:function(e){return t.$emit("close-sharing-details")}}},[t._v("\n\t\t\t\t"+t._s(t.t("file_sharing","Cancel"))+"\n\t\t\t")]),t._v(" "),e("NcButton",{attrs:{type:"primary"},on:{click:t.saveShare}},[t._v("\n\t\t\t\t"+t._s(t.shareButtonText)+"\n\t\t\t")])],1)])])}),[],!1,null,"912a6a32",null),Rr=Or.exports,Nr=n(25108);function Ir(t){return Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ir(t)}function jr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,a,o,s=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,i=t}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Yr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Hr(){Hr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,i){var a=e&&e.prototype instanceof f?e:f,o=Object.create(a.prototype),s=new x(i||[]);return n(o,"_invoke",{value:_(t,r,s)}),o}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function d(){}function p(){}var y={};c(y,a,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(C([])));v&&v!==e&&r.call(v,a)&&(y=v);var m=p.prototype=f.prototype=Object.create(y);function A(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function i(n,a,o,s){var c=h(t[n],t,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Ir(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){i("next",t,o,s)}),(function(t){i("throw",t,o,s)})):e.resolve(l).then((function(t){u.value=t,o(u)}),(function(t){return i("throw",t,o,s)}))}s(c.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function _(t,e,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return k()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=E(o,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),l;var i=h(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,l;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function C(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=p,n(m,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=c(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,s,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},A(w.prototype),c(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var o=new w(u(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},A(m),c(m,s,"Generator"),c(m,a,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=C,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:C(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Fr(t,e,r,n,i,a,o){try{var s=t[a](o),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function Br(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function o(t){Fr(a,n,i,o,s,"next",t)}function s(t){Fr(a,n,i,o,s,"throw",t)}o(void 0)}))}}var Ur={name:"SharingTab",components:{NcAvatar:s(),CollectionList:i.G,SharingEntryInternal:K,SharingEntrySimple:U,SharingInherited:fe,SharingInput:jt,SharingLinkList:Ge,SharingList:tr,SharingDetailsTab:Rr},mixins:[A],data:function(){return{config:new f,deleteEvent:null,error:"",expirationInterval:null,loading:!0,fileInfo:null,reshare:null,sharedWithMe:{},shares:[],linkShares:[],sections:OCA.Sharing.ShareTabSections.getSections(),projectsEnabled:(0,u.j)("core","projects_enabled",!1),showSharingDetailsView:!1,shareDetailsData:{}}},computed:{isSharedWithMe:function(){return Object.keys(this.sharedWithMe).length>0},canReshare:function(){return!!(this.fileInfo.permissions&OC.PERMISSION_SHARE)||!!(this.reshare&&this.reshare.hasSharePermission&&this.config.isResharingAllowed)}},methods:{update:function(t){var e=this;return Br(Hr().mark((function r(){return Hr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.fileInfo=t,e.resetState(),e.getShares();case 3:case"end":return r.stop()}}),r)})))()},getShares:function(){var e=this;return Br(Hr().mark((function r(){var n,i,o,s,u,h,l,f,d,p;return Hr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e.loading=!0,n=(0,a.generateOcsUrl)("apps/files_sharing/api/v1/shares"),i="json",o=(e.fileInfo.path+"/"+e.fileInfo.name).replace("//","/"),s=c.Z.get(n,{params:{format:i,path:o,reshares:!0}}),u=c.Z.get(n,{params:{format:i,path:o,shared_with_me:!0}}),r.next=9,Promise.all([s,u]);case 9:h=r.sent,l=jr(h,2),f=l[0],d=l[1],e.loading=!1,e.processSharedWithMe(d),e.processShares(f),r.next=23;break;case 18:r.prev=18,r.t0=r.catch(0),null!==(p=r.t0.response.data)&&void 0!==p&&null!==(p=p.ocs)&&void 0!==p&&null!==(p=p.meta)&&void 0!==p&&p.message?e.error=r.t0.response.data.ocs.meta.message:e.error=t("files_sharing","Unable to load the shares list"),e.loading=!1,Nr.error("Error loading the shares list",r.t0);case 23:case"end":return r.stop()}}),r,null,[[0,18]])})))()},resetState:function(){clearInterval(this.expirationInterval),this.loading=!0,this.error="",this.sharedWithMe={},this.shares=[],this.linkShares=[],this.showSharingDetailsView=!1,this.shareDetailsData={}},updateExpirationSubtitle:function(e){var r=moment(e.expireDate).unix();this.$set(this.sharedWithMe,"subtitle",t("files_sharing","Expires {relativetime}",{relativetime:OC.Util.relativeModifiedDate(1e3*r)})),moment().unix()>r&&(clearInterval(this.expirationInterval),this.$set(this.sharedWithMe,"subtitle",t("files_sharing","this share just expired.")))},processShares:function(t){var e=this,r=t.data;if(r.ocs&&r.ocs.data&&r.ocs.data.length>0){var n=r.ocs.data.map((function(t){return new m(t)})).sort((function(t,e){return e.createdTime-t.createdTime}));this.linkShares=n.filter((function(t){return t.type===e.SHARE_TYPES.SHARE_TYPE_LINK||t.type===e.SHARE_TYPES.SHARE_TYPE_EMAIL})),this.shares=n.filter((function(t){return t.type!==e.SHARE_TYPES.SHARE_TYPE_LINK&&t.type!==e.SHARE_TYPES.SHARE_TYPE_EMAIL})),Nr.debug("Processed",this.linkShares.length,"link share(s)"),Nr.debug("Processed",this.shares.length,"share(s)")}},processSharedWithMe:function(e){var r=e.data;if(r.ocs&&r.ocs.data&&r.ocs.data[0]){var n=new m(r),i=function(e){return e.type===d.D.SHARE_TYPE_GROUP?t("files_sharing","Shared with you and the group {group} by {owner}",{group:e.shareWithDisplayName,owner:e.ownerDisplayName},void 0,{escape:!1}):e.type===d.D.SHARE_TYPE_CIRCLE?t("files_sharing","Shared with you and {circle} by {owner}",{circle:e.shareWithDisplayName,owner:e.ownerDisplayName},void 0,{escape:!1}):e.type===d.D.SHARE_TYPE_ROOM?e.shareWithDisplayName?t("files_sharing","Shared with you and the conversation {conversation} by {owner}",{conversation:e.shareWithDisplayName,owner:e.ownerDisplayName},void 0,{escape:!1}):t("files_sharing","Shared with you in a conversation by {owner}",{owner:e.ownerDisplayName},void 0,{escape:!1}):t("files_sharing","Shared with you by {owner}",{owner:e.ownerDisplayName},void 0,{escape:!1})}(n),a=n.ownerDisplayName,o=n.owner;this.sharedWithMe={displayName:a,title:i,user:o},this.reshare=n,n.expireDate&&moment(n.expireDate).unix()>moment().unix()&&(this.updateExpirationSubtitle(n),this.expirationInterval=setInterval(this.updateExpirationSubtitle,1e4,n))}else this.fileInfo&&void 0!==this.fileInfo.shareOwnerId&&this.fileInfo.shareOwnerId!==OC.currentUser&&(this.sharedWithMe={displayName:this.fileInfo.shareOwner,title:t("files_sharing","Shared with you by {owner}",{owner:this.fileInfo.shareOwner},void 0,{escape:!1}),user:this.fileInfo.shareOwnerId})},addShare:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t.type===this.SHARE_TYPES.SHARE_TYPE_EMAIL?this.linkShares.unshift(t):this.shares.unshift(t),this.awaitForShare(t,e)},removeShare:function(t){var e=t.type===this.SHARE_TYPES.SHARE_TYPE_EMAIL||t.type===this.SHARE_TYPES.SHARE_TYPE_LINK?this.linkShares:this.shares,r=e.findIndex((function(e){return e.id===t.id}));-1!==r&&e.splice(r,1)},awaitForShare:function(t,e){var r=this.$refs.shareList;t.type===this.SHARE_TYPES.SHARE_TYPE_EMAIL&&(r=this.$refs.linkShareList),this.$nextTick((function(){var n=r.$children.find((function(e){return e.share===t}));n&&e(n)}))},toggleShareDetailsView:function(t){t&&(this.shareDetailsData=t),this.showSharingDetailsView=!this.showSharingDetailsView}}},Gr=Ur,Mr=n(56828),Wr={};Wr.styleTagTransform=Y(),Wr.setAttributes=R(),Wr.insert=L().bind(null,"head"),Wr.domAPI=T(),Wr.insertStyleElement=I();k()(Mr.Z,Wr),Mr.Z&&Mr.Z.locals&&Mr.Z.locals;var qr=(0,B.Z)(Gr,(function(){var t=this,e=t._self._c;return e("div",{class:{"icon-loading":t.loading}},[t.error?e("div",{staticClass:"emptycontent",class:{emptyContentWithSections:t.sections.length>0}},[e("div",{staticClass:"icon icon-error"}),t._v(" "),e("h2",[t._v(t._s(t.error))])]):t._e(),t._v(" "),t.showSharingDetailsView?e("div",[e("SharingDetailsTab",{attrs:{"file-info":t.shareDetailsData.fileInfo,share:t.shareDetailsData.share},on:{"close-sharing-details":t.toggleShareDetailsView,"add:share":t.addShare,"remove:share":t.removeShare}})],1):[e("div",{staticClass:"sharingTab__content"},[t.isSharedWithMe?e("SharingEntrySimple",t._b({staticClass:"sharing-entry__reshare",scopedSlots:t._u([{key:"avatar",fn:function(){return[e("NcAvatar",{staticClass:"sharing-entry__avatar",attrs:{user:t.sharedWithMe.user,"display-name":t.sharedWithMe.displayName}})]},proxy:!0}],null,!1,3197855346)},"SharingEntrySimple",t.sharedWithMe,!1)):t._e(),t._v(" "),t.loading?t._e():e("SharingInput",{attrs:{"can-reshare":t.canReshare,"file-info":t.fileInfo,"link-shares":t.linkShares,reshare:t.reshare,shares:t.shares},on:{"open-sharing-details":t.toggleShareDetailsView}}),t._v(" "),t.loading?t._e():e("SharingLinkList",{ref:"linkShareList",attrs:{"can-reshare":t.canReshare,"file-info":t.fileInfo,shares:t.linkShares},on:{"open-sharing-details":t.toggleShareDetailsView}}),t._v(" "),t.loading?t._e():e("SharingList",{ref:"shareList",attrs:{shares:t.shares,"file-info":t.fileInfo},on:{"open-sharing-details":t.toggleShareDetailsView}}),t._v(" "),t.canReshare&&!t.loading?e("SharingInherited",{attrs:{"file-info":t.fileInfo}}):t._e(),t._v(" "),e("SharingEntryInternal",{attrs:{"file-info":t.fileInfo}}),t._v(" "),t.projectsEnabled&&t.fileInfo?e("CollectionList",{attrs:{id:"".concat(t.fileInfo.id),type:"file",name:t.fileInfo.name}}):t._e()],1),t._v(" "),t._l(t.sections,(function(r,n){return e("div",{key:n,ref:"section-"+n,refInFor:!0,staticClass:"sharingTab__additionalContent"},[e(r(t.$refs["section-"+n],t.fileInfo),{tag:"component",attrs:{"file-info":t.fileInfo}})],1)}))]],2)}),[],!1,null,"56ce9ab4",null).exports}}]);
//# sourceMappingURL=apps_files_sharing_src_views_SharingTab_vue-apps_files_sharing_src_views_SharingTab_vue.js.map?v=bcc002298e0f7de5c276