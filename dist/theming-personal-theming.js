/*! For license information please see theming-personal-theming.js.LICENSE.txt */
!function(){var e,r,n,o={65323:function(e,r,n){"use strict";var o=n(77958),i=n(20144);function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var l=n(79753),c=n(43554),u=n(93664),s=n(19642),d=n(67912),f=n(64024),h=(n(97248),n(20296)),p=n.n(h),g=n(37776),v=n(1082),m=n.n(v),b=n(80419),y=n(82675),A={name:"ImageEditIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},w=n(51900),_=(0,w.Z)(A,(function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon image-edit-icon",attrs:{"aria-hidden":!t.title,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M22.7 14.3L21.7 15.3L19.7 13.3L20.7 12.3C20.8 12.2 20.9 12.1 21.1 12.1C21.2 12.1 21.4 12.2 21.5 12.3L22.8 13.6C22.9 13.8 22.9 14.1 22.7 14.3M13 19.9V22H15.1L21.2 15.9L19.2 13.9L13 19.9M21 5C21 3.9 20.1 3 19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H11V19.1L12.1 18H5L8.5 13.5L11 16.5L14.5 12L16.1 14.1L21 9.1V5Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])}),[],!1,null,null,null).exports,C=n(25108);function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function k(){k=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),l=new E(o||[]);return n(a,"_invoke",{value:w(t,r,l)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var d={};function f(){}function h(){}function p(){}var g={};c(g,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(D([])));m&&m!==e&&r.call(m,i)&&(g=m);var b=p.prototype=f.prototype=Object.create(g);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function o(n,i,a,l){var c=s(t[n],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==x(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,a,l)}),(function(t){o("throw",t,a,l)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,l)}))}l(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var l=_(a,r);if(l){if(l===d)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=s(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function D(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return h.prototype=p,n(b,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:h,configurable:!0}),h.displayName=c(p,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},y(A.prototype),c(A.prototype,a,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new A(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(b),c(b,l,"Generator"),c(b,i,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=D,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:D(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}function S(t,e,r,n,o,i,a){try{var l=t[i](a),c=l.value}catch(t){return void r(t)}l.done?e(c):Promise.resolve(c).then(n,o)}function E(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){S(i,n,o,a,l,"next",t)}function l(t){S(i,n,o,a,l,"throw",t)}a(void 0)}))}}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var T=(0,c.j)("theming","backgroundImage"),O=(0,c.j)("theming","shippedBackgrounds"),I=(0,c.j)("theming","themingDefaultBackground"),L=(0,c.j)("theming","defaultShippedBackground"),P=function(t){return(0,l.generateFilePath)("theming","","img/background/")+t},M={name:"BackgroundSettings",components:{Check:b.default,Close:y.default,ImageEdit:_,NcColorPicker:g.Z},data:function(){return{loading:!1,Theming:(0,c.j)("theming","data",{}),backgroundImage:T}},computed:{shippedBackgrounds:function(){var t=this;return Object.keys(O).map((function(t){return{name:t,url:P(t),preview:P("preview/"+t),details:O[t]}})).filter((function(e){return!(!t.isGlobalBackgroundDeleted&&!t.isGlobalBackgroundDefault)||e.name!==L}))},isGlobalBackgroundDefault:function(){return!!I},isGlobalBackgroundDeleted:function(){return"backgroundColor"===I},isBackgroundDisabled:function(){return"disabled"===this.backgroundImage||!this.backgroundImage}},methods:{invertTextColor:function(t){return this.calculateLuma(t)>.6},calculateLuma:function(t){var e,r,n=(e=this.hexToRGB(t),r=3,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,r)||function(t,e){if(t){if("string"==typeof t)return D(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(t,e):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return(.2126*n[0]+.7152*n[1]+.0722*n[2])/255},hexToRGB:function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:null},update:function(t){var e=this;return E(k().mark((function r(){return k().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.backgroundImage=t.backgroundImage,e.Theming.color=t.backgroundColor,e.$emit("update:background"),e.loading=!1;case 4:case"end":return r.stop()}}),r)})))()},setDefault:function(){var t=this;return E(k().mark((function e(){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading="default",e.next=3,u.Z.post((0,l.generateUrl)("/apps/theming/background/default"));case 3:r=e.sent,t.update(r.data);case 5:case"end":return e.stop()}}),e)})))()},setShipped:function(t){var e=this;return E(k().mark((function r(){var n;return k().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.loading=t,r.next=3,u.Z.post((0,l.generateUrl)("/apps/theming/background/shipped"),{value:t});case 3:n=r.sent,e.update(n.data);case 5:case"end":return r.stop()}}),r)})))()},setFile:function(t){var e=arguments,r=this;return E(k().mark((function n(){var o,i;return k().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.length>1&&void 0!==e[1]?e[1]:null,r.loading="custom",n.next=4,u.Z.post((0,l.generateUrl)("/apps/theming/background/custom"),{value:t,color:o});case 4:i=n.sent,r.update(i.data);case 6:case"end":return n.stop()}}),n)})))()},removeBackground:function(){var t=this;return E(k().mark((function e(){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading="remove",e.next=3,u.Z.delete((0,l.generateUrl)("/apps/theming/background/custom"));case 3:r=e.sent,t.update(r.data);case 5:case"end":return e.stop()}}),e)})))()},pickColor:function(t){var e=this;return E(k().mark((function r(){var n,o,i,a;return k().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.loading="color",i=(null==t||null===(n=t.target)||void 0===n||null===(n=n.dataset)||void 0===n?void 0:n.color)||(null===(o=e.Theming)||void 0===o?void 0:o.color)||"#0082c9",r.next=4,u.Z.post((0,l.generateUrl)("/apps/theming/background/color"),{color:i});case 4:a=r.sent,e.update(a.data);case 6:case"end":return r.stop()}}),r)})))()},debouncePickColor:p()((function(){this.pickColor.apply(this,arguments)}),200),pickFile:function(){var e=this;(0,f.fn)(t("theming","Select a background from your files")).allowDirectories(!1).setMimeTypeFilter(["image/png","image/gif","image/jpeg","image/svg+xml","image/svg"]).setMultiSelect(!1).addButton({id:"select",label:t("theming","Select background"),callback:function(t){var r;e.applyFile(null===(r=t[0])||void 0===r?void 0:r.path)},type:"primary"}).build().pick()},applyFile:function(e){var r=this;return E(k().mark((function n(){var i,a,c,s,d,h;return k().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&"string"==typeof e&&0!==e.trim().length&&"/"!==e){n.next=4;break}return C.error("No valid background have been selected",{path:e}),(0,f.x2)(t("theming","No background has been selected")),n.abrupt("return");case 4:return r.loading="custom",i=null,a=null,n.prev=7,s=(0,l.generateRemoteUrl)("dav/files/"+(0,o.ts)().uid+e),n.next=11,u.Z.get(s,{responseType:"blob"});case 11:return i=n.sent,d=URL.createObjectURL(i.data),n.next=15,r.getColorPaletteFromBlob(d);case 15:h=n.sent,a=null==h||null===(c=h.DarkVibrant)||void 0===c?void 0:c.hex,r.setFile(e,a),C.debug("Extracted colour",a,"from custom image",e,h),n.next=25;break;case 21:n.prev=21,n.t0=n.catch(7),r.setFile(e),C.error("Unable to extract colour from custom image",{error:n.t0,path:e,response:i,color:a});case 25:case"end":return n.stop()}}),n,null,[[7,21]])})))()},getColorPaletteFromBlob:function(t){return new Promise((function(e,r){new(m())(t).getPalette((function(t,n){t&&r(t),e(n)}))}))}}},j=M,N=n(93379),B=n.n(N),F=n(7795),R=n.n(F),U=n(90569),G=n.n(U),Z=n(3565),H=n.n(Z),V=n(19216),Y=n.n(V),z=n(44589),q=n.n(z),X=n(36679),W={};W.styleTagTransform=q(),W.setAttributes=H(),W.insert=G().bind(null,"head"),W.domAPI=R(),W.insertStyleElement=Y(),B()(X.Z,W),X.Z&&X.Z.locals&&X.Z.locals;var $=(0,w.Z)(j,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"background-selector",attrs:{"data-user-theming-background-settings":""}},[e("button",{class:{"icon-loading":"custom"===t.loading,"background background__filepicker":!0,"background--active":"custom"===t.backgroundImage},attrs:{"aria-pressed":"custom"===t.backgroundImage,"data-color-bright":t.invertTextColor(t.Theming.color),"data-user-theming-background-custom":"",tabindex:"0"},on:{click:t.pickFile}},[t._v("\n\t\t"+t._s(t.t("theming","Custom background"))+"\n\t\t"),"custom"!==t.backgroundImage?e("ImageEdit",{attrs:{size:26}}):t._e(),t._v(" "),e("Check",{attrs:{size:44}})],1),t._v(" "),e("button",{class:{"icon-loading":"default"===t.loading,"background background__default":!0,"background--active":"default"===t.backgroundImage},style:{"--border-color":t.Theming.defaultColor},attrs:{"aria-pressed":"default"===t.backgroundImage,"data-color-bright":t.invertTextColor(t.Theming.defaultColor),"data-user-theming-background-default":"",tabindex:"0"},on:{click:t.setDefault}},[t._v("\n\t\t"+t._s(t.t("theming","Default background"))+"\n\t\t"),e("Check",{attrs:{size:44}})],1),t._v(" "),e("NcColorPicker",{on:{input:t.debouncePickColor},model:{value:t.Theming.color,callback:function(e){t.$set(t.Theming,"color",e)},expression:"Theming.color"}},[e("button",{staticClass:"background background__color",style:{backgroundColor:t.Theming.color,"--border-color":t.Theming.color},attrs:{"data-color":t.Theming.color,"data-color-bright":t.invertTextColor(t.Theming.color),"data-user-theming-background-color":"",tabindex:"0"}},[t._v("\n\t\t\t"+t._s(t.t("theming","Change color"))+"\n\t\t")])]),t._v(" "),e("button",{class:{"background background__delete":!0,"background--active":t.isBackgroundDisabled},attrs:{"aria-pressed":t.isBackgroundDisabled,"data-user-theming-background-clear":"",tabindex:"0"},on:{click:t.removeBackground}},[t._v("\n\t\t"+t._s(t.t("theming","No background"))+"\n\t\t"),t.isBackgroundDisabled?t._e():e("Close",{attrs:{size:32}}),t._v(" "),e("Check",{attrs:{size:44}})],1),t._v(" "),t._l(t.shippedBackgrounds,(function(r){return e("button",{key:r.name,class:{"background background__shipped":!0,"icon-loading":t.loading===r.name,"background--active":t.backgroundImage===r.name},style:{backgroundImage:"url("+r.preview+")","--border-color":r.details.primary_color},attrs:{title:r.details.attribution,"aria-label":r.details.description,"aria-pressed":t.backgroundImage===r.name,"data-color-bright":"dark"===r.details.theming,"data-user-theming-background-shipped":r.name,tabindex:"0"},on:{click:function(e){return t.setShipped(r.name)}}},[e("Check",{attrs:{size:44}})],1)}))],2)}),[],!1,null,"e836b210",null).exports,K=n(25108),Q={name:"ItemPreview",components:{NcCheckboxRadioSwitch:s.Z},props:{enforced:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},theme:{type:Object,required:!0},type:{type:String,default:""},unique:{type:Boolean,default:!1}},computed:{switchType:function(){return this.unique?"switch":"radio"},name:function(){return this.unique?null:this.type},img:function(){return(0,l.generateFilePath)("theming","img",this.theme.id+".jpg")},checked:{get:function(){return this.selected},set:function(t){K.debug("Changed theme",this.theme.id,t),this.unique?this.$emit("change",{enabled:!0===t,id:this.theme.id}):this.$emit("change",{enabled:!0,id:this.theme.id})}}},methods:{onToggle:function(){"radio"!==this.switchType?this.checked=!this.checked:this.checked=!0}}},J=n(22465),tt={};tt.styleTagTransform=q(),tt.setAttributes=H(),tt.insert=G().bind(null,"head"),tt.domAPI=R(),tt.insertStyleElement=Y(),B()(J.Z,tt),J.Z&&J.Z.locals&&J.Z.locals;var et=(0,w.Z)(Q,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"theming__preview",class:"theming__preview--"+t.theme.id},[e("div",{staticClass:"theming__preview-image",style:{backgroundImage:"url("+t.img+")"},on:{click:t.onToggle}}),t._v(" "),e("div",{staticClass:"theming__preview-description"},[e("h3",[t._v(t._s(t.theme.title))]),t._v(" "),e("p",{staticClass:"theming__preview-explanation"},[t._v(t._s(t.theme.description))]),t._v(" "),t.enforced?e("span",{staticClass:"theming__preview-warning",attrs:{role:"note"}},[t._v("\n\t\t\t"+t._s(t.t("theming","Theme selection is enforced"))+"\n\t\t")]):t._e(),t._v(" "),e("NcCheckboxRadioSwitch",{staticClass:"theming__preview-toggle",attrs:{checked:t.checked,disabled:t.enforced,name:t.name,type:t.switchType},on:{"update:checked":function(e){t.checked=e}}},[t._v("\n\t\t\t"+t._s(t.theme.enableLabel)+"\n\t\t")])],1)])}),[],!1,null,"1a08e35a",null).exports,rt=n(31352);function nt(t){return"function"==typeof t?t():(0,i.unref)(t)}i.default.util.warn,n(25108);const ot="undefined"!=typeof window&&"undefined"!=typeof document;function it(t){const e=Object.create(null);return r=>e[r]||(e[r]=t(r))}Object.prototype.toString;const at=/\B([A-Z])/g,lt=(it((t=>t.replace(at,"-$1").toLowerCase())),/-(\w)/g);it((t=>t.replace(lt,((t,e)=>e?e.toUpperCase():"")))),n(25108),ot&&window;const ct=ot?window.document:void 0;function ut(t){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ut(t)}function st(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dt(){return dt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dt.apply(this,arguments)}function ft(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})))),n.forEach((function(e){st(t,e,r[e])}))}return t}function ht(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}ot&&window.navigator,ot&&window.location,"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self,Number.POSITIVE_INFINITY;var pt=ht(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),gt=ht(/Edge/i),vt=ht(/firefox/i),mt=ht(/safari/i)&&!ht(/chrome/i)&&!ht(/android/i),bt=ht(/iP(ad|od|hone)/i),yt=ht(/chrome/i)&&ht(/android/i),At={capture:!1,passive:!1};function wt(t,e,r){t.addEventListener(e,r,!pt&&At)}function _t(t,e,r){t.removeEventListener(e,r,!pt&&At)}function Ct(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function xt(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function kt(t,e,r,n){if(t){r=r||document;do{if(null!=e&&(">"===e[0]?t.parentNode===r&&Ct(t,e):Ct(t,e))||n&&t===r)return t;if(t===r)break}while(t=xt(t))}return null}var St,Et=/\s+/g;function Dt(t,e,r){if(t&&e)if(t.classList)t.classList[r?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(Et," ").replace(" "+e+" "," ");t.className=(n+(r?" "+e:"")).replace(Et," ")}}function Tt(t,e,r){var n=t&&t.style;if(n){if(void 0===r)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(r=t.currentStyle),void 0===e?r:r[e];e in n||-1!==e.indexOf("webkit")||(e="-webkit-"+e),n[e]=r+("string"==typeof r?"":"px")}}function Ot(t,e){var r="";if("string"==typeof t)r=t;else do{var n=Tt(t,"transform");n&&"none"!==n&&(r=n+" "+r)}while(!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(r)}function It(t,e,r){if(t){var n=t.getElementsByTagName(e),o=0,i=n.length;if(r)for(;o<i;o++)r(n[o],o);return n}return[]}function Lt(){return document.scrollingElement||document.documentElement}function Pt(t,e,r,n,o){if(t.getBoundingClientRect||t===window){var i,a,l,c,u,s,d;if(t!==window&&t!==Lt()?(a=(i=t.getBoundingClientRect()).top,l=i.left,c=i.bottom,u=i.right,s=i.height,d=i.width):(a=0,l=0,c=window.innerHeight,u=window.innerWidth,s=window.innerHeight,d=window.innerWidth),(e||r)&&t!==window&&(o=o||t.parentNode,!pt))do{if(o&&o.getBoundingClientRect&&("none"!==Tt(o,"transform")||r&&"static"!==Tt(o,"position"))){var f=o.getBoundingClientRect();a-=f.top+parseInt(Tt(o,"border-top-width")),l-=f.left+parseInt(Tt(o,"border-left-width")),c=a+i.height,u=l+i.width;break}}while(o=o.parentNode);if(n&&t!==window){var h=Ot(o||t),p=h&&h.a,g=h&&h.d;h&&(c=(a/=g)+(s/=g),u=(l/=p)+(d/=p))}return{top:a,left:l,bottom:c,right:u,width:d,height:s}}}function Mt(t,e,r){for(var n=Rt(t,!0),o=Pt(t)[e];n;){var i=Pt(n)[r];if(!("top"===r||"left"===r?o>=i:o<=i))return n;if(n===Lt())break;n=Rt(n,!1)}return!1}function jt(t,e,r){for(var n=0,o=0,i=t.children;o<i.length;){if("none"!==i[o].style.display&&i[o]!==Ue.ghost&&i[o]!==Ue.dragged&&kt(i[o],r.draggable,t,!1)){if(n===e)return i[o];n++}o++}return null}function Nt(t,e){for(var r=t.lastElementChild;r&&(r===Ue.ghost||"none"===Tt(r,"display")||e&&!Ct(r,e));)r=r.previousElementSibling;return r||null}function Bt(t,e){var r=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===Ue.clone||e&&!Ct(t,e)||r++;return r}function Ft(t){var e=0,r=0,n=Lt();if(t)do{var o=Ot(t),i=o.a,a=o.d;e+=t.scrollLeft*i,r+=t.scrollTop*a}while(t!==n&&(t=t.parentNode));return[e,r]}function Rt(t,e){if(!t||!t.getBoundingClientRect)return Lt();var r=t,n=!1;do{if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var o=Tt(r);if(r.clientWidth<r.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||r.clientHeight<r.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!r.getBoundingClientRect||r===document.body)return Lt();if(n||e)return r;n=!0}}}while(r=r.parentNode);return Lt()}function Ut(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function Gt(t,e){return function(){if(!St){var r=arguments;1===r.length?t.call(this,r[0]):t.apply(this,r),St=setTimeout((function(){St=void 0}),e)}}}function Zt(t,e,r){t.scrollLeft+=e,t.scrollTop+=r}function Ht(t){var e=window.Polymer,r=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):r?r(t).clone(!0)[0]:t.cloneNode(!0)}var Vt="Sortable"+(new Date).getTime();var Yt=[],zt={initializeByDefault:!0},qt={mount:function(t){for(var e in zt)zt.hasOwnProperty(e)&&!(e in t)&&(t[e]=zt[e]);Yt.push(t)},pluginEvent:function(t,e,r){var n=this;this.eventCanceled=!1,r.cancel=function(){n.eventCanceled=!0};var o=t+"Global";Yt.forEach((function(n){e[n.pluginName]&&(e[n.pluginName][o]&&e[n.pluginName][o](ft({sortable:e},r)),e.options[n.pluginName]&&e[n.pluginName][t]&&e[n.pluginName][t](ft({sortable:e},r)))}))},initializePlugins:function(t,e,r,n){for(var o in Yt.forEach((function(n){var o=n.pluginName;if(t.options[o]||n.initializeByDefault){var i=new n(t,e,t.options);i.sortable=t,i.options=t.options,t[o]=i,dt(r,i.defaults)}})),t.options)if(t.options.hasOwnProperty(o)){var i=this.modifyOption(t,o,t.options[o]);void 0!==i&&(t.options[o]=i)}},getEventProperties:function(t,e){var r={};return Yt.forEach((function(n){"function"==typeof n.eventProperties&&dt(r,n.eventProperties.call(e[n.pluginName],t))})),r},modifyOption:function(t,e,r){var n;return Yt.forEach((function(o){t[o.pluginName]&&o.optionListeners&&"function"==typeof o.optionListeners[e]&&(n=o.optionListeners[e].call(t[o.pluginName],r))})),n}};var Xt=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.evt,o=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(r,["evt"]);qt.pluginEvent.bind(Ue)(t,e,ft({dragEl:$t,parentEl:Kt,ghostEl:Qt,rootEl:Jt,nextEl:te,lastDownEl:ee,cloneEl:re,cloneHidden:ne,dragStarted:ve,putSortable:ue,activeSortable:Ue.active,originalEvent:n,oldIndex:oe,oldDraggableIndex:ae,newIndex:ie,newDraggableIndex:le,hideGhostForTarget:Ne,unhideGhostForTarget:Be,cloneNowHidden:function(){ne=!0},cloneNowShown:function(){ne=!1},dispatchSortableEvent:function(t){Wt({sortable:e,name:t,originalEvent:n})}},o))};function Wt(t){!function(t){var e=t.sortable,r=t.rootEl,n=t.name,o=t.targetEl,i=t.cloneEl,a=t.toEl,l=t.fromEl,c=t.oldIndex,u=t.newIndex,s=t.oldDraggableIndex,d=t.newDraggableIndex,f=t.originalEvent,h=t.putSortable,p=t.extraEventProperties;if(e=e||r&&r[Vt]){var g,v=e.options,m="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||pt||gt?(g=document.createEvent("Event")).initEvent(n,!0,!0):g=new CustomEvent(n,{bubbles:!0,cancelable:!0}),g.to=a||r,g.from=l||r,g.item=o||r,g.clone=i,g.oldIndex=c,g.newIndex=u,g.oldDraggableIndex=s,g.newDraggableIndex=d,g.originalEvent=f,g.pullMode=h?h.lastPutMode:void 0;var b=ft({},p,qt.getEventProperties(n,e));for(var y in b)g[y]=b[y];r&&r.dispatchEvent(g),v[m]&&v[m].call(e,g)}}(ft({putSortable:ue,cloneEl:re,targetEl:$t,rootEl:Jt,oldIndex:oe,oldDraggableIndex:ae,newIndex:ie,newDraggableIndex:le},t))}var $t,Kt,Qt,Jt,te,ee,re,ne,oe,ie,ae,le,ce,ue,se,de,fe,he,pe,ge,ve,me,be,ye,Ae,we=!1,_e=!1,Ce=[],xe=!1,ke=!1,Se=[],Ee=!1,De=[],Te="undefined"!=typeof document,Oe=bt,Ie=gt||pt?"cssFloat":"float",Le=Te&&!yt&&!bt&&"draggable"in document.createElement("div"),Pe=function(){if(Te){if(pt)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Me=function(t,e){var r=Tt(t),n=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),o=jt(t,0,e),i=jt(t,1,e),a=o&&Tt(o),l=i&&Tt(i),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Pt(o).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Pt(i).width;if("flex"===r.display)return"column"===r.flexDirection||"column-reverse"===r.flexDirection?"vertical":"horizontal";if("grid"===r.display)return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&"none"!==a.float){var s="left"===a.float?"left":"right";return!i||"both"!==l.clear&&l.clear!==s?"horizontal":"vertical"}return o&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||c>=n&&"none"===r[Ie]||i&&"none"===r[Ie]&&c+u>n)?"vertical":"horizontal"},je=function(t){function e(t,r){return function(n,o,i,a){var l=n.options.group.name&&o.options.group.name&&n.options.group.name===o.options.group.name;if(null==t&&(r||l))return!0;if(null==t||!1===t)return!1;if(r&&"clone"===t)return t;if("function"==typeof t)return e(t(n,o,i,a),r)(n,o,i,a);var c=(r?n:o).options.group.name;return!0===t||"string"==typeof t&&t===c||t.join&&t.indexOf(c)>-1}}var r={},n=t.group;n&&"object"==ut(n)||(n={name:n}),r.name=n.name,r.checkPull=e(n.pull,!0),r.checkPut=e(n.put),r.revertClone=n.revertClone,t.group=r},Ne=function(){!Pe&&Qt&&Tt(Qt,"display","none")},Be=function(){!Pe&&Qt&&Tt(Qt,"display","")};Te&&document.addEventListener("click",(function(t){if(_e)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),_e=!1,!1}),!0);var Fe=function(t){if($t){t=t.touches?t.touches[0]:t;var e=(o=t.clientX,i=t.clientY,Ce.some((function(t){if(!Nt(t)){var e=Pt(t),r=t[Vt].options.emptyInsertThreshold,n=o>=e.left-r&&o<=e.right+r,l=i>=e.top-r&&i<=e.bottom+r;return r&&n&&l?a=t:void 0}})),a);if(e){var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);r.target=r.rootEl=e,r.preventDefault=void 0,r.stopPropagation=void 0,e[Vt]._onDragOver(r)}}var o,i,a},Re=function(t){$t&&$t.parentNode[Vt]._isOutsideThisEl(t.target)};function Ue(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=dt({},e),t[Vt]=this;var r,n,o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Me(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Ue.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var i in qt.initializePlugins(this,t,o),o)!(i in e)&&(e[i]=o[i]);for(var a in je(e),this)"_"===a.charAt(0)&&"function"==typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!e.forceFallback&&Le,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?wt(t,"pointerdown",this._onTapStart):(wt(t,"mousedown",this._onTapStart),wt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(wt(t,"dragover",this),wt(t,"dragenter",this)),Ce.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),dt(this,(n=[],{captureAnimationState:function(){n=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(t){if("none"!==Tt(t,"display")&&t!==Ue.ghost){n.push({target:t,rect:Pt(t)});var e=ft({},n[n.length-1].rect);if(t.thisAnimationDuration){var r=Ot(t,!0);r&&(e.top-=r.f,e.left-=r.e)}t.fromRect=e}}))},addAnimationState:function(t){n.push(t)},removeAnimationState:function(t){n.splice(function(t,e){for(var r in t)if(t.hasOwnProperty(r))for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[r][n])return Number(r);return-1}(n,{target:t}),1)},animateAll:function(t){var e=this;if(!this.options.animation)return clearTimeout(r),void("function"==typeof t&&t());var o=!1,i=0;n.forEach((function(t){var r=0,n=t.target,a=n.fromRect,l=Pt(n),c=n.prevFromRect,u=n.prevToRect,s=t.rect,d=Ot(n,!0);d&&(l.top-=d.f,l.left-=d.e),n.toRect=l,n.thisAnimationDuration&&Ut(c,l)&&!Ut(a,l)&&(s.top-l.top)/(s.left-l.left)==(a.top-l.top)/(a.left-l.left)&&(r=function(t,e,r,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-r.top,2)+Math.pow(e.left-r.left,2))*n.animation}(s,c,u,e.options)),Ut(l,a)||(n.prevFromRect=a,n.prevToRect=l,r||(r=e.options.animation),e.animate(n,s,l,r)),r&&(o=!0,i=Math.max(i,r),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),r),n.thisAnimationDuration=r)})),clearTimeout(r),o?r=setTimeout((function(){"function"==typeof t&&t()}),i):"function"==typeof t&&t(),n=[]},animate:function(t,e,r,n){if(n){Tt(t,"transition",""),Tt(t,"transform","");var o=Ot(this.el),i=o&&o.a,a=o&&o.d,l=(e.left-r.left)/(i||1),c=(e.top-r.top)/(a||1);t.animatingX=!!l,t.animatingY=!!c,Tt(t,"transform","translate3d("+l+"px,"+c+"px,0)"),function(t){t.offsetWidth}(t),Tt(t,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),Tt(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){Tt(t,"transition",""),Tt(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),n)}}}))}function Ge(t,e,r,n,o,i,a,l){var c,u,s=t[Vt],d=s.options.onMove;return!window.CustomEvent||pt||gt?(c=document.createEvent("Event")).initEvent("move",!0,!0):c=new CustomEvent("move",{bubbles:!0,cancelable:!0}),c.to=e,c.from=t,c.dragged=r,c.draggedRect=n,c.related=o||e,c.relatedRect=i||Pt(e),c.willInsertAfter=l,c.originalEvent=a,t.dispatchEvent(c),d&&(u=d.call(s,c,a)),u}function Ze(t){t.draggable=!1}function He(){Ee=!1}function Ve(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,r=e.length,n=0;r--;)n+=e.charCodeAt(r);return n.toString(36)}function Ye(t){return setTimeout(t,0)}function ze(t){return clearTimeout(t)}Ue.prototype={constructor:Ue,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(me=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,$t):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,r=this.el,n=this.options,o=n.preventOnFilter,i=t.type,a=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,l=(a||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,u=n.filter;if(function(t){De.length=0;for(var e=t.getElementsByTagName("input"),r=e.length;r--;){var n=e[r];n.checked&&De.push(n)}}(r),!$t&&!(/mousedown|pointerdown/.test(i)&&0!==t.button||n.disabled||c.isContentEditable||(l=kt(l,n.draggable,r,!1))&&l.animated||ee===l)){if(oe=Bt(l),ae=Bt(l,n.draggable),"function"==typeof u){if(u.call(this,t,l,this))return Wt({sortable:e,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),Xt("filter",e,{evt:t}),void(o&&t.cancelable&&t.preventDefault())}else if(u&&(u=u.split(",").some((function(n){if(n=kt(c,n.trim(),r,!1))return Wt({sortable:e,rootEl:n,name:"filter",targetEl:l,fromEl:r,toEl:r}),Xt("filter",e,{evt:t}),!0}))))return void(o&&t.cancelable&&t.preventDefault());n.handle&&!kt(c,n.handle,r,!1)||this._prepareDragStart(t,a,l)}}},_prepareDragStart:function(t,e,r){var n,o=this,i=o.el,a=o.options,l=i.ownerDocument;if(r&&!$t&&r.parentNode===i){var c=Pt(r);if(Jt=i,Kt=($t=r).parentNode,te=$t.nextSibling,ee=r,ce=a.group,Ue.dragged=$t,se={target:$t,clientX:(e||t).clientX,clientY:(e||t).clientY},pe=se.clientX-c.left,ge=se.clientY-c.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,$t.style["will-change"]="all",n=function(){Xt("delayEnded",o,{evt:t}),Ue.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!vt&&o.nativeDraggable&&($t.draggable=!0),o._triggerDragStart(t,e),Wt({sortable:o,name:"choose",originalEvent:t}),Dt($t,a.chosenClass,!0))},a.ignore.split(",").forEach((function(t){It($t,t.trim(),Ze)})),wt(l,"dragover",Fe),wt(l,"mousemove",Fe),wt(l,"touchmove",Fe),wt(l,"mouseup",o._onDrop),wt(l,"touchend",o._onDrop),wt(l,"touchcancel",o._onDrop),vt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,$t.draggable=!0),Xt("delayStart",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!e||this.nativeDraggable&&(gt||pt))n();else{if(Ue.eventCanceled)return void this._onDrop();wt(l,"mouseup",o._disableDelayedDrag),wt(l,"touchend",o._disableDelayedDrag),wt(l,"touchcancel",o._disableDelayedDrag),wt(l,"mousemove",o._delayedDragTouchMoveHandler),wt(l,"touchmove",o._delayedDragTouchMoveHandler),a.supportPointer&&wt(l,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(n,a.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){$t&&Ze($t),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;_t(t,"mouseup",this._disableDelayedDrag),_t(t,"touchend",this._disableDelayedDrag),_t(t,"touchcancel",this._disableDelayedDrag),_t(t,"mousemove",this._delayedDragTouchMoveHandler),_t(t,"touchmove",this._delayedDragTouchMoveHandler),_t(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?wt(document,"pointermove",this._onTouchMove):wt(document,e?"touchmove":"mousemove",this._onTouchMove):(wt($t,"dragend",this),wt(Jt,"dragstart",this._onDragStart));try{document.selection?Ye((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(we=!1,Jt&&$t){Xt("dragStarted",this,{evt:e}),this.nativeDraggable&&wt(document,"dragover",Re);var r=this.options;!t&&Dt($t,r.dragClass,!1),Dt($t,r.ghostClass,!0),Ue.active=this,t&&this._appendGhost(),Wt({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(de){this._lastX=de.clientX,this._lastY=de.clientY,Ne();for(var t=document.elementFromPoint(de.clientX,de.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(de.clientX,de.clientY))!==e;)e=t;if($t.parentNode[Vt]._isOutsideThisEl(t),e)do{if(e[Vt]&&e[Vt]._onDragOver({clientX:de.clientX,clientY:de.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break;t=e}while(e=e.parentNode);Be()}},_onTouchMove:function(t){if(se){var e=this.options,r=e.fallbackTolerance,n=e.fallbackOffset,o=t.touches?t.touches[0]:t,i=Qt&&Ot(Qt,!0),a=Qt&&i&&i.a,l=Qt&&i&&i.d,c=Oe&&Ae&&Ft(Ae),u=(o.clientX-se.clientX+n.x)/(a||1)+(c?c[0]-Se[0]:0)/(a||1),s=(o.clientY-se.clientY+n.y)/(l||1)+(c?c[1]-Se[1]:0)/(l||1);if(!Ue.active&&!we){if(r&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}if(Qt){i?(i.e+=u-(fe||0),i.f+=s-(he||0)):i={a:1,b:0,c:0,d:1,e:u,f:s};var d="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");Tt(Qt,"webkitTransform",d),Tt(Qt,"mozTransform",d),Tt(Qt,"msTransform",d),Tt(Qt,"transform",d),fe=u,he=s,de=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Qt){var t=this.options.fallbackOnBody?document.body:Jt,e=Pt($t,!0,Oe,!0,t),r=this.options;if(Oe){for(Ae=t;"static"===Tt(Ae,"position")&&"none"===Tt(Ae,"transform")&&Ae!==document;)Ae=Ae.parentNode;Ae!==document.body&&Ae!==document.documentElement?(Ae===document&&(Ae=Lt()),e.top+=Ae.scrollTop,e.left+=Ae.scrollLeft):Ae=Lt(),Se=Ft(Ae)}Dt(Qt=$t.cloneNode(!0),r.ghostClass,!1),Dt(Qt,r.fallbackClass,!0),Dt(Qt,r.dragClass,!0),Tt(Qt,"transition",""),Tt(Qt,"transform",""),Tt(Qt,"box-sizing","border-box"),Tt(Qt,"margin",0),Tt(Qt,"top",e.top),Tt(Qt,"left",e.left),Tt(Qt,"width",e.width),Tt(Qt,"height",e.height),Tt(Qt,"opacity","0.8"),Tt(Qt,"position",Oe?"absolute":"fixed"),Tt(Qt,"zIndex","100000"),Tt(Qt,"pointerEvents","none"),Ue.ghost=Qt,t.appendChild(Qt),Tt(Qt,"transform-origin",pe/parseInt(Qt.style.width)*100+"% "+ge/parseInt(Qt.style.height)*100+"%")}},_onDragStart:function(t,e){var r=this,n=t.dataTransfer,o=r.options;Xt("dragStart",this,{evt:t}),Ue.eventCanceled?this._onDrop():(Xt("setupClone",this),Ue.eventCanceled||((re=Ht($t)).draggable=!1,re.style["will-change"]="",this._hideClone(),Dt(re,this.options.chosenClass,!1),Ue.clone=re),r.cloneId=Ye((function(){Xt("clone",r),Ue.eventCanceled||(r.options.removeCloneOnHide||Jt.insertBefore(re,$t),r._hideClone(),Wt({sortable:r,name:"clone"}))})),!e&&Dt($t,o.dragClass,!0),e?(_e=!0,r._loopId=setInterval(r._emulateDragOver,50)):(_t(document,"mouseup",r._onDrop),_t(document,"touchend",r._onDrop),_t(document,"touchcancel",r._onDrop),n&&(n.effectAllowed="move",o.setData&&o.setData.call(r,n,$t)),wt(document,"drop",r),Tt($t,"transform","translateZ(0)")),we=!0,r._dragStartId=Ye(r._dragStarted.bind(r,e,t)),wt(document,"selectstart",r),ve=!0,mt&&Tt(document.body,"user-select","none"))},_onDragOver:function(t){var e,r,n,o,i=this.el,a=t.target,l=this.options,c=l.group,u=Ue.active,s=ce===c,d=l.sort,f=ue||u,h=this,p=!1;if(!Ee){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),a=kt(a,l.draggable,i,!0),D("dragOver"),Ue.eventCanceled)return p;if($t.contains(t.target)||a.animated&&a.animatingX&&a.animatingY||h._ignoreWhileAnimating===a)return O(!1);if(_e=!1,u&&!l.disabled&&(s?d||(n=!Jt.contains($t)):ue===this||(this.lastPutMode=ce.checkPull(this,u,$t,t))&&c.checkPut(this,u,$t,t))){if(o="vertical"===this._getDirection(t,a),e=Pt($t),D("dragOverValid"),Ue.eventCanceled)return p;if(n)return Kt=Jt,T(),this._hideClone(),D("revert"),Ue.eventCanceled||(te?Jt.insertBefore($t,te):Jt.appendChild($t)),O(!0);var g=Nt(i,l.draggable);if(!g||function(t,e,r){var n=Pt(Nt(r.el,r.options.draggable));return e?t.clientX>n.right+10||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+10}(t,o,this)&&!g.animated){if(g===$t)return O(!1);if(g&&i===t.target&&(a=g),a&&(r=Pt(a)),!1!==Ge(Jt,i,$t,e,a,r,t,!!a))return T(),i.appendChild($t),Kt=i,I(),O(!0)}else if(a.parentNode===i){r=Pt(a);var v,m,b,y=$t.parentNode!==i,A=!function(t,e,r){var n=r?t.left:t.top,o=r?t.right:t.bottom,i=r?t.width:t.height,a=r?e.left:e.top,l=r?e.right:e.bottom,c=r?e.width:e.height;return n===a||o===l||n+i/2===a+c/2}($t.animated&&$t.toRect||e,a.animated&&a.toRect||r,o),w=o?"top":"left",_=Mt(a,"top","top")||Mt($t,"top","top"),C=_?_.scrollTop:void 0;if(me!==a&&(m=r[w],xe=!1,ke=!A&&l.invertSwap||y),v=function(t,e,r,n,o,i,a,l){var c=n?t.clientY:t.clientX,u=n?r.height:r.width,s=n?r.top:r.left,d=n?r.bottom:r.right,f=!1;if(!a)if(l&&ye<u*o){if(!xe&&(1===be?c>s+u*i/2:c<d-u*i/2)&&(xe=!0),xe)f=!0;else if(1===be?c<s+ye:c>d-ye)return-be}else if(c>s+u*(1-o)/2&&c<d-u*(1-o)/2)return function(t){return Bt($t)<Bt(t)?1:-1}(e);return(f=f||a)&&(c<s+u*i/2||c>d-u*i/2)?c>s+u/2?1:-1:0}(t,a,r,o,A?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,ke,me===a),0!==v){var x=Bt($t);do{x-=v,b=Kt.children[x]}while(b&&("none"===Tt(b,"display")||b===Qt))}if(0===v||b===a)return O(!1);me=a,be=v;var k=a.nextElementSibling,S=!1,E=Ge(Jt,i,$t,e,a,r,t,S=1===v);if(!1!==E)return 1!==E&&-1!==E||(S=1===E),Ee=!0,setTimeout(He,30),T(),S&&!k?i.appendChild($t):a.parentNode.insertBefore($t,S?k:a),_&&Zt(_,0,C-_.scrollTop),Kt=$t.parentNode,void 0===m||ke||(ye=Math.abs(m-Pt(a)[w])),I(),O(!0)}if(i.contains($t))return O(!1)}return!1}function D(l,c){Xt(l,h,ft({evt:t,isOwner:s,axis:o?"vertical":"horizontal",revert:n,dragRect:e,targetRect:r,canSort:d,fromSortable:f,target:a,completed:O,onMove:function(r,n){return Ge(Jt,i,$t,e,r,Pt(r),t,n)},changed:I},c))}function T(){D("dragOverAnimationCapture"),h.captureAnimationState(),h!==f&&f.captureAnimationState()}function O(e){return D("dragOverCompleted",{insertion:e}),e&&(s?u._hideClone():u._showClone(h),h!==f&&(Dt($t,ue?ue.options.ghostClass:u.options.ghostClass,!1),Dt($t,l.ghostClass,!0)),ue!==h&&h!==Ue.active?ue=h:h===Ue.active&&ue&&(ue=null),f===h&&(h._ignoreWhileAnimating=a),h.animateAll((function(){D("dragOverAnimationComplete"),h._ignoreWhileAnimating=null})),h!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(a===$t&&!$t.animated||a===i&&!a.animated)&&(me=null),l.dragoverBubble||t.rootEl||a===document||($t.parentNode[Vt]._isOutsideThisEl(t.target),!e&&Fe(t)),!l.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),p=!0}function I(){ie=Bt($t),le=Bt($t,l.draggable),Wt({sortable:h,name:"change",toEl:i,newIndex:ie,newDraggableIndex:le,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){_t(document,"mousemove",this._onTouchMove),_t(document,"touchmove",this._onTouchMove),_t(document,"pointermove",this._onTouchMove),_t(document,"dragover",Fe),_t(document,"mousemove",Fe),_t(document,"touchmove",Fe)},_offUpEvents:function(){var t=this.el.ownerDocument;_t(t,"mouseup",this._onDrop),_t(t,"touchend",this._onDrop),_t(t,"pointerup",this._onDrop),_t(t,"touchcancel",this._onDrop),_t(document,"selectstart",this)},_onDrop:function(t){var e=this.el,r=this.options;ie=Bt($t),le=Bt($t,r.draggable),Xt("drop",this,{evt:t}),Kt=$t&&$t.parentNode,ie=Bt($t),le=Bt($t,r.draggable),Ue.eventCanceled||(we=!1,ke=!1,xe=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ze(this.cloneId),ze(this._dragStartId),this.nativeDraggable&&(_t(document,"drop",this),_t(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),mt&&Tt(document.body,"user-select",""),Tt($t,"transform",""),t&&(ve&&(t.cancelable&&t.preventDefault(),!r.dropBubble&&t.stopPropagation()),Qt&&Qt.parentNode&&Qt.parentNode.removeChild(Qt),(Jt===Kt||ue&&"clone"!==ue.lastPutMode)&&re&&re.parentNode&&re.parentNode.removeChild(re),$t&&(this.nativeDraggable&&_t($t,"dragend",this),Ze($t),$t.style["will-change"]="",ve&&!we&&Dt($t,ue?ue.options.ghostClass:this.options.ghostClass,!1),Dt($t,this.options.chosenClass,!1),Wt({sortable:this,name:"unchoose",toEl:Kt,newIndex:null,newDraggableIndex:null,originalEvent:t}),Jt!==Kt?(ie>=0&&(Wt({rootEl:Kt,name:"add",toEl:Kt,fromEl:Jt,originalEvent:t}),Wt({sortable:this,name:"remove",toEl:Kt,originalEvent:t}),Wt({rootEl:Kt,name:"sort",toEl:Kt,fromEl:Jt,originalEvent:t}),Wt({sortable:this,name:"sort",toEl:Kt,originalEvent:t})),ue&&ue.save()):ie!==oe&&ie>=0&&(Wt({sortable:this,name:"update",toEl:Kt,originalEvent:t}),Wt({sortable:this,name:"sort",toEl:Kt,originalEvent:t})),Ue.active&&(null!=ie&&-1!==ie||(ie=oe,le=ae),Wt({sortable:this,name:"end",toEl:Kt,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){Xt("nulling",this),Jt=$t=Kt=Qt=te=re=ee=ne=se=de=ve=ie=le=oe=ae=me=be=ue=ce=Ue.dragged=Ue.ghost=Ue.clone=Ue.active=null,De.forEach((function(t){t.checked=!0})),De.length=fe=he=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":$t&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],r=this.el.children,n=0,o=r.length,i=this.options;n<o;n++)kt(t=r[n],i.draggable,this.el,!1)&&e.push(t.getAttribute(i.dataIdAttr)||Ve(t));return e},sort:function(t){var e={},r=this.el;this.toArray().forEach((function(t,n){var o=r.children[n];kt(o,this.options.draggable,r,!1)&&(e[t]=o)}),this),t.forEach((function(t){e[t]&&(r.removeChild(e[t]),r.appendChild(e[t]))}))},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return kt(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var r=this.options;if(void 0===e)return r[t];var n=qt.modifyOption(this,t,e);r[t]=void 0!==n?n:e,"group"===t&&je(r)},destroy:function(){Xt("destroy",this);var t=this.el;t[Vt]=null,_t(t,"mousedown",this._onTapStart),_t(t,"touchstart",this._onTapStart),_t(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(_t(t,"dragover",this),_t(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Ce.splice(Ce.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!ne){if(Xt("hideClone",this),Ue.eventCanceled)return;Tt(re,"display","none"),this.options.removeCloneOnHide&&re.parentNode&&re.parentNode.removeChild(re),ne=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(ne){if(Xt("showClone",this),Ue.eventCanceled)return;Jt.contains($t)&&!this.options.group.revertClone?Jt.insertBefore(re,$t):te?Jt.insertBefore(re,te):Jt.appendChild(re),this.options.group.revertClone&&this.animate($t,re),Tt(re,"display",""),ne=!1}}else this._hideClone()}},Te&&wt(document,"touchmove",(function(t){(Ue.active||we)&&t.cancelable&&t.preventDefault()})),Ue.utils={on:wt,off:_t,css:Tt,find:It,is:function(t,e){return!!kt(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},throttle:Gt,closest:kt,toggleClass:Dt,clone:Ht,index:Bt,nextTick:Ye,cancelNextTick:ze,detectDirection:Me,getChild:jt},Ue.get=function(t){return t[Vt]},Ue.mount=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Ue.utils=ft({},Ue.utils,t.utils)),qt.mount(t)}))},Ue.create=function(t,e){return new Ue(t,e)},Ue.version="1.10.2";var qe,Xe,We,$e,Ke,Qe,Je=[],tr=!1;function er(){Je.forEach((function(t){clearInterval(t.pid)})),Je=[]}function rr(){clearInterval(Qe)}var nr=Gt((function(t,e,r,n){if(e.scroll){var o,i=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,l=e.scrollSensitivity,c=e.scrollSpeed,u=Lt(),s=!1;Xe!==r&&(Xe=r,er(),qe=e.scroll,o=e.scrollFn,!0===qe&&(qe=Rt(r,!0)));var d=0,f=qe;do{var h=f,p=Pt(h),g=p.top,v=p.bottom,m=p.left,b=p.right,y=p.width,A=p.height,w=void 0,_=void 0,C=h.scrollWidth,x=h.scrollHeight,k=Tt(h),S=h.scrollLeft,E=h.scrollTop;h===u?(w=y<C&&("auto"===k.overflowX||"scroll"===k.overflowX||"visible"===k.overflowX),_=A<x&&("auto"===k.overflowY||"scroll"===k.overflowY||"visible"===k.overflowY)):(w=y<C&&("auto"===k.overflowX||"scroll"===k.overflowX),_=A<x&&("auto"===k.overflowY||"scroll"===k.overflowY));var D=w&&(Math.abs(b-i)<=l&&S+y<C)-(Math.abs(m-i)<=l&&!!S),T=_&&(Math.abs(v-a)<=l&&E+A<x)-(Math.abs(g-a)<=l&&!!E);if(!Je[d])for(var O=0;O<=d;O++)Je[O]||(Je[O]={});Je[d].vx==D&&Je[d].vy==T&&Je[d].el===h||(Je[d].el=h,Je[d].vx=D,Je[d].vy=T,clearInterval(Je[d].pid),0==D&&0==T||(s=!0,Je[d].pid=setInterval(function(){n&&0===this.layer&&Ue.active._onTouchMove(Ke);var e=Je[this.layer].vy?Je[this.layer].vy*c:0,r=Je[this.layer].vx?Je[this.layer].vx*c:0;"function"==typeof o&&"continue"!==o.call(Ue.dragged.parentNode[Vt],r,e,t,Ke,Je[this.layer].el)||Zt(Je[this.layer].el,r,e)}.bind({layer:d}),24))),d++}while(e.bubbleScroll&&f!==u&&(f=Rt(f,!1)));tr=s}}),30),or=function(t){var e=t.originalEvent,r=t.putSortable,n=t.dragEl,o=t.activeSortable,i=t.dispatchSortableEvent,a=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var c=r||o;a();var u=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,s=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(s)&&(i("spill"),this.onSpill({dragEl:n,putSortable:r}))}};function ir(){}function ar(){}ir.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,r=t.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var n=jt(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(e,n):this.sortable.el.appendChild(e),this.sortable.animateAll(),r&&r.animateAll()},drop:or},dt(ir,{pluginName:"revertOnSpill"}),ar.prototype={onSpill:function(t){var e=t.dragEl,r=t.putSortable||this.sortable;r.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),r.animateAll()},drop:or},dt(ar,{pluginName:"removeOnSpill"}),Ue.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?wt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?wt(document,"pointermove",this._handleFallbackAutoScroll):e.touches?wt(document,"touchmove",this._handleFallbackAutoScroll):wt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?_t(document,"dragover",this._handleAutoScroll):(_t(document,"pointermove",this._handleFallbackAutoScroll),_t(document,"touchmove",this._handleFallbackAutoScroll),_t(document,"mousemove",this._handleFallbackAutoScroll)),rr(),er(),clearTimeout(St),St=void 0},nulling:function(){Ke=Xe=qe=tr=Qe=We=$e=null,Je.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var r=this,n=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,i=document.elementFromPoint(n,o);if(Ke=t,e||gt||pt||mt){nr(t,this.options,i,e);var a=Rt(i,!0);!tr||Qe&&n===We&&o===$e||(Qe&&rr(),Qe=setInterval((function(){var i=Rt(document.elementFromPoint(n,o),!0);i!==a&&(a=i,er()),nr(t,r.options,i,e)}),10),We=n,$e=o)}else{if(!this.options.bubbleScroll||Rt(i,!0)===Lt())return void er();nr(t,this.options,Rt(i,!1),!1)}}},dt(t,{pluginName:"scroll",initializeByDefault:!0})}),Ue.mount(ar,ir);var lr=Ue;function cr(t,e,r={}){let n;const{document:o=ct,...a}=r,l={onUpdate:t=>{!function(t,e,r){const n=(0,i.isRef)(t),o=n?[...nt(t)]:nt(t);if(r>=0&&r<o.length){const a=o.splice(e,1)[0];(0,i.nextTick)((()=>{o.splice(r,0,a),n&&(t.value=o)}))}}(e,t.oldIndex,t.newIndex)}},c=()=>{const e="string"==typeof t?null==o?void 0:o.querySelector(t):function(t){var e;const r=nt(t);return null!=(e=null==r?void 0:r.$el)?e:r}(t);e&&(n=new lr(e,{...l,...a}))},u=()=>null==n?void 0:n.destroy();return function(t,e=!0){(0,i.getCurrentInstance)()?(0,i.onMounted)(t):e?t():(0,i.nextTick)(t)}(c),s=u,!!(0,i.getCurrentScope)()&&(0,i.onScopeDispose)(s),{stop:u,start:c,option:(t,e)=>{if(void 0===e)return null==n?void 0:n.option(t);null==n||n.option(t,e)}};var s}var ur=n(74139),sr=n(76236),dr=n(85313),fr=n(57274),hr=(0,i.defineComponent)({name:"AppOrderSelectorElement",components:{IconArrowDown:sr.Z,IconArrowUp:dr.Z,NcButton:fr.Z},props:{ariaDescribedby:{type:String,default:null},ariaDetails:{type:String,default:null},app:{type:Object,required:!0},isFirst:{type:Boolean,default:!1},isLast:{type:Boolean,default:!1}},emits:{"move:up":function(){return!0},"move:down":function(){return!0},"update:focus":function(){return!0}},setup:function(t,e){var r=e.emit,n=(0,i.ref)(),o=(0,i.ref)(),a=0;return{buttonUp:n,buttonDown:o,moveUp:function(){r("move:up"),a=1},moveDown:function(){r("move:down"),a=-1},keepFocus:function(){0!==a&&(1!==a&&!t.isLast||t.isFirst?(0,i.nextTick)((function(){return o.value.$el.focus()})):(0,i.nextTick)((function(){return n.value.$el.focus()}))),a=0},t:rt.Iu}}}),pr=n(77004),gr={};gr.styleTagTransform=q(),gr.setAttributes=H(),gr.insert=G().bind(null,"head"),gr.domAPI=R(),gr.insertStyleElement=Y(),B()(pr.Z,gr),pr.Z&&pr.Z.locals&&pr.Z.locals;var vr=(0,w.Z)(hr,(function(){var t,e=this,r=e._self._c;return e._self._setupProxy,r("li",{class:{"order-selector-element":!0,"order-selector-element--disabled":e.app.default},attrs:{"data-cy-app-order-element":e.app.id},on:{focusin:function(t){return e.$emit("update:focus")}}},[r("svg",{attrs:{width:"20",height:"20",viewBox:"0 0 20 20",role:"presentation"}},[r("image",{staticClass:"order-selector-element__icon",attrs:{preserveAspectRatio:"xMinYMin meet",x:"0",y:"0",width:"20",height:"20","xlink:href":e.app.icon}})]),e._v(" "),r("div",{staticClass:"order-selector-element__label"},[e._v("\n\t\t"+e._s(null!==(t=e.app.label)&&void 0!==t?t:e.app.id)+"\n\t")]),e._v(" "),r("div",{staticClass:"order-selector-element__actions"},[r("NcButton",{directives:[{name:"show",rawName:"v-show",value:!e.isFirst&&!e.app.default,expression:"!isFirst && !app.default"}],ref:"buttonUp",attrs:{"aria-label":e.t("settings","Move up"),"aria-describedby":e.ariaDescribedby,"aria-details":e.ariaDetails,"data-cy-app-order-button":"up",type:"tertiary-no-background"},on:{click:e.moveUp},scopedSlots:e._u([{key:"icon",fn:function(){return[r("IconArrowUp",{attrs:{size:20}})]},proxy:!0}])}),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.isFirst||!!e.app.default,expression:"isFirst || !!app.default"}],staticClass:"order-selector-element__placeholder",attrs:{"aria-hidden":"true"}}),e._v(" "),r("NcButton",{directives:[{name:"show",rawName:"v-show",value:!e.isLast&&!e.app.default,expression:"!isLast && !app.default"}],ref:"buttonDown",attrs:{"aria-label":e.t("settings","Move down"),"aria-describedby":e.ariaDescribedby,"aria-details":e.ariaDetails,"data-cy-app-order-button":"down",type:"tertiary-no-background"},on:{click:e.moveDown},scopedSlots:e._u([{key:"icon",fn:function(){return[r("IconArrowDown",{attrs:{size:20}})]},proxy:!0}])}),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.isLast||!!e.app.default,expression:"isLast || !!app.default"}],staticClass:"order-selector-element__placeholder",attrs:{"aria-hidden":"true"}})],1)])}),[],!1,null,"081ebc45",null).exports;function mr(t){return function(t){if(Array.isArray(t))return br(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return br(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?br(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function br(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var yr=(0,i.defineComponent)({name:"AppOrderSelector",components:{AppOrderSelectorElement:vr,Fragment:ur.H},props:{ariaDetails:{type:String,default:null},value:{type:Array,required:!0}},emits:{"update:value":function(t){return Array.isArray(t)}},setup:function(t,e){var r=e.emit,n=(0,i.ref)(null),o=(0,i.computed)({get:function(){return t.value},set:function(e){var n=mr(e).sort((function(t,r){return(r.default?1:0)-(t.default?1:0)||e.indexOf(t)-e.indexOf(r)}));n.some((function(e,r){return e.id!==t.value[r].id}))?r("update:value",n):a.value+=1}}),a=(0,i.ref)(0);cr(n,o,{filter:".order-selector-element--disabled"});var l=(0,i.ref)([]);(0,i.onUpdated)((function(){l.value.forEach((function(t){return t.keepFocus()}))}));var c=(0,i.ref)("");return{appList:o,listElement:n,moveDown:function(e){var n=e>0?t.value.slice(0,e):[];n.push(t.value[e+1]);var o=e<t.value.length-2?t.value.slice(e+2):[];r("update:value",[].concat(mr(n),[t.value[e]],mr(o)))},moveUp:function(e){var n,o=e>1?t.value.slice(0,e-1):[];if(null===(n=t.value[e-1])||void 0===n||!n.default){var i=[t.value[e-1]];e<t.value.length-1&&i.push.apply(i,mr(t.value.slice(e+1))),r("update:value",[].concat(mr(o),[t.value[e]],i))}},statusInfoId:"sorting-status-info-".concat((Math.random()+1).toString(36).substring(7)),statusInfo:c,updateStatusInfo:function(e){c.value=(0,rt.Iu)("theming","Current selected app: {app}, position {position} of {total}",{app:t.value[e].label,position:e+1,total:t.value.length})},renderCount:a,selectorElements:l}}}),Ar=yr,wr=n(78741),_r={};_r.styleTagTransform=q(),_r.setAttributes=H(),_r.insert=G().bind(null,"head"),_r.domAPI=R(),_r.insertStyleElement=Y(),B()(wr.Z,_r),wr.Z&&wr.Z.locals&&wr.Z.locals;var Cr=(0,w.Z)(Ar,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("Fragment",[e("div",{staticClass:"hidden-visually",attrs:{id:t.statusInfoId,"aria-live":"polite",role:"status"}},[t._v("\n\t\t"+t._s(t.statusInfo)+"\n\t")]),t._v(" "),e("ol",{ref:"listElement",staticClass:"order-selector",attrs:{"data-cy-app-order":""}},t._l(t.appList,(function(r,n){return e("AppOrderSelectorElement",t._g({key:"".concat(r.id).concat(t.renderCount),ref:"selectorElements",refInFor:!0,attrs:{app:r,"aria-details":t.ariaDetails,"aria-describedby":t.statusInfoId,"is-first":0===n||!!t.appList[n-1].default,"is-last":n===t.value.length-1}},r.default?{}:{"move:up":function(){return t.moveUp(n)},"move:down":function(){return t.moveDown(n)},"update:focus":function(){return t.updateStatusInfo(n)}}))})),1)])}),[],!1,null,"df3bf8da",null),xr=Cr.exports,kr=n(71884),Sr=n(6156),Er=n(25108);function Dr(t){return Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dr(t)}function Tr(){Tr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),l=new k(o||[]);return n(a,"_invoke",{value:w(t,r,l)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var d={};function f(){}function h(){}function p(){}var g={};c(g,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(S([])));m&&m!==e&&r.call(m,i)&&(g=m);var b=p.prototype=f.prototype=Object.create(g);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function o(n,i,a,l){var c=s(t[n],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==Dr(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,a,l)}),(function(t){o("throw",t,a,l)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,l)}))}l(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var l=_(a,r);if(l){if(l===d)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=s(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=p,n(b,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:h,configurable:!0}),h.displayName=c(p,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},y(A.prototype),c(A.prototype,a,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new A(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(b),c(b,l,"Generator"),c(b,i,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}function Or(t,e,r,n,o,i,a){try{var l=t[i](a),c=l.value}catch(t){return void r(t)}l.done?e(c):Promise.resolve(c).then(n,o)}function Ir(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Or(i,n,o,a,l,"next",t)}function l(t){Or(i,n,o,a,l,"throw",t)}a(void 0)}))}}function Lr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Pr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Mr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pr(Object(r),!0).forEach((function(e){jr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function jr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Dr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==Dr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Dr(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Nr=(0,i.defineComponent)({name:"UserAppMenuSection",components:{AppOrderSelector:xr,IconUndo:kr.default,NcButton:fr.Z,NcNoteCard:Sr.Z,NcSettingsSection:d.Z},setup:function(){var t,e=(0,c.j)("theming","navigationBar"),r=e.userAppOrder,n=e.enforcedDefaultApp,o=Object.values((0,c.j)("core","apps")).filter((function(t){return"link"===t.type})).map((function(t){return Mr(Mr({},t),{},{label:t.name,default:t.default&&t.app===n})})),a=(0,i.ref)(!Array.isArray(r)||Object.values(r).length>0),s=(0,i.computed)((function(){return o.some((function(t,e){return t.id!==g.value[e].id}))})),d="theming-apporder-changed-infocard",h="theming-apporder-changed-infocard",p=(0,i.computed)((function(){return(s.value?"".concat(d," "):"")+(n?h:"")})),g=(0,i.ref)(function(t){if(Array.isArray(t))return Lr(t)}(t=o)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Lr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Lr(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=function(){var t=Ir(Tr().mark((function t(){var e,r;return Tr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m("apporder",[]);case 3:return a.value=!1,t.next=6,u.Z.get((0,l.generateOcsUrl)("/core/navigation/apps"),{headers:{"OCS-APIRequest":"true"}});case 6:e=t.sent,r=e.data,g.value=r.ocs.data.map((function(t){return Mr(Mr({},t),{},{label:t.name,default:t.default&&t.app===n})})),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),Er.warn(t.t0),(0,f.x2)((0,rt.Iu)("theming","Could not reset the app order"));case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=Ir(Tr().mark((function t(e,r){var n;return Tr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,l.generateOcsUrl)("apps/provisioning_api/api/v1/config/users/{appId}/{configKey}",{appId:"core",configKey:e}),t.next=3,u.Z.post(n,{configValue:JSON.stringify(r)});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();return{appOrder:g,updateAppOrder:function(t){var e={};t.forEach((function(t,r){var n=t.app,o=t.key;e[n]=Mr(Mr({},e[n]),{},jr({},o,r))})),m("apporder",e).then((function(){g.value=t,a.value=!0})).catch((function(t){Er.warn("Could not set the app order",t),(0,f.x2)((0,rt.Iu)("theming","Could not set the app order"))}))},resetAppOrder:v,enforcedDefaultApp:n,hasAppOrderChanged:s,hasCustomAppOrder:a,ariaDetailsAppOrder:p,elementIdAppOrderChanged:d,elementIdEnforcedDefaultApp:h,t:rt.Iu}}}),Br=Nr,Fr=n(1563),Rr={};Rr.styleTagTransform=q(),Rr.setAttributes=H(),Rr.insert=G().bind(null,"head"),Rr.domAPI=R(),Rr.insertStyleElement=Y(),B()(Fr.Z,Rr),Fr.Z&&Fr.Z.locals&&Fr.Z.locals;var Ur=(0,w.Z)(Br,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("NcSettingsSection",{attrs:{name:t.t("theming","Navigation bar settings")}},[e("p",[t._v("\n\t\t"+t._s(t.t("theming","You can configure the app order used for the navigation bar. The first entry will be the default app, opened after login or when clicking on the logo."))+"\n\t")]),t._v(" "),t.enforcedDefaultApp?e("NcNoteCard",{attrs:{id:t.elementIdEnforcedDefaultApp,type:"info"}},[t._v("\n\t\t"+t._s(t.t("theming","The default app can not be changed because it was configured by the administrator."))+"\n\t")]):t._e(),t._v(" "),t.hasAppOrderChanged?e("NcNoteCard",{attrs:{id:t.elementIdAppOrderChanged,type:"info"}},[t._v("\n\t\t"+t._s(t.t("theming","The app order was changed, to see it in action you have to reload the page."))+"\n\t")]):t._e(),t._v(" "),e("AppOrderSelector",{staticClass:"user-app-menu-order",attrs:{"aria-details":t.ariaDetailsAppOrder,value:t.appOrder},on:{"update:value":t.updateAppOrder}}),t._v(" "),e("NcButton",{attrs:{"data-test-id":"btn-apporder-reset",disabled:!t.hasCustomAppOrder,type:"tertiary"},on:{click:t.resetAppOrder},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconUndo",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.t("theming","Reset default app order"))+"\n\t")])],1)}),[],!1,null,"0b68cf15",null).exports,Gr=n(25108);function Zr(t){return Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zr(t)}function Hr(){Hr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),l=new k(o||[]);return n(a,"_invoke",{value:w(t,r,l)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var d={};function f(){}function h(){}function p(){}var g={};c(g,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(S([])));m&&m!==e&&r.call(m,i)&&(g=m);var b=p.prototype=f.prototype=Object.create(g);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function o(n,i,a,l){var c=s(t[n],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==Zr(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,a,l)}),(function(t){o("throw",t,a,l)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,l)}))}l(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var l=_(a,r);if(l){if(l===d)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=s(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=p,n(b,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:h,configurable:!0}),h.displayName=c(p,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},y(A.prototype),c(A.prototype,a,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new A(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(b),c(b,l,"Generator"),c(b,i,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}function Vr(t,e,r,n,o,i,a){try{var l=t[i](a),c=l.value}catch(t){return void r(t)}l.done?e(c):Promise.resolve(c).then(n,o)}function Yr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Vr(i,n,o,a,l,"next",t)}function l(t){Vr(i,n,o,a,l,"throw",t)}a(void 0)}))}}function zr(t){return function(t){if(Array.isArray(t))return qr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return qr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qr(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Xr=(0,c.j)("theming","themes",[]),Wr=(0,c.j)("theming","enforceTheme",""),$r=(0,c.j)("theming","shortcutsDisabled",!1),Kr=(0,c.j)("theming","isUserThemingDisabled"),Qr={name:"UserThemes",components:{ItemPreview:et,NcCheckboxRadioSwitch:s.Z,NcSettingsSection:d.Z,BackgroundSettings:$,UserAppMenuSection:Ur},data:function(){return{availableThemes:Xr,enforceTheme:Wr,shortcutsDisabled:$r,isUserThemingDisabled:Kr}},computed:{themes:function(){return this.availableThemes.filter((function(t){return 1===t.type}))},fonts:function(){return this.availableThemes.filter((function(t){return 2===t.type}))},selectedTheme:function(){return this.themes.find((function(t){return!0===t.enabled}))||this.themes[0]},description:function(){return t("theming","Universal access is very important to us. We follow web standards and check to make everything usable also without mouse, and assistive software such as screenreaders. We aim to be compliant with the {guidelines}Web Content Accessibility Guidelines{linkend} 2.1 on AA level, with the high contrast theme even on AAA level.").replace("{guidelines}",this.guidelinesLink).replace("{linkend}","</a>")},guidelinesLink:function(){return'<a target="_blank" href="https://www.w3.org/WAI/standards-guidelines/wcag/" rel="noreferrer nofollow">'},descriptionDetail:function(){return t("theming","If you find any issues, do not hesitate to report them on {issuetracker}our issue tracker{linkend}. And if you want to get involved, come join {designteam}our design team{linkend}!").replace("{issuetracker}",this.issuetrackerLink).replace("{designteam}",this.designteamLink).replace(/\{linkend\}/g,"</a>")},issuetrackerLink:function(){return'<a target="_blank" href="https://github.com/nextcloud/server/issues/" rel="noreferrer nofollow">'},designteamLink:function(){return'<a target="_blank" href="https://nextcloud.com/design" rel="noreferrer nofollow">'}},watch:{shortcutsDisabled:function(t){this.changeShortcutsDisabled(t)}},methods:{refreshGlobalStyles:function(){zr(document.head.querySelectorAll("link.theme")).forEach((function(t){var e=new URL(t.href);e.searchParams.set("v",Date.now());var r=t.cloneNode();r.href=e.toString(),r.onload=function(){return t.remove()},document.head.append(r)}))},updateBackground:function(t){this.background="custom"===t.type||"default"===t.type?t.type:t.value,this.refreshGlobalStyles()},changeTheme:function(t){var e=t.enabled,r=t.id;this.themes.forEach((function(t){t.id===r&&e?t.enabled=!0:t.enabled=!1})),this.updateBodyAttributes(),this.selectItem(e,r)},changeFont:function(t){var e=t.enabled,r=t.id;this.fonts.forEach((function(t){t.id===r&&e?t.enabled=!0:t.enabled=!1})),this.updateBodyAttributes(),this.selectItem(e,r)},changeShortcutsDisabled:function(t){return Yr(Hr().mark((function e(){return Hr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,(0,u.Z)({url:(0,l.generateOcsUrl)("apps/provisioning_api/api/v1/config/users/{appId}/{configKey}",{appId:"theming",configKey:"shortcuts_disabled"}),data:{configValue:"yes"},method:"POST"});case 3:e.next=7;break;case 5:return e.next=7,(0,u.Z)({url:(0,l.generateOcsUrl)("apps/provisioning_api/api/v1/config/users/{appId}/{configKey}",{appId:"theming",configKey:"shortcuts_disabled"}),method:"DELETE"});case 7:case"end":return e.stop()}}),e)})))()},updateBodyAttributes:function(){var t=this.themes.filter((function(t){return!0===t.enabled})).map((function(t){return t.id})),e=this.fonts.filter((function(t){return!0===t.enabled})).map((function(t){return t.id}));this.themes.forEach((function(t){document.body.toggleAttribute("data-theme-".concat(t.id),t.enabled)})),this.fonts.forEach((function(t){document.body.toggleAttribute("data-theme-".concat(t.id),t.enabled)})),document.body.setAttribute("data-themes",[].concat(zr(t),zr(e)).join(","))},selectItem:function(e,r){return Yr(Hr().mark((function n(){return Hr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!e){n.next=6;break}return n.next=4,(0,u.Z)({url:(0,l.generateOcsUrl)("apps/theming/api/v1/theme/{themeId}/enable",{themeId:r}),method:"PUT"});case 4:n.next=8;break;case 6:return n.next=8,(0,u.Z)({url:(0,l.generateOcsUrl)("apps/theming/api/v1/theme/{themeId}",{themeId:r}),method:"DELETE"});case 8:n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),Gr.error(n.t0,n.t0.response),OC.Notification.showTemporary(t("theming",n.t0.response.data.ocs.meta.message+". Unable to apply the setting."));case 14:case"end":return n.stop()}}),n,null,[[0,10]])})))()}}},Jr=n(67053),tn={};tn.styleTagTransform=q(),tn.setAttributes=H(),tn.insert=G().bind(null,"head"),tn.domAPI=R(),tn.insertStyleElement=Y(),B()(Jr.Z,tn),Jr.Z&&Jr.Z.locals&&Jr.Z.locals;var en=(0,w.Z)(Qr,(function(){var t=this,e=t._self._c;return e("section",[e("NcSettingsSection",{staticClass:"theming",attrs:{name:t.t("theming","Appearance and accessibility"),"limit-width":!1}},[e("p",{domProps:{innerHTML:t._s(t.description)}}),t._v(" "),e("p",{domProps:{innerHTML:t._s(t.descriptionDetail)}}),t._v(" "),e("div",{staticClass:"theming__preview-list"},t._l(t.themes,(function(r){return e("ItemPreview",{key:r.id,attrs:{enforced:r.id===t.enforceTheme,selected:t.selectedTheme.id===r.id,theme:r,unique:1===t.themes.length,type:"theme"},on:{change:t.changeTheme}})})),1),t._v(" "),e("div",{staticClass:"theming__preview-list"},t._l(t.fonts,(function(r){return e("ItemPreview",{key:r.id,attrs:{selected:r.enabled,theme:r,unique:1===t.fonts.length,type:"font"},on:{change:t.changeFont}})})),1)]),t._v(" "),e("NcSettingsSection",{staticClass:"background",attrs:{name:t.t("theming","Background"),"data-user-theming-background-disabled":""}},[t.isUserThemingDisabled?[e("p",[t._v(t._s(t.t("theming","Customization has been disabled by your administrator")))])]:[e("p",[t._v(t._s(t.t("theming","Set a custom background")))]),t._v(" "),e("BackgroundSettings",{staticClass:"background__grid",on:{"update:background":t.refreshGlobalStyles}})]],2),t._v(" "),e("NcSettingsSection",{attrs:{name:t.t("theming","Keyboard shortcuts")}},[e("p",[t._v(t._s(t.t("theming","In some cases keyboard shortcuts can interfere with accessibility tools. In order to allow focusing on your tool correctly you can disable all keyboard shortcuts here. This will also disable all available shortcuts in apps.")))]),t._v(" "),e("NcCheckboxRadioSwitch",{staticClass:"theming__preview-toggle",attrs:{checked:t.shortcutsDisabled,name:"shortcuts_disabled",type:"switch"},on:{"update:checked":function(e){t.shortcutsDisabled=e},change:t.changeShortcutsDisabled}},[t._v("\n\t\t\t"+t._s(t.t("theming","Disable all keyboard shortcuts"))+"\n\t\t")])],1),t._v(" "),e("UserAppMenuSection")],1)}),[],!1,null,"552ffff3",null).exports;n.nc=btoa((0,o.IH)()),i.default.prototype.OC=OC,i.default.prototype.t=t;var rn=new(i.default.extend(en));rn.$mount("#theming"),rn.$on("update:background",(function(){var t;(t=document.head.querySelectorAll("link.theme"),function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(t){var e=new URL(t.href);e.searchParams.set("v",Date.now());var r=t.cloneNode();r.href=e.toString(),r.onload=function(){return t.remove()},document.head.append(r)}))}))},67053:function(t,e,r){"use strict";var n=r(87537),o=r.n(n),i=r(23645),a=r.n(i)()(o());a.push([t.id,".theming p[data-v-552ffff3]{max-width:800px}.theming[data-v-552ffff3] a{font-weight:bold}.theming[data-v-552ffff3] a:hover,.theming[data-v-552ffff3] a:focus{text-decoration:underline}.theming__preview-list[data-v-552ffff3]{--gap: 30px;display:grid;margin-top:var(--gap);column-gap:var(--gap);row-gap:var(--gap);grid-template-columns:1fr 1fr}.background__grid[data-v-552ffff3]{margin-top:30px}@media(max-width: 1440px){.theming__preview-list[data-v-552ffff3]{display:flex;flex-direction:column}}","",{version:3,sources:["webpack://./apps/theming/src/UserThemes.vue"],names:[],mappings:"AAGC,4BACC,eAAA,CAID,4BACC,gBAAA,CAEA,oEAEC,yBAAA,CAIF,wCACC,WAAA,CAEA,YAAA,CACA,qBAAA,CACA,qBAAA,CACA,kBAAA,CACA,6BAAA,CAKD,mCACC,eAAA,CAIF,0BACC,wCACC,YAAA,CACA,qBAAA,CAAA",sourcesContent:["\r\n.theming {\r\n\t// Limit width of settings sections for readability\r\n\tp {\r\n\t\tmax-width: 800px;\r\n\t}\r\n\r\n\t// Proper highlight for links and focus feedback\r\n\t&::v-deep a {\r\n\t\tfont-weight: bold;\r\n\r\n\t\t&:hover,\r\n\t\t&:focus {\r\n\t\t\ttext-decoration: underline;\r\n\t\t}\r\n\t}\r\n\r\n\t&__preview-list {\r\n\t\t--gap: 30px;\r\n\r\n\t\tdisplay: grid;\r\n\t\tmargin-top: var(--gap);\r\n\t\tcolumn-gap: var(--gap);\r\n\t\trow-gap: var(--gap);\r\n\t\tgrid-template-columns: 1fr 1fr;\r\n\t}\r\n}\r\n\r\n.background {\r\n\t&__grid {\r\n\t\tmargin-top: 30px;\r\n\t}\r\n}\r\n\r\n@media (max-width: 1440px) {\r\n\t.theming__preview-list {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n}\r\n"],sourceRoot:""}]),e.Z=a},78741:function(t,e,r){"use strict";var n=r(87537),o=r.n(n),i=r(23645),a=r.n(i)()(o());a.push([t.id,".order-selector[data-v-df3bf8da]{width:max-content;min-width:260px}","",{version:3,sources:["webpack://./apps/theming/src/components/AppOrderSelector.vue"],names:[],mappings:"AACA,iCACC,iBAAA,CACA,eAAA",sourcesContent:["\r\n.order-selector {\r\n\twidth: max-content;\r\n\tmin-width: 260px; // align with NcSelect\r\n}\r\n"],sourceRoot:""}]),e.Z=a},77004:function(t,e,r){"use strict";var n=r(87537),o=r.n(n),i=r(23645),a=r.n(i)()(o());a.push([t.id,".order-selector-element[data-v-081ebc45]{list-style:none;display:flex;flex-direction:row;align-items:center;gap:12px;padding-inline:12px}.order-selector-element[data-v-081ebc45]:hover{background-color:var(--color-background-hover);border-radius:var(--border-radius-large)}.order-selector-element--disabled[data-v-081ebc45]{border-color:var(--color-text-maxcontrast);color:var(--color-text-maxcontrast)}.order-selector-element--disabled .order-selector-element__icon[data-v-081ebc45]{opacity:75%}.order-selector-element__actions[data-v-081ebc45]{flex:0 0;display:flex;flex-direction:row;gap:6px}.order-selector-element__label[data-v-081ebc45]{flex:1 1;text-overflow:ellipsis;overflow:hidden}.order-selector-element__placeholder[data-v-081ebc45]{height:44px;width:44px}.order-selector-element__icon[data-v-081ebc45]{filter:var(--background-invert-if-bright)}","",{version:3,sources:["webpack://./apps/theming/src/components/AppOrderSelectorElement.vue"],names:[],mappings:"AACA,yCAEC,eAAA,CAEA,YAAA,CACA,kBAAA,CACA,kBAAA,CAEA,QAAA,CACA,mBAAA,CAEA,+CACC,8CAAA,CACA,wCAAA,CAGD,mDACC,0CAAA,CACA,mCAAA,CAEA,iFACC,WAAA,CAIF,kDACC,QAAA,CACA,YAAA,CACA,kBAAA,CACA,OAAA,CAGD,gDACC,QAAA,CACA,sBAAA,CACA,eAAA,CAGD,sDACC,WAAA,CACA,UAAA,CAGD,+CACC,yCAAA",sourcesContent:["\r\n.order-selector-element {\r\n\t// hide default styling\r\n\tlist-style: none;\r\n\t// Align children\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\talign-items: center;\r\n\t// Spacing\r\n\tgap: 12px;\r\n\tpadding-inline: 12px;\r\n\r\n\t&:hover {\r\n\t\tbackground-color: var(--color-background-hover);\r\n\t\tborder-radius: var(--border-radius-large);\r\n\t}\r\n\r\n\t&--disabled {\r\n\t\tborder-color: var(--color-text-maxcontrast);\r\n\t\tcolor: var(--color-text-maxcontrast);\r\n\r\n\t\t.order-selector-element__icon {\r\n\t\t\topacity: 75%;\r\n\t\t}\r\n\t}\r\n\r\n\t&__actions {\r\n\t\tflex: 0 0;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tgap: 6px;\r\n\t}\r\n\r\n\t&__label {\r\n\t\tflex: 1 1;\r\n\t\ttext-overflow: ellipsis;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t&__placeholder {\r\n\t\theight: 44px;\r\n\t\twidth: 44px;\r\n\t}\r\n\r\n\t&__icon {\r\n\t\tfilter: var(--background-invert-if-bright);\r\n\t}\r\n}\r\n"],sourceRoot:""}]),e.Z=a},36679:function(t,e,r){"use strict";var n=r(87537),o=r.n(n),i=r(23645),a=r.n(i)()(o());a.push([t.id,".background-selector[data-v-e836b210]{display:flex;flex-wrap:wrap;justify-content:center}.background-selector .background[data-v-e836b210]{overflow:hidden;width:176px;height:96px;margin:8px;text-align:center;border:2px solid var(--color-main-background);border-radius:var(--border-radius-large);background-position:center center;background-size:cover}.background-selector .background__filepicker.background--active[data-v-e836b210]{color:#fff;background-image:var(--image-background)}.background-selector .background__default[data-v-e836b210]{background-color:var(--color-primary-default);background-image:linear-gradient(to bottom, rgba(23, 23, 23, 0.5), rgba(23, 23, 23, 0.5)),var(--image-background-plain, var(--image-background-default))}.background-selector .background__filepicker[data-v-e836b210],.background-selector .background__default[data-v-e836b210],.background-selector .background__color[data-v-e836b210]{border-color:var(--color-border)}.background-selector .background__color[data-v-e836b210]{color:var(--color-primary-text);background-color:var(--color-primary-default)}.background-selector .background__default[data-v-e836b210],.background-selector .background__shipped[data-v-e836b210]{color:#fff}.background-selector .background[data-color-bright][data-v-e836b210]{color:#000}.background-selector .background--active[data-v-e836b210],.background-selector .background[data-v-e836b210]:hover,.background-selector .background[data-v-e836b210]:focus{outline:2px solid var(--color-main-text) !important;border-color:var(--color-main-background) !important}.background-selector .background span[data-v-e836b210]{margin:4px}.background-selector .background .check-icon[data-v-e836b210]{display:none}.background-selector .background--active:not(.icon-loading) .check-icon[data-v-e836b210]{display:block !important}","",{version:3,sources:["webpack://./apps/theming/src/components/BackgroundSettings.vue"],names:[],mappings:"AACA,sCACC,YAAA,CACA,cAAA,CACA,sBAAA,CAEA,kDACC,eAAA,CACA,WAAA,CACA,WAAA,CACA,UAAA,CACA,iBAAA,CACA,6CAAA,CACA,wCAAA,CACA,iCAAA,CACA,qBAAA,CAGC,iFACC,UAAA,CACA,wCAAA,CAIF,2DACC,6CAAA,CACA,wJAAA,CAGD,kLACC,gCAAA,CAGD,yDACC,+BAAA,CACA,6CAAA,CAID,sHAEC,UAAA,CAID,qEACC,UAAA,CAGD,0KAGC,mDAAA,CACA,oDAAA,CAID,uDACC,UAAA,CAGD,8DACC,YAAA,CAIA,yFAEC,wBAAA",sourcesContent:["\r\n.background-selector {\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap;\r\n\tjustify-content: center;\r\n\r\n\t.background {\r\n\t\toverflow: hidden;\r\n\t\twidth: 176px;\r\n\t\theight: 96px;\r\n\t\tmargin: 8px;\r\n\t\ttext-align: center;\r\n\t\tborder: 2px solid var(--color-main-background);\r\n\t\tborder-radius: var(--border-radius-large);\r\n\t\tbackground-position: center center;\r\n\t\tbackground-size: cover;\r\n\r\n\t\t&__filepicker {\r\n\t\t\t&.background--active {\r\n\t\t\t\tcolor: white;\r\n\t\t\t\tbackground-image: var(--image-background);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&__default {\r\n\t\t\tbackground-color: var(--color-primary-default);\r\n\t\t\tbackground-image: linear-gradient(to bottom, rgba(23, 23, 23, 0.5), rgba(23, 23, 23, 0.5)), var(--image-background-plain, var(--image-background-default));\r\n\t\t}\r\n\r\n\t\t&__filepicker, &__default, &__color {\r\n\t\t\tborder-color: var(--color-border);\r\n\t\t}\r\n\r\n\t\t&__color {\r\n\t\t\tcolor: var(--color-primary-text);\r\n\t\t\tbackground-color: var(--color-primary-default);\r\n\t\t}\r\n\r\n\t\t// Over a background image\r\n\t\t&__default,\r\n\t\t&__shipped {\r\n\t\t\tcolor: white;\r\n\t\t}\r\n\r\n\t\t// Text and svg icon dark on bright background\r\n\t\t&[data-color-bright] {\r\n\t\t\tcolor: black;\r\n\t\t}\r\n\r\n\t\t&--active,\r\n\t\t&:hover,\r\n\t\t&:focus {\r\n\t\t\toutline: 2px solid var(--color-main-text) !important;\r\n\t\t\tborder-color: var(--color-main-background) !important;\r\n\t\t}\r\n\r\n\t\t// Icon\r\n\t\tspan {\r\n\t\t\tmargin: 4px;\r\n\t\t}\r\n\r\n\t\t.check-icon {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\r\n\t\t&--active:not(.icon-loading) {\r\n\t\t\t.check-icon {\r\n\t\t\t\t// Show checkmark\r\n\t\t\t\tdisplay: block !important;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n"],sourceRoot:""}]),e.Z=a},22465:function(t,e,r){"use strict";var n=r(87537),o=r.n(n),i=r(23645),a=r.n(i)()(o());a.push([t.id,".theming__preview[data-v-1a08e35a]{--ratio: 16;position:relative;display:flex;justify-content:flex-start;max-width:800px}.theming__preview[data-v-1a08e35a],.theming__preview *[data-v-1a08e35a]{user-select:none}.theming__preview-image[data-v-1a08e35a]{flex-basis:calc(16px*var(--ratio));flex-shrink:0;height:calc(10px*var(--ratio));margin-right:var(--gap);cursor:pointer;border-radius:var(--border-radius);background-repeat:no-repeat;background-position:top left;background-size:cover}.theming__preview-explanation[data-v-1a08e35a]{margin-bottom:10px}.theming__preview-description[data-v-1a08e35a]{display:flex;flex-direction:column}.theming__preview-description h3[data-v-1a08e35a]{font-weight:bold;margin-bottom:0}.theming__preview-description label[data-v-1a08e35a]{padding:12px 0}.theming__preview--default[data-v-1a08e35a]{grid-column:span 2}.theming__preview-warning[data-v-1a08e35a]{color:var(--color-warning)}@media(max-width: 682.6666666667px){.theming__preview[data-v-1a08e35a]{flex-direction:column}.theming__preview-image[data-v-1a08e35a]{margin:0}}","",{version:3,sources:["webpack://./apps/theming/src/components/ItemPreview.vue"],names:[],mappings:"AAGA,mCAEC,WAAA,CAEA,iBAAA,CACA,YAAA,CACA,0BAAA,CACA,eAAA,CAEA,wEAEC,gBAAA,CAGD,yCACC,kCAAA,CACA,aAAA,CACA,8BAAA,CACA,uBAAA,CACA,cAAA,CACA,kCAAA,CACA,2BAAA,CACA,4BAAA,CACA,qBAAA,CAGD,+CACC,kBAAA,CAGD,+CACC,YAAA,CACA,qBAAA,CAEA,kDACC,gBAAA,CACA,eAAA,CAGD,qDACC,cAAA,CAIF,4CACC,kBAAA,CAGD,2CACC,0BAAA,CAIF,oCACC,mCACC,qBAAA,CAEA,yCACC,QAAA,CAAA",sourcesContent:["\r\n@use 'sass:math';\r\n\r\n.theming__preview {\r\n\t// We make previews on 16/10 screens\r\n\t--ratio: 16;\r\n\r\n\tposition: relative;\r\n\tdisplay: flex;\r\n\tjustify-content: flex-start;\r\n\tmax-width: 800px;\r\n\r\n\t&,\r\n\t* {\r\n\t\tuser-select: none;\r\n\t}\r\n\r\n\t&-image {\r\n\t\tflex-basis: calc(16px * var(--ratio));\r\n\t\tflex-shrink: 0;\r\n\t\theight: calc(10px * var(--ratio));\r\n\t\tmargin-right: var(--gap);\r\n\t\tcursor: pointer;\r\n\t\tborder-radius: var(--border-radius);\r\n\t\tbackground-repeat: no-repeat;\r\n\t\tbackground-position: top left;\r\n\t\tbackground-size: cover;\r\n\t}\r\n\r\n\t&-explanation {\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\r\n\t&-description {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\r\n\t\th3 {\r\n\t\t\tfont-weight: bold;\r\n\t\t\tmargin-bottom: 0;\r\n\t\t}\r\n\r\n\t\tlabel {\r\n\t\t\tpadding: 12px 0;\r\n\t\t}\r\n\t}\r\n\r\n\t&--default {\r\n\t\tgrid-column: span 2;\r\n\t}\r\n\r\n\t&-warning {\r\n\t\tcolor: var(--color-warning);\r\n\t}\r\n}\r\n\r\n@media (max-width: math.div(1024px, 1.5)) {\r\n\t.theming__preview {\r\n\t\tflex-direction: column;\r\n\r\n\t\t&-image {\r\n\t\t\tmargin: 0;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n"],sourceRoot:""}]),e.Z=a},1563:function(t,e,r){"use strict";var n=r(87537),o=r.n(n),i=r(23645),a=r.n(i)()(o());a.push([t.id,".user-app-menu-order[data-v-0b68cf15]{margin-block:12px}","",{version:3,sources:["webpack://./apps/theming/src/components/UserAppMenuSection.vue"],names:[],mappings:"AACA,sCACC,iBAAA",sourcesContent:["\r\n.user-app-menu-order {\r\n\tmargin-block: 12px;\r\n}\r\n"],sourceRoot:""}]),e.Z=a},89881:function(t,e,r){var n=r(47816),o=r(99291)(n);t.exports=o},80760:function(t,e,r){var n=r(89881);t.exports=function(t,e){var r=[];return n(t,(function(t,n,o){e(t,n,o)&&r.push(t)})),r}},47816:function(t,e,r){var n=r(28483),o=r(3674);t.exports=function(t,e){return t&&n(t,e,o)}},99291:function(t,e,r){var n=r(98612);t.exports=function(t,e){return function(r,o){if(null==r)return r;if(!n(r))return t(r,o);for(var i=r.length,a=e?i:-1,l=Object(r);(e?a--:++a<i)&&!1!==o(l[a],a,l););return r}}},91747:function(t,e,r){var n=r(5976),o=r(77813),i=r(16612),a=r(81704),l=Object.prototype,c=l.hasOwnProperty,u=n((function(t,e){t=Object(t);var r=-1,n=e.length,u=n>2?e[2]:void 0;for(u&&i(e[0],e[1],u)&&(n=1);++r<n;)for(var s=e[r],d=a(s),f=-1,h=d.length;++f<h;){var p=d[f],g=t[p];(void 0===g||o(g,l[p])&&!c.call(t,p))&&(t[p]=s[p])}return t}));t.exports=u},63105:function(t,e,r){var n=r(34963),o=r(80760),i=r(67206),a=r(1469);t.exports=function(t,e){return(a(t)?n:o)(t,i(e,3))}},1082:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},o=n(r(8110)),i=n(r(21904));o.default.DefaultOpts.ImageClass=i.default,t.exports=o.default},31564:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(r(8110)),i=r(66678),a=function(){function t(t,e){void 0===e&&(e={}),this._src=t,this._opts=e,this._opts.filters=i(o.default.DefaultOpts.filters)}return t.prototype.maxColorCount=function(t){return this._opts.colorCount=t,this},t.prototype.maxDimension=function(t){return this._opts.maxDimension=t,this},t.prototype.addFilter=function(t){return this._opts.filters.push(t),this},t.prototype.removeFilter=function(t){var e=this._opts.filters.indexOf(t);return e>0&&this._opts.filters.splice(e),this},t.prototype.clearFilters=function(){return this._opts.filters=[],this},t.prototype.quality=function(t){return this._opts.quality=t,this},t.prototype.useImageClass=function(t){return this._opts.ImageClass=t,this},t.prototype.useGenerator=function(t){return this._opts.generator=t,this},t.prototype.useQuantizer=function(t){return this._opts.quantizer=t,this},t.prototype.build=function(){return new o.default(this._src,this._opts)},t.prototype.getPalette=function(t){return this.build().getPalette(t)},t.prototype.getSwatches=function(t){return this.build().getPalette(t)},t}();e.default=a},97248:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Swatch=void 0;var n=r(67294),o=r(63105),i=function(){function t(t,e){this._rgb=t,this._population=e}return t.applyFilter=function(t,e){return"function"==typeof e?o(t,(function(t){var r=t.r,n=t.g,o=t.b;return e(r,n,o,255)})):t},Object.defineProperty(t.prototype,"r",{get:function(){return this._rgb[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"g",{get:function(){return this._rgb[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this._rgb[2]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rgb",{get:function(){return this._rgb},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hsl",{get:function(){if(!this._hsl){var t=this._rgb,e=t[0],r=t[1],o=t[2];this._hsl=n.rgbToHsl(e,r,o)}return this._hsl},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hex",{get:function(){if(!this._hex){var t=this._rgb,e=t[0],r=t[1],o=t[2];this._hex=n.rgbToHex(e,r,o)}return this._hex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"population",{get:function(){return this._population},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{rgb:this.rgb,population:this.population}},t.prototype.getRgb=function(){return this._rgb},t.prototype.getHsl=function(){return this.hsl},t.prototype.getPopulation=function(){return this._population},t.prototype.getHex=function(){return this.hex},t.prototype.getYiq=function(){if(!this._yiq){var t=this._rgb;this._yiq=(299*t[0]+587*t[1]+114*t[2])/1e3}return this._yiq},Object.defineProperty(t.prototype,"titleTextColor",{get:function(){return this._titleTextColor||(this._titleTextColor=this.getYiq()<200?"#fff":"#000"),this._titleTextColor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bodyTextColor",{get:function(){return this._bodyTextColor||(this._bodyTextColor=this.getYiq()<150?"#fff":"#000"),this._bodyTextColor},enumerable:!1,configurable:!0}),t.prototype.getTitleTextColor=function(){return this.titleTextColor},t.prototype.getBodyTextColor=function(){return this.bodyTextColor},t}();e.Swatch=i},68498:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r,n){return n>=125&&!(t>250&&e>250&&r>250)}},63096:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.combineFilters=void 0;var n=r(68498);Object.defineProperty(e,"Default",{enumerable:!0,get:function(){return n.default}}),e.combineFilters=function(t){return Array.isArray(t)&&0!==t.length?function(e,r,n,o){if(0===o)return!1;for(var i=0;i<t.length;i++)if(!t[i](e,r,n,o))return!1;return!0}:null}},73977:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(97248),o=r(67294),i=r(91747),a={targetDarkLuma:.26,maxDarkLuma:.45,minLightLuma:.55,targetLightLuma:.74,minNormalLuma:.3,targetNormalLuma:.5,maxNormalLuma:.7,targetMutesSaturation:.3,maxMutesSaturation:.4,targetVibrantSaturation:1,minVibrantSaturation:.35,weightSaturation:3,weightLuma:6.5,weightPopulation:.5};function l(t,e,r,n,o,i,a,l,c,u){var s=null,d=0;return e.forEach((function(e){var f=e.getHsl(),h=f[1],p=f[2];if(h>=l&&h<=c&&p>=o&&p<=i&&!function(t,e){return t.Vibrant===e||t.DarkVibrant===e||t.LightVibrant===e||t.Muted===e||t.DarkMuted===e||t.LightMuted===e}(t,e)){var g=function(t,e,r,n,o,i,a){function l(t,e){return 1-Math.abs(t-e)}return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0,n=0,o=0;o<t.length;o+=2){var i=t[o],a=t[o+1];r+=i*a,n+=a}return r/n}(l(t,e),a.weightSaturation,l(r,n),a.weightLuma,o/i,a.weightPopulation)}(h,a,p,n,e.getPopulation(),r,u);(null===s||g>d)&&(s=e,d=g)}})),s}e.default=function(t,e){e=i({},e,a);var r=function(t){var e=0;return t.forEach((function(t){e=Math.max(e,t.getPopulation())})),e}(t),c=function(t,e,r){var n={};return n.Vibrant=l(n,t,e,r.targetNormalLuma,r.minNormalLuma,r.maxNormalLuma,r.targetVibrantSaturation,r.minVibrantSaturation,1,r),n.LightVibrant=l(n,t,e,r.targetLightLuma,r.minLightLuma,1,r.targetVibrantSaturation,r.minVibrantSaturation,1,r),n.DarkVibrant=l(n,t,e,r.targetDarkLuma,0,r.maxDarkLuma,r.targetVibrantSaturation,r.minVibrantSaturation,1,r),n.Muted=l(n,t,e,r.targetNormalLuma,r.minNormalLuma,r.maxNormalLuma,r.targetMutesSaturation,0,r.maxMutesSaturation,r),n.LightMuted=l(n,t,e,r.targetLightLuma,r.minLightLuma,1,r.targetMutesSaturation,0,r.maxMutesSaturation,r),n.DarkMuted=l(n,t,e,r.targetDarkLuma,0,r.maxDarkLuma,r.targetMutesSaturation,0,r.maxMutesSaturation,r),n}(t,r,e);return function(t,e,r){if(null===t.Vibrant&&null===t.DarkVibrant&&null===t.LightVibrant){if(null===t.DarkVibrant&&null!==t.DarkMuted){var i=t.DarkMuted.getHsl(),a=i[0],l=i[1],c=i[2];c=r.targetDarkLuma,t.DarkVibrant=new n.Swatch(o.hslToRgb(a,l,c),0)}if(null===t.LightVibrant&&null!==t.LightMuted){var u=t.LightMuted.getHsl();a=u[0],l=u[1],c=u[2],c=r.targetDarkLuma,t.DarkVibrant=new n.Swatch(o.hslToRgb(a,l,c),0)}}if(null===t.Vibrant&&null!==t.DarkVibrant){var s=t.DarkVibrant.getHsl();a=s[0],l=s[1],c=s[2],c=r.targetNormalLuma,t.Vibrant=new n.Swatch(o.hslToRgb(a,l,c),0)}else if(null===t.Vibrant&&null!==t.LightVibrant){var d=t.LightVibrant.getHsl();a=d[0],l=d[1],c=d[2],c=r.targetNormalLuma,t.Vibrant=new n.Swatch(o.hslToRgb(a,l,c),0)}if(null===t.DarkVibrant&&null!==t.Vibrant){var f=t.Vibrant.getHsl();a=f[0],l=f[1],c=f[2],c=r.targetDarkLuma,t.DarkVibrant=new n.Swatch(o.hslToRgb(a,l,c),0)}if(null===t.LightVibrant&&null!==t.Vibrant){var h=t.Vibrant.getHsl();a=h[0],l=h[1],c=h[2],c=r.targetLightLuma,t.LightVibrant=new n.Swatch(o.hslToRgb(a,l,c),0)}if(null===t.Muted&&null!==t.Vibrant){var p=t.Vibrant.getHsl();a=p[0],l=p[1],c=p[2],c=r.targetMutesSaturation,t.Muted=new n.Swatch(o.hslToRgb(a,l,c),0)}if(null===t.DarkMuted&&null!==t.DarkVibrant){var g=t.DarkVibrant.getHsl();a=g[0],l=g[1],c=g[2],c=r.targetMutesSaturation,t.DarkMuted=new n.Swatch(o.hslToRgb(a,l,c),0)}if(null===t.LightMuted&&null!==t.LightVibrant){var v=t.LightVibrant.getHsl();a=v[0],l=v[1],c=v[2],c=r.targetMutesSaturation,t.LightMuted=new n.Swatch(o.hslToRgb(a,l,c),0)}}(c,0,e),c}},77234:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(73977);Object.defineProperty(e,"Default",{enumerable:!0,get:function(){return n.default}})},83614:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ImageBase=void 0;var r=function(){function t(){}return t.prototype.scaleDown=function(t){var e=this.getWidth(),r=this.getHeight(),n=1;if(t.maxDimension>0){var o=Math.max(e,r);o>t.maxDimension&&(n=t.maxDimension/o)}else n=1/t.quality;n<1&&this.resize(e*n,r*n,n)},t.prototype.applyFilter=function(t){var e=this.getImageData();if("function"==typeof t)for(var r=e.data,n=r.length/4,o=void 0,i=0;i<n;i++)t(r[0+(o=4*i)],r[o+1],r[o+2],r[o+3])||(r[o+3]=0);return Promise.resolve(e)},t}();e.ImageBase=r},21904:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),l=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&i(e,t,r);return a(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});var c=r(83614),u=l(r(8575)),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._initCanvas=function(){var t=this.image,e=this._canvas=document.createElement("canvas"),r=this._context=e.getContext("2d");e.className="vibrant-canvas",e.style.display="none",this._width=e.width=t.width,this._height=e.height=t.height,r.drawImage(t,0,0),document.body.appendChild(e)},e.prototype.load=function(t){var e,r,n,o,i,a,l=this,c=null,s=null;if("string"==typeof t)c=document.createElement("img"),i=t,null===(a=u.parse(i)).protocol&&null===a.host&&null===a.port||(e=window.location.href,r=t,n=u.parse(e),o=u.parse(r),n.protocol===o.protocol&&n.hostname===o.hostname&&n.port===o.port)||(c.crossOrigin="anonymous"),s=c.src=t;else{if(!(t instanceof HTMLImageElement))return Promise.reject(new Error("Cannot load buffer as an image in browser"));c=t,s=t.src}return this.image=c,new Promise((function(t,e){var r=function(){l._initCanvas(),t(l)};c.complete?r():(c.onload=r,c.onerror=function(t){return e(new Error("Fail to load image: "+s))})}))},e.prototype.clear=function(){this._context.clearRect(0,0,this._width,this._height)},e.prototype.update=function(t){this._context.putImageData(t,0,0)},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.resize=function(t,e,r){var n=this,o=n._canvas,i=n._context,a=n.image;this._width=o.width=t,this._height=o.height=e,i.scale(r,r),i.drawImage(a,0,0)},e.prototype.getPixelCount=function(){return this._width*this._height},e.prototype.getImageData=function(){return this._context.getImageData(0,0,this._width,this._height)},e.prototype.remove=function(){this._canvas&&this._canvas.parentNode&&this._canvas.parentNode.removeChild(this._canvas)},e}(c.ImageBase);e.default=s},14853:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebWorker=void 0;var n=r(20628);Object.defineProperty(e,"MMCQ",{enumerable:!0,get:function(){return n.default}}),e.WebWorker=null},20628:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(97248),i=n(r(5828)),a=n(r(37514));function l(t,e){for(var r=t.size();t.size()<e;){var n=t.pop();if(!(n&&n.count()>0))break;var o=n.split(),i=o[0],a=o[1];if(t.push(i),a&&a.count()>0&&t.push(a),t.size()===r)break;r=t.size()}}e.default=function(t,e){if(0===t.length||e.colorCount<2||e.colorCount>256)throw new Error("Wrong MMCQ parameters");var r=i.default.build(t),n=r.hist,c=(Object.keys(n).length,new a.default((function(t,e){return t.count()-e.count()})));c.push(r),l(c,.75*e.colorCount);var u=new a.default((function(t,e){return t.count()*t.volume()-e.count()*e.volume()}));return u.contents=c.contents,l(u,e.colorCount-u.size()),function(t){for(var e=[];t.size();){var r=t.pop(),n=r.avg();n[0],n[1],n[2],e.push(new o.Swatch(n,r.count()))}return e}(u)}},37514:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this._comparator=t,this.contents=[],this._sorted=!1}return t.prototype._sort=function(){this._sorted||(this.contents.sort(this._comparator),this._sorted=!0)},t.prototype.push=function(t){this.contents.push(t),this._sorted=!1},t.prototype.peek=function(t){return this._sort(),t="number"==typeof t?t:this.contents.length-1,this.contents[t]},t.prototype.pop=function(){return this._sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(t){return this._sort(),this.contents.map(t)},t}();e.default=r},5828:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(67294),o=function(){function t(t,e,r,n,o,i,a){this._volume=-1,this._count=-1,this.dimension={r1:t,r2:e,g1:r,g2:n,b1:o,b2:i},this.hist=a}return t.build=function(e,r){var o,i,a,l,c,u,s,d,f,h=1<<3*n.SIGBITS,p=new Uint32Array(h);o=a=c=0,i=l=u=Number.MAX_VALUE;for(var g=e.length/4,v=0;v<g;){var m=4*v;v++,s=e[m+0],d=e[m+1],f=e[m+2],0!==e[m+3]&&(s>>=n.RSHIFT,d>>=n.RSHIFT,f>>=n.RSHIFT,p[n.getColorIndex(s,d,f)]+=1,s>o&&(o=s),s<i&&(i=s),d>a&&(a=d),d<l&&(l=d),f>c&&(c=f),f<u&&(u=f))}return new t(i,o,l,a,u,c,p)},t.prototype.invalidate=function(){this._volume=this._count=-1,this._avg=null},t.prototype.volume=function(){if(this._volume<0){var t=this.dimension,e=t.r1,r=t.r2,n=t.g1,o=t.g2,i=t.b1,a=t.b2;this._volume=(r-e+1)*(o-n+1)*(a-i+1)}return this._volume},t.prototype.count=function(){if(this._count<0){for(var t=this.hist,e=this.dimension,r=e.r1,o=e.r2,i=e.g1,a=e.g2,l=e.b1,c=e.b2,u=0,s=r;s<=o;s++)for(var d=i;d<=a;d++)for(var f=l;f<=c;f++)u+=t[n.getColorIndex(s,d,f)];this._count=u}return this._count},t.prototype.clone=function(){var e=this.hist,r=this.dimension;return new t(r.r1,r.r2,r.g1,r.g2,r.b1,r.b2,e)},t.prototype.avg=function(){if(!this._avg){var t=this.hist,e=this.dimension,r=e.r1,o=e.r2,i=e.g1,a=e.g2,l=e.b1,c=e.b2,u=0,s=1<<8-n.SIGBITS,d=void 0,f=void 0,h=void 0;d=f=h=0;for(var p=r;p<=o;p++)for(var g=i;g<=a;g++)for(var v=l;v<=c;v++){var m=t[n.getColorIndex(p,g,v)];u+=m,d+=m*(p+.5)*s,f+=m*(g+.5)*s,h+=m*(v+.5)*s}this._avg=u?[~~(d/u),~~(f/u),~~(h/u)]:[~~(s*(r+o+1)/2),~~(s*(i+a+1)/2),~~(s*(l+c+1)/2)]}return this._avg},t.prototype.contains=function(t){var e=t[0],r=t[1],o=t[2],i=this.dimension,a=i.r1,l=i.r2,c=i.g1,u=i.g2,s=i.b1,d=i.b2;return e>>=n.RSHIFT,r>>=n.RSHIFT,o>>=n.RSHIFT,e>=a&&e<=l&&r>=c&&r<=u&&o>=s&&o<=d},t.prototype.split=function(){var t=this.hist,e=this.dimension,r=e.r1,o=e.r2,i=e.g1,a=e.g2,l=e.b1,c=e.b2,u=this.count();if(!u)return[];if(1===u)return[this.clone()];var s,d,f=o-r+1,h=a-i+1,p=c-l+1,g=Math.max(f,h,p),v=null;s=d=0;var m=null;if(g===f){m="r",v=new Uint32Array(o+1);for(var b=r;b<=o;b++){s=0;for(var y=i;y<=a;y++)for(var A=l;A<=c;A++)s+=t[n.getColorIndex(b,y,A)];d+=s,v[b]=d}}else if(g===h)for(m="g",v=new Uint32Array(a+1),y=i;y<=a;y++){for(s=0,b=r;b<=o;b++)for(A=l;A<=c;A++)s+=t[n.getColorIndex(b,y,A)];d+=s,v[y]=d}else for(m="b",v=new Uint32Array(c+1),A=l;A<=c;A++){for(s=0,b=r;b<=o;b++)for(y=i;y<=a;y++)s+=t[n.getColorIndex(b,y,A)];d+=s,v[A]=d}for(var w=-1,_=new Uint32Array(v.length),C=0;C<v.length;C++){var x=v[C];w<0&&x>d/2&&(w=C),_[C]=d-x}var k=this;return function(t){var e=t+"1",r=t+"2",n=k.dimension[e],o=k.dimension[r],i=k.clone(),a=k.clone(),l=w-n,c=o-w;for(l<=c?(o=Math.min(o-1,~~(w+c/2)),o=Math.max(0,o)):(o=Math.max(n,~~(w-1-l/2)),o=Math.min(k.dimension[r],o));!v[o];)o++;for(var u=_[o];!u&&v[o-1];)u=_[--o];return i.dimension[r]=o,a.dimension[e]=o+1,[i,a]}(m)},t}();e.default=o},67294:function(t,e){"use strict";function r(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return null===e?null:[e[1],e[2],e[3]].map((function(t){return parseInt(t,16)}))}function n(t,e,r){return e/=255,r/=255,t=(t/=255)>.04045?Math.pow((t+.005)/1.055,2.4):t/12.92,e=e>.04045?Math.pow((e+.005)/1.055,2.4):e/12.92,r=r>.04045?Math.pow((r+.005)/1.055,2.4):r/12.92,[.4124*(t*=100)+.3576*(e*=100)+.1805*(r*=100),.2126*t+.7152*e+.0722*r,.0193*t+.1192*e+.9505*r]}function o(t,e,r){return e/=100,r/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(e=e>.008856?Math.pow(e,1/3):7.787*e+16/116)-16,500*(t-e),200*(e-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]}function i(t,e,r){var i=n(t,e,r);return o(i[0],i[1],i[2])}function a(t,e){var r=t[0],n=t[1],o=t[2],i=e[0],a=e[1],l=e[2],c=r-i,u=n-a,s=o-l,d=Math.sqrt(n*n+o*o),f=i-r,h=Math.sqrt(a*a+l*l)-d,p=Math.sqrt(c*c+u*u+s*s),g=Math.sqrt(p)>Math.sqrt(Math.abs(f))+Math.sqrt(Math.abs(h))?Math.sqrt(p*p-f*f-h*h):0;return f/=1,h/=1*(1+.045*d),g/=1*(1+.015*d),Math.sqrt(f*f+h*h+g*g)}function l(t,e){return a(i.apply(void 0,t),i.apply(void 0,e))}Object.defineProperty(e,"__esModule",{value:!0}),e.getColorIndex=e.getColorDiffStatus=e.hexDiff=e.rgbDiff=e.deltaE94=e.rgbToCIELab=e.xyzToCIELab=e.rgbToXyz=e.hslToRgb=e.rgbToHsl=e.rgbToHex=e.hexToRgb=e.defer=e.RSHIFT=e.SIGBITS=e.DELTAE94_DIFF_STATUS=void 0,e.DELTAE94_DIFF_STATUS={NA:0,PERFECT:1,CLOSE:2,GOOD:10,SIMILAR:50},e.SIGBITS=5,e.RSHIFT=8-e.SIGBITS,e.defer=function(){var t,e,r=new Promise((function(r,n){t=r,e=n}));return{resolve:t,reject:e,promise:r}},e.hexToRgb=r,e.rgbToHex=function(t,e,r){return"#"+((1<<24)+(t<<16)+(e<<8)+r).toString(16).slice(1,7)},e.rgbToHsl=function(t,e,r){t/=255,e/=255,r/=255;var n,o,i=Math.max(t,e,r),a=Math.min(t,e,r),l=(i+a)/2;if(i===a)n=o=0;else{var c=i-a;switch(o=l>.5?c/(2-i-a):c/(i+a),i){case t:n=(e-r)/c+(e<r?6:0);break;case e:n=(r-t)/c+2;break;case r:n=(t-e)/c+4}n/=6}return[n,o,l]},e.hslToRgb=function(t,e,r){var n,o,i;function a(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}if(0===e)n=o=i=r;else{var l=r<.5?r*(1+e):r+e-r*e,c=2*r-l;n=a(c,l,t+1/3),o=a(c,l,t),i=a(c,l,t-1/3)}return[255*n,255*o,255*i]},e.rgbToXyz=n,e.xyzToCIELab=o,e.rgbToCIELab=i,e.deltaE94=a,e.rgbDiff=l,e.hexDiff=function(t,e){return l(r(t),r(e))},e.getColorDiffStatus=function(t){return t<e.DELTAE94_DIFF_STATUS.NA?"N/A":t<=e.DELTAE94_DIFF_STATUS.PERFECT?"Perfect":t<=e.DELTAE94_DIFF_STATUS.CLOSE?"Close":t<=e.DELTAE94_DIFF_STATUS.GOOD?"Good":t<e.DELTAE94_DIFF_STATUS.SIMILAR?"Similar":"Wrong"},e.getColorIndex=function(t,r,n){return(t<<2*e.SIGBITS)+(r<<e.SIGBITS)+n}},8110:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=r(97248),c=a(r(31564)),u=i(r(67294)),s=i(r(14853)),d=i(r(77234)),f=i(r(63096)),h=r(91747),p=function(){function t(e,r){this._src=e,this.opts=h({},r,t.DefaultOpts),this.opts.combinedFilter=f.combineFilters(this.opts.filters)}return t.from=function(t){return new c.default(t)},t.prototype._process=function(t,e){var r=e.quantizer,n=e.generator;return t.scaleDown(e),t.applyFilter(e.combinedFilter).then((function(t){return r(t.data,e)})).then((function(t){return l.Swatch.applyFilter(t,e.combinedFilter)})).then((function(t){return Promise.resolve(n(t))}))},t.prototype.palette=function(){return this.swatches()},t.prototype.swatches=function(){return this._palette},t.prototype.getPalette=function(t){var e=this,r=new this.opts.ImageClass,n=r.load(this._src).then((function(t){return e._process(t,e.opts)})).then((function(t){return e._palette=t,r.remove(),t}),(function(t){throw r.remove(),t}));return t&&n.then((function(e){return t(null,e)}),(function(e){return t(e)})),n},t.Builder=c.default,t.Quantizer=s,t.Generator=d,t.Filter=f,t.Util=u,t.Swatch=l.Swatch,t.DefaultOpts={colorCount:64,quality:5,generator:d.Default,ImageClass:null,quantizer:s.MMCQ,filters:[f.Default]},t}();e.default=p},24654:function(){}},i={};function a(t){var e=i[t];if(void 0!==e)return e.exports;var r=i[t]={id:t,loaded:!1,exports:{}};return o[t].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=o,e=[],a.O=function(t,r,n,o){if(!r){var i=1/0;for(s=0;s<e.length;s++){r=e[s][0],n=e[s][1],o=e[s][2];for(var l=!0,c=0;c<r.length;c++)(!1&o||i>=o)&&Object.keys(a.O).every((function(t){return a.O[t](r[c])}))?r.splice(c--,1):(l=!1,o<i&&(i=o));if(l){e.splice(s--,1);var u=n();void 0!==u&&(t=u)}}return t}o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[r,n,o]},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,{a:e}),e},a.d=function(t,e){for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,r){return a.f[r](t,e),e}),[]))},a.u=function(t){return t+"-"+t+".js?v="+{2250:"34f75a254de23027f023",7608:"79fdfed407dde075e048"}[t]},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r={},n="nextcloud:",a.l=function(t,e,o,i){if(r[t])r[t].push(e);else{var l,c;if(void 0!==o)for(var u=document.getElementsByTagName("script"),s=0;s<u.length;s++){var d=u[s];if(d.getAttribute("src")==t||d.getAttribute("data-webpack")==n+o){l=d;break}}l||(c=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.setAttribute("data-webpack",n+o),l.src=t),r[t]=[e];var f=function(e,n){l.onerror=l.onload=null,clearTimeout(h);var o=r[t];if(delete r[t],l.parentNode&&l.parentNode.removeChild(l),o&&o.forEach((function(t){return t(n)})),e)return e(n)},h=setTimeout(f.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=f.bind(null,l.onerror),l.onload=f.bind(null,l.onload),c&&document.head.appendChild(l)}},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},a.j=1474,function(){var t;a.g.importScripts&&(t=a.g.location+"");var e=a.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&!t;)t=r[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=t}(),function(){a.b=document.baseURI||self.location.href;var t={1474:0};a.f.j=function(e,r){var n=a.o(t,e)?t[e]:void 0;if(0!==n)if(n)r.push(n[2]);else{var o=new Promise((function(r,o){n=t[e]=[r,o]}));r.push(n[2]=o);var i=a.p+a.u(e),l=new Error;a.l(i,(function(r){if(a.o(t,e)&&(0!==(n=t[e])&&(t[e]=void 0),n)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",l.name="ChunkLoadError",l.type=o,l.request=i,n[1](l)}}),"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,r){var n,o,i=r[0],l=r[1],c=r[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(n in l)a.o(l,n)&&(a.m[n]=l[n]);if(c)var s=c(a)}for(e&&e(r);u<i.length;u++)o=i[u],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(s)},r=self.webpackChunknextcloud=self.webpackChunknextcloud||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}(),a.nc=void 0;var l=a.O(void 0,[7874],(function(){return a(65323)}));l=a.O(l)}();
//# sourceMappingURL=theming-personal-theming.js.map?v=5c5d75385bd1cf806a2f